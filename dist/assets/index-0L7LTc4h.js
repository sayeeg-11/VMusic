(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function JC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qg={exports:{}},Iu={};var p_;function e4(){if(p_)return Iu;p_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var h in a)h!=="key"&&(c[h]=a[h])}else c=a;return a=c.ref,{$$typeof:t,type:s,key:u,ref:a!==void 0?a:null,props:c}}return Iu.Fragment=e,Iu.jsx=n,Iu.jsxs=n,Iu}var g_;function t4(){return g_||(g_=1,Qg.exports=e4()),Qg.exports}var o=t4(),Wg={exports:{}},Le={};var y_;function n4(){if(y_)return Le;y_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function N(q){return q===null||typeof q!="object"?null:(q=w&&q[w]||q["@@iterator"],typeof q=="function"?q:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function P(q,ae,me){this.props=q,this.context=ae,this.refs=k,this.updater=me||A}P.prototype.isReactComponent={},P.prototype.setState=function(q,ae){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ae,"setState")},P.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function U(){}U.prototype=P.prototype;function O(q,ae,me){this.props=q,this.context=ae,this.refs=k,this.updater=me||A}var F=O.prototype=new U;F.constructor=O,S(F,P.prototype),F.isPureReactComponent=!0;var Z=Array.isArray;function ee(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function j(q,ae,me){var ge=me.ref;return{$$typeof:t,type:q,key:ae,ref:ge!==void 0?ge:null,props:me}}function M(q,ae){return j(q.type,ae,q.props)}function z(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function B(q){var ae={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(me){return ae[me]})}var V=/\/+/g;function Ie(q,ae){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):ae.toString(36)}function J(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ee,ee):(q.status="pending",q.then(function(ae){q.status==="pending"&&(q.status="fulfilled",q.value=ae)},function(ae){q.status==="pending"&&(q.status="rejected",q.reason=ae)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ae,me,ge,ke){var ce=typeof q;(ce==="undefined"||ce==="boolean")&&(q=null);var _e=!1;if(q===null)_e=!0;else switch(ce){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(q.$$typeof){case t:case e:_e=!0;break;case x:return _e=q._init,Y(_e(q._payload),ae,me,ge,ke)}}if(_e)return ke=ke(q),_e=ge===""?"."+Ie(q,0):ge,Z(ke)?(me="",_e!=null&&(me=_e.replace(V,"$&/")+"/"),Y(ke,ae,me,"",function(lt){return lt})):ke!=null&&(z(ke)&&(ke=M(ke,me+(ke.key==null||q&&q.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+_e)),ae.push(ke)),1;_e=0;var Ye=ge===""?".":ge+":";if(Z(q))for(var Be=0;Be<q.length;Be++)ge=q[Be],ce=Ye+Ie(ge,Be),_e+=Y(ge,ae,me,ce,ke);else if(Be=N(q),typeof Be=="function")for(q=Be.call(q),Be=0;!(ge=q.next()).done;)ge=ge.value,ce=Ye+Ie(ge,Be++),_e+=Y(ge,ae,me,ce,ke);else if(ce==="object"){if(typeof q.then=="function")return Y(J(q),ae,me,ge,ke);throw ae=String(q),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return _e}function se(q,ae,me){if(q==null)return q;var ge=[],ke=0;return Y(q,ge,"","",function(ce){return ae.call(me,ce,ke++)}),ge}function fe(q){if(q._status===-1){var ae=q._result;ae=ae(),ae.then(function(me){(q._status===0||q._status===-1)&&(q._status=1,q._result=me)},function(me){(q._status===0||q._status===-1)&&(q._status=2,q._result=me)}),q._status===-1&&(q._status=0,q._result=ae)}if(q._status===1)return q._result.default;throw q._result}var be=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ve={map:se,forEach:function(q,ae,me){se(q,function(){ae.apply(this,arguments)},me)},count:function(q){var ae=0;return se(q,function(){ae++}),ae},toArray:function(q){return se(q,function(ae){return ae})||[]},only:function(q){if(!z(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Le.Activity=v,Le.Children=Ve,Le.Component=P,Le.Fragment=n,Le.Profiler=a,Le.PureComponent=O,Le.StrictMode=s,Le.Suspense=m,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Le.__COMPILER_RUNTIME={__proto__:null,c:function(q){return C.H.useMemoCache(q)}},Le.cache=function(q){return function(){return q.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(q,ae,me){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ge=S({},q.props),ke=q.key;if(ae!=null)for(ce in ae.key!==void 0&&(ke=""+ae.key),ae)!I.call(ae,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ae.ref===void 0||(ge[ce]=ae[ce]);var ce=arguments.length-2;if(ce===1)ge.children=me;else if(1<ce){for(var _e=Array(ce),Ye=0;Ye<ce;Ye++)_e[Ye]=arguments[Ye+2];ge.children=_e}return j(q.type,ke,ge)},Le.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:c,_context:q},q},Le.createElement=function(q,ae,me){var ge,ke={},ce=null;if(ae!=null)for(ge in ae.key!==void 0&&(ce=""+ae.key),ae)I.call(ae,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ke[ge]=ae[ge]);var _e=arguments.length-2;if(_e===1)ke.children=me;else if(1<_e){for(var Ye=Array(_e),Be=0;Be<_e;Be++)Ye[Be]=arguments[Be+2];ke.children=Ye}if(q&&q.defaultProps)for(ge in _e=q.defaultProps,_e)ke[ge]===void 0&&(ke[ge]=_e[ge]);return j(q,ce,ke)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(q){return{$$typeof:h,render:q}},Le.isValidElement=z,Le.lazy=function(q){return{$$typeof:x,_payload:{_status:-1,_result:q},_init:fe}},Le.memo=function(q,ae){return{$$typeof:p,type:q,compare:ae===void 0?null:ae}},Le.startTransition=function(q){var ae=C.T,me={};C.T=me;try{var ge=q(),ke=C.S;ke!==null&&ke(me,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ee,be)}catch(ce){be(ce)}finally{ae!==null&&me.types!==null&&(ae.types=me.types),C.T=ae}},Le.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Le.use=function(q){return C.H.use(q)},Le.useActionState=function(q,ae,me){return C.H.useActionState(q,ae,me)},Le.useCallback=function(q,ae){return C.H.useCallback(q,ae)},Le.useContext=function(q){return C.H.useContext(q)},Le.useDebugValue=function(){},Le.useDeferredValue=function(q,ae){return C.H.useDeferredValue(q,ae)},Le.useEffect=function(q,ae){return C.H.useEffect(q,ae)},Le.useEffectEvent=function(q){return C.H.useEffectEvent(q)},Le.useId=function(){return C.H.useId()},Le.useImperativeHandle=function(q,ae,me){return C.H.useImperativeHandle(q,ae,me)},Le.useInsertionEffect=function(q,ae){return C.H.useInsertionEffect(q,ae)},Le.useLayoutEffect=function(q,ae){return C.H.useLayoutEffect(q,ae)},Le.useMemo=function(q,ae){return C.H.useMemo(q,ae)},Le.useOptimistic=function(q,ae){return C.H.useOptimistic(q,ae)},Le.useReducer=function(q,ae,me){return C.H.useReducer(q,ae,me)},Le.useRef=function(q){return C.H.useRef(q)},Le.useState=function(q){return C.H.useState(q)},Le.useSyncExternalStore=function(q,ae,me){return C.H.useSyncExternalStore(q,ae,me)},Le.useTransition=function(){return C.H.useTransition()},Le.version="19.2.0",Le}var x_;function Hy(){return x_||(x_=1,Wg.exports=n4()),Wg.exports}var E=Hy();const s4=JC(E);var Xg={exports:{}},Cu={},Jg={exports:{}},e0={};var v_;function i4(){return v_||(v_=1,(function(t){function e(Y,se){var fe=Y.length;Y.push(se);e:for(;0<fe;){var be=fe-1>>>1,Ve=Y[be];if(0<a(Ve,se))Y[be]=se,Y[fe]=Ve,fe=be;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var se=Y[0],fe=Y.pop();if(fe!==se){Y[0]=fe;e:for(var be=0,Ve=Y.length,q=Ve>>>1;be<q;){var ae=2*(be+1)-1,me=Y[ae],ge=ae+1,ke=Y[ge];if(0>a(me,fe))ge<Ve&&0>a(ke,me)?(Y[be]=ke,Y[ge]=fe,be=ge):(Y[be]=me,Y[ae]=fe,be=ae);else if(ge<Ve&&0>a(ke,fe))Y[be]=ke,Y[ge]=fe,be=ge;else break e}}return se}function a(Y,se){var fe=Y.sortIndex-se.sortIndex;return fe!==0?fe:Y.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],p=[],x=1,v=null,w=3,N=!1,A=!1,S=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function F(Y){for(var se=n(p);se!==null;){if(se.callback===null)s(p);else if(se.startTime<=Y)s(p),se.sortIndex=se.expirationTime,e(m,se);else break;se=n(p)}}function Z(Y){if(S=!1,F(Y),!A)if(n(m)!==null)A=!0,ee||(ee=!0,B());else{var se=n(p);se!==null&&J(Z,se.startTime-Y)}}var ee=!1,C=-1,I=5,j=-1;function M(){return k?!0:!(t.unstable_now()-j<I)}function z(){if(k=!1,ee){var Y=t.unstable_now();j=Y;var se=!0;try{e:{A=!1,S&&(S=!1,U(C),C=-1),N=!0;var fe=w;try{t:{for(F(Y),v=n(m);v!==null&&!(v.expirationTime>Y&&M());){var be=v.callback;if(typeof be=="function"){v.callback=null,w=v.priorityLevel;var Ve=be(v.expirationTime<=Y);if(Y=t.unstable_now(),typeof Ve=="function"){v.callback=Ve,F(Y),se=!0;break t}v===n(m)&&s(m),F(Y)}else s(m);v=n(m)}if(v!==null)se=!0;else{var q=n(p);q!==null&&J(Z,q.startTime-Y),se=!1}}break e}finally{v=null,w=fe,N=!1}se=void 0}}finally{se?B():ee=!1}}}var B;if(typeof O=="function")B=function(){O(z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ie=V.port2;V.port1.onmessage=z,B=function(){Ie.postMessage(null)}}else B=function(){P(z,0)};function J(Y,se){C=P(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var se=3;break;default:se=w}var fe=w;w=se;try{return Y()}finally{w=fe}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var fe=w;w=Y;try{return se()}finally{w=fe}},t.unstable_scheduleCallback=function(Y,se,fe){var be=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?be+fe:be):fe=be,Y){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=fe+Ve,Y={id:x++,callback:se,priorityLevel:Y,startTime:fe,expirationTime:Ve,sortIndex:-1},fe>be?(Y.sortIndex=fe,e(p,Y),n(m)===null&&Y===n(p)&&(S?(U(C),C=-1):S=!0,J(Z,fe-be))):(Y.sortIndex=Ve,e(m,Y),A||N||(A=!0,ee||(ee=!0,B()))),Y},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(Y){var se=w;return function(){var fe=w;w=se;try{return Y.apply(this,arguments)}finally{w=fe}}}})(e0)),e0}var b_;function r4(){return b_||(b_=1,Jg.exports=i4()),Jg.exports}var t0={exports:{}},Vn={};var w_;function a4(){if(w_)return Vn;w_=1;var t=Hy();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,p,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:x}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vn.createPortal=function(m,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(m,p,null,x)},Vn.flushSync=function(m){var p=u.T,x=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=x,s.d.f()}},Vn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Vn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Vn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var x=p.as,v=h(x,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:N}):x==="script"&&s.d.X(m,{crossOrigin:v,integrity:w,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Vn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=h(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Vn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,v=h(x,p.crossOrigin);s.d.L(m,x,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Vn.preloadModule=function(m,p){if(typeof m=="string")if(p){var x=h(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Vn.requestFormReset=function(m){s.d.r(m)},Vn.unstable_batchedUpdates=function(m,p){return m(p)},Vn.useFormState=function(m,p,x){return u.H.useFormState(m,p,x)},Vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var __;function o4(){if(__)return t0.exports;__=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),t0.exports=a4(),t0.exports}var T_;function l4(){if(T_)return Cu;T_=1;var t=r4(),e=Hy(),n=o4();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function u(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(c(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=c(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,d=r;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return m(g),i;if(y===d)return m(g),r;y=y.sibling}throw Error(s(188))}if(l.return!==d.return)l=g,d=y;else{for(var _=!1,R=g.child;R;){if(R===l){_=!0,l=g,d=y;break}if(R===d){_=!0,d=g,l=y;break}R=R.sibling}if(!_){for(R=y.child;R;){if(R===l){_=!0,l=y,d=g;break}if(R===d){_=!0,d=y,l=g;break}R=R.sibling}if(!_)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function x(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=x(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Ie(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case P:return"Profiler";case k:return"StrictMode";case Z:return"Suspense";case ee:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case O:return i.displayName||"Context";case U:return(i._context.displayName||"Context")+".Consumer";case F:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return r=i.displayName||null,r!==null?r:Ie(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return Ie(i(r))}catch{}}return null}var J=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},be=[],Ve=-1;function q(i){return{current:i}}function ae(i){0>Ve||(i.current=be[Ve],be[Ve]=null,Ve--)}function me(i,r){Ve++,be[Ve]=i.current,i.current=r}var ge=q(null),ke=q(null),ce=q(null),_e=q(null);function Ye(i,r){switch(me(ce,r),me(ke,i),me(ge,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?L1(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=L1(r),i=U1(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ge),me(ge,i)}function Be(){ae(ge),ae(ke),ae(ce)}function lt(i){i.memoizedState!==null&&me(_e,i);var r=ge.current,l=U1(r,i.type);r!==l&&(me(ke,i),me(ge,l))}function Jt(i){ke.current===i&&(ae(ge),ae(ke)),_e.current===i&&(ae(_e),ju._currentValue=fe)}var wi,Mn;function Qn(i){if(wi===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);wi=r&&r[1]||"",Mn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wi+i+Mn}var Wn=!1;function or(i,r){if(!i||Wn)return"";Wn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ne){var X=ne}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(ne){X=ne}i.call(oe.prototype)}}else{try{throw Error()}catch(ne){X=ne}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ne){if(ne&&X&&typeof ne.stack=="string")return[ne.stack,X.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),_=y[0],R=y[1];if(_&&R){var H=_.split(`
`),W=R.split(`
`);for(g=d=0;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;for(;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;if(d===H.length||g===W.length)for(d=H.length-1,g=W.length-1;1<=d&&0<=g&&H[d]!==W[g];)g--;for(;1<=d&&0<=g;d--,g--)if(H[d]!==W[g]){if(d!==1||g!==1)do if(d--,g--,0>g||H[d]!==W[g]){var ie=`
`+H[d].replace(" at new "," at ");return i.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",i.displayName)),ie}while(1<=d&&0<=g);break}}}finally{Wn=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?Qn(l):""}function Pe(i,r){switch(i.tag){case 26:case 27:case 5:return Qn(i.type);case 16:return Qn("Lazy");case 13:return i.child!==r&&r!==null?Qn("Suspense Fallback"):Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 15:return or(i.type,!1);case 11:return or(i.type.render,!1);case 1:return or(i.type,!0);case 31:return Qn("Activity");default:return""}}function _i(i){try{var r="",l=null;do r+=Pe(i,l),l=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Pt=Object.prototype.hasOwnProperty,en=t.unstable_scheduleCallback,Ot=t.unstable_cancelCallback,Rc=t.unstable_shouldYield,qr=t.unstable_requestPaint,Tn=t.unstable_now,Ti=t.unstable_getCurrentPriorityLevel,$r=t.unstable_ImmediatePriority,Wa=t.unstable_UserBlockingPriority,ms=t.unstable_NormalPriority,Xo=t.unstable_LowPriority,Jo=t.unstable_IdlePriority,el=t.log,tl=t.unstable_setDisableYieldValue,ps=null,fn=null;function Xn(i){if(typeof el=="function"&&tl(i),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(ps,i)}catch{}}var Dt=Math.clz32?Math.clz32:Xa,Gr=Math.log,Ds=Math.LN2;function Xa(i){return i>>>=0,i===0?32:31-(Gr(i)/Ds|0)|0}var gs=256,Ni=262144,Lt=4194304;function Jn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ys(i,r,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,y=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var R=d&134217727;return R!==0?(d=R&~y,d!==0?g=Jn(d):(_&=R,_!==0?g=Jn(_):l||(l=R&~i,l!==0&&(g=Jn(l))))):(R=d&~y,R!==0?g=Jn(R):_!==0?g=Jn(_):l||(l=d&~i,l!==0&&(g=Jn(l)))),g===0?0:r!==0&&r!==g&&(r&y)===0&&(y=g&-g,l=r&-r,y>=l||y===32&&(l&4194048)!==0)?r:g}function ue(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function xe(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var i=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),i}function Ee(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function et(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ze(i,r,l,d,g,y){var _=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,H=i.expirationTimes,W=i.hiddenUpdates;for(l=_&~l;0<l;){var ie=31-Dt(l),oe=1<<ie;R[ie]=0,H[ie]=-1;var X=W[ie];if(X!==null)for(W[ie]=null,ie=0;ie<X.length;ie++){var ne=X[ie];ne!==null&&(ne.lane&=-536870913)}l&=~oe}d!==0&&jt(i,d,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(_&~r))}function jt(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Dt(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|l&261930}function si(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var d=31-Dt(l),g=1<<d;g&r|i[d]&r&&(i[d]|=r),l&=~g}}function Ei(i,r){var l=r&-r;return l=(l&42)!==0?1:lr(l),(l&(i.suspendedLanes|r))!==0?0:l}function lr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function xs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gn(){var i=se.p;return i!==0?i:(i=window.event,i===void 0?32:l_(i.type))}function vs(i,r){var l=se.p;try{return se.p=i,r()}finally{se.p=l}}var es=Math.random().toString(36).slice(2),Ut="__reactFiber$"+es,yn="__reactProps$"+es,ji="__reactContainer$"+es,nl="__reactEvents$"+es,np="__reactListeners$"+es,Ld="__reactHandles$"+es,Ud="__reactResources$"+es,Si="__reactMarker$"+es;function sl(i){delete i[Ut],delete i[yn],delete i[nl],delete i[np],delete i[Ld]}function Ai(i){var r=i[Ut];if(r)return r;for(var l=i.parentNode;l;){if(r=l[ji]||l[Ut]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=G1(i);i!==null;){if(l=i[Ut])return l;i=G1(i)}return r}i=l,l=i.parentNode}return null}function Ms(i){if(i=i[Ut]||i[ji]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function bs(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function ki(i){var r=i[Ud];return r||(r=i[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function tn(i){i[Si]=!0}var Pc=new Set,Dc={};function Ii(i,r){Ci(i,r),Ci(i+"Capture",r)}function Ci(i,r){for(Dc[i]=r,i=0;i<r.length;i++)Pc.add(r[i])}var Mc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vc={},Oc={};function zd(i){return Pt.call(Oc,i)?!0:Pt.call(Vc,i)?!1:Mc.test(i)?Oc[i]=!0:(Vc[i]=!0,!1)}function il(i,r,l){if(zd(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function ws(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function nn(i,r,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+d)}}function xn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Yr(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Lc(i,r,l){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(_){l=""+_,y.call(this,_)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function dt(i){if(!i._valueTracker){var r=Yr(i)?"checked":"value";i._valueTracker=Lc(i,r,""+i[r])}}function Ja(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return i&&(d=Yr(i)?i.checked?"true":"false":i.value),i=d,i!==l?(r.setValue(i),!0):!1}function Ri(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var eo=/[\n"\\]/g;function ts(i){return i.replace(eo,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function rl(i,r,l,d,g,y,_,R){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+xn(r)):i.value!==""+xn(r)&&(i.value=""+xn(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?Uc(i,_,xn(r)):l!=null?Uc(i,_,xn(l)):d!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+xn(R):i.removeAttribute("name")}function Bd(i,r,l,d,g,y,_,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),r!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||r!=null)){dt(i);return}l=l!=null?""+xn(l):"",r=r!=null?""+xn(r):l,R||r===i.value||(i.value=r),i.defaultValue=r}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=R?i.checked:!!d,i.defaultChecked=!!d,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),dt(i)}function Uc(i,r,l){r==="number"&&Ri(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Zr(i,r,l,d){if(i=i.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=r.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+xn(l),r=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Fd(i,r,l){if(r!=null&&(r=""+xn(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+xn(l):""}function Kr(i,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(s(92));if(J(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=xn(r),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d),dt(i)}function ns(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var Hd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(i,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,l):typeof l!="number"||l===0||Hd.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Bc(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in r)d=r[g],r.hasOwnProperty(g)&&l[g]!==d&&zc(i,g,d)}else for(var y in r)r.hasOwnProperty(y)&&zc(i,y,r[y])}function al(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ol(i){return Qr.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ii(){}var Fc=null;function Vs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wr=null,Pi=null;function to(i){var r=Ms(i);if(r&&(i=r.stateNode)){var l=i[yn]||null;e:switch(i=r.stateNode,r.type){case"input":if(rl(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ts(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==i&&d.form===i.form){var g=d[yn]||null;if(!g)throw Error(s(90));rl(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===i.form&&Ja(d)}break e;case"textarea":Fd(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Zr(i,!!l.multiple,r,!1)}}}var ll=!1;function Xr(i,r,l){if(ll)return i(r,l);ll=!0;try{var d=i(r);return d}finally{if(ll=!1,(Wr!==null||Pi!==null)&&(Oh(),Wr&&(r=Wr,i=Pi,Pi=Wr=null,to(r),i)))for(r=0;r<i.length;r++)to(i[r])}}function ri(i,r){var l=i.stateNode;if(l===null)return null;var d=l[yn]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(Os)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){no=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{no=!1}var Di=null,Hc=null,so=null;function qc(){if(so)return so;var i,r=Hc,l=r.length,d,g="value"in Di?Di.value:Di.textContent,y=g.length;for(i=0;i<l&&r[i]===g[i];i++);var _=l-i;for(d=1;d<=_&&r[l-d]===g[y-d];d++);return so=g.slice(i,1<d?1-d:void 0)}function io(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function cr(){return!0}function ai(){return!1}function Nn(i){function r(l,d,g,y,_){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?cr:ai,this.isPropagationStopped=ai,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),r}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Nn(ur),Jr=v({},ur,{view:0,detail:0}),$c=Nn(Jr),ea,cl,Vi,ul=v({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vi&&(Vi&&i.type==="mousemove"?(ea=i.screenX-Vi.screenX,cl=i.screenY-Vi.screenY):cl=ea=0,Vi=i),ea)},movementY:function(i){return"movementY"in i?i.movementY:cl}}),Gc=Nn(ul),ro=v({},ul,{dataTransfer:0}),$d=Nn(ro),Gd=v({},Jr,{relatedTarget:0}),ao=Nn(Gd),Yc=v({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Yd=Nn(Yc),dl=v({},ur,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Zd=Nn(dl),Kd=v({},ur,{data:0}),Oi=Nn(Kd),Qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jd(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Xd[i])?!!r[i]:!1}function ta(){return Jd}var Hn=v({},Jr,{key:function(i){if(i.key){var r=Qd[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(i){return i.type==="keypress"?io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),eh=Nn(Hn),th=v({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dr=Nn(th),f=v({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),b=Nn(f),T=v({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=Nn(T),K=v({},ul,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Nn(K),he=v({},ur,{newState:0,oldState:0}),Fe=Nn(he),Yt=[9,13,27,32],at=Os&&"CompositionEvent"in window,St=null;Os&&"documentMode"in document&&(St=document.documentMode);var Ls=Os&&"TextEvent"in window&&!St,Li=Os&&(!at||St&&8<St&&11>=St),oi=" ",li=!1;function oo(i,r){switch(i){case"keyup":return Yt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fl=!1;function TI(i,r){switch(i){case"compositionend":return hl(r);case"keypress":return r.which!==32?null:(li=!0,oi);case"textInput":return i=r.data,i===oi&&li?null:i;default:return null}}function NI(i,r){if(fl)return i==="compositionend"||!at&&oo(i,r)?(i=qc(),so=Hc=Di=null,fl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Li&&r.locale!=="ko"?null:r.data;default:return null}}var EI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kv(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!EI[i.type]:r==="textarea"}function Qv(i,r,l,d){Wr?Pi?Pi.push(d):Pi=[d]:Wr=d,r=qh(r,"onChange"),0<r.length&&(l=new Mi("onChange","change",null,l,d),i.push({event:l,listeners:r}))}var Zc=null,Kc=null;function jI(i){R1(i,0)}function nh(i){var r=bs(i);if(Ja(r))return i}function Wv(i,r){if(i==="change")return r}var Xv=!1;if(Os){var sp;if(Os){var ip="oninput"in document;if(!ip){var Jv=document.createElement("div");Jv.setAttribute("oninput","return;"),ip=typeof Jv.oninput=="function"}sp=ip}else sp=!1;Xv=sp&&(!document.documentMode||9<document.documentMode)}function eb(){Zc&&(Zc.detachEvent("onpropertychange",tb),Kc=Zc=null)}function tb(i){if(i.propertyName==="value"&&nh(Kc)){var r=[];Qv(r,Kc,i,Vs(i)),Xr(jI,r)}}function SI(i,r,l){i==="focusin"?(eb(),Zc=r,Kc=l,Zc.attachEvent("onpropertychange",tb)):i==="focusout"&&eb()}function AI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nh(Kc)}function kI(i,r){if(i==="click")return nh(r)}function II(i,r){if(i==="input"||i==="change")return nh(r)}function CI(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var _s=typeof Object.is=="function"?Object.is:CI;function Qc(i,r){if(_s(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!Pt.call(r,g)||!_s(i[g],r[g]))return!1}return!0}function nb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sb(i,r){var l=nb(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=r&&d>=r)return{node:l,offset:r-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=nb(l)}}function ib(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ib(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function rb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ri(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Ri(i.document)}return r}function rp(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var RI=Os&&"documentMode"in document&&11>=document.documentMode,ml=null,ap=null,Wc=null,op=!1;function ab(i,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;op||ml==null||ml!==Ri(d)||(d=ml,"selectionStart"in d&&rp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Wc&&Qc(Wc,d)||(Wc=d,d=qh(ap,"onSelect"),0<d.length&&(r=new Mi("onSelect","select",null,r,l),i.push({event:r,listeners:d}),r.target=ml)))}function lo(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var pl={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},lp={},ob={};Os&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function co(i){if(lp[i])return lp[i];if(!pl[i])return i;var r=pl[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in ob)return lp[i]=r[l];return i}var lb=co("animationend"),cb=co("animationiteration"),ub=co("animationstart"),PI=co("transitionrun"),DI=co("transitionstart"),MI=co("transitioncancel"),db=co("transitionend"),hb=new Map,cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cp.push("scrollEnd");function ci(i,r){hb.set(i,r),Ii(r,[i])}var sh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Us=[],gl=0,up=0;function ih(){for(var i=gl,r=up=gl=0;r<i;){var l=Us[r];Us[r++]=null;var d=Us[r];Us[r++]=null;var g=Us[r];Us[r++]=null;var y=Us[r];if(Us[r++]=null,d!==null&&g!==null){var _=d.pending;_===null?g.next=g:(g.next=_.next,_.next=g),d.pending=g}y!==0&&fb(l,g,y)}}function rh(i,r,l,d){Us[gl++]=i,Us[gl++]=r,Us[gl++]=l,Us[gl++]=d,up|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function dp(i,r,l,d){return rh(i,r,l,d),ah(i)}function uo(i,r){return rh(i,null,null,r),ah(i)}function fb(i,r,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var g=!1,y=i.return;y!==null;)y.childLanes|=l,d=y.alternate,d!==null&&(d.childLanes|=l),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&r!==null&&(g=31-Dt(l),i=y.hiddenUpdates,d=i[g],d===null?i[g]=[r]:d.push(r),r.lane=l|536870912),y):null}function ah(i){if(50<vu)throw vu=0,bg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var yl={};function VI(i,r,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(i,r,l,d){return new VI(i,r,l,d)}function hp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hr(i,r){var l=i.alternate;return l===null?(l=Ts(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function mb(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function oh(i,r,l,d,g,y){var _=0;if(d=i,typeof i=="function")hp(i)&&(_=1);else if(typeof i=="string")_=BC(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=Ts(31,l,r,g),i.elementType=j,i.lanes=y,i;case S:return ho(l.children,g,y,r);case k:_=8,g|=24;break;case P:return i=Ts(12,l,r,g|2),i.elementType=P,i.lanes=y,i;case Z:return i=Ts(13,l,r,g),i.elementType=Z,i.lanes=y,i;case ee:return i=Ts(19,l,r,g),i.elementType=ee,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:_=10;break e;case U:_=9;break e;case F:_=11;break e;case C:_=14;break e;case I:_=16,d=null;break e}_=29,l=Error(s(130,i===null?"null":typeof i,"")),d=null}return r=Ts(_,l,r,g),r.elementType=i,r.type=d,r.lanes=y,r}function ho(i,r,l,d){return i=Ts(7,i,d,r),i.lanes=l,i}function fp(i,r,l){return i=Ts(6,i,null,r),i.lanes=l,i}function pb(i){var r=Ts(18,null,null,0);return r.stateNode=i,r}function mp(i,r,l){return r=Ts(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var gb=new WeakMap;function zs(i,r){if(typeof i=="object"&&i!==null){var l=gb.get(i);return l!==void 0?l:(r={value:i,source:r,stack:_i(r)},gb.set(i,r),r)}return{value:i,source:r,stack:_i(r)}}var xl=[],vl=0,lh=null,Xc=0,Bs=[],Fs=0,na=null,Ui=1,zi="";function fr(i,r){xl[vl++]=Xc,xl[vl++]=lh,lh=i,Xc=r}function yb(i,r,l){Bs[Fs++]=Ui,Bs[Fs++]=zi,Bs[Fs++]=na,na=i;var d=Ui;i=zi;var g=32-Dt(d)-1;d&=~(1<<g),l+=1;var y=32-Dt(r)+g;if(30<y){var _=g-g%5;y=(d&(1<<_)-1).toString(32),d>>=_,g-=_,Ui=1<<32-Dt(r)+g|l<<g|d,zi=y+i}else Ui=1<<y|l<<g|d,zi=i}function pp(i){i.return!==null&&(fr(i,1),yb(i,1,0))}function gp(i){for(;i===lh;)lh=xl[--vl],xl[vl]=null,Xc=xl[--vl],xl[vl]=null;for(;i===na;)na=Bs[--Fs],Bs[Fs]=null,zi=Bs[--Fs],Bs[Fs]=null,Ui=Bs[--Fs],Bs[Fs]=null}function xb(i,r){Bs[Fs++]=Ui,Bs[Fs++]=zi,Bs[Fs++]=na,Ui=r.id,zi=r.overflow,na=i}var En=null,Tt=null,tt=!1,sa=null,Hs=!1,yp=Error(s(519));function ia(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jc(zs(r,i)),yp}function vb(i){var r=i.stateNode,l=i.type,d=i.memoizedProps;switch(r[Ut]=i,r[yn]=d,l){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(l=0;l<wu.length;l++)Ge(wu[l],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),Bd(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),Kr(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||V1(r.textContent,l)?(d.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),d.onScroll!=null&&Ge("scroll",r),d.onScrollEnd!=null&&Ge("scrollend",r),d.onClick!=null&&(r.onclick=ii),r=!0):r=!1,r||ia(i,!0)}function bb(i){for(En=i.return;En;)switch(En.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:En=En.return}}function bl(i){if(i!==En)return!1;if(!tt)return bb(i),tt=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Mg(i.type,i.memoizedProps)),l=!l),l&&Tt&&ia(i),bb(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Tt=$1(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Tt=$1(i)}else r===27?(r=Tt,xa(i.type)?(i=zg,zg=null,Tt=i):Tt=r):Tt=En?$s(i.stateNode.nextSibling):null;return!0}function fo(){Tt=En=null,tt=!1}function xp(){var i=sa;return i!==null&&(as===null?as=i:as.push.apply(as,i),sa=null),i}function Jc(i){sa===null?sa=[i]:sa.push(i)}var vp=q(null),mo=null,mr=null;function ra(i,r,l){me(vp,r._currentValue),r._currentValue=l}function pr(i){i._currentValue=vp.current,ae(vp)}function bp(i,r,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===l)break;i=i.return}}function wp(i,r,l,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=g;for(var H=0;H<r.length;H++)if(R.context===r[H]){y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),bp(y.return,l,i),d||(_=null);break e}y=R.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(s(341));_.lanes|=l,y=_.alternate,y!==null&&(y.lanes|=l),bp(_,l,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function wl(i,r,l,d){i=null;for(var g=r,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var R=g.type;_s(g.pendingProps.value,_.value)||(i!==null?i.push(R):i=[R])}}else if(g===_e.current){if(_=g.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ju):i=[ju])}g=g.return}i!==null&&wp(r,i,l,d),r.flags|=262144}function ch(i){for(i=i.firstContext;i!==null;){if(!_s(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function po(i){mo=i,mr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function jn(i){return wb(mo,i)}function uh(i,r){return mo===null&&po(i),wb(i,r)}function wb(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},mr===null){if(i===null)throw Error(s(308));mr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else mr=mr.next=r;return l}var OI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},LI=t.unstable_scheduleCallback,UI=t.unstable_NormalPriority,sn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _p(){return{controller:new OI,data:new Map,refCount:0}}function eu(i){i.refCount--,i.refCount===0&&LI(UI,function(){i.controller.abort()})}var tu=null,Tp=0,_l=0,Tl=null;function zI(i,r){if(tu===null){var l=tu=[];Tp=0,_l=jg(),Tl={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Tp++,r.then(_b,_b),r}function _b(){if(--Tp===0&&tu!==null){Tl!==null&&(Tl.status="fulfilled");var i=tu;tu=null,_l=0,Tl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function BI(i,r){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Tb=Y.S;Y.S=function(i,r){a1=Tn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&zI(i,r),Tb!==null&&Tb(i,r)};var go=q(null);function Np(){var i=go.current;return i!==null?i:vt.pooledCache}function dh(i,r){r===null?me(go,go.current):me(go,r.pool)}function Nb(){var i=Np();return i===null?null:{parent:sn._currentValue,pool:i}}var Nl=Error(s(460)),Ep=Error(s(474)),hh=Error(s(542)),fh={then:function(){}};function Eb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function jb(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(ii,ii),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ab(i),i;default:if(typeof r.status=="string")r.then(ii,ii);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=d}},function(d){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ab(i),i}throw xo=r,Nl}}function yo(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(xo=l,Nl):l}}var xo=null;function Sb(){if(xo===null)throw Error(s(459));var i=xo;return xo=null,i}function Ab(i){if(i===Nl||i===hh)throw Error(s(483))}var El=null,nu=0;function mh(i){var r=nu;return nu+=1,El===null&&(El=[]),jb(El,i,r)}function su(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function ph(i,r){throw r.$$typeof===w?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function kb(i){function r(G,$){if(i){var Q=G.deletions;Q===null?(G.deletions=[$],G.flags|=16):Q.push($)}}function l(G,$){if(!i)return null;for(;$!==null;)r(G,$),$=$.sibling;return null}function d(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function g(G,$){return G=hr(G,$),G.index=0,G.sibling=null,G}function y(G,$,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<$?(G.flags|=67108866,$):Q):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function _(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function R(G,$,Q,re){return $===null||$.tag!==6?($=fp(Q,G.mode,re),$.return=G,$):($=g($,Q),$.return=G,$)}function H(G,$,Q,re){var je=Q.type;return je===S?ie(G,$,Q.props.children,re,Q.key):$!==null&&($.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&yo(je)===$.type)?($=g($,Q.props),su($,Q),$.return=G,$):($=oh(Q.type,Q.key,Q.props,null,G.mode,re),su($,Q),$.return=G,$)}function W(G,$,Q,re){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=mp(Q,G.mode,re),$.return=G,$):($=g($,Q.children||[]),$.return=G,$)}function ie(G,$,Q,re,je){return $===null||$.tag!==7?($=ho(Q,G.mode,re,je),$.return=G,$):($=g($,Q),$.return=G,$)}function oe(G,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=fp(""+$,G.mode,Q),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return Q=oh($.type,$.key,$.props,null,G.mode,Q),su(Q,$),Q.return=G,Q;case A:return $=mp($,G.mode,Q),$.return=G,$;case I:return $=yo($),oe(G,$,Q)}if(J($)||B($))return $=ho($,G.mode,Q,null),$.return=G,$;if(typeof $.then=="function")return oe(G,mh($),Q);if($.$$typeof===O)return oe(G,uh(G,$),Q);ph(G,$)}return null}function X(G,$,Q,re){var je=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return je!==null?null:R(G,$,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return Q.key===je?H(G,$,Q,re):null;case A:return Q.key===je?W(G,$,Q,re):null;case I:return Q=yo(Q),X(G,$,Q,re)}if(J(Q)||B(Q))return je!==null?null:ie(G,$,Q,re,null);if(typeof Q.then=="function")return X(G,$,mh(Q),re);if(Q.$$typeof===O)return X(G,$,uh(G,Q),re);ph(G,Q)}return null}function ne(G,$,Q,re,je){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Q)||null,R($,G,""+re,je);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return G=G.get(re.key===null?Q:re.key)||null,H($,G,re,je);case A:return G=G.get(re.key===null?Q:re.key)||null,W($,G,re,je);case I:return re=yo(re),ne(G,$,Q,re,je)}if(J(re)||B(re))return G=G.get(Q)||null,ie($,G,re,je,null);if(typeof re.then=="function")return ne(G,$,Q,mh(re),je);if(re.$$typeof===O)return ne(G,$,Q,uh($,re),je);ph($,re)}return null}function we(G,$,Q,re){for(var je=null,st=null,Ne=$,qe=$=0,Qe=null;Ne!==null&&qe<Q.length;qe++){Ne.index>qe?(Qe=Ne,Ne=null):Qe=Ne.sibling;var it=X(G,Ne,Q[qe],re);if(it===null){Ne===null&&(Ne=Qe);break}i&&Ne&&it.alternate===null&&r(G,Ne),$=y(it,$,qe),st===null?je=it:st.sibling=it,st=it,Ne=Qe}if(qe===Q.length)return l(G,Ne),tt&&fr(G,qe),je;if(Ne===null){for(;qe<Q.length;qe++)Ne=oe(G,Q[qe],re),Ne!==null&&($=y(Ne,$,qe),st===null?je=Ne:st.sibling=Ne,st=Ne);return tt&&fr(G,qe),je}for(Ne=d(Ne);qe<Q.length;qe++)Qe=ne(Ne,G,qe,Q[qe],re),Qe!==null&&(i&&Qe.alternate!==null&&Ne.delete(Qe.key===null?qe:Qe.key),$=y(Qe,$,qe),st===null?je=Qe:st.sibling=Qe,st=Qe);return i&&Ne.forEach(function(Ta){return r(G,Ta)}),tt&&fr(G,qe),je}function Ce(G,$,Q,re){if(Q==null)throw Error(s(151));for(var je=null,st=null,Ne=$,qe=$=0,Qe=null,it=Q.next();Ne!==null&&!it.done;qe++,it=Q.next()){Ne.index>qe?(Qe=Ne,Ne=null):Qe=Ne.sibling;var Ta=X(G,Ne,it.value,re);if(Ta===null){Ne===null&&(Ne=Qe);break}i&&Ne&&Ta.alternate===null&&r(G,Ne),$=y(Ta,$,qe),st===null?je=Ta:st.sibling=Ta,st=Ta,Ne=Qe}if(it.done)return l(G,Ne),tt&&fr(G,qe),je;if(Ne===null){for(;!it.done;qe++,it=Q.next())it=oe(G,it.value,re),it!==null&&($=y(it,$,qe),st===null?je=it:st.sibling=it,st=it);return tt&&fr(G,qe),je}for(Ne=d(Ne);!it.done;qe++,it=Q.next())it=ne(Ne,G,qe,it.value,re),it!==null&&(i&&it.alternate!==null&&Ne.delete(it.key===null?qe:it.key),$=y(it,$,qe),st===null?je=it:st.sibling=it,st=it);return i&&Ne.forEach(function(XC){return r(G,XC)}),tt&&fr(G,qe),je}function yt(G,$,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:e:{for(var je=Q.key;$!==null;){if($.key===je){if(je=Q.type,je===S){if($.tag===7){l(G,$.sibling),re=g($,Q.props.children),re.return=G,G=re;break e}}else if($.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&yo(je)===$.type){l(G,$.sibling),re=g($,Q.props),su(re,Q),re.return=G,G=re;break e}l(G,$);break}else r(G,$);$=$.sibling}Q.type===S?(re=ho(Q.props.children,G.mode,re,Q.key),re.return=G,G=re):(re=oh(Q.type,Q.key,Q.props,null,G.mode,re),su(re,Q),re.return=G,G=re)}return _(G);case A:e:{for(je=Q.key;$!==null;){if($.key===je)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){l(G,$.sibling),re=g($,Q.children||[]),re.return=G,G=re;break e}else{l(G,$);break}else r(G,$);$=$.sibling}re=mp(Q,G.mode,re),re.return=G,G=re}return _(G);case I:return Q=yo(Q),yt(G,$,Q,re)}if(J(Q))return we(G,$,Q,re);if(B(Q)){if(je=B(Q),typeof je!="function")throw Error(s(150));return Q=je.call(Q),Ce(G,$,Q,re)}if(typeof Q.then=="function")return yt(G,$,mh(Q),re);if(Q.$$typeof===O)return yt(G,$,uh(G,Q),re);ph(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(l(G,$.sibling),re=g($,Q),re.return=G,G=re):(l(G,$),re=fp(Q,G.mode,re),re.return=G,G=re),_(G)):l(G,$)}return function(G,$,Q,re){try{nu=0;var je=yt(G,$,Q,re);return El=null,je}catch(Ne){if(Ne===Nl||Ne===hh)throw Ne;var st=Ts(29,Ne,null,G.mode);return st.lanes=re,st.return=G,st}finally{}}}var vo=kb(!0),Ib=kb(!1),aa=!1;function jp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function oa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function la(i,r,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var g=d.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),d.pending=r,r=ah(i),fb(i,null,l),r}return rh(i,d,r,l),ah(i)}function iu(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,si(i,l)}}function Ap(i,r){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,l=l.next}while(l!==null);y===null?g=y=r:y=y.next=r}else g=y=r;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var kp=!1;function ru(){if(kp){var i=Tl;if(i!==null)throw i}}function au(i,r,l,d){kp=!1;var g=i.updateQueue;aa=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var H=R,W=H.next;H.next=null,_===null?y=W:_.next=W,_=H;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==_&&(R===null?ie.firstBaseUpdate=W:R.next=W,ie.lastBaseUpdate=H))}if(y!==null){var oe=g.baseState;_=0,ie=W=H=null,R=y;do{var X=R.lane&-536870913,ne=X!==R.lane;if(ne?(Ke&X)===X:(d&X)===X){X!==0&&X===_l&&(kp=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var we=i,Ce=R;X=r;var yt=l;switch(Ce.tag){case 1:if(we=Ce.payload,typeof we=="function"){oe=we.call(yt,oe,X);break e}oe=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ce.payload,X=typeof we=="function"?we.call(yt,oe,X):we,X==null)break e;oe=v({},oe,X);break e;case 2:aa=!0}}X=R.callback,X!==null&&(i.flags|=64,ne&&(i.flags|=8192),ne=g.callbacks,ne===null?g.callbacks=[X]:ne.push(X))}else ne={lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(W=ie=ne,H=oe):ie=ie.next=ne,_|=X;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);ie===null&&(H=oe),g.baseState=H,g.firstBaseUpdate=W,g.lastBaseUpdate=ie,y===null&&(g.shared.lanes=0),fa|=_,i.lanes=_,i.memoizedState=oe}}function Cb(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Rb(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Cb(l[i],r)}var jl=q(null),gh=q(0);function Pb(i,r){i=Nr,me(gh,i),me(jl,r),Nr=i|r.baseLanes}function Ip(){me(gh,Nr),me(jl,jl.current)}function Cp(){Nr=gh.current,ae(jl),ae(gh)}var Ns=q(null),qs=null;function ca(i){var r=i.alternate;me(Zt,Zt.current&1),me(Ns,i),qs===null&&(r===null||jl.current!==null||r.memoizedState!==null)&&(qs=i)}function Rp(i){me(Zt,Zt.current),me(Ns,i),qs===null&&(qs=i)}function Db(i){i.tag===22?(me(Zt,Zt.current),me(Ns,i),qs===null&&(qs=i)):ua()}function ua(){me(Zt,Zt.current),me(Ns,Ns.current)}function Es(i){ae(Ns),qs===i&&(qs=null),ae(Zt)}var Zt=q(0);function yh(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lg(l)||Ug(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var gr=0,He=null,pt=null,rn=null,xh=!1,Sl=!1,bo=!1,vh=0,ou=0,Al=null,FI=0;function zt(){throw Error(s(321))}function Pp(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!_s(i[l],r[l]))return!1;return!0}function Dp(i,r,l,d,g,y){return gr=y,He=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=i===null||i.memoizedState===null?yw:Kp,bo=!1,y=l(d,g),bo=!1,Sl&&(y=Vb(r,l,d,g)),Mb(i),y}function Mb(i){Y.H=uu;var r=pt!==null&&pt.next!==null;if(gr=0,rn=pt=He=null,xh=!1,ou=0,Al=null,r)throw Error(s(300));i===null||an||(i=i.dependencies,i!==null&&ch(i)&&(an=!0))}function Vb(i,r,l,d){He=i;var g=0;do{if(Sl&&(Al=null),ou=0,Sl=!1,25<=g)throw Error(s(301));if(g+=1,rn=pt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=xw,y=r(l,d)}while(Sl);return y}function HI(){var i=Y.H,r=i.useState()[0];return r=typeof r.then=="function"?lu(r):r,i=i.useState()[0],(pt!==null?pt.memoizedState:null)!==i&&(He.flags|=1024),r}function Mp(){var i=vh!==0;return vh=0,i}function Vp(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function Op(i){if(xh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xh=!1}gr=0,rn=pt=He=null,Sl=!1,ou=vh=0,Al=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?He.memoizedState=rn=i:rn=rn.next=i,rn}function Kt(){if(pt===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=pt.next;var r=rn===null?He.memoizedState:rn.next;if(r!==null)rn=r,pt=i;else{if(i===null)throw He.alternate===null?Error(s(467)):Error(s(310));pt=i,i={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},rn===null?He.memoizedState=rn=i:rn=rn.next=i}return rn}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(i){var r=ou;return ou+=1,Al===null&&(Al=[]),i=jb(Al,i,r),r=He,(rn===null?r.memoizedState:rn.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?yw:Kp),i}function wh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return lu(i);if(i.$$typeof===O)return jn(i)}throw Error(s(438,String(i)))}function Lp(i){var r=null,l=He.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=bh(),He.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),d=0;d<i;d++)l[d]=M;return r.index++,l}function yr(i,r){return typeof r=="function"?r(i):r}function _h(i){var r=Kt();return Up(r,pt,i)}function Up(i,r,l){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var g=i.baseQueue,y=d.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}r.baseQueue=g=y,d.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{r=g.next;var R=_=null,H=null,W=r,ie=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(Ke&oe)===oe:(gr&oe)===oe){var X=W.revertLane;if(X===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===_l&&(ie=!0);else if((gr&X)===X){W=W.next,X===_l&&(ie=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(R=H=oe,_=y):H=H.next=oe,He.lanes|=X,fa|=X;oe=W.action,bo&&l(y,oe),y=W.hasEagerState?W.eagerState:l(y,oe)}else X={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},H===null?(R=H=X,_=y):H=H.next=X,He.lanes|=oe,fa|=oe;W=W.next}while(W!==null&&W!==r);if(H===null?_=y:H.next=R,!_s(y,i.memoizedState)&&(an=!0,ie&&(l=Tl,l!==null)))throw l;i.memoizedState=y,i.baseState=_,i.baseQueue=H,d.lastRenderedState=y}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function zp(i){var r=Kt(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,y=r.memoizedState;if(g!==null){l.pending=null;var _=g=g.next;do y=i(y,_.action),_=_.next;while(_!==g);_s(y,r.memoizedState)||(an=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),l.lastRenderedState=y}return[y,d]}function Ob(i,r,l){var d=He,g=Kt(),y=tt;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=r();var _=!_s((pt||g).memoizedState,l);if(_&&(g.memoizedState=l,an=!0),g=g.queue,Hp(zb.bind(null,d,g,i),[i]),g.getSnapshot!==r||_||rn!==null&&rn.memoizedState.tag&1){if(d.flags|=2048,kl(9,{destroy:void 0},Ub.bind(null,d,g,l,r),null),vt===null)throw Error(s(349));y||(gr&127)!==0||Lb(d,r,l)}return l}function Lb(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=He.updateQueue,r===null?(r=bh(),He.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Ub(i,r,l,d){r.value=l,r.getSnapshot=d,Bb(r)&&Fb(i)}function zb(i,r,l){return l(function(){Bb(r)&&Fb(i)})}function Bb(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!_s(i,l)}catch{return!0}}function Fb(i){var r=uo(i,2);r!==null&&os(r,i,2)}function Bp(i){var r=qn();if(typeof i=="function"){var l=i;if(i=l(),bo){Xn(!0);try{l()}finally{Xn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:i},r}function Hb(i,r,l,d){return i.baseState=l,Up(i,pt,typeof d=="function"?d:yr)}function qI(i,r,l,d,g){if(Eh(i))throw Error(s(485));if(i=r.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};Y.T!==null?l(!0):y.isTransition=!1,d(y),l=r.pending,l===null?(y.next=r.pending=y,qb(r,y)):(y.next=l.next,r.pending=l.next=y)}}function qb(i,r){var l=r.action,d=r.payload,g=i.state;if(r.isTransition){var y=Y.T,_={};Y.T=_;try{var R=l(g,d),H=Y.S;H!==null&&H(_,R),$b(i,r,R)}catch(W){Fp(i,r,W)}finally{y!==null&&_.types!==null&&(y.types=_.types),Y.T=y}}else try{y=l(g,d),$b(i,r,y)}catch(W){Fp(i,r,W)}}function $b(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Gb(i,r,d)},function(d){return Fp(i,r,d)}):Gb(i,r,l)}function Gb(i,r,l){r.status="fulfilled",r.value=l,Yb(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,qb(i,l)))}function Fp(i,r,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,Yb(r),r=r.next;while(r!==d)}i.action=null}function Yb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Zb(i,r){return r}function Kb(i,r){if(tt){var l=vt.formState;if(l!==null){e:{var d=He;if(tt){if(Tt){t:{for(var g=Tt,y=Hs;g.nodeType!==8;){if(!y){g=null;break t}if(g=$s(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Tt=$s(g.nextSibling),d=g.data==="F!";break e}}ia(d)}d=!1}d&&(r=l[0])}}return l=qn(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:r},l.queue=d,l=mw.bind(null,He,d),d.dispatch=l,d=Bp(!1),y=Zp.bind(null,He,!1,d.queue),d=qn(),g={state:r,dispatch:null,action:i,pending:null},d.queue=g,l=qI.bind(null,He,g,y,l),g.dispatch=l,d.memoizedState=i,[r,l,!1]}function Qb(i){var r=Kt();return Wb(r,pt,i)}function Wb(i,r,l){if(r=Up(i,r,Zb)[0],i=_h(yr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=lu(r)}catch(_){throw _===Nl?hh:_}else d=r;r=Kt();var g=r.queue,y=g.dispatch;return l!==r.memoizedState&&(He.flags|=2048,kl(9,{destroy:void 0},$I.bind(null,g,l),null)),[d,y,i]}function $I(i,r){i.action=r}function Xb(i){var r=Kt(),l=pt;if(l!==null)return Wb(r,l,i);Kt(),r=r.memoizedState,l=Kt();var d=l.queue.dispatch;return l.memoizedState=i,[r,d,!1]}function kl(i,r,l,d){return i={tag:i,create:l,deps:d,inst:r,next:null},r=He.updateQueue,r===null&&(r=bh(),He.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,r.lastEffect=i),i}function Jb(){return Kt().memoizedState}function Th(i,r,l,d){var g=qn();He.flags|=i,g.memoizedState=kl(1|r,{destroy:void 0},l,d===void 0?null:d)}function Nh(i,r,l,d){var g=Kt();d=d===void 0?null:d;var y=g.memoizedState.inst;pt!==null&&d!==null&&Pp(d,pt.memoizedState.deps)?g.memoizedState=kl(r,y,l,d):(He.flags|=i,g.memoizedState=kl(1|r,y,l,d))}function ew(i,r){Th(8390656,8,i,r)}function Hp(i,r){Nh(2048,8,i,r)}function GI(i){He.flags|=4;var r=He.updateQueue;if(r===null)r=bh(),He.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function tw(i){var r=Kt().memoizedState;return GI({ref:r,nextImpl:i}),function(){if((ot&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function nw(i,r){return Nh(4,2,i,r)}function sw(i,r){return Nh(4,4,i,r)}function iw(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function rw(i,r,l){l=l!=null?l.concat([i]):null,Nh(4,4,iw.bind(null,r,i),l)}function qp(){}function aw(i,r){var l=Kt();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&Pp(r,d[1])?d[0]:(l.memoizedState=[i,r],i)}function ow(i,r){var l=Kt();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&Pp(r,d[1]))return d[0];if(d=i(),bo){Xn(!0);try{i()}finally{Xn(!1)}}return l.memoizedState=[d,r],d}function $p(i,r,l){return l===void 0||(gr&1073741824)!==0&&(Ke&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=l1(),He.lanes|=i,fa|=i,l)}function lw(i,r,l,d){return _s(l,r)?l:jl.current!==null?(i=$p(i,l,d),_s(i,r)||(an=!0),i):(gr&42)===0||(gr&1073741824)!==0&&(Ke&261930)===0?(an=!0,i.memoizedState=l):(i=l1(),He.lanes|=i,fa|=i,r)}function cw(i,r,l,d,g){var y=se.p;se.p=y!==0&&8>y?y:8;var _=Y.T,R={};Y.T=R,Zp(i,!1,r,l);try{var H=g(),W=Y.S;if(W!==null&&W(R,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ie=BI(H,d);cu(i,r,ie,As(i))}else cu(i,r,d,As(i))}catch(oe){cu(i,r,{then:function(){},status:"rejected",reason:oe},As())}finally{se.p=y,_!==null&&R.types!==null&&(_.types=R.types),Y.T=_}}function YI(){}function Gp(i,r,l,d){if(i.tag!==5)throw Error(s(476));var g=uw(i).queue;cw(i,g,r,fe,l===null?YI:function(){return dw(i),l(d)})}function uw(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:fe},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function dw(i){var r=uw(i);r.next===null&&(r=i.alternate.memoizedState),cu(i,r.next.queue,{},As())}function Yp(){return jn(ju)}function hw(){return Kt().memoizedState}function fw(){return Kt().memoizedState}function ZI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=As();i=oa(l);var d=la(r,i,l);d!==null&&(os(d,r,l),iu(d,r,l)),r={cache:_p()},i.payload=r;return}r=r.return}}function KI(i,r,l){var d=As();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Eh(i)?pw(r,l):(l=dp(i,r,l,d),l!==null&&(os(l,i,d),gw(l,r,d)))}function mw(i,r,l){var d=As();cu(i,r,l,d)}function cu(i,r,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Eh(i))pw(r,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var _=r.lastRenderedState,R=y(_,l);if(g.hasEagerState=!0,g.eagerState=R,_s(R,_))return rh(i,r,g,0),vt===null&&ih(),!1}catch{}finally{}if(l=dp(i,r,g,d),l!==null)return os(l,i,d),gw(l,r,d),!0}return!1}function Zp(i,r,l,d){if(d={lane:2,revertLane:jg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Eh(i)){if(r)throw Error(s(479))}else r=dp(i,l,d,2),r!==null&&os(r,i,2)}function Eh(i){var r=i.alternate;return i===He||r!==null&&r===He}function pw(i,r){Sl=xh=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function gw(i,r,l){if((l&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,l|=d,r.lanes=l,si(i,l)}}var uu={readContext:jn,use:wh,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};uu.useEffectEvent=zt;var yw={readContext:jn,use:wh,useCallback:function(i,r){return qn().memoizedState=[i,r===void 0?null:r],i},useContext:jn,useEffect:ew,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Th(4194308,4,iw.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Th(4194308,4,i,r)},useInsertionEffect:function(i,r){Th(4,2,i,r)},useMemo:function(i,r){var l=qn();r=r===void 0?null:r;var d=i();if(bo){Xn(!0);try{i()}finally{Xn(!1)}}return l.memoizedState=[d,r],d},useReducer:function(i,r,l){var d=qn();if(l!==void 0){var g=l(r);if(bo){Xn(!0);try{l(r)}finally{Xn(!1)}}}else g=r;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=KI.bind(null,He,i),[d.memoizedState,i]},useRef:function(i){var r=qn();return i={current:i},r.memoizedState=i},useState:function(i){i=Bp(i);var r=i.queue,l=mw.bind(null,He,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:qp,useDeferredValue:function(i,r){var l=qn();return $p(l,i,r)},useTransition:function(){var i=Bp(!1);return i=cw.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var d=He,g=qn();if(tt){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),vt===null)throw Error(s(349));(Ke&127)!==0||Lb(d,r,l)}g.memoizedState=l;var y={value:l,getSnapshot:r};return g.queue=y,ew(zb.bind(null,d,y,i),[i]),d.flags|=2048,kl(9,{destroy:void 0},Ub.bind(null,d,y,l,r),null),l},useId:function(){var i=qn(),r=vt.identifierPrefix;if(tt){var l=zi,d=Ui;l=(d&~(1<<32-Dt(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=vh++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=FI++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Yp,useFormState:Kb,useActionState:Kb,useOptimistic:function(i){var r=qn();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Zp.bind(null,He,!0,l),l.dispatch=r,[i,r]},useMemoCache:Lp,useCacheRefresh:function(){return qn().memoizedState=ZI.bind(null,He)},useEffectEvent:function(i){var r=qn(),l={impl:i};return r.memoizedState=l,function(){if((ot&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Kp={readContext:jn,use:wh,useCallback:aw,useContext:jn,useEffect:Hp,useImperativeHandle:rw,useInsertionEffect:nw,useLayoutEffect:sw,useMemo:ow,useReducer:_h,useRef:Jb,useState:function(){return _h(yr)},useDebugValue:qp,useDeferredValue:function(i,r){var l=Kt();return lw(l,pt.memoizedState,i,r)},useTransition:function(){var i=_h(yr)[0],r=Kt().memoizedState;return[typeof i=="boolean"?i:lu(i),r]},useSyncExternalStore:Ob,useId:hw,useHostTransitionStatus:Yp,useFormState:Qb,useActionState:Qb,useOptimistic:function(i,r){var l=Kt();return Hb(l,pt,i,r)},useMemoCache:Lp,useCacheRefresh:fw};Kp.useEffectEvent=tw;var xw={readContext:jn,use:wh,useCallback:aw,useContext:jn,useEffect:Hp,useImperativeHandle:rw,useInsertionEffect:nw,useLayoutEffect:sw,useMemo:ow,useReducer:zp,useRef:Jb,useState:function(){return zp(yr)},useDebugValue:qp,useDeferredValue:function(i,r){var l=Kt();return pt===null?$p(l,i,r):lw(l,pt.memoizedState,i,r)},useTransition:function(){var i=zp(yr)[0],r=Kt().memoizedState;return[typeof i=="boolean"?i:lu(i),r]},useSyncExternalStore:Ob,useId:hw,useHostTransitionStatus:Yp,useFormState:Xb,useActionState:Xb,useOptimistic:function(i,r){var l=Kt();return pt!==null?Hb(l,pt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Lp,useCacheRefresh:fw};xw.useEffectEvent=tw;function Qp(i,r,l,d){r=i.memoizedState,l=l(d,r),l=l==null?r:v({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Wp={enqueueSetState:function(i,r,l){i=i._reactInternals;var d=As(),g=oa(d);g.payload=r,l!=null&&(g.callback=l),r=la(i,g,d),r!==null&&(os(r,i,d),iu(r,i,d))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var d=As(),g=oa(d);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=la(i,g,d),r!==null&&(os(r,i,d),iu(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=As(),d=oa(l);d.tag=2,r!=null&&(d.callback=r),r=la(i,d,l),r!==null&&(os(r,i,l),iu(r,i,l))}};function vw(i,r,l,d,g,y,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,_):r.prototype&&r.prototype.isPureReactComponent?!Qc(l,d)||!Qc(g,y):!0}function bw(i,r,l,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==i&&Wp.enqueueReplaceState(r,r.state,null)}function wo(i,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(i=i.defaultProps){l===r&&(l=v({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function ww(i){sh(i)}function _w(i){console.error(i)}function Tw(i){sh(i)}function jh(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Nw(i,r,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Xp(i,r,l){return l=oa(l),l.tag=3,l.payload={element:null},l.callback=function(){jh(i,r)},l}function Ew(i){return i=oa(i),i.tag=3,i}function jw(i,r,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;i.payload=function(){return g(y)},i.callback=function(){Nw(r,l,d)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){Nw(r,l,d),typeof g!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function QI(i,r,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&wl(r,l,g,!0),l=Ns.current,l!==null){switch(l.tag){case 31:case 13:return qs===null?Lh():l.alternate===null&&Bt===0&&(Bt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===fh?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),Tg(i,d,g)),!1;case 22:return l.flags|=65536,d===fh?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),Tg(i,d,g)),!1}throw Error(s(435,l.tag))}return Tg(i,d,g),Lh(),!1}if(tt)return r=Ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,d!==yp&&(i=Error(s(422),{cause:d}),Jc(zs(i,l)))):(d!==yp&&(r=Error(s(423),{cause:d}),Jc(zs(r,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=zs(d,l),g=Xp(i.stateNode,d,g),Ap(i,g),Bt!==4&&(Bt=2)),!1;var y=Error(s(520),{cause:d});if(y=zs(y,l),xu===null?xu=[y]:xu.push(y),Bt!==4&&(Bt=2),r===null)return!0;d=zs(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Xp(l.stateNode,d,i),Ap(l,i),!1;case 1:if(r=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ma===null||!ma.has(y))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Ew(g),jw(g,i,l,d),Ap(l,g),!1}l=l.return}while(l!==null);return!1}var Jp=Error(s(461)),an=!1;function Sn(i,r,l,d){r.child=i===null?Ib(r,null,l,d):vo(r,i.child,l,d)}function Sw(i,r,l,d,g){l=l.render;var y=r.ref;if("ref"in d){var _={};for(var R in d)R!=="ref"&&(_[R]=d[R])}else _=d;return po(r),d=Dp(i,r,l,_,y,g),R=Mp(),i!==null&&!an?(Vp(i,r,g),xr(i,r,g)):(tt&&R&&pp(r),r.flags|=1,Sn(i,r,d,g),r.child)}function Aw(i,r,l,d,g){if(i===null){var y=l.type;return typeof y=="function"&&!hp(y)&&y.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=y,kw(i,r,y,d,g)):(i=oh(l.type,null,d,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(y=i.child,!og(i,g)){var _=y.memoizedProps;if(l=l.compare,l=l!==null?l:Qc,l(_,d)&&i.ref===r.ref)return xr(i,r,g)}return r.flags|=1,i=hr(y,d),i.ref=r.ref,i.return=r,r.child=i}function kw(i,r,l,d,g){if(i!==null){var y=i.memoizedProps;if(Qc(y,d)&&i.ref===r.ref)if(an=!1,r.pendingProps=d=y,og(i,g))(i.flags&131072)!==0&&(an=!0);else return r.lanes=i.lanes,xr(i,r,g)}return eg(i,r,l,d,g)}function Iw(i,r,l,d){var g=d.children,y=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,i!==null){for(d=r.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,r.child=null;return Cw(i,r,y,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&dh(r,y!==null?y.cachePool:null),y!==null?Pb(r,y):Ip(),Db(r);else return d=r.lanes=536870912,Cw(i,r,y!==null?y.baseLanes|l:l,l,d)}else y!==null?(dh(r,y.cachePool),Pb(r,y),ua(),r.memoizedState=null):(i!==null&&dh(r,null),Ip(),ua());return Sn(i,r,g,l),r.child}function du(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Cw(i,r,l,d,g){var y=Np();return y=y===null?null:{parent:sn._currentValue,pool:y},r.memoizedState={baseLanes:l,cachePool:y},i!==null&&dh(r,null),Ip(),Db(r),i!==null&&wl(i,r,d,!0),r.childLanes=g,null}function Sh(i,r){return r=kh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Rw(i,r,l){return vo(r,i.child,null,l),i=Sh(r,r.pendingProps),i.flags|=2,Es(r),r.memoizedState=null,i}function WI(i,r,l){var d=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(tt){if(d.mode==="hidden")return i=Sh(r,d),r.lanes=536870912,du(null,i);if(Rp(r),(i=Tt)?(i=q1(i,Hs),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:na!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=pb(i),l.return=r,r.child=l,En=r,Tt=null)):i=null,i===null)throw ia(r);return r.lanes=536870912,null}return Sh(r,d)}var y=i.memoizedState;if(y!==null){var _=y.dehydrated;if(Rp(r),g)if(r.flags&256)r.flags&=-257,r=Rw(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(an||wl(i,r,l,!1),g=(l&i.childLanes)!==0,an||g){if(d=vt,d!==null&&(_=Ei(d,l),_!==0&&_!==y.retryLane))throw y.retryLane=_,uo(i,_),os(d,i,_),Jp;Lh(),r=Rw(i,r,l)}else i=y.treeContext,Tt=$s(_.nextSibling),En=r,tt=!0,sa=null,Hs=!1,i!==null&&xb(r,i),r=Sh(r,d),r.flags|=4096;return r}return i=hr(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Ah(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function eg(i,r,l,d,g){return po(r),l=Dp(i,r,l,d,void 0,g),d=Mp(),i!==null&&!an?(Vp(i,r,g),xr(i,r,g)):(tt&&d&&pp(r),r.flags|=1,Sn(i,r,l,g),r.child)}function Pw(i,r,l,d,g,y){return po(r),r.updateQueue=null,l=Vb(r,d,l,g),Mb(i),d=Mp(),i!==null&&!an?(Vp(i,r,y),xr(i,r,y)):(tt&&d&&pp(r),r.flags|=1,Sn(i,r,l,y),r.child)}function Dw(i,r,l,d,g){if(po(r),r.stateNode===null){var y=yl,_=l.contextType;typeof _=="object"&&_!==null&&(y=jn(_)),y=new l(d,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Wp,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=d,y.state=r.memoizedState,y.refs={},jp(r),_=l.contextType,y.context=typeof _=="object"&&_!==null?jn(_):yl,y.state=r.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Qp(r,l,_,d),y.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Wp.enqueueReplaceState(y,y.state,null),au(r,d,y,g),ru(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){y=r.stateNode;var R=r.memoizedProps,H=wo(l,R);y.props=H;var W=y.context,ie=l.contextType;_=yl,typeof ie=="object"&&ie!==null&&(_=jn(ie));var oe=l.getDerivedStateFromProps;ie=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||W!==_)&&bw(r,y,d,_),aa=!1;var X=r.memoizedState;y.state=X,au(r,d,y,g),ru(),W=r.memoizedState,R||X!==W||aa?(typeof oe=="function"&&(Qp(r,l,oe,d),W=r.memoizedState),(H=aa||vw(r,l,H,d,X,W,_))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=W),y.props=d,y.state=W,y.context=_,d=H):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{y=r.stateNode,Sp(i,r),_=r.memoizedProps,ie=wo(l,_),y.props=ie,oe=r.pendingProps,X=y.context,W=l.contextType,H=yl,typeof W=="object"&&W!==null&&(H=jn(W)),R=l.getDerivedStateFromProps,(W=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==oe||X!==H)&&bw(r,y,d,H),aa=!1,X=r.memoizedState,y.state=X,au(r,d,y,g),ru();var ne=r.memoizedState;_!==oe||X!==ne||aa||i!==null&&i.dependencies!==null&&ch(i.dependencies)?(typeof R=="function"&&(Qp(r,l,R,d),ne=r.memoizedState),(ie=aa||vw(r,l,ie,d,X,ne,H)||i!==null&&i.dependencies!==null&&ch(i.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,ne,H),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,ne,H)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ne),y.props=d,y.state=ne,y.context=H,d=ie):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&X===i.memoizedState||(r.flags|=1024),d=!1)}return y=d,Ah(i,r),d=(r.flags&128)!==0,y||d?(y=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,i!==null&&d?(r.child=vo(r,i.child,null,g),r.child=vo(r,null,l,g)):Sn(i,r,l,g),r.memoizedState=y.state,i=r.child):i=xr(i,r,g),i}function Mw(i,r,l,d){return fo(),r.flags|=256,Sn(i,r,l,d),r.child}var tg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ng(i){return{baseLanes:i,cachePool:Nb()}}function sg(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=Ss),i}function Vw(i,r,l){var d=r.pendingProps,g=!1,y=(r.flags&128)!==0,_;if((_=y)||(_=i!==null&&i.memoizedState===null?!1:(Zt.current&2)!==0),_&&(g=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(tt){if(g?ca(r):ua(),(i=Tt)?(i=q1(i,Hs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:na!==null?{id:Ui,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},l=pb(i),l.return=r,r.child=l,En=r,Tt=null)):i=null,i===null)throw ia(r);return Ug(i)?r.lanes=32:r.lanes=536870912,null}var R=d.children;return d=d.fallback,g?(ua(),g=r.mode,R=kh({mode:"hidden",children:R},g),d=ho(d,g,l,null),R.return=r,d.return=r,R.sibling=d,r.child=R,d=r.child,d.memoizedState=ng(l),d.childLanes=sg(i,_,l),r.memoizedState=tg,du(null,d)):(ca(r),ig(r,R))}var H=i.memoizedState;if(H!==null&&(R=H.dehydrated,R!==null)){if(y)r.flags&256?(ca(r),r.flags&=-257,r=rg(i,r,l)):r.memoizedState!==null?(ua(),r.child=i.child,r.flags|=128,r=null):(ua(),R=d.fallback,g=r.mode,d=kh({mode:"visible",children:d.children},g),R=ho(R,g,l,null),R.flags|=2,d.return=r,R.return=r,d.sibling=R,r.child=d,vo(r,i.child,null,l),d=r.child,d.memoizedState=ng(l),d.childLanes=sg(i,_,l),r.memoizedState=tg,r=du(null,d));else if(ca(r),Ug(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var W=_.dgst;_=W,d=Error(s(419)),d.stack="",d.digest=_,Jc({value:d,source:null,stack:null}),r=rg(i,r,l)}else if(an||wl(i,r,l,!1),_=(l&i.childLanes)!==0,an||_){if(_=vt,_!==null&&(d=Ei(_,l),d!==0&&d!==H.retryLane))throw H.retryLane=d,uo(i,d),os(_,i,d),Jp;Lg(R)||Lh(),r=rg(i,r,l)}else Lg(R)?(r.flags|=192,r.child=i.child,r=null):(i=H.treeContext,Tt=$s(R.nextSibling),En=r,tt=!0,sa=null,Hs=!1,i!==null&&xb(r,i),r=ig(r,d.children),r.flags|=4096);return r}return g?(ua(),R=d.fallback,g=r.mode,H=i.child,W=H.sibling,d=hr(H,{mode:"hidden",children:d.children}),d.subtreeFlags=H.subtreeFlags&65011712,W!==null?R=hr(W,R):(R=ho(R,g,l,null),R.flags|=2),R.return=r,d.return=r,d.sibling=R,r.child=d,du(null,d),d=r.child,R=i.child.memoizedState,R===null?R=ng(l):(g=R.cachePool,g!==null?(H=sn._currentValue,g=g.parent!==H?{parent:H,pool:H}:g):g=Nb(),R={baseLanes:R.baseLanes|l,cachePool:g}),d.memoizedState=R,d.childLanes=sg(i,_,l),r.memoizedState=tg,du(i.child,d)):(ca(r),l=i.child,i=l.sibling,l=hr(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=l,r.memoizedState=null,l)}function ig(i,r){return r=kh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function kh(i,r){return i=Ts(22,i,null,r),i.lanes=0,i}function rg(i,r,l){return vo(r,i.child,null,l),i=ig(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Ow(i,r,l){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),bp(i.return,r,l)}function ag(i,r,l,d,g,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:y}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=l,_.tailMode=g,_.treeForkCount=y)}function Lw(i,r,l){var d=r.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var _=Zt.current,R=(_&2)!==0;if(R?(_=_&1|2,r.flags|=128):_&=1,me(Zt,_),Sn(i,r,d,l),d=tt?Xc:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ow(i,l,r);else if(i.tag===19)Ow(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=r.child,g=null;l!==null;)i=l.alternate,i!==null&&yh(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),ag(r,!1,g,l,y,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&yh(i)===null){r.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}ag(r,!0,l,null,y,d);break;case"together":ag(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function xr(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),fa|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(wl(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=hr(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=hr(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function og(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&ch(i)))}function XI(i,r,l){switch(r.tag){case 3:Ye(r,r.stateNode.containerInfo),ra(r,sn,i.memoizedState.cache),fo();break;case 27:case 5:lt(r);break;case 4:Ye(r,r.stateNode.containerInfo);break;case 10:ra(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Rp(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(ca(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Vw(i,r,l):(ca(r),i=xr(i,r,l),i!==null?i.sibling:null);ca(r);break;case 19:var g=(i.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(wl(i,r,l,!1),d=(l&r.childLanes)!==0),g){if(d)return Lw(i,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),me(Zt,Zt.current),d)break;return null;case 22:return r.lanes=0,Iw(i,r,l,r.pendingProps);case 24:ra(r,sn,i.memoizedState.cache)}return xr(i,r,l)}function Uw(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)an=!0;else{if(!og(i,l)&&(r.flags&128)===0)return an=!1,XI(i,r,l);an=(i.flags&131072)!==0}else an=!1,tt&&(r.flags&1048576)!==0&&yb(r,Xc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(i=yo(r.elementType),r.type=i,typeof i=="function")hp(i)?(d=wo(i,d),r.tag=1,r=Dw(null,r,i,d,l)):(r.tag=0,r=eg(null,r,i,d,l));else{if(i!=null){var g=i.$$typeof;if(g===F){r.tag=11,r=Sw(null,r,i,d,l);break e}else if(g===C){r.tag=14,r=Aw(null,r,i,d,l);break e}}throw r=Ie(i)||i,Error(s(306,r,""))}}return r;case 0:return eg(i,r,r.type,r.pendingProps,l);case 1:return d=r.type,g=wo(d,r.pendingProps),Dw(i,r,d,g,l);case 3:e:{if(Ye(r,r.stateNode.containerInfo),i===null)throw Error(s(387));d=r.pendingProps;var y=r.memoizedState;g=y.element,Sp(i,r),au(r,d,null,l);var _=r.memoizedState;if(d=_.cache,ra(r,sn,d),d!==y.cache&&wp(r,[sn],l,!0),ru(),d=_.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=Mw(i,r,d,l);break e}else if(d!==g){g=zs(Error(s(424)),r),Jc(g),r=Mw(i,r,d,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tt=$s(i.firstChild),En=r,tt=!0,sa=null,Hs=!0,l=Ib(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(fo(),d===g){r=xr(i,r,l);break e}Sn(i,r,d,l)}r=r.child}return r;case 26:return Ah(i,r),i===null?(l=Q1(r.type,null,r.pendingProps,null))?r.memoizedState=l:tt||(l=r.type,i=r.pendingProps,d=$h(ce.current).createElement(l),d[Ut]=r,d[yn]=i,An(d,l,i),tn(d),r.stateNode=d):r.memoizedState=Q1(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return lt(r),i===null&&tt&&(d=r.stateNode=Y1(r.type,r.pendingProps,ce.current),En=r,Hs=!0,g=Tt,xa(r.type)?(zg=g,Tt=$s(d.firstChild)):Tt=g),Sn(i,r,r.pendingProps.children,l),Ah(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&tt&&((g=d=Tt)&&(d=AC(d,r.type,r.pendingProps,Hs),d!==null?(r.stateNode=d,En=r,Tt=$s(d.firstChild),Hs=!1,g=!0):g=!1),g||ia(r)),lt(r),g=r.type,y=r.pendingProps,_=i!==null?i.memoizedProps:null,d=y.children,Mg(g,y)?d=null:_!==null&&Mg(g,_)&&(r.flags|=32),r.memoizedState!==null&&(g=Dp(i,r,HI,null,null,l),ju._currentValue=g),Ah(i,r),Sn(i,r,d,l),r.child;case 6:return i===null&&tt&&((i=l=Tt)&&(l=kC(l,r.pendingProps,Hs),l!==null?(r.stateNode=l,En=r,Tt=null,i=!0):i=!1),i||ia(r)),null;case 13:return Vw(i,r,l);case 4:return Ye(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=vo(r,null,d,l):Sn(i,r,d,l),r.child;case 11:return Sw(i,r,r.type,r.pendingProps,l);case 7:return Sn(i,r,r.pendingProps,l),r.child;case 8:return Sn(i,r,r.pendingProps.children,l),r.child;case 12:return Sn(i,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,ra(r,r.type,d.value),Sn(i,r,d.children,l),r.child;case 9:return g=r.type._context,d=r.pendingProps.children,po(r),g=jn(g),d=d(g),r.flags|=1,Sn(i,r,d,l),r.child;case 14:return Aw(i,r,r.type,r.pendingProps,l);case 15:return kw(i,r,r.type,r.pendingProps,l);case 19:return Lw(i,r,l);case 31:return WI(i,r,l);case 22:return Iw(i,r,l,r.pendingProps);case 24:return po(r),d=jn(sn),i===null?(g=Np(),g===null&&(g=vt,y=_p(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=l),g=y),r.memoizedState={parent:d,cache:g},jp(r),ra(r,sn,g)):((i.lanes&l)!==0&&(Sp(i,r),au(r,null,null,l),ru()),g=i.memoizedState,y=r.memoizedState,g.parent!==d?(g={parent:d,cache:d},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ra(r,sn,d)):(d=y.cache,ra(r,sn,d),d!==g.cache&&wp(r,[sn],l,!0))),Sn(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function vr(i){i.flags|=4}function lg(i,r,l,d,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(h1())i.flags|=8192;else throw xo=fh,Ep}else i.flags&=-16777217}function zw(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!t_(r))if(h1())i.flags|=8192;else throw xo=fh,Ep}function Ih(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Te():536870912,i.lanes|=r,Pl|=r)}function hu(i,r){if(!tt)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Nt(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(r)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,r}function JI(i,r,l){var d=r.pendingProps;switch(gp(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Nt(r),null;case 3:return l=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),pr(sn),Be(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(bl(r)?vr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,xp())),Nt(r),null;case 26:var g=r.type,y=r.memoizedState;return i===null?(vr(r),y!==null?(Nt(r),zw(r,y)):(Nt(r),lg(r,g,null,d,l))):y?y!==i.memoizedState?(vr(r),Nt(r),zw(r,y)):(Nt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&vr(r),Nt(r),lg(r,g,i,d,l)),null;case 27:if(Jt(r),l=ce.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&vr(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Nt(r),null}i=ge.current,bl(r)?vb(r):(i=Y1(g,d,l),r.stateNode=i,vr(r))}return Nt(r),null;case 5:if(Jt(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&vr(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return Nt(r),null}if(y=ge.current,bl(r))vb(r);else{var _=$h(ce.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?_.createElement(g,{is:d.is}):_.createElement(g)}}y[Ut]=r,y[yn]=d;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=y;e:switch(An(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&vr(r)}}return Nt(r),lg(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&vr(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(i=ce.current,bl(r)){if(i=r.stateNode,l=r.memoizedProps,d=null,g=En,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[Ut]=r,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||V1(i.nodeValue,l)),i||ia(r,!0)}else i=$h(i).createTextNode(d),i[Ut]=r,r.stateNode=i}return Nt(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(d=bl(r),l!==null){if(i===null){if(!d)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ut]=r}else fo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),i=!1}else l=xp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(Es(r),r):(Es(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Nt(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=bl(r),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Ut]=r}else fo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Nt(r),g=!1}else g=xp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Es(r),r):(Es(r),null)}return Es(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,i=i!==null&&i.memoizedState!==null,l&&(d=r.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),Ih(r,r.updateQueue),Nt(r),null);case 4:return Be(),i===null&&Ig(r.stateNode.containerInfo),Nt(r),null;case 10:return pr(r.type),Nt(r),null;case 19:if(ae(Zt),d=r.memoizedState,d===null)return Nt(r),null;if(g=(r.flags&128)!==0,y=d.rendering,y===null)if(g)hu(d,!1);else{if(Bt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(y=yh(i),y!==null){for(r.flags|=128,hu(d,!1),i=y.updateQueue,r.updateQueue=i,Ih(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)mb(l,i),l=l.sibling;return me(Zt,Zt.current&1|2),tt&&fr(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&Tn()>Mh&&(r.flags|=128,g=!0,hu(d,!1),r.lanes=4194304)}else{if(!g)if(i=yh(y),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,Ih(r,i),hu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!tt)return Nt(r),null}else 2*Tn()-d.renderingStartTime>Mh&&l!==536870912&&(r.flags|=128,g=!0,hu(d,!1),r.lanes=4194304);d.isBackwards?(y.sibling=r.child,r.child=y):(i=d.last,i!==null?i.sibling=y:r.child=y,d.last=y)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Tn(),i.sibling=null,l=Zt.current,me(Zt,g?l&1|2:l&1),tt&&fr(r,d.treeForkCount),i):(Nt(r),null);case 22:case 23:return Es(r),Cp(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),l=r.updateQueue,l!==null&&Ih(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),i!==null&&ae(go),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),pr(sn),Nt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function eC(i,r){switch(gp(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return pr(sn),Be(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Jt(r),null;case 31:if(r.memoizedState!==null){if(Es(r),r.alternate===null)throw Error(s(340));fo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Es(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fo()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ae(Zt),null;case 4:return Be(),null;case 10:return pr(r.type),null;case 22:case 23:return Es(r),Cp(),i!==null&&ae(go),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return pr(sn),null;case 25:return null;default:return null}}function Bw(i,r){switch(gp(r),r.tag){case 3:pr(sn),Be();break;case 26:case 27:case 5:Jt(r);break;case 4:Be();break;case 31:r.memoizedState!==null&&Es(r);break;case 13:Es(r);break;case 19:ae(Zt);break;case 10:pr(r.type);break;case 22:case 23:Es(r),Cp(),i!==null&&ae(go);break;case 24:pr(sn)}}function fu(i,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&i)===i){d=void 0;var y=l.create,_=l.inst;d=y(),_.destroy=d}l=l.next}while(l!==g)}}catch(R){ft(r,r.return,R)}}function da(i,r,l){try{var d=r.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&i)===i){var _=d.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,g=r;var H=l,W=R;try{W()}catch(ie){ft(g,H,ie)}}}d=d.next}while(d!==y)}}catch(ie){ft(r,r.return,ie)}}function Fw(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{Rb(r,l)}catch(d){ft(i,i.return,d)}}}function Hw(i,r,l){l.props=wo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){ft(i,r,d)}}function mu(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){ft(i,r,g)}}function Bi(i,r){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){ft(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ft(i,r,g)}else l.current=null}function qw(i){var r=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){ft(i,i.return,g)}}function cg(i,r,l){try{var d=i.stateNode;_C(d,i.type,l,r),d[yn]=r}catch(g){ft(i,i.return,g)}}function $w(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&xa(i.type)||i.tag===4}function ug(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||$w(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&xa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dg(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ii));else if(d!==4&&(d===27&&xa(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(dg(i,r,l),i=i.sibling;i!==null;)dg(i,r,l),i=i.sibling}function Ch(i,r,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(d!==4&&(d===27&&xa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Ch(i,r,l),i=i.sibling;i!==null;)Ch(i,r,l),i=i.sibling}function Gw(i){var r=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);An(r,d,l),r[Ut]=i,r[yn]=l}catch(y){ft(i,i.return,y)}}var br=!1,on=!1,hg=!1,Yw=typeof WeakSet=="function"?WeakSet:Set,vn=null;function tC(i,r){if(i=i.containerInfo,Pg=Xh,i=rb(i),rp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var _=0,R=-1,H=-1,W=0,ie=0,oe=i,X=null;t:for(;;){for(var ne;oe!==l||g!==0&&oe.nodeType!==3||(R=_+g),oe!==y||d!==0&&oe.nodeType!==3||(H=_+d),oe.nodeType===3&&(_+=oe.nodeValue.length),(ne=oe.firstChild)!==null;)X=oe,oe=ne;for(;;){if(oe===i)break t;if(X===l&&++W===g&&(R=_),X===y&&++ie===d&&(H=_),(ne=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=ne}l=R===-1||H===-1?null:{start:R,end:H}}else l=null}l=l||{start:0,end:0}}else l=null;for(Dg={focusedElem:i,selectionRange:l},Xh=!1,vn=r;vn!==null;)if(r=vn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,vn=i;else for(;vn!==null;){switch(r=vn,y=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,l=r,g=y.memoizedProps,y=y.memoizedState,d=l.stateNode;try{var we=wo(l.type,g);i=d.getSnapshotBeforeUpdate(we,y),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){ft(l,l.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)Og(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Og(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,vn=i;break}vn=r.return}}function Zw(i,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:_r(i,l),d&4&&fu(5,l);break;case 1:if(_r(i,l),d&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(_){ft(l,l.return,_)}else{var g=wo(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(l,l.return,_)}}d&64&&Fw(l),d&512&&mu(l,l.return);break;case 3:if(_r(i,l),d&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Rb(i,r)}catch(_){ft(l,l.return,_)}}break;case 27:r===null&&d&4&&Gw(l);case 26:case 5:_r(i,l),r===null&&d&4&&qw(l),d&512&&mu(l,l.return);break;case 12:_r(i,l);break;case 31:_r(i,l),d&4&&Ww(i,l);break;case 13:_r(i,l),d&4&&Xw(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=uC.bind(null,l),IC(i,l))));break;case 22:if(d=l.memoizedState!==null||br,!d){r=r!==null&&r.memoizedState!==null||on,g=br;var y=on;br=d,(on=r)&&!y?Tr(i,l,(l.subtreeFlags&8772)!==0):_r(i,l),br=g,on=y}break;case 30:break;default:_r(i,l)}}function Kw(i){var r=i.alternate;r!==null&&(i.alternate=null,Kw(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&sl(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var At=null,ss=!1;function wr(i,r,l){for(l=l.child;l!==null;)Qw(i,r,l),l=l.sibling}function Qw(i,r,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ps,l)}catch{}switch(l.tag){case 26:on||Bi(l,r),wr(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||Bi(l,r);var d=At,g=ss;xa(l.type)&&(At=l.stateNode,ss=!1),wr(i,r,l),Tu(l.stateNode),At=d,ss=g;break;case 5:on||Bi(l,r);case 6:if(d=At,g=ss,At=null,wr(i,r,l),At=d,ss=g,At!==null)if(ss)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(l.stateNode)}catch(y){ft(l,r,y)}else try{At.removeChild(l.stateNode)}catch(y){ft(l,r,y)}break;case 18:At!==null&&(ss?(i=At,F1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Bl(i)):F1(At,l.stateNode));break;case 4:d=At,g=ss,At=l.stateNode.containerInfo,ss=!0,wr(i,r,l),At=d,ss=g;break;case 0:case 11:case 14:case 15:da(2,l,r),on||da(4,l,r),wr(i,r,l);break;case 1:on||(Bi(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Hw(l,r,d)),wr(i,r,l);break;case 21:wr(i,r,l);break;case 22:on=(d=on)||l.memoizedState!==null,wr(i,r,l),on=d;break;default:wr(i,r,l)}}function Ww(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Bl(i)}catch(l){ft(r,r.return,l)}}}function Xw(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Bl(i)}catch(l){ft(r,r.return,l)}}function nC(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Yw),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Yw),r;default:throw Error(s(435,i.tag))}}function Rh(i,r){var l=nC(i);r.forEach(function(d){if(!l.has(d)){l.add(d);var g=dC.bind(null,i,d);d.then(g,g)}})}function is(i,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],y=i,_=r,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(xa(R.type)){At=R.stateNode,ss=!1;break e}break;case 5:At=R.stateNode,ss=!1;break e;case 3:case 4:At=R.stateNode.containerInfo,ss=!0;break e}R=R.return}if(At===null)throw Error(s(160));Qw(y,_,g),At=null,ss=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Jw(r,i),r=r.sibling}var ui=null;function Jw(i,r){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:is(r,i),rs(i),d&4&&(da(3,i,i.return),fu(3,i),da(5,i,i.return));break;case 1:is(r,i),rs(i),d&512&&(on||l===null||Bi(l,l.return)),d&64&&br&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=ui;if(is(r,i),rs(i),d&512&&(on||l===null||Bi(l,l.return)),d&4){var y=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Si]||y[Ut]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),An(y,d,l),y[Ut]=i,tn(y),d=y;break e;case"link":var _=J1("link","href",g).get(d+(l.href||""));if(_){for(var R=0;R<_.length;R++)if(y=_[R],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(R,1);break t}}y=g.createElement(d),An(y,d,l),g.head.appendChild(y);break;case"meta":if(_=J1("meta","content",g).get(d+(l.content||""))){for(R=0;R<_.length;R++)if(y=_[R],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(R,1);break t}}y=g.createElement(d),An(y,d,l),g.head.appendChild(y);break;default:throw Error(s(468,d))}y[Ut]=i,tn(y),d=y}i.stateNode=d}else e_(g,i.type,i.stateNode);else i.stateNode=X1(g,d,i.memoizedProps);else y!==d?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,d===null?e_(g,i.type,i.stateNode):X1(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&cg(i,i.memoizedProps,l.memoizedProps)}break;case 27:is(r,i),rs(i),d&512&&(on||l===null||Bi(l,l.return)),l!==null&&d&4&&cg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(is(r,i),rs(i),d&512&&(on||l===null||Bi(l,l.return)),i.flags&32){g=i.stateNode;try{ns(g,"")}catch(we){ft(i,i.return,we)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,cg(i,g,l!==null?l.memoizedProps:g)),d&1024&&(hg=!0);break;case 6:if(is(r,i),rs(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(we){ft(i,i.return,we)}}break;case 3:if(Zh=null,g=ui,ui=Gh(r.containerInfo),is(r,i),ui=g,rs(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Bl(r.containerInfo)}catch(we){ft(i,i.return,we)}hg&&(hg=!1,e1(i));break;case 4:d=ui,ui=Gh(i.stateNode.containerInfo),is(r,i),rs(i),ui=d;break;case 12:is(r,i),rs(i);break;case 31:is(r,i),rs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Rh(i,d)));break;case 13:is(r,i),rs(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Dh=Tn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Rh(i,d)));break;case 22:g=i.memoizedState!==null;var H=l!==null&&l.memoizedState!==null,W=br,ie=on;if(br=W||g,on=ie||H,is(r,i),on=ie,br=W,rs(i),d&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||H||br||on||_o(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){H=l=r;try{if(y=H.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=H.stateNode;var oe=H.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;R.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(we){ft(H,H.return,we)}}}else if(r.tag===6){if(l===null){H=r;try{H.stateNode.nodeValue=g?"":H.memoizedProps}catch(we){ft(H,H.return,we)}}}else if(r.tag===18){if(l===null){H=r;try{var ne=H.stateNode;g?H1(ne,!0):H1(H.stateNode,!1)}catch(we){ft(H,H.return,we)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Rh(i,l))));break;case 19:is(r,i),rs(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Rh(i,d)));break;case 30:break;case 21:break;default:is(r,i),rs(i)}}function rs(i){var r=i.flags;if(r&2){try{for(var l,d=i.return;d!==null;){if($w(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,y=ug(i);Ch(i,y,g);break;case 5:var _=l.stateNode;l.flags&32&&(ns(_,""),l.flags&=-33);var R=ug(i);Ch(i,R,_);break;case 3:case 4:var H=l.stateNode.containerInfo,W=ug(i);dg(i,W,H);break;default:throw Error(s(161))}}catch(ie){ft(i,i.return,ie)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function e1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;e1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function _r(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Zw(i,r.alternate,r),r=r.sibling}function _o(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:da(4,r,r.return),_o(r);break;case 1:Bi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Hw(r,r.return,l),_o(r);break;case 27:Tu(r.stateNode);case 26:case 5:Bi(r,r.return),_o(r);break;case 22:r.memoizedState===null&&_o(r);break;case 30:_o(r);break;default:_o(r)}i=i.sibling}}function Tr(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,g=i,y=r,_=y.flags;switch(y.tag){case 0:case 11:case 15:Tr(g,y,l),fu(4,y);break;case 1:if(Tr(g,y,l),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(W){ft(d,d.return,W)}if(d=y,g=d.updateQueue,g!==null){var R=d.stateNode;try{var H=g.shared.hiddenCallbacks;if(H!==null)for(g.shared.hiddenCallbacks=null,g=0;g<H.length;g++)Cb(H[g],R)}catch(W){ft(d,d.return,W)}}l&&_&64&&Fw(y),mu(y,y.return);break;case 27:Gw(y);case 26:case 5:Tr(g,y,l),l&&d===null&&_&4&&qw(y),mu(y,y.return);break;case 12:Tr(g,y,l);break;case 31:Tr(g,y,l),l&&_&4&&Ww(g,y);break;case 13:Tr(g,y,l),l&&_&4&&Xw(g,y);break;case 22:y.memoizedState===null&&Tr(g,y,l),mu(y,y.return);break;case 30:break;default:Tr(g,y,l)}r=r.sibling}}function fg(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&eu(l))}function mg(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&eu(i))}function di(i,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t1(i,r,l,d),r=r.sibling}function t1(i,r,l,d){var g=r.flags;switch(r.tag){case 0:case 11:case 15:di(i,r,l,d),g&2048&&fu(9,r);break;case 1:di(i,r,l,d);break;case 3:di(i,r,l,d),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&eu(i)));break;case 12:if(g&2048){di(i,r,l,d),i=r.stateNode;try{var y=r.memoizedProps,_=y.id,R=y.onPostCommit;typeof R=="function"&&R(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(H){ft(r,r.return,H)}}else di(i,r,l,d);break;case 31:di(i,r,l,d);break;case 13:di(i,r,l,d);break;case 23:break;case 22:y=r.stateNode,_=r.alternate,r.memoizedState!==null?y._visibility&2?di(i,r,l,d):pu(i,r):y._visibility&2?di(i,r,l,d):(y._visibility|=2,Il(i,r,l,d,(r.subtreeFlags&10256)!==0||!1)),g&2048&&fg(_,r);break;case 24:di(i,r,l,d),g&2048&&mg(r.alternate,r);break;default:di(i,r,l,d)}}function Il(i,r,l,d,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var y=i,_=r,R=l,H=d,W=_.flags;switch(_.tag){case 0:case 11:case 15:Il(y,_,R,H,g),fu(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?Il(y,_,R,H,g):pu(y,_):(ie._visibility|=2,Il(y,_,R,H,g)),g&&W&2048&&fg(_.alternate,_);break;case 24:Il(y,_,R,H,g),g&&W&2048&&mg(_.alternate,_);break;default:Il(y,_,R,H,g)}r=r.sibling}}function pu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,d=r,g=d.flags;switch(d.tag){case 22:pu(l,d),g&2048&&fg(d.alternate,d);break;case 24:pu(l,d),g&2048&&mg(d.alternate,d);break;default:pu(l,d)}r=r.sibling}}var gu=8192;function Cl(i,r,l){if(i.subtreeFlags&gu)for(i=i.child;i!==null;)n1(i,r,l),i=i.sibling}function n1(i,r,l){switch(i.tag){case 26:Cl(i,r,l),i.flags&gu&&i.memoizedState!==null&&FC(l,ui,i.memoizedState,i.memoizedProps);break;case 5:Cl(i,r,l);break;case 3:case 4:var d=ui;ui=Gh(i.stateNode.containerInfo),Cl(i,r,l),ui=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=gu,gu=16777216,Cl(i,r,l),gu=d):Cl(i,r,l));break;default:Cl(i,r,l)}}function s1(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function yu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];vn=d,r1(d,i)}s1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)i1(i),i=i.sibling}function i1(i){switch(i.tag){case 0:case 11:case 15:yu(i),i.flags&2048&&da(9,i,i.return);break;case 3:yu(i);break;case 12:yu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Ph(i)):yu(i);break;default:yu(i)}}function Ph(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];vn=d,r1(d,i)}s1(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:da(8,r,r.return),Ph(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Ph(r));break;default:Ph(r)}i=i.sibling}}function r1(i,r){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:da(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:eu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,vn=d;else e:for(l=i;vn!==null;){d=vn;var g=d.sibling,y=d.return;if(Kw(d),d===l){vn=null;break e}if(g!==null){g.return=y,vn=g;break e}vn=y}}}var sC={getCacheForType:function(i){var r=jn(sn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return jn(sn).controller.signal}},iC=typeof WeakMap=="function"?WeakMap:Map,ot=0,vt=null,$e=null,Ke=0,ht=0,js=null,ha=!1,Rl=!1,pg=!1,Nr=0,Bt=0,fa=0,To=0,gg=0,Ss=0,Pl=0,xu=null,as=null,yg=!1,Dh=0,a1=0,Mh=1/0,Vh=null,ma=null,mn=0,pa=null,Dl=null,Er=0,xg=0,vg=null,o1=null,vu=0,bg=null;function As(){return(ot&2)!==0&&Ke!==0?Ke&-Ke:Y.T!==null?jg():gn()}function l1(){if(Ss===0)if((Ke&536870912)===0||tt){var i=Ni;Ni<<=1,(Ni&3932160)===0&&(Ni=262144),Ss=i}else Ss=536870912;return i=Ns.current,i!==null&&(i.flags|=32),Ss}function os(i,r,l){(i===vt&&(ht===2||ht===9)||i.cancelPendingCommit!==null)&&(Ml(i,0),ga(i,Ke,Ss,!1)),et(i,l),((ot&2)===0||i!==vt)&&(i===vt&&((ot&2)===0&&(To|=l),Bt===4&&ga(i,Ke,Ss,!1)),Fi(i))}function c1(i,r,l){if((ot&6)!==0)throw Error(s(327));var d=!l&&(r&127)===0&&(r&i.expiredLanes)===0||ue(i,r),g=d?oC(i,r):_g(i,r,!0),y=d;do{if(g===0){Rl&&!d&&ga(i,r,0,!1);break}else{if(l=i.current.alternate,y&&!rC(l)){g=_g(i,r,!1),y=!1;continue}if(g===2){if(y=r,i.errorRecoveryDisabledLanes&y)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var R=i;g=xu;var H=R.current.memoizedState.isDehydrated;if(H&&(Ml(R,_).flags|=256),_=_g(R,_,!1),_!==2){if(pg&&!H){R.errorRecoveryDisabledLanes|=y,To|=y,g=4;break e}y=as,as=g,y!==null&&(as===null?as=y:as.push.apply(as,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){Ml(i,0),ga(i,r,0,!0);break}e:{switch(d=i,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ga(d,r,Ss,!ha);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=Dh+300-Tn(),10<g)){if(ga(d,r,Ss,!ha),ys(d,0,!0)!==0)break e;Er=r,d.timeoutHandle=z1(u1.bind(null,d,l,as,Vh,yg,r,Ss,To,Pl,ha,y,"Throttled",-0,0),g);break e}u1(d,l,as,Vh,yg,r,Ss,To,Pl,ha,y,null,-0,0)}}break}while(!0);Fi(i)}function u1(i,r,l,d,g,y,_,R,H,W,ie,oe,X,ne){if(i.timeoutHandle=-1,oe=r.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},n1(r,y,oe);var we=(y&62914560)===y?Dh-Tn():(y&4194048)===y?a1-Tn():0;if(we=HC(oe,we),we!==null){Er=y,i.cancelPendingCommit=we(x1.bind(null,i,r,y,l,d,g,_,R,H,ie,oe,null,X,ne)),ga(i,y,_,!W);return}}x1(i,r,y,l,d,g,_,R,H)}function rC(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],y=g.getSnapshot;g=g.value;try{if(!_s(y(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ga(i,r,l,d){r&=~gg,r&=~To,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var g=r;0<g;){var y=31-Dt(g),_=1<<y;d[y]=-1,g&=~_}l!==0&&jt(i,l,r)}function Oh(){return(ot&6)===0?(bu(0),!1):!0}function wg(){if($e!==null){if(ht===0)var i=$e.return;else i=$e,mr=mo=null,Op(i),El=null,nu=0,i=$e;for(;i!==null;)Bw(i.alternate,i),i=i.return;$e=null}}function Ml(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,EC(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Er=0,wg(),vt=i,$e=l=hr(i.current,null),Ke=r,ht=0,js=null,ha=!1,Rl=ue(i,r),pg=!1,Pl=Ss=gg=To=fa=Bt=0,as=xu=null,yg=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var g=31-Dt(d),y=1<<g;r|=i[g],d&=~y}return Nr=r,ih(),l}function d1(i,r){He=null,Y.H=uu,r===Nl||r===hh?(r=Sb(),ht=3):r===Ep?(r=Sb(),ht=4):ht=r===Jp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,js=r,$e===null&&(Bt=1,jh(i,zs(r,i.current)))}function h1(){var i=Ns.current;return i===null?!0:(Ke&4194048)===Ke?qs===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?i===qs:!1}function f1(){var i=Y.H;return Y.H=uu,i===null?uu:i}function m1(){var i=Y.A;return Y.A=sC,i}function Lh(){Bt=4,ha||(Ke&4194048)!==Ke&&Ns.current!==null||(Rl=!0),(fa&134217727)===0&&(To&134217727)===0||vt===null||ga(vt,Ke,Ss,!1)}function _g(i,r,l){var d=ot;ot|=2;var g=f1(),y=m1();(vt!==i||Ke!==r)&&(Vh=null,Ml(i,r)),r=!1;var _=Bt;e:do try{if(ht!==0&&$e!==null){var R=$e,H=js;switch(ht){case 8:wg(),_=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(r=!0);var W=ht;if(ht=0,js=null,Vl(i,R,H,W),l&&Rl){_=0;break e}break;default:W=ht,ht=0,js=null,Vl(i,R,H,W)}}aC(),_=Bt;break}catch(ie){d1(i,ie)}while(!0);return r&&i.shellSuspendCounter++,mr=mo=null,ot=d,Y.H=g,Y.A=y,$e===null&&(vt=null,Ke=0,ih()),_}function aC(){for(;$e!==null;)p1($e)}function oC(i,r){var l=ot;ot|=2;var d=f1(),g=m1();vt!==i||Ke!==r?(Vh=null,Mh=Tn()+500,Ml(i,r)):Rl=ue(i,r);e:do try{if(ht!==0&&$e!==null){r=$e;var y=js;t:switch(ht){case 1:ht=0,js=null,Vl(i,r,y,1);break;case 2:case 9:if(Eb(y)){ht=0,js=null,g1(r);break}r=function(){ht!==2&&ht!==9||vt!==i||(ht=7),Fi(i)},y.then(r,r);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Eb(y)?(ht=0,js=null,g1(r)):(ht=0,js=null,Vl(i,r,y,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var R=$e;if(_?t_(_):R.stateNode.complete){ht=0,js=null;var H=R.sibling;if(H!==null)$e=H;else{var W=R.return;W!==null?($e=W,Uh(W)):$e=null}break t}}ht=0,js=null,Vl(i,r,y,5);break;case 6:ht=0,js=null,Vl(i,r,y,6);break;case 8:wg(),Bt=6;break e;default:throw Error(s(462))}}lC();break}catch(ie){d1(i,ie)}while(!0);return mr=mo=null,Y.H=d,Y.A=g,ot=l,$e!==null?0:(vt=null,Ke=0,ih(),Bt)}function lC(){for(;$e!==null&&!Rc();)p1($e)}function p1(i){var r=Uw(i.alternate,i,Nr);i.memoizedProps=i.pendingProps,r===null?Uh(i):$e=r}function g1(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=Pw(l,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=Pw(l,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:Op(r);default:Bw(l,r),r=$e=mb(r,Nr),r=Uw(l,r,Nr)}i.memoizedProps=i.pendingProps,r===null?Uh(i):$e=r}function Vl(i,r,l,d){mr=mo=null,Op(r),El=null,nu=0;var g=r.return;try{if(QI(i,g,r,l,Ke)){Bt=1,jh(i,zs(l,i.current)),$e=null;return}}catch(y){if(g!==null)throw $e=g,y;Bt=1,jh(i,zs(l,i.current)),$e=null;return}r.flags&32768?(tt||d===1?i=!0:Rl||(Ke&536870912)!==0?i=!1:(ha=i=!0,(d===2||d===9||d===3||d===6)&&(d=Ns.current,d!==null&&d.tag===13&&(d.flags|=16384))),y1(r,i)):Uh(r)}function Uh(i){var r=i;do{if((r.flags&32768)!==0){y1(r,ha);return}i=r.return;var l=JI(r.alternate,r,Nr);if(l!==null){$e=l;return}if(r=r.sibling,r!==null){$e=r;return}$e=r=i}while(r!==null);Bt===0&&(Bt=5)}function y1(i,r){do{var l=eC(i.alternate,i);if(l!==null){l.flags&=32767,$e=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){$e=i;return}$e=i=l}while(i!==null);Bt=6,$e=null}function x1(i,r,l,d,g,y,_,R,H){i.cancelPendingCommit=null;do zh();while(mn!==0);if((ot&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(y=r.lanes|r.childLanes,y|=up,Ze(i,l,y,_,R,H),i===vt&&($e=vt=null,Ke=0),Dl=r,pa=i,Er=l,xg=y,vg=g,o1=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hC(ms,function(){return T1(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null,g=se.p,se.p=2,_=ot,ot|=4;try{tC(i,r,l)}finally{ot=_,se.p=g,Y.T=d}}mn=1,v1(),b1(),w1()}}function v1(){if(mn===1){mn=0;var i=pa,r=Dl,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var d=se.p;se.p=2;var g=ot;ot|=4;try{Jw(r,i);var y=Dg,_=rb(i.containerInfo),R=y.focusedElem,H=y.selectionRange;if(_!==R&&R&&R.ownerDocument&&ib(R.ownerDocument.documentElement,R)){if(H!==null&&rp(R)){var W=H.start,ie=H.end;if(ie===void 0&&(ie=W),"selectionStart"in R)R.selectionStart=W,R.selectionEnd=Math.min(ie,R.value.length);else{var oe=R.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var ne=X.getSelection(),we=R.textContent.length,Ce=Math.min(H.start,we),yt=H.end===void 0?Ce:Math.min(H.end,we);!ne.extend&&Ce>yt&&(_=yt,yt=Ce,Ce=_);var G=sb(R,Ce),$=sb(R,yt);if(G&&$&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var Q=oe.createRange();Q.setStart(G.node,G.offset),ne.removeAllRanges(),Ce>yt?(ne.addRange(Q),ne.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ne.addRange(Q))}}}}for(oe=[],ne=R;ne=ne.parentNode;)ne.nodeType===1&&oe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<oe.length;R++){var re=oe[R];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Xh=!!Pg,Dg=Pg=null}finally{ot=g,se.p=d,Y.T=l}}i.current=r,mn=2}}function b1(){if(mn===2){mn=0;var i=pa,r=Dl,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var d=se.p;se.p=2;var g=ot;ot|=4;try{Zw(i,r.alternate,r)}finally{ot=g,se.p=d,Y.T=l}}mn=3}}function w1(){if(mn===4||mn===3){mn=0,qr();var i=pa,r=Dl,l=Er,d=o1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?mn=5:(mn=0,Dl=pa=null,_1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ma=null),xs(l),r=r.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ps,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=Y.T,g=se.p,se.p=2,Y.T=null;try{for(var y=i.onRecoverableError,_=0;_<d.length;_++){var R=d[_];y(R.value,{componentStack:R.stack})}}finally{Y.T=r,se.p=g}}(Er&3)!==0&&zh(),Fi(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===bg?vu++:(vu=0,bg=i):vu=0,bu(0)}}function _1(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,eu(r)))}function zh(){return v1(),b1(),w1(),T1()}function T1(){if(mn!==5)return!1;var i=pa,r=xg;xg=0;var l=xs(Er),d=Y.T,g=se.p;try{se.p=32>l?32:l,Y.T=null,l=vg,vg=null;var y=pa,_=Er;if(mn=0,Dl=pa=null,Er=0,(ot&6)!==0)throw Error(s(331));var R=ot;if(ot|=4,i1(y.current),t1(y,y.current,_,l),ot=R,bu(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ps,y)}catch{}return!0}finally{se.p=g,Y.T=d,_1(i,r)}}function N1(i,r,l){r=zs(l,r),r=Xp(i.stateNode,r,2),i=la(i,r,2),i!==null&&(et(i,2),Fi(i))}function ft(i,r,l){if(i.tag===3)N1(i,i,l);else for(;r!==null;){if(r.tag===3){N1(r,i,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ma===null||!ma.has(d))){i=zs(l,i),l=Ew(2),d=la(r,l,2),d!==null&&(jw(l,d,r,i),et(d,2),Fi(d));break}}r=r.return}}function Tg(i,r,l){var d=i.pingCache;if(d===null){d=i.pingCache=new iC;var g=new Set;d.set(r,g)}else g=d.get(r),g===void 0&&(g=new Set,d.set(r,g));g.has(l)||(pg=!0,g.add(l),i=cC.bind(null,i,r,l),r.then(i,i))}function cC(i,r,l){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,vt===i&&(Ke&l)===l&&(Bt===4||Bt===3&&(Ke&62914560)===Ke&&300>Tn()-Dh?(ot&2)===0&&Ml(i,0):gg|=l,Pl===Ke&&(Pl=0)),Fi(i)}function E1(i,r){r===0&&(r=Te()),i=uo(i,r),i!==null&&(et(i,r),Fi(i))}function uC(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),E1(i,l)}function dC(i,r){var l=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),E1(i,l)}function hC(i,r){return en(i,r)}var Bh=null,Ol=null,Ng=!1,Fh=!1,Eg=!1,ya=0;function Fi(i){i!==Ol&&i.next===null&&(Ol===null?Bh=Ol=i:Ol=Ol.next=i),Fh=!0,Ng||(Ng=!0,mC())}function bu(i,r){if(!Eg&&Fh){Eg=!0;do for(var l=!1,d=Bh;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var _=d.suspendedLanes,R=d.pingedLanes;y=(1<<31-Dt(42|i)+1)-1,y&=g&~(_&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,k1(d,y))}else y=Ke,y=ys(d,d===vt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||ue(d,y)||(l=!0,k1(d,y));d=d.next}while(l);Eg=!1}}function fC(){j1()}function j1(){Fh=Ng=!1;var i=0;ya!==0&&NC()&&(i=ya);for(var r=Tn(),l=null,d=Bh;d!==null;){var g=d.next,y=S1(d,r);y===0?(d.next=null,l===null?Bh=g:l.next=g,g===null&&(Ol=l)):(l=d,(i!==0||(y&3)!==0)&&(Fh=!0)),d=g}mn!==0&&mn!==5||bu(i),ya!==0&&(ya=0)}function S1(i,r){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var _=31-Dt(y),R=1<<_,H=g[_];H===-1?((R&l)===0||(R&d)!==0)&&(g[_]=xe(R,r)):H<=r&&(i.expiredLanes|=R),y&=~R}if(r=vt,l=Ke,l=ys(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===r&&(ht===2||ht===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Ot(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||ue(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(d!==null&&Ot(d),xs(l)){case 2:case 8:l=Wa;break;case 32:l=ms;break;case 268435456:l=Jo;break;default:l=ms}return d=A1.bind(null,i),l=en(l,d),i.callbackPriority=r,i.callbackNode=l,r}return d!==null&&d!==null&&Ot(d),i.callbackPriority=2,i.callbackNode=null,2}function A1(i,r){if(mn!==0&&mn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(zh()&&i.callbackNode!==l)return null;var d=Ke;return d=ys(i,i===vt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(c1(i,d,r),S1(i,Tn()),i.callbackNode!=null&&i.callbackNode===l?A1.bind(null,i):null)}function k1(i,r){if(zh())return null;c1(i,r,!0)}function mC(){jC(function(){(ot&6)!==0?en($r,fC):j1()})}function jg(){if(ya===0){var i=_l;i===0&&(i=gs,gs<<=1,(gs&261888)===0&&(gs=256)),ya=i}return ya}function I1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ol(""+i)}function C1(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function pC(i,r,l,d,g){if(r==="submit"&&l&&l.stateNode===g){var y=I1((g[yn]||null).action),_=d.submitter;_&&(r=(r=_[yn]||null)?I1(r.formAction):_.getAttribute("formAction"),r!==null&&(y=r,_=null));var R=new Mi("action","action",null,d,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ya!==0){var H=_?C1(g,_):new FormData(g);Gp(l,{pending:!0,data:H,method:g.method,action:y},null,H)}}else typeof y=="function"&&(R.preventDefault(),H=_?C1(g,_):new FormData(g),Gp(l,{pending:!0,data:H,method:g.method,action:y},y,H))},currentTarget:g}]})}}for(var Sg=0;Sg<cp.length;Sg++){var Ag=cp[Sg],gC=Ag.toLowerCase(),yC=Ag[0].toUpperCase()+Ag.slice(1);ci(gC,"on"+yC)}ci(lb,"onAnimationEnd"),ci(cb,"onAnimationIteration"),ci(ub,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(PI,"onTransitionRun"),ci(DI,"onTransitionStart"),ci(MI,"onTransitionCancel"),ci(db,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function R1(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var y=void 0;if(r)for(var _=d.length-1;0<=_;_--){var R=d[_],H=R.instance,W=R.currentTarget;if(R=R.listener,H!==y&&g.isPropagationStopped())break e;y=R,g.currentTarget=W;try{y(g)}catch(ie){sh(ie)}g.currentTarget=null,y=H}else for(_=0;_<d.length;_++){if(R=d[_],H=R.instance,W=R.currentTarget,R=R.listener,H!==y&&g.isPropagationStopped())break e;y=R,g.currentTarget=W;try{y(g)}catch(ie){sh(ie)}g.currentTarget=null,y=H}}}}function Ge(i,r){var l=r[nl];l===void 0&&(l=r[nl]=new Set);var d=i+"__bubble";l.has(d)||(P1(r,i,2,!1),l.add(d))}function kg(i,r,l){var d=0;r&&(d|=4),P1(l,i,d,r)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function Ig(i){if(!i[Hh]){i[Hh]=!0,Pc.forEach(function(l){l!=="selectionchange"&&(xC.has(l)||kg(l,!1,i),kg(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Hh]||(r[Hh]=!0,kg("selectionchange",!1,r))}}function P1(i,r,l,d){switch(l_(r)){case 2:var g=GC;break;case 8:g=YC;break;default:g=$g}l=g.bind(null,r,l,i),g=void 0,!no||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(r,l,{capture:!0,passive:g}):i.addEventListener(r,l,!0):g!==void 0?i.addEventListener(r,l,{passive:g}):i.addEventListener(r,l,!1)}function Cg(i,r,l,d,g){var y=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var _=d.tag;if(_===3||_===4){var R=d.stateNode.containerInfo;if(R===g)break;if(_===4)for(_=d.return;_!==null;){var H=_.tag;if((H===3||H===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;R!==null;){if(_=Ai(R),_===null)return;if(H=_.tag,H===5||H===6||H===26||H===27){d=y=_;continue e}R=R.parentNode}}d=d.return}Xr(function(){var W=y,ie=Vs(l),oe=[];e:{var X=hb.get(i);if(X!==void 0){var ne=Mi,we=i;switch(i){case"keypress":if(io(l)===0)break e;case"keydown":case"keyup":ne=eh;break;case"focusin":we="focus",ne=ao;break;case"focusout":we="blur",ne=ao;break;case"beforeblur":case"afterblur":ne=ao;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=$d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=b;break;case lb:case cb:case ub:ne=Yd;break;case db:ne=D;break;case"scroll":case"scrollend":ne=$c;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=dr;break;case"toggle":case"beforetoggle":ne=Fe}var Ce=(r&4)!==0,yt=!Ce&&(i==="scroll"||i==="scrollend"),G=Ce?X!==null?X+"Capture":null:X;Ce=[];for(var $=W,Q;$!==null;){var re=$;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||G===null||(re=ri($,G),re!=null&&Ce.push(_u($,re,Q))),yt)break;$=$.return}0<Ce.length&&(X=new ne(X,we,null,l,ie),oe.push({event:X,listeners:Ce}))}}if((r&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",ne=i==="mouseout"||i==="pointerout",X&&l!==Fc&&(we=l.relatedTarget||l.fromElement)&&(Ai(we)||we[ji]))break e;if((ne||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,ne?(we=l.relatedTarget||l.toElement,ne=W,we=we?Ai(we):null,we!==null&&(yt=c(we),Ce=we.tag,we!==yt||Ce!==5&&Ce!==27&&Ce!==6)&&(we=null)):(ne=null,we=W),ne!==we)){if(Ce=Gc,re="onMouseLeave",G="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=dr,re="onPointerLeave",G="onPointerEnter",$="pointer"),yt=ne==null?X:bs(ne),Q=we==null?X:bs(we),X=new Ce(re,$+"leave",ne,l,ie),X.target=yt,X.relatedTarget=Q,re=null,Ai(ie)===W&&(Ce=new Ce(G,$+"enter",we,l,ie),Ce.target=Q,Ce.relatedTarget=yt,re=Ce),yt=re,ne&&we)t:{for(Ce=vC,G=ne,$=we,Q=0,re=G;re;re=Ce(re))Q++;re=0;for(var je=$;je;je=Ce(je))re++;for(;0<Q-re;)G=Ce(G),Q--;for(;0<re-Q;)$=Ce($),re--;for(;Q--;){if(G===$||$!==null&&G===$.alternate){Ce=G;break t}G=Ce(G),$=Ce($)}Ce=null}else Ce=null;ne!==null&&D1(oe,X,ne,Ce,!1),we!==null&&yt!==null&&D1(oe,yt,we,Ce,!0)}}e:{if(X=W?bs(W):window,ne=X.nodeName&&X.nodeName.toLowerCase(),ne==="select"||ne==="input"&&X.type==="file")var st=Wv;else if(Kv(X))if(Xv)st=II;else{st=AI;var Ne=SI}else ne=X.nodeName,!ne||ne.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?W&&al(W.elementType)&&(st=Wv):st=kI;if(st&&(st=st(i,W))){Qv(oe,st,l,ie);break e}Ne&&Ne(i,X,W),i==="focusout"&&W&&X.type==="number"&&W.memoizedProps.value!=null&&Uc(X,"number",X.value)}switch(Ne=W?bs(W):window,i){case"focusin":(Kv(Ne)||Ne.contentEditable==="true")&&(ml=Ne,ap=W,Wc=null);break;case"focusout":Wc=ap=ml=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,ab(oe,l,ie);break;case"selectionchange":if(RI)break;case"keydown":case"keyup":ab(oe,l,ie)}var qe;if(at)e:{switch(i){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else fl?oo(i,l)&&(Qe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Qe="onCompositionStart");Qe&&(Li&&l.locale!=="ko"&&(fl||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&fl&&(qe=qc()):(Di=ie,Hc="value"in Di?Di.value:Di.textContent,fl=!0)),Ne=qh(W,Qe),0<Ne.length&&(Qe=new Oi(Qe,i,null,l,ie),oe.push({event:Qe,listeners:Ne}),qe?Qe.data=qe:(qe=hl(l),qe!==null&&(Qe.data=qe)))),(qe=Ls?TI(i,l):NI(i,l))&&(Qe=qh(W,"onBeforeInput"),0<Qe.length&&(Ne=new Oi("onBeforeInput","beforeinput",null,l,ie),oe.push({event:Ne,listeners:Qe}),Ne.data=qe)),pC(oe,i,W,l,ie)}R1(oe,r)})}function _u(i,r,l){return{instance:i,listener:r,currentTarget:l}}function qh(i,r){for(var l=r+"Capture",d=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ri(i,l),g!=null&&d.unshift(_u(i,g,y)),g=ri(i,r),g!=null&&d.push(_u(i,g,y))),i.tag===3)return d;i=i.return}return[]}function vC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function D1(i,r,l,d,g){for(var y=r._reactName,_=[];l!==null&&l!==d;){var R=l,H=R.alternate,W=R.stateNode;if(R=R.tag,H!==null&&H===d)break;R!==5&&R!==26&&R!==27||W===null||(H=W,g?(W=ri(l,y),W!=null&&_.unshift(_u(l,W,H))):g||(W=ri(l,y),W!=null&&_.push(_u(l,W,H)))),l=l.return}_.length!==0&&i.push({event:r,listeners:_})}var bC=/\r\n?/g,wC=/\u0000|\uFFFD/g;function M1(i){return(typeof i=="string"?i:""+i).replace(bC,`
`).replace(wC,"")}function V1(i,r){return r=M1(r),M1(i)===r}function gt(i,r,l,d,g,y){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||ns(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&ns(i,""+d);break;case"className":ws(i,"class",d);break;case"tabIndex":ws(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(i,l,d);break;case"style":Bc(i,d,y);break;case"data":if(r!=="object"){ws(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=ol(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(r!=="input"&&gt(i,r,"name",g.name,g,null),gt(i,r,"formEncType",g.formEncType,g,null),gt(i,r,"formMethod",g.formMethod,g,null),gt(i,r,"formTarget",g.formTarget,g,null)):(gt(i,r,"encType",g.encType,g,null),gt(i,r,"method",g.method,g,null),gt(i,r,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=ol(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=ii);break;case"onScroll":d!=null&&Ge("scroll",i);break;case"onScrollEnd":d!=null&&Ge("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=ol(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":Ge("beforetoggle",i),Ge("toggle",i),il(i,"popover",d);break;case"xlinkActuate":nn(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":nn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":nn(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":nn(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":nn(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":nn(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":nn(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":nn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":nn(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":il(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qd.get(l)||l,il(i,l,d))}}function Rg(i,r,l,d,g,y){switch(l){case"style":Bc(i,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof d=="string"?ns(i,d):(typeof d=="number"||typeof d=="bigint")&&ns(i,""+d);break;case"onScroll":d!=null&&Ge("scroll",i);break;case"onScrollEnd":d!=null&&Ge("scrollend",i);break;case"onClick":d!=null&&(i.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),y=i[yn]||null,y=y!=null?y[l]:null,typeof y=="function"&&i.removeEventListener(r,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,d,g);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):il(i,l,d)}}}function An(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",i),Ge("load",i);var d=!1,g=!1,y;for(y in l)if(l.hasOwnProperty(y)){var _=l[y];if(_!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:gt(i,r,y,_,l,null)}}g&&gt(i,r,"srcSet",l.srcSet,l,null),d&&gt(i,r,"src",l.src,l,null);return;case"input":Ge("invalid",i);var R=y=_=g=null,H=null,W=null;for(d in l)if(l.hasOwnProperty(d)){var ie=l[d];if(ie!=null)switch(d){case"name":g=ie;break;case"type":_=ie;break;case"checked":H=ie;break;case"defaultChecked":W=ie;break;case"value":y=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:gt(i,r,d,ie,l,null)}}Bd(i,y,R,H,W,_,g,!1);return;case"select":Ge("invalid",i),d=_=y=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":y=R;break;case"defaultValue":_=R;break;case"multiple":d=R;default:gt(i,r,g,R,l,null)}r=y,l=_,i.multiple=!!d,r!=null?Zr(i,!!d,r,!1):l!=null&&Zr(i,!!d,l,!0);return;case"textarea":Ge("invalid",i),y=g=d=null;for(_ in l)if(l.hasOwnProperty(_)&&(R=l[_],R!=null))switch(_){case"value":d=R;break;case"defaultValue":g=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:gt(i,r,_,R,l,null)}Kr(i,d,g,y);return;case"option":for(H in l)if(l.hasOwnProperty(H)&&(d=l[H],d!=null))switch(H){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:gt(i,r,H,d,l,null)}return;case"dialog":Ge("beforetoggle",i),Ge("toggle",i),Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":Ge("load",i);break;case"video":case"audio":for(d=0;d<wu.length;d++)Ge(wu[d],i);break;case"image":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"embed":case"source":case"link":Ge("error",i),Ge("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(d=l[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:gt(i,r,W,d,l,null)}return;default:if(al(r)){for(ie in l)l.hasOwnProperty(ie)&&(d=l[ie],d!==void 0&&Rg(i,r,ie,d,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(d=l[R],d!=null&&gt(i,r,R,d,l,null))}function _C(i,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,R=null,H=null,W=null,ie=null;for(ne in l){var oe=l[ne];if(l.hasOwnProperty(ne)&&oe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":H=oe;default:d.hasOwnProperty(ne)||gt(i,r,ne,null,d,oe)}}for(var X in d){var ne=d[X];if(oe=l[X],d.hasOwnProperty(X)&&(ne!=null||oe!=null))switch(X){case"type":y=ne;break;case"name":g=ne;break;case"checked":W=ne;break;case"defaultChecked":ie=ne;break;case"value":_=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,r));break;default:ne!==oe&&gt(i,r,X,ne,d,oe)}}rl(i,_,R,H,W,ie,y,g);return;case"select":ne=_=R=X=null;for(y in l)if(H=l[y],l.hasOwnProperty(y)&&H!=null)switch(y){case"value":break;case"multiple":ne=H;default:d.hasOwnProperty(y)||gt(i,r,y,null,d,H)}for(g in d)if(y=d[g],H=l[g],d.hasOwnProperty(g)&&(y!=null||H!=null))switch(g){case"value":X=y;break;case"defaultValue":R=y;break;case"multiple":_=y;default:y!==H&&gt(i,r,g,y,d,H)}r=R,l=_,d=ne,X!=null?Zr(i,!!l,X,!1):!!d!=!!l&&(r!=null?Zr(i,!!l,r,!0):Zr(i,!!l,l?[]:"",!1));return;case"textarea":ne=X=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:gt(i,r,R,null,d,g)}for(_ in d)if(g=d[_],y=l[_],d.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":X=g;break;case"defaultValue":ne=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&gt(i,r,_,g,d,y)}Fd(i,X,ne);return;case"option":for(var we in l)if(X=l[we],l.hasOwnProperty(we)&&X!=null&&!d.hasOwnProperty(we))switch(we){case"selected":i.selected=!1;break;default:gt(i,r,we,null,d,X)}for(H in d)if(X=d[H],ne=l[H],d.hasOwnProperty(H)&&X!==ne&&(X!=null||ne!=null))switch(H){case"selected":i.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:gt(i,r,H,X,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)X=l[Ce],l.hasOwnProperty(Ce)&&X!=null&&!d.hasOwnProperty(Ce)&&gt(i,r,Ce,null,d,X);for(W in d)if(X=d[W],ne=l[W],d.hasOwnProperty(W)&&X!==ne&&(X!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:gt(i,r,W,X,d,ne)}return;default:if(al(r)){for(var yt in l)X=l[yt],l.hasOwnProperty(yt)&&X!==void 0&&!d.hasOwnProperty(yt)&&Rg(i,r,yt,void 0,d,X);for(ie in d)X=d[ie],ne=l[ie],!d.hasOwnProperty(ie)||X===ne||X===void 0&&ne===void 0||Rg(i,r,ie,X,d,ne);return}}for(var G in l)X=l[G],l.hasOwnProperty(G)&&X!=null&&!d.hasOwnProperty(G)&&gt(i,r,G,null,d,X);for(oe in d)X=d[oe],ne=l[oe],!d.hasOwnProperty(oe)||X===ne||X==null&&ne==null||gt(i,r,oe,X,d,ne)}function O1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],y=g.transferSize,_=g.initiatorType,R=g.duration;if(y&&R&&O1(_)){for(_=0,R=g.responseEnd,d+=1;d<l.length;d++){var H=l[d],W=H.startTime;if(W>R)break;var ie=H.transferSize,oe=H.initiatorType;ie&&O1(oe)&&(H=H.responseEnd,_+=ie*(H<R?1:(R-W)/(H-W)))}if(--d,r+=8*(y+_)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Pg=null,Dg=null;function $h(i){return i.nodeType===9?i:i.ownerDocument}function L1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U1(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Mg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vg=null;function NC(){var i=window.event;return i&&i.type==="popstate"?i===Vg?!1:(Vg=i,!0):(Vg=null,!1)}var z1=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,B1=typeof Promise=="function"?Promise:void 0,jC=typeof queueMicrotask=="function"?queueMicrotask:typeof B1<"u"?function(i){return B1.resolve(null).then(i).catch(SC)}:z1;function SC(i){setTimeout(function(){throw i})}function xa(i){return i==="head"}function F1(i,r){var l=r,d=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){i.removeChild(g),Bl(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Tu(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Tu(l);for(var y=l.firstChild;y;){var _=y.nextSibling,R=y.nodeName;y[Si]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=_}}else l==="body"&&Tu(i.ownerDocument.body);l=g}while(l);Bl(r)}function H1(i,r){var l=i;i=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=d}while(l)}function Og(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Og(l),sl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function AC(i,r,l,d){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Si])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=$s(i.nextSibling),i===null)break}return null}function kC(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=$s(i.nextSibling),i===null))return null;return i}function q1(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=$s(i.nextSibling),i===null))return null;return i}function Lg(i){return i.data==="$?"||i.data==="$~"}function Ug(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function IC(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function $s(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var zg=null;function $1(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return $s(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function G1(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function Y1(i,r,l){switch(r=$h(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);sl(i)}var Gs=new Map,Z1=new Set;function Gh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var jr=se.d;se.d={f:CC,r:RC,D:PC,C:DC,L:MC,m:VC,X:LC,S:OC,M:UC};function CC(){var i=jr.f(),r=Oh();return i||r}function RC(i){var r=Ms(i);r!==null&&r.tag===5&&r.type==="form"?dw(r):jr.r(i)}var Ll=typeof document>"u"?null:document;function K1(i,r,l){var d=Ll;if(d&&typeof r=="string"&&r){var g=ts(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Z1.has(g)||(Z1.add(g),i={rel:i,crossOrigin:l,href:r},d.querySelector(g)===null&&(r=d.createElement("link"),An(r,"link",i),tn(r),d.head.appendChild(r)))}}function PC(i){jr.D(i),K1("dns-prefetch",i,null)}function DC(i,r){jr.C(i,r),K1("preconnect",i,r)}function MC(i,r,l){jr.L(i,r,l);var d=Ll;if(d&&i&&r){var g='link[rel="preload"][as="'+ts(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+ts(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+ts(l.imageSizes)+'"]')):g+='[href="'+ts(i)+'"]';var y=g;switch(r){case"style":y=Ul(i);break;case"script":y=zl(i)}Gs.has(y)||(i=v({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Gs.set(y,i),d.querySelector(g)!==null||r==="style"&&d.querySelector(Nu(y))||r==="script"&&d.querySelector(Eu(y))||(r=d.createElement("link"),An(r,"link",i),tn(r),d.head.appendChild(r)))}}function VC(i,r){jr.m(i,r);var l=Ll;if(l&&i){var d=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+ts(d)+'"][href="'+ts(i)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=zl(i)}if(!Gs.has(y)&&(i=v({rel:"modulepreload",href:i},r),Gs.set(y,i),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Eu(y)))return}d=l.createElement("link"),An(d,"link",i),tn(d),l.head.appendChild(d)}}}function OC(i,r,l){jr.S(i,r,l);var d=Ll;if(d&&i){var g=ki(d).hoistableStyles,y=Ul(i);r=r||"default";var _=g.get(y);if(!_){var R={loading:0,preload:null};if(_=d.querySelector(Nu(y)))R.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Gs.get(y))&&Bg(i,l);var H=_=d.createElement("link");tn(H),An(H,"link",i),H._p=new Promise(function(W,ie){H.onload=W,H.onerror=ie}),H.addEventListener("load",function(){R.loading|=1}),H.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Yh(_,r,d)}_={type:"stylesheet",instance:_,count:1,state:R},g.set(y,_)}}}function LC(i,r){jr.X(i,r);var l=Ll;if(l&&i){var d=ki(l).hoistableScripts,g=zl(i),y=d.get(g);y||(y=l.querySelector(Eu(g)),y||(i=v({src:i,async:!0},r),(r=Gs.get(g))&&Fg(i,r),y=l.createElement("script"),tn(y),An(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function UC(i,r){jr.M(i,r);var l=Ll;if(l&&i){var d=ki(l).hoistableScripts,g=zl(i),y=d.get(g);y||(y=l.querySelector(Eu(g)),y||(i=v({src:i,async:!0,type:"module"},r),(r=Gs.get(g))&&Fg(i,r),y=l.createElement("script"),tn(y),An(y,"link",i),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Q1(i,r,l,d){var g=(g=ce.current)?Gh(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ul(l.href),l=ki(g).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ul(l.href);var y=ki(g).hoistableStyles,_=y.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,_),(y=g.querySelector(Nu(i)))&&!y._p&&(_.instance=y,_.state.loading=5),Gs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gs.set(i,l),y||zC(g,i,l,_.state))),r&&d===null)throw Error(s(528,""));return _}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=zl(l),l=ki(g).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ul(i){return'href="'+ts(i)+'"'}function Nu(i){return'link[rel="stylesheet"]['+i+"]"}function W1(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function zC(i,r,l,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),An(r,"link",l),tn(r),i.head.appendChild(r))}function zl(i){return'[src="'+ts(i)+'"]'}function Eu(i){return"script[async]"+i}function X1(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+ts(l.href)+'"]');if(d)return r.instance=d,tn(d),d;var g=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),tn(d),An(d,"style",g),Yh(d,l.precedence,i),r.instance=d;case"stylesheet":g=Ul(l.href);var y=i.querySelector(Nu(g));if(y)return r.state.loading|=4,r.instance=y,tn(y),y;d=W1(l),(g=Gs.get(g))&&Bg(d,g),y=(i.ownerDocument||i).createElement("link"),tn(y);var _=y;return _._p=new Promise(function(R,H){_.onload=R,_.onerror=H}),An(y,"link",d),r.state.loading|=4,Yh(y,l.precedence,i),r.instance=y;case"script":return y=zl(l.src),(g=i.querySelector(Eu(y)))?(r.instance=g,tn(g),g):(d=l,(g=Gs.get(y))&&(d=v({},l),Fg(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),tn(g),An(g,"link",d),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Yh(d,l.precedence,i));return r.instance}function Yh(i,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,_=0;_<d.length;_++){var R=d[_];if(R.dataset.precedence===r)y=R;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function Bg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Fg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Zh=null;function J1(i,r,l){if(Zh===null){var d=new Map,g=Zh=new Map;g.set(l,d)}else g=Zh,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var y=l[g];if(!(y[Si]||y[Ut]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(r)||"";_=i+_;var R=d.get(_);R?R.push(y):d.set(_,[y])}}return d}function e_(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function BC(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function t_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function FC(i,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Ul(d.href),y=r.querySelector(Nu(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Kh.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=y,tn(y);return}y=r.ownerDocument||r,d=W1(d),(g=Gs.get(g))&&Bg(d,g),y=y.createElement("link"),tn(y);var _=y;_._p=new Promise(function(R,H){_.onload=R,_.onerror=H}),An(y,"link",d),l.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Kh.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var Hg=0;function HC(i,r){return i.stylesheets&&i.count===0&&Wh(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var d=setTimeout(function(){if(i.stylesheets&&Wh(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+r);0<i.imgBytes&&Hg===0&&(Hg=62500*TC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Wh(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Hg?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Qh=null;function Wh(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Qh=new Map,r.forEach(qC,i),Qh=null,Kh.call(i))}function qC(i,r){if(!(r.state.loading&4)){var l=Qh.get(i);if(l)var d=l.get(null);else{l=new Map,Qh.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),d=_)}d&&l.set(null,d)}g=r.instance,_=g.getAttribute("data-precedence"),y=l.get(_)||d,y===d&&l.set(null,g),l.set(_,g),this.count++,d=Kh.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var ju={$$typeof:O,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function $C(i,r,l,d,g,y,_,R,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function n_(i,r,l,d,g,y,_,R,H,W,ie,oe){return i=new $C(i,r,l,_,H,W,ie,oe,R),r=1,y===!0&&(r|=24),y=Ts(3,null,null,r),i.current=y,y.stateNode=i,r=_p(),r.refCount++,i.pooledCache=r,r.refCount++,y.memoizedState={element:d,isDehydrated:l,cache:r},jp(y),i}function s_(i){return i?(i=yl,i):yl}function i_(i,r,l,d,g,y){g=s_(g),d.context===null?d.context=g:d.pendingContext=g,d=oa(r),d.payload={element:l},y=y===void 0?null:y,y!==null&&(d.callback=y),l=la(i,d,r),l!==null&&(os(l,i,r),iu(l,i,r))}function r_(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function qg(i,r){r_(i,r),(i=i.alternate)&&r_(i,r)}function a_(i){if(i.tag===13||i.tag===31){var r=uo(i,67108864);r!==null&&os(r,i,67108864),qg(i,67108864)}}function o_(i){if(i.tag===13||i.tag===31){var r=As();r=lr(r);var l=uo(i,r);l!==null&&os(l,i,r),qg(i,r)}}var Xh=!0;function GC(i,r,l,d){var g=Y.T;Y.T=null;var y=se.p;try{se.p=2,$g(i,r,l,d)}finally{se.p=y,Y.T=g}}function YC(i,r,l,d){var g=Y.T;Y.T=null;var y=se.p;try{se.p=8,$g(i,r,l,d)}finally{se.p=y,Y.T=g}}function $g(i,r,l,d){if(Xh){var g=Gg(d);if(g===null)Cg(i,r,d,Jh,l),c_(i,d);else if(KC(g,i,r,l,d))d.stopPropagation();else if(c_(i,d),r&4&&-1<ZC.indexOf(i)){for(;g!==null;){var y=Ms(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Jn(y.pendingLanes);if(_!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var H=1<<31-Dt(_);R.entanglements[1]|=H,_&=~H}Fi(y),(ot&6)===0&&(Mh=Tn()+500,bu(0))}}break;case 31:case 13:R=uo(y,2),R!==null&&os(R,y,2),Oh(),qg(y,2)}if(y=Gg(d),y===null&&Cg(i,r,d,Jh,l),y===g)break;g=y}g!==null&&d.stopPropagation()}else Cg(i,r,d,null,l)}}function Gg(i){return i=Vs(i),Yg(i)}var Jh=null;function Yg(i){if(Jh=null,i=Ai(i),i!==null){var r=c(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=u(r),i!==null)return i;i=null}else if(l===31){if(i=h(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Jh=i,null}function l_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ti()){case $r:return 2;case Wa:return 8;case ms:case Xo:return 32;case Jo:return 268435456;default:return 32}default:return 32}}var Zg=!1,va=null,ba=null,wa=null,Su=new Map,Au=new Map,_a=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c_(i,r){switch(i){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Su.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(r.pointerId)}}function ku(i,r,l,d,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},r!==null&&(r=Ms(r),r!==null&&a_(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function KC(i,r,l,d,g){switch(r){case"focusin":return va=ku(va,i,r,l,d,g),!0;case"dragenter":return ba=ku(ba,i,r,l,d,g),!0;case"mouseover":return wa=ku(wa,i,r,l,d,g),!0;case"pointerover":var y=g.pointerId;return Su.set(y,ku(Su.get(y)||null,i,r,l,d,g)),!0;case"gotpointercapture":return y=g.pointerId,Au.set(y,ku(Au.get(y)||null,i,r,l,d,g)),!0}return!1}function u_(i){var r=Ai(i.target);if(r!==null){var l=c(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){i.blockedOn=r,vs(i.priority,function(){o_(l)});return}}else if(r===31){if(r=h(l),r!==null){i.blockedOn=r,vs(i.priority,function(){o_(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ef(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Gg(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Fc=d,l.target.dispatchEvent(d),Fc=null}else return r=Ms(l),r!==null&&a_(r),i.blockedOn=l,!1;r.shift()}return!0}function d_(i,r,l){ef(i)&&l.delete(r)}function QC(){Zg=!1,va!==null&&ef(va)&&(va=null),ba!==null&&ef(ba)&&(ba=null),wa!==null&&ef(wa)&&(wa=null),Su.forEach(d_),Au.forEach(d_)}function tf(i,r){i.blockedOn===r&&(i.blockedOn=null,Zg||(Zg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QC)))}var nf=null;function h_(i){nf!==i&&(nf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){nf===i&&(nf=null);for(var r=0;r<i.length;r+=3){var l=i[r],d=i[r+1],g=i[r+2];if(typeof d!="function"){if(Yg(d||l)===null)continue;break}var y=Ms(l);y!==null&&(i.splice(r,3),r-=3,Gp(y,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function Bl(i){function r(H){return tf(H,i)}va!==null&&tf(va,i),ba!==null&&tf(ba,i),wa!==null&&tf(wa,i),Su.forEach(r),Au.forEach(r);for(var l=0;l<_a.length;l++){var d=_a[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<_a.length&&(l=_a[0],l.blockedOn===null);)u_(l),l.blockedOn===null&&_a.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],y=l[d+1],_=g[yn]||null;if(typeof y=="function")_||h_(l);else if(_){var R=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[yn]||null)R=_.formAction;else if(Yg(g)!==null)continue}else R=_.action;typeof R=="function"?l[d+1]=R:(l.splice(d,3),d-=3),h_(l)}}}function f_(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Kg(i){this._internalRoot=i}sf.prototype.render=Kg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,d=As();i_(l,d,i,r,null,null)},sf.prototype.unmount=Kg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;i_(i.current,2,null,i,null,null),Oh(),r[ji]=null}};function sf(i){this._internalRoot=i}sf.prototype.unstable_scheduleHydration=function(i){if(i){var r=gn();i={blockedOn:null,target:i,priority:r};for(var l=0;l<_a.length&&r!==0&&r<_a[l].priority;l++);_a.splice(l,0,i),l===0&&u_(i)}};var m_=e.version;if(m_!=="19.2.0")throw Error(s(527,m_,"19.2.0"));se.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?x(i):null,i=i===null?null:i.stateNode,i};var WC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{ps=rf.inject(WC),fn=rf}catch{}}return Cu.createRoot=function(i,r){if(!a(i))throw Error(s(299));var l=!1,d="",g=ww,y=_w,_=Tw;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=n_(i,1,!1,null,null,l,d,null,g,y,_,f_),i[ji]=r.current,Ig(i),new Kg(r)},Cu.hydrateRoot=function(i,r,l){if(!a(i))throw Error(s(299));var d=!1,g="",y=ww,_=_w,R=Tw,H=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(H=l.formState)),r=n_(i,1,!0,r,l??null,d,g,H,y,_,R,f_),r.context=s_(null),l=r.current,d=As(),d=lr(d),g=oa(d),g.callback=null,la(l,g,d),l=d,r.current.lanes=l,et(r,l),Fi(r),i[ji]=r.current,Ig(i),new sf(r)},Cu.version="19.2.0",Cu}var N_;function c4(){if(N_)return Xg.exports;N_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xg.exports=l4(),Xg.exports}var u4=c4();var E_="popstate";function d4(t={}){function e(s,a){let{pathname:c,search:u,hash:h}=s.location;return U0("",{pathname:c,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:sd(a)}return f4(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Js(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h4(){return Math.random().toString(36).substring(2,10)}function j_(t,e){return{usr:t.state,key:t.key,idx:e}}function U0(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yc(e):e,state:n,key:e&&e.key||s||h4()}}function sd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function f4(t,e,n,s={}){let{window:a=document.defaultView,v5Compat:c=!1}=s,u=a.history,h="POP",m=null,p=x();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function x(){return(u.state||{idx:null}).idx}function v(){h="POP";let k=x(),P=k==null?null:k-p;p=k,m&&m({action:h,location:S.location,delta:P})}function w(k,P){h="PUSH";let U=U0(S.location,k,P);p=x()+1;let O=j_(U,p),F=S.createHref(U);try{u.pushState(O,"",F)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;a.location.assign(F)}c&&m&&m({action:h,location:S.location,delta:1})}function N(k,P){h="REPLACE";let U=U0(S.location,k,P);p=x();let O=j_(U,p),F=S.createHref(U);u.replaceState(O,"",F),c&&m&&m({action:h,location:S.location,delta:0})}function A(k){return m4(k)}let S={get action(){return h},get location(){return t(a,u)},listen(k){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(E_,v),m=k,()=>{a.removeEventListener(E_,v),m=null}},createHref(k){return e(a,k)},createURL:A,encodeLocation(k){let P=A(k);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:w,replace:N,go(k){return u.go(k)}};return S}function m4(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:sd(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function $N(t,e,n="/"){return p4(t,e,n,!1)}function p4(t,e,n,s){let a=typeof e=="string"?yc(e):e,c=Vr(a.pathname||"/",n);if(c==null)return null;let u=GN(t);g4(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let p=S4(c);h=E4(u[m],p,s)}return h}function GN(t,e=[],n=[],s="",a=!1){let c=(u,h,m=a,p)=>{let x={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&m)return;Ct(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let v=Rr([s,x.relativePath]),w=n.concat(x);u.children&&u.children.length>0&&(Ct(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),GN(u.children,e,w,v,m)),!(u.path==null&&!u.index)&&e.push({path:v,score:T4(v,u.index),routesMeta:w})};return t.forEach((u,h)=>{if(u.path===""||!u.path?.includes("?"))c(u,h);else for(let m of YN(u.path))c(u,h,!0,m)}),e}function YN(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return a?[c,""]:[c];let u=YN(s.join("/")),h=[];return h.push(...u.map(m=>m===""?c:[c,m].join("/"))),a&&h.push(...u),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function g4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:N4(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var y4=/^:[\w-]+$/,x4=3,v4=2,b4=1,w4=10,_4=-2,S_=t=>t==="*";function T4(t,e){let n=t.split("/"),s=n.length;return n.some(S_)&&(s+=_4),e&&(s+=v4),n.filter(a=>!S_(a)).reduce((a,c)=>a+(y4.test(c)?x4:c===""?b4:w4),s)}function N4(t,e){return t.length===e.length&&t.slice(0,-1).every((s,a)=>s===e[a])?t[t.length-1]-e[e.length-1]:0}function E4(t,e,n=!1){let{routesMeta:s}=t,a={},c="/",u=[];for(let h=0;h<s.length;++h){let m=s[h],p=h===s.length-1,x=c==="/"?e:e.slice(c.length)||"/",v=Uf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},x),w=m.route;if(!v&&p&&n&&!s[s.length-1].route.index&&(v=Uf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Rr([c,v.pathname]),pathnameBase:C4(Rr([c,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(c=Rr([c,v.pathnameBase]))}return u}function Uf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=j4(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let c=a[0],u=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((p,{paramName:x,isOptional:v},w)=>{if(x==="*"){let A=h[w]||"";u=c.slice(0,c.length-A.length).replace(/(.)\/+$/,"$1")}const N=h[w];return v&&!N?p[x]=void 0:p[x]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:u,pattern:t}}function j4(t,e=!1,n=!0){Js(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(s.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function S4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Js(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function A4(t,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?yc(t):t;return{pathname:n?n.startsWith("/")?n:k4(n,e):e,search:R4(s),hash:P4(a)}}function k4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function n0(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qy(t){let e=I4(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function $y(t,e,n,s=!1){let a;typeof t=="string"?a=yc(t):(a={...t},Ct(!a.pathname||!a.pathname.includes("?"),n0("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),n0("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),n0("#","search","hash",a)));let c=t===""||a.pathname==="",u=c?"/":a.pathname,h;if(u==null)h=n;else{let v=e.length-1;if(!s&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;a.pathname=w.join("/")}h=v>=0?e[v]:"/"}let m=A4(a,h),p=u&&u!=="/"&&u.endsWith("/"),x=(c||u===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||x)&&(m.pathname+="/"),m}var Rr=t=>t.join("/").replace(/\/\/+/g,"/"),C4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function D4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ZN=["POST","PUT","PATCH","DELETE"];new Set(ZN);var M4=["GET",...ZN];new Set(M4);var xc=E.createContext(null);xc.displayName="DataRouter";var vm=E.createContext(null);vm.displayName="DataRouterState";E.createContext(!1);var KN=E.createContext({isTransitioning:!1});KN.displayName="ViewTransition";var V4=E.createContext(new Map);V4.displayName="Fetchers";var O4=E.createContext(null);O4.displayName="Await";var vi=E.createContext(null);vi.displayName="Navigation";var bd=E.createContext(null);bd.displayName="Location";var bi=E.createContext({outlet:null,matches:[],isDataRoute:!1});bi.displayName="Route";var Gy=E.createContext(null);Gy.displayName="RouteError";function L4(t,{relative:e}={}){Ct(vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=E.useContext(vi),{hash:a,pathname:c,search:u}=wd(t,{relative:e}),h=c;return n!=="/"&&(h=c==="/"?n:Rr([n,c])),s.createHref({pathname:h,search:u,hash:a})}function vc(){return E.useContext(bd)!=null}function sr(){return Ct(vc(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(bd).location}var QN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WN(t){E.useContext(vi).static||E.useLayoutEffect(t)}function Rt(){let{isDataRoute:t}=E.useContext(bi);return t?W4():U4()}function U4(){Ct(vc(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(xc),{basename:e,navigator:n}=E.useContext(vi),{matches:s}=E.useContext(bi),{pathname:a}=sr(),c=JSON.stringify(qy(s)),u=E.useRef(!1);return WN(()=>{u.current=!0}),E.useCallback((m,p={})=>{if(Js(u.current,QN),!u.current)return;if(typeof m=="number"){n.go(m);return}let x=$y(m,JSON.parse(c),a,p.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Rr([e,x.pathname])),(p.replace?n.replace:n.push)(x,p.state,p)},[e,n,c,a,t])}E.createContext(null);function bm(){let{matches:t}=E.useContext(bi),e=t[t.length-1];return e?e.params:{}}function wd(t,{relative:e}={}){let{matches:n}=E.useContext(bi),{pathname:s}=sr(),a=JSON.stringify(qy(n));return E.useMemo(()=>$y(t,JSON.parse(a),s,e==="path"),[t,a,s,e])}function z4(t,e){return XN(t,e)}function XN(t,e,n,s,a){Ct(vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(vi),{matches:u}=E.useContext(bi),h=u[u.length-1],m=h?h.params:{},p=h?h.pathname:"/",x=h?h.pathnameBase:"/",v=h&&h.route;{let U=v&&v.path||"";JN(p,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let w=sr(),N;if(e){let U=typeof e=="string"?yc(e):e;Ct(x==="/"||U.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${U.pathname}" was given in the \`location\` prop.`),N=U}else N=w;let A=N.pathname||"/",S=A;if(x!=="/"){let U=x.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(U.length).join("/")}let k=$N(t,{pathname:S});Js(v||k!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Js(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=$4(k&&k.map(U=>Object.assign({},U,{params:Object.assign({},m,U.params),pathname:Rr([x,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?x:Rr([x,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),u,n,s,a);return e&&P?E.createElement(bd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},P):P}function B4(){let t=Q4(),e=D4(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:a},n):null,u)}var F4=E.createElement(B4,null),H4=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(bi.Provider,{value:this.props.routeContext},E.createElement(Gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q4({routeContext:t,match:e,children:n}){let s=E.useContext(xc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(bi.Provider,{value:t},n)}function $4(t,e=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=n?.errors;if(u!=null){let p=c.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);Ct(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,m=-1;if(n)for(let p=0;p<c.length;p++){let x=c[p];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=p),x.route.id){let{loaderData:v,errors:w}=n,N=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!w||w[x.route.id]===void 0);if(x.route.lazy||N){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((p,x,v)=>{let w,N=!1,A=null,S=null;n&&(w=u&&x.route.id?u[x.route.id]:void 0,A=x.route.errorElement||F4,h&&(m<0&&v===0?(JN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,S=null):m===v&&(N=!0,S=x.route.hydrateFallbackElement||null)));let k=e.concat(c.slice(0,v+1)),P=()=>{let U;return w?U=A:N?U=S:x.route.Component?U=E.createElement(x.route.Component,null):x.route.element?U=x.route.element:U=p,E.createElement(q4,{match:x,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:U})};return n&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?E.createElement(H4,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:s}):P()},null)}function Yy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G4(t){let e=E.useContext(xc);return Ct(e,Yy(t)),e}function Y4(t){let e=E.useContext(vm);return Ct(e,Yy(t)),e}function Z4(t){let e=E.useContext(bi);return Ct(e,Yy(t)),e}function Zy(t){let e=Z4(t),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function K4(){return Zy("useRouteId")}function Q4(){let t=E.useContext(Gy),e=Y4("useRouteError"),n=Zy("useRouteError");return t!==void 0?t:e.errors?.[n]}function W4(){let{router:t}=G4("useNavigate"),e=Zy("useNavigate"),n=E.useRef(!1);return WN(()=>{n.current=!0}),E.useCallback(async(a,c={})=>{Js(n.current,QN),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...c}))},[t,e])}var A_={};function JN(t,e,n){!e&&!A_[t]&&(A_[t]=!0,Js(!1,n))}E.memo(X4);function X4({routes:t,future:e,state:n,unstable_onError:s}){return XN(t,void 0,n,s,e)}function J4({to:t,replace:e,state:n,relative:s}){Ct(vc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=E.useContext(vi);Js(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=E.useContext(bi),{pathname:u}=sr(),h=Rt(),m=$y(t,qy(c),u,s==="path"),p=JSON.stringify(m);return E.useEffect(()=>{h(JSON.parse(p),{replace:e,state:n,relative:s})},[h,p,s,e,n]),null}function Ft(t){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eR({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:c=!1}){Ct(!vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:u,navigator:a,static:c,future:{}}),[u,a,c]);typeof n=="string"&&(n=yc(n));let{pathname:m="/",search:p="",hash:x="",state:v=null,key:w="default"}=n,N=E.useMemo(()=>{let A=Vr(m,u);return A==null?null:{location:{pathname:A,search:p,hash:x,state:v,key:w},navigationType:s}},[u,m,p,x,v,w,s]);return Js(N!=null,`<Router basename="${u}"> is not able to match the URL "${m}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:E.createElement(vi.Provider,{value:h},E.createElement(bd.Provider,{children:e,value:N}))}function tR({children:t,location:e}){return z4(z0(t),e)}function z0(t,e=[]){let n=[];return E.Children.forEach(t,(s,a)=>{if(!E.isValidElement(s))return;let c=[...e,a];if(s.type===E.Fragment){n.push.apply(n,z0(s.props.children,c));return}Ct(s.type===Ft,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=z0(s.props.children,c)),n.push(u)}),n}var wf="get",_f="application/x-www-form-urlencoded";function wm(t){return t!=null&&typeof t.tagName=="string"}function nR(t){return wm(t)&&t.tagName.toLowerCase()==="button"}function sR(t){return wm(t)&&t.tagName.toLowerCase()==="form"}function iR(t){return wm(t)&&t.tagName.toLowerCase()==="input"}function rR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aR(t,e){return t.button===0&&(!e||e==="_self")&&!rR(t)}function B0(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function oR(t,e){let n=B0(t);return e&&e.forEach((s,a)=>{n.has(a)||e.getAll(a).forEach(c=>{n.append(a,c)})}),n}var af=null;function lR(){if(af===null)try{new FormData(document.createElement("form"),0),af=!1}catch{af=!0}return af}var cR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function s0(t){return t!=null&&!cR.has(t)?(Js(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_f}"`),null):t}function uR(t,e){let n,s,a,c,u;if(sR(t)){let h=t.getAttribute("action");s=h?Vr(h,e):null,n=t.getAttribute("method")||wf,a=s0(t.getAttribute("enctype"))||_f,c=new FormData(t)}else if(nR(t)||iR(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||h.getAttribute("action");if(s=m?Vr(m,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||wf,a=s0(t.getAttribute("formenctype"))||s0(h.getAttribute("enctype"))||_f,c=new FormData(h,t),!lR()){let{name:p,type:x,value:v}=t;if(x==="image"){let w=p?`${p}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else p&&c.append(p,v)}}else{if(wm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wf,s=null,a=_f,u=t}return c&&a==="text/plain"&&(u=c,c=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ky(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dR(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Vr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function hR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mR(t,e,n){let s=await Promise.all(t.map(async a=>{let c=e.routes[a.route.id];if(c){let u=await hR(c,n);return u.links?u.links():[]}return[]}));return xR(s.flat(1).filter(fR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function k_(t,e,n,s,a,c){let u=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,h=(m,p)=>n[p].pathname!==m.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==m.params["*"];return c==="assets"?e.filter((m,p)=>u(m,p)||h(m,p)):c==="data"?e.filter((m,p)=>{let x=s.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(u(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function pR(t,e,{includeHydrateFallback:n}={}){return gR(t.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let c=[a.module];return a.clientActionModule&&(c=c.concat(a.clientActionModule)),a.clientLoaderModule&&(c=c.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(c=c.concat(a.hydrateFallbackModule)),a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function gR(t){return[...new Set(t)]}function yR(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function xR(t,e){let n=new Set;return new Set(e),t.reduce((s,a)=>{let c=JSON.stringify(yR(a));return n.has(c)||(n.add(c),s.push({key:c,link:a})),s},[])}function eE(){let t=E.useContext(xc);return Ky(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vR(){let t=E.useContext(vm);return Ky(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Qy=E.createContext(void 0);Qy.displayName="FrameworkContext";function tE(){let t=E.useContext(Qy);return Ky(t,"You must render this element inside a <HydratedRouter> element"),t}function bR(t,e){let n=E.useContext(Qy),[s,a]=E.useState(!1),[c,u]=E.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:x,onTouchStart:v}=e,w=E.useRef(null);E.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let S=P=>{P.forEach(U=>{u(U.isIntersecting)})},k=new IntersectionObserver(S,{threshold:.5});return w.current&&k.observe(w.current),()=>{k.disconnect()}}},[t]),E.useEffect(()=>{if(s){let S=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(S)}}},[s]);let N=()=>{a(!0)},A=()=>{a(!1),u(!1)};return n?t!=="intent"?[c,w,{}]:[c,w,{onFocus:Ru(h,N),onBlur:Ru(m,A),onMouseEnter:Ru(p,N),onMouseLeave:Ru(x,A),onTouchStart:Ru(v,N)}]:[!1,w,{}]}function Ru(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function wR({page:t,...e}){let{router:n}=eE(),s=E.useMemo(()=>$N(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?E.createElement(TR,{page:t,matches:s,...e}):null}function _R(t){let{manifest:e,routeModules:n}=tE(),[s,a]=E.useState([]);return E.useEffect(()=>{let c=!1;return mR(t,e,n).then(u=>{c||a(u)}),()=>{c=!0}},[t,e,n]),s}function TR({page:t,matches:e,...n}){let s=sr(),{manifest:a,routeModules:c}=tE(),{basename:u}=eE(),{loaderData:h,matches:m}=vR(),p=E.useMemo(()=>k_(t,e,m,a,s,"data"),[t,e,m,a,s]),x=E.useMemo(()=>k_(t,e,m,a,s,"assets"),[t,e,m,a,s]),v=E.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let A=new Set,S=!1;if(e.forEach(P=>{let U=a.routes[P.route.id];!U||!U.hasLoader||(!p.some(O=>O.route.id===P.route.id)&&P.route.id in h&&c[P.route.id]?.shouldRevalidate||U.hasClientLoader?S=!0:A.add(P.route.id))}),A.size===0)return[];let k=dR(t,u,"data");return S&&A.size>0&&k.searchParams.set("_routes",e.filter(P=>A.has(P.route.id)).map(P=>P.route.id).join(",")),[k.pathname+k.search]},[u,h,s,a,p,e,t,c]),w=E.useMemo(()=>pR(x,a),[x,a]),N=_R(x);return E.createElement(E.Fragment,null,v.map(A=>E.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...n})),w.map(A=>E.createElement("link",{key:A,rel:"modulepreload",href:A,...n})),N.map(({key:A,link:S})=>E.createElement("link",{key:A,nonce:n.nonce,...S})))}function NR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nE&&(window.__reactRouterVersion="7.9.5")}catch{}function ER({basename:t,children:e,window:n}){let s=E.useRef();s.current==null&&(s.current=d4({window:n,v5Compat:!0}));let a=s.current,[c,u]=E.useState({action:a.action,location:a.location}),h=E.useCallback(m=>{E.startTransition(()=>u(m))},[u]);return E.useLayoutEffect(()=>a.listen(h),[a,h]),E.createElement(eR,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:a})}var sE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yn=E.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:c,replace:u,state:h,target:m,to:p,preventScrollReset:x,viewTransition:v,...w},N){let{basename:A}=E.useContext(vi),S=typeof p=="string"&&sE.test(p),k,P=!1;if(typeof p=="string"&&S&&(k=p,nE))try{let j=new URL(window.location.href),M=p.startsWith("//")?new URL(j.protocol+p):new URL(p),z=Vr(M.pathname,A);M.origin===j.origin&&z!=null?p=z+M.search+M.hash:P=!0}catch{Js(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=L4(p,{relative:a}),[O,F,Z]=bR(s,w),ee=kR(p,{replace:u,state:h,target:m,preventScrollReset:x,relative:a,viewTransition:v});function C(j){e&&e(j),j.defaultPrevented||ee(j)}let I=E.createElement("a",{...w,...Z,href:k||U,onClick:P||c?e:C,ref:NR(N,F),target:m,"data-discover":!S&&n==="render"?"true":void 0});return O&&!S?E.createElement(E.Fragment,null,I,E.createElement(wR,{page:U})):I});Yn.displayName="Link";var jR=E.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:c,to:u,viewTransition:h,children:m,...p},x){let v=wd(u,{relative:p.relative}),w=sr(),N=E.useContext(vm),{navigator:A,basename:S}=E.useContext(vi),k=N!=null&&DR(v)&&h===!0,P=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,U=w.pathname,O=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(U=U.toLowerCase(),O=O?O.toLowerCase():null,P=P.toLowerCase()),O&&S&&(O=Vr(O,S)||O);const F=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=U===P||!a&&U.startsWith(P)&&U.charAt(F)==="/",ee=O!=null&&(O===P||!a&&O.startsWith(P)&&O.charAt(P.length)==="/"),C={isActive:Z,isPending:ee,isTransitioning:k},I=Z?e:void 0,j;typeof s=="function"?j=s(C):j=[s,Z?"active":null,ee?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(C):c;return E.createElement(Yn,{...p,"aria-current":I,className:j,ref:x,style:M,to:u,viewTransition:h},typeof m=="function"?m(C):m)});jR.displayName="NavLink";var SR=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:c,method:u=wf,action:h,onSubmit:m,relative:p,preventScrollReset:x,viewTransition:v,...w},N)=>{let A=RR(),S=PR(h,{relative:p}),k=u.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&sE.test(h),U=O=>{if(m&&m(O),O.defaultPrevented)return;O.preventDefault();let F=O.nativeEvent.submitter,Z=F?.getAttribute("formmethod")||u;A(F||O.currentTarget,{fetcherKey:e,method:Z,navigate:n,replace:a,state:c,relative:p,preventScrollReset:x,viewTransition:v})};return E.createElement("form",{ref:N,method:k,action:S,onSubmit:s?m:U,...w,"data-discover":!P&&t==="render"?"true":void 0})});SR.displayName="Form";function AR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iE(t){let e=E.useContext(xc);return Ct(e,AR(t)),e}function kR(t,{target:e,replace:n,state:s,preventScrollReset:a,relative:c,viewTransition:u}={}){let h=Rt(),m=sr(),p=wd(t,{relative:c});return E.useCallback(x=>{if(aR(x,e)){x.preventDefault();let v=n!==void 0?n:sd(m)===sd(p);h(t,{replace:v,state:s,preventScrollReset:a,relative:c,viewTransition:u})}},[m,h,p,n,s,e,t,a,c,u])}function Wy(t){Js(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=E.useRef(B0(t)),n=E.useRef(!1),s=sr(),a=E.useMemo(()=>oR(s.search,n.current?null:e.current),[s.search]),c=Rt(),u=E.useCallback((h,m)=>{const p=B0(typeof h=="function"?h(new URLSearchParams(a)):h);n.current=!0,c("?"+p,m)},[c,a]);return[a,u]}var IR=0,CR=()=>`__${String(++IR)}__`;function RR(){let{router:t}=iE("useSubmit"),{basename:e}=E.useContext(vi),n=K4();return E.useCallback(async(s,a={})=>{let{action:c,method:u,encType:h,formData:m,body:p}=uR(s,e);if(a.navigate===!1){let x=a.fetcherKey||CR();await t.fetch(x,n,a.action||c,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||c,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function PR(t,{relative:e}={}){let{basename:n}=E.useContext(vi),s=E.useContext(bi);Ct(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),c={...wd(t||".",{relative:e})},u=sr();if(t==null){c.search=u.search;let h=new URLSearchParams(c.search),m=h.getAll("index");if(m.some(x=>x==="")){h.delete("index"),m.filter(v=>v).forEach(v=>h.append("index",v));let x=h.toString();c.search=x?`?${x}`:""}}return(!t||t===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Rr([n,c.pathname])),sd(c)}function DR(t,{relative:e}={}){let n=E.useContext(KN);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=iE("useViewTransitionState"),a=wd(t,{relative:e});if(!n.isTransitioning)return!1;let c=Vr(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=Vr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Uf(a.pathname,u)!=null||Uf(a.pathname,c)!=null}const Xy=E.createContext({});function Jy(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const ex=typeof window<"u",rE=ex?E.useLayoutEffect:E.useEffect,_m=E.createContext(null);function tx(t,e){t.indexOf(e)===-1&&t.push(e)}function nx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Or=(t,e,n)=>n>e?e:n<t?t:n;let sx=()=>{};const Lr={},aE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function oE(t){return typeof t=="object"&&t!==null}const lE=t=>/^0[^.\s]+$/u.test(t);function ix(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ws=t=>t,MR=(t,e)=>n=>e(t(n)),_d=(...t)=>t.reduce(MR),id=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class rx{constructor(){this.subscriptions=[]}add(e){return tx(this.subscriptions,e),()=>nx(this.subscriptions,e)}notify(e,n,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,n,s);else for(let c=0;c<a;c++){const u=this.subscriptions[c];u&&u(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $i=t=>t*1e3,Qs=t=>t/1e3;function cE(t,e){return e?t*(1e3/e):0}const uE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VR=1e-7,OR=12;function LR(t,e,n,s,a){let c,u,h=0;do u=e+(n-e)/2,c=uE(u,s,a)-t,c>0?n=u:e=u;while(Math.abs(c)>VR&&++h<OR);return u}function Td(t,e,n,s){if(t===e&&n===s)return Ws;const a=c=>LR(c,0,1,t,n);return c=>c===0||c===1?c:uE(a(c),e,s)}const dE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hE=t=>e=>1-t(1-e),fE=Td(.33,1.53,.69,.99),ax=hE(fE),mE=dE(ax),pE=t=>(t*=2)<1?.5*ax(t):.5*(2-Math.pow(2,-10*(t-1))),ox=t=>1-Math.sin(Math.acos(t)),gE=hE(ox),yE=dE(ox),UR=Td(.42,0,1,1),zR=Td(0,0,.58,1),xE=Td(.42,0,.58,1),BR=t=>Array.isArray(t)&&typeof t[0]!="number",vE=t=>Array.isArray(t)&&typeof t[0]=="number",FR={linear:Ws,easeIn:UR,easeInOut:xE,easeOut:zR,circIn:ox,circInOut:yE,circOut:gE,backIn:ax,backInOut:mE,backOut:fE,anticipate:pE},HR=t=>typeof t=="string",I_=t=>{if(vE(t)){sx(t.length===4);const[e,n,s,a]=t;return Td(e,n,s,a)}else if(HR(t))return FR[t];return t},of=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qR(t,e){let n=new Set,s=new Set,a=!1,c=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(x){u.has(x)&&(p.schedule(x),t()),x(h)}const p={schedule:(x,v=!1,w=!1)=>{const A=w&&a?n:s;return v&&u.add(x),A.has(x)||A.add(x),x},cancel:x=>{s.delete(x),u.delete(x)},process:x=>{if(h=x,a){c=!0;return}a=!0,[n,s]=[s,n],n.forEach(m),n.clear(),a=!1,c&&(c=!1,p.process(x))}};return p}const $R=40;function bE(t,e){let n=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,u=of.reduce((O,F)=>(O[F]=qR(c),O),{}),{setup:h,read:m,resolveKeyframes:p,preUpdate:x,update:v,preRender:w,render:N,postRender:A}=u,S=()=>{const O=Lr.useManualTiming?a.timestamp:performance.now();n=!1,Lr.useManualTiming||(a.delta=s?1e3/60:Math.max(Math.min(O-a.timestamp,$R),1)),a.timestamp=O,a.isProcessing=!0,h.process(a),m.process(a),p.process(a),x.process(a),v.process(a),w.process(a),N.process(a),A.process(a),a.isProcessing=!1,n&&e&&(s=!1,t(S))},k=()=>{n=!0,s=!0,a.isProcessing||t(S)};return{schedule:of.reduce((O,F)=>{const Z=u[F];return O[F]=(ee,C=!1,I=!1)=>(n||k(),Z.schedule(ee,C,I)),O},{}),cancel:O=>{for(let F=0;F<of.length;F++)u[of[F]].cancel(O)},state:a,steps:u}}const{schedule:kt,cancel:Va,state:kn,steps:i0}=bE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ws,!0);let Tf;function GR(){Tf=void 0}const ds={now:()=>(Tf===void 0&&ds.set(kn.isProcessing||Lr.useManualTiming?kn.timestamp:performance.now()),Tf),set:t=>{Tf=t,queueMicrotask(GR)}},wE=t=>e=>typeof e=="string"&&e.startsWith(t),lx=wE("--"),YR=wE("var(--"),cx=t=>YR(t)?ZR.test(t.split("/*")[0].trim()):!1,ZR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},rd={...bc,transform:t=>Or(0,1,t)},lf={...bc,default:1},$u=t=>Math.round(t*1e5)/1e5,ux=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KR(t){return t==null}const QR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dx=(t,e)=>n=>!!(typeof n=="string"&&QR.test(n)&&n.startsWith(t)||e&&!KR(n)&&Object.prototype.hasOwnProperty.call(n,e)),_E=(t,e,n)=>s=>{if(typeof s!="string")return s;const[a,c,u,h]=s.match(ux);return{[t]:parseFloat(a),[e]:parseFloat(c),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},WR=t=>Or(0,255,t),r0={...bc,transform:t=>Math.round(WR(t))},So={test:dx("rgb","red"),parse:_E("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+r0.transform(t)+", "+r0.transform(e)+", "+r0.transform(n)+", "+$u(rd.transform(s))+")"};function XR(t){let e="",n="",s="",a="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),a=t.substring(4,5),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const F0={test:dx("#"),parse:XR,transform:So.transform},Nd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ea=Nd("deg"),Gi=Nd("%"),De=Nd("px"),JR=Nd("vh"),e3=Nd("vw"),C_={...Gi,parse:t=>Gi.parse(t)/100,transform:t=>Gi.transform(t*100)},Yl={test:dx("hsl","hue"),parse:_E("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Gi.transform($u(e))+", "+Gi.transform($u(n))+", "+$u(rd.transform(s))+")"},cn={test:t=>So.test(t)||F0.test(t)||Yl.test(t),parse:t=>So.test(t)?So.parse(t):Yl.test(t)?Yl.parse(t):F0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?So.transform(t):Yl.transform(t),getAnimatableNone:t=>{const e=cn.parse(t);return e.alpha=0,cn.transform(e)}},t3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function n3(t){return isNaN(t)&&typeof t=="string"&&(t.match(ux)?.length||0)+(t.match(t3)?.length||0)>0}const TE="number",NE="color",s3="var",i3="var(",R_="${}",r3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ad(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},a=[];let c=0;const h=e.replace(r3,m=>(cn.test(m)?(s.color.push(c),a.push(NE),n.push(cn.parse(m))):m.startsWith(i3)?(s.var.push(c),a.push(s3),n.push(m)):(s.number.push(c),a.push(TE),n.push(parseFloat(m))),++c,R_)).split(R_);return{values:n,split:h,indexes:s,types:a}}function EE(t){return ad(t).values}function jE(t){const{split:e,types:n}=ad(t),s=e.length;return a=>{let c="";for(let u=0;u<s;u++)if(c+=e[u],a[u]!==void 0){const h=n[u];h===TE?c+=$u(a[u]):h===NE?c+=cn.transform(a[u]):c+=a[u]}return c}}const a3=t=>typeof t=="number"?0:cn.test(t)?cn.getAnimatableNone(t):t;function o3(t){const e=EE(t);return jE(t)(e.map(a3))}const Oa={test:n3,parse:EE,createTransformer:jE,getAnimatableNone:o3};function a0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function l3({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,c=0,u=0;if(!e)a=c=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,m=2*n-h;a=a0(m,h,t+1/3),c=a0(m,h,t),u=a0(m,h,t-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:s}}function zf(t,e){return n=>n>0?e:t}const Mt=(t,e,n)=>t+(e-t)*n,o0=(t,e,n)=>{const s=t*t,a=n*(e*e-s)+s;return a<0?0:Math.sqrt(a)},c3=[F0,So,Yl],u3=t=>c3.find(e=>e.test(t));function P_(t){const e=u3(t);if(!e)return!1;let n=e.parse(t);return e===Yl&&(n=l3(n)),n}const D_=(t,e)=>{const n=P_(t),s=P_(e);if(!n||!s)return zf(t,e);const a={...n};return c=>(a.red=o0(n.red,s.red,c),a.green=o0(n.green,s.green,c),a.blue=o0(n.blue,s.blue,c),a.alpha=Mt(n.alpha,s.alpha,c),So.transform(a))},H0=new Set(["none","hidden"]);function d3(t,e){return H0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function h3(t,e){return n=>Mt(t,e,n)}function hx(t){return typeof t=="number"?h3:typeof t=="string"?cx(t)?zf:cn.test(t)?D_:p3:Array.isArray(t)?SE:typeof t=="object"?cn.test(t)?D_:f3:zf}function SE(t,e){const n=[...t],s=n.length,a=t.map((c,u)=>hx(c)(c,e[u]));return c=>{for(let u=0;u<s;u++)n[u]=a[u](c);return n}}function f3(t,e){const n={...t,...e},s={};for(const a in n)t[a]!==void 0&&e[a]!==void 0&&(s[a]=hx(t[a])(t[a],e[a]));return a=>{for(const c in s)n[c]=s[c](a);return n}}function m3(t,e){const n=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const c=e.types[a],u=t.indexes[c][s[c]],h=t.values[u]??0;n[a]=h,s[c]++}return n}const p3=(t,e)=>{const n=Oa.createTransformer(e),s=ad(t),a=ad(e);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?H0.has(t)&&!a.values.length||H0.has(e)&&!s.values.length?d3(t,e):_d(SE(m3(s,a),a.values),n):zf(t,e)};function AE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mt(t,e,n):hx(t)(t,e)}const g3=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>kt.update(e,n),stop:()=>Va(e),now:()=>kn.isProcessing?kn.timestamp:ds.now()}},kE=(t,e,n=10)=>{let s="";const a=Math.max(Math.round(e/n),2);for(let c=0;c<a;c++)s+=Math.round(t(c/(a-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Bf=2e4;function fx(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Bf;)e+=n,s=t.next(e);return e>=Bf?1/0:e}function y3(t,e=100,n){const s=n({...t,keyframes:[0,e]}),a=Math.min(fx(s),Bf);return{type:"keyframes",ease:c=>s.next(a*c).value/e,duration:Qs(a)}}const x3=5;function IE(t,e,n){const s=Math.max(e-x3,0);return cE(n-t(s),e-s)}const Ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},l0=.001;function v3({duration:t=Ht.duration,bounce:e=Ht.bounce,velocity:n=Ht.velocity,mass:s=Ht.mass}){let a,c,u=1-e;u=Or(Ht.minDamping,Ht.maxDamping,u),t=Or(Ht.minDuration,Ht.maxDuration,Qs(t)),u<1?(a=p=>{const x=p*u,v=x*t,w=x-n,N=q0(p,u),A=Math.exp(-v);return l0-w/N*A},c=p=>{const v=p*u*t,w=v*n+n,N=Math.pow(u,2)*Math.pow(p,2)*t,A=Math.exp(-v),S=q0(Math.pow(p,2),u);return(-a(p)+l0>0?-1:1)*((w-N)*A)/S}):(a=p=>{const x=Math.exp(-p*t),v=(p-n)*t+1;return-l0+x*v},c=p=>{const x=Math.exp(-p*t),v=(n-p)*(t*t);return x*v});const h=5/t,m=w3(a,c,h);if(t=$i(t),isNaN(m))return{stiffness:Ht.stiffness,damping:Ht.damping,duration:t};{const p=Math.pow(m,2)*s;return{stiffness:p,damping:u*2*Math.sqrt(s*p),duration:t}}}const b3=12;function w3(t,e,n){let s=n;for(let a=1;a<b3;a++)s=s-t(s)/e(s);return s}function q0(t,e){return t*Math.sqrt(1-e*e)}const _3=["duration","bounce"],T3=["stiffness","damping","mass"];function M_(t,e){return e.some(n=>t[n]!==void 0)}function N3(t){let e={velocity:Ht.velocity,stiffness:Ht.stiffness,damping:Ht.damping,mass:Ht.mass,isResolvedFromDuration:!1,...t};if(!M_(t,T3)&&M_(t,_3))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),a=s*s,c=2*Or(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Ht.mass,stiffness:a,damping:c}}else{const n=v3(t);e={...e,...n,mass:Ht.mass},e.isResolvedFromDuration=!0}return e}function Ff(t=Ht.visualDuration,e=Ht.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:a}=n;const c=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:c},{stiffness:m,damping:p,mass:x,duration:v,velocity:w,isResolvedFromDuration:N}=N3({...n,velocity:-Qs(n.velocity||0)}),A=w||0,S=p/(2*Math.sqrt(m*x)),k=u-c,P=Qs(Math.sqrt(m/x)),U=Math.abs(k)<5;s||(s=U?Ht.restSpeed.granular:Ht.restSpeed.default),a||(a=U?Ht.restDelta.granular:Ht.restDelta.default);let O;if(S<1){const Z=q0(P,S);O=ee=>{const C=Math.exp(-S*P*ee);return u-C*((A+S*P*k)/Z*Math.sin(Z*ee)+k*Math.cos(Z*ee))}}else if(S===1)O=Z=>u-Math.exp(-P*Z)*(k+(A+P*k)*Z);else{const Z=P*Math.sqrt(S*S-1);O=ee=>{const C=Math.exp(-S*P*ee),I=Math.min(Z*ee,300);return u-C*((A+S*P*k)*Math.sinh(I)+Z*k*Math.cosh(I))/Z}}const F={calculatedDuration:N&&v||null,next:Z=>{const ee=O(Z);if(N)h.done=Z>=v;else{let C=Z===0?A:0;S<1&&(C=Z===0?$i(A):IE(O,Z,ee));const I=Math.abs(C)<=s,j=Math.abs(u-ee)<=a;h.done=I&&j}return h.value=h.done?u:ee,h},toString:()=>{const Z=Math.min(fx(F),Bf),ee=kE(C=>F.next(Z*C).value,Z,30);return Z+"ms "+ee},toTransition:()=>{}};return F}Ff.applyToOptions=t=>{const e=y3(t,100,Ff);return t.ease=e.ease,t.duration=$i(e.duration),t.type="keyframes",t};function $0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:u,min:h,max:m,restDelta:p=.5,restSpeed:x}){const v=t[0],w={done:!1,value:v},N=I=>h!==void 0&&I<h||m!==void 0&&I>m,A=I=>h===void 0?m:m===void 0||Math.abs(h-I)<Math.abs(m-I)?h:m;let S=n*e;const k=v+S,P=u===void 0?k:u(k);P!==k&&(S=P-v);const U=I=>-S*Math.exp(-I/s),O=I=>P+U(I),F=I=>{const j=U(I),M=O(I);w.done=Math.abs(j)<=p,w.value=w.done?P:M};let Z,ee;const C=I=>{N(w.value)&&(Z=I,ee=Ff({keyframes:[w.value,A(w.value)],velocity:IE(O,I,w.value),damping:a,stiffness:c,restDelta:p,restSpeed:x}))};return C(0),{calculatedDuration:null,next:I=>{let j=!1;return!ee&&Z===void 0&&(j=!0,F(I),C(I)),Z!==void 0&&I>=Z?ee.next(I-Z):(!j&&F(I),w)}}}function E3(t,e,n){const s=[],a=n||Lr.mix||AE,c=t.length-1;for(let u=0;u<c;u++){let h=a(t[u],t[u+1]);if(e){const m=Array.isArray(e)?e[u]||Ws:e;h=_d(m,h)}s.push(h)}return s}function j3(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const c=t.length;if(sx(c===e.length),c===1)return()=>e[0];if(c===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=E3(e,s,a),m=h.length,p=x=>{if(u&&x<t[0])return e[0];let v=0;if(m>1)for(;v<t.length-2&&!(x<t[v+1]);v++);const w=id(t[v],t[v+1],x);return h[v](w)};return n?x=>p(Or(t[0],t[c-1],x)):p}function S3(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const a=id(0,e,s);t.push(Mt(n,1,a))}}function A3(t){const e=[0];return S3(e,t.length-1),e}function k3(t,e){return t.map(n=>n*e)}function I3(t,e){return t.map(()=>e||xE).splice(0,t.length-1)}function Gu({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const a=BR(s)?s.map(I_):I_(s),c={done:!1,value:e[0]},u=k3(n&&n.length===e.length?n:A3(e),t),h=j3(u,e,{ease:Array.isArray(a)?a:I3(e,a)});return{calculatedDuration:t,next:m=>(c.value=h(m),c.done=m>=t,c)}}const C3=t=>t!==null;function mx(t,{repeat:e,repeatType:n="loop"},s,a=1){const c=t.filter(C3),h=a<0||e&&n!=="loop"&&e%2===1?0:c.length-1;return!h||s===void 0?c[h]:s}const R3={decay:$0,inertia:$0,tween:Gu,keyframes:Gu,spring:Ff};function CE(t){typeof t.type=="string"&&(t.type=R3[t.type])}class px{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const P3=t=>t/100;class gx extends px{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ds.now()&&this.tick(ds.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;CE(e);const{type:n=Gu,repeat:s=0,repeatDelay:a=0,repeatType:c,velocity:u=0}=e;let{keyframes:h}=e;const m=n||Gu;m!==Gu&&typeof h[0]!="number"&&(this.mixKeyframes=_d(P3,AE(h[0],h[1])),h=[0,100]);const p=m({...e,keyframes:h});c==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=fx(p));const{calculatedDuration:x}=p;this.calculatedDuration=x,this.resolvedDuration=x+a,this.totalDuration=this.resolvedDuration*(s+1)-a,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:a,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return s.next(0);const{delay:p=0,keyframes:x,repeat:v,repeatType:w,repeatDelay:N,type:A,onUpdate:S,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const P=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?P<0:P>a;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let O=this.currentTime,F=s;if(v){const I=Math.min(this.currentTime,a)/h;let j=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&j--,j=Math.min(j,v+1),!!(j%2)&&(w==="reverse"?(M=1-M,N&&(M-=N/h)):w==="mirror"&&(F=u)),O=Or(0,1,M)*h}const Z=U?{done:!1,value:x[0]}:F.next(O);c&&(Z.value=c(Z.value));let{done:ee}=Z;!U&&m!==null&&(ee=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return C&&A!==$0&&(Z.value=mx(x,this.options,k,this.speed)),S&&S(Z.value),C&&this.finish(),Z}then(e,n){return this.finished.then(e,n)}get duration(){return Qs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qs(e)}get time(){return Qs(this.currentTime)}set time(e){e=$i(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ds.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qs(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=g3,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ds.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function D3(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ao=t=>t*180/Math.PI,G0=t=>{const e=Ao(Math.atan2(t[1],t[0]));return Y0(e)},M3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:G0,rotateZ:G0,skewX:t=>Ao(Math.atan(t[1])),skewY:t=>Ao(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Y0=t=>(t=t%360,t<0&&(t+=360),t),V_=G0,O_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),L_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),V3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:O_,scaleY:L_,scale:t=>(O_(t)+L_(t))/2,rotateX:t=>Y0(Ao(Math.atan2(t[6],t[5]))),rotateY:t=>Y0(Ao(Math.atan2(-t[2],t[0]))),rotateZ:V_,rotate:V_,skewX:t=>Ao(Math.atan(t[4])),skewY:t=>Ao(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Z0(t){return t.includes("scale")?1:0}function K0(t,e){if(!t||t==="none")return Z0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(n)s=V3,a=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=M3,a=h}if(!a)return Z0(e);const c=s[e],u=a[1].split(",").map(L3);return typeof c=="function"?c(u):u[c]}const O3=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return K0(n,e)};function L3(t){return parseFloat(t.trim())}const wc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_c=new Set(wc),U_=t=>t===bc||t===De,U3=new Set(["x","y","z"]),z3=wc.filter(t=>!U3.has(t));function B3(t){const e=[];return z3.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ro={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>K0(e,"x"),y:(t,{transform:e})=>K0(e,"y")};Ro.translateX=Ro.x;Ro.translateY=Ro.y;const Po=new Set;let Q0=!1,W0=!1,X0=!1;function RE(){if(W0){const t=Array.from(Po).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const a=B3(s);a.length&&(n.set(s,a),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const a=n.get(s);a&&a.forEach(([c,u])=>{s.getValue(c)?.set(u)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}W0=!1,Q0=!1,Po.forEach(t=>t.complete(X0)),Po.clear()}function PE(){Po.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(W0=!0)})}function F3(){X0=!0,PE(),RE(),X0=!1}class yx{constructor(e,n,s,a,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=a,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Po.add(this),Q0||(Q0=!0,kt.read(PE),kt.resolveKeyframes(RE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:a}=this;if(e[0]===null){const c=a?.get(),u=e[e.length-1];if(c!==void 0)e[0]=c;else if(s&&n){const h=s.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),a&&c===void 0&&a.set(e[0])}D3(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Po.delete(this)}cancel(){this.state==="scheduled"&&(Po.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const H3=t=>t.startsWith("--");function q3(t,e,n){H3(e)?t.style.setProperty(e,n):t.style[e]=n}const $3=ix(()=>window.ScrollTimeline!==void 0),G3={};function Y3(t,e){const n=ix(t);return()=>G3[e]??n()}const DE=Y3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,z_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lu([0,.65,.55,1]),circOut:Lu([.55,0,1,.45]),backIn:Lu([.31,.01,.66,-.59]),backOut:Lu([.33,1.53,.69,.99])};function ME(t,e){if(t)return typeof t=="function"?DE()?kE(t,e):"ease-out":vE(t)?Lu(t):Array.isArray(t)?t.map(n=>ME(n,e)||z_.easeOut):z_[t]}function Z3(t,e,n,{delay:s=0,duration:a=300,repeat:c=0,repeatType:u="loop",ease:h="easeOut",times:m}={},p=void 0){const x={[e]:n};m&&(x.offset=m);const v=ME(h,a);Array.isArray(v)&&(x.easing=v);const w={delay:s,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),t.animate(x,w)}function VE(t){return typeof t=="function"&&"applyToOptions"in t}function K3({type:t,...e}){return VE(t)&&DE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Q3 extends px{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:a,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=e,sx(typeof e.type!="string");const p=K3(e);this.animation=Z3(n,s,a,p,c),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const x=mx(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(x):q3(n,s,x),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Qs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qs(e)}get time(){return Qs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$i(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&$3()?(this.animation.timeline=e,Ws):n(this)}}const OE={anticipate:pE,backInOut:mE,circInOut:yE};function W3(t){return t in OE}function X3(t){typeof t.ease=="string"&&W3(t.ease)&&(t.ease=OE[t.ease])}const B_=10;class J3 extends Q3{constructor(e){X3(e),CE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:a,element:c,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new gx({...u,autoplay:!1}),m=$i(this.finishedTime??this.time);n.setWithVelocity(h.sample(m-B_).value,h.sample(m).value,B_),h.stop()}}const F_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Oa.test(t)||t==="0")&&!t.startsWith("url("));function e5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function t5(t,e,n,s){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const c=t[t.length-1],u=F_(a,e),h=F_(c,e);return!u||!h?!1:e5(t)||(n==="spring"||VE(n))&&s}function J0(t){t.duration=0,t.type="keyframes"}const n5=new Set(["opacity","clipPath","filter","transform"]),s5=ix(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function i5(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:a,damping:c,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:p}=e.owner.getProps();return s5()&&n&&n5.has(n)&&(n!=="transform"||!p)&&!m&&!s&&a!=="mirror"&&c!==0&&u!=="inertia"}const r5=40;class a5 extends px{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:u="loop",keyframes:h,name:m,motionValue:p,element:x,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ds.now();const w={autoplay:e,delay:n,type:s,repeat:a,repeatDelay:c,repeatType:u,name:m,motionValue:p,element:x,...v},N=x?.KeyframeResolver||yx;this.keyframeResolver=new N(h,(A,S,k)=>this.onKeyframesResolved(A,S,w,!k),m,p,x),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,a){this.keyframeResolver=void 0;const{name:c,type:u,velocity:h,delay:m,isHandoff:p,onUpdate:x}=s;this.resolvedAt=ds.now(),t5(e,c,u,h)||((Lr.instantAnimations||!m)&&x?.(mx(e,s,n)),e[0]=e[e.length-1],J0(s),s.repeat=0);const w={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>r5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},N=!p&&i5(w)?new J3({...w,element:w.motionValue.owner.current}):new gx(w);N.finished.then(()=>this.notifyFinished()).catch(Ws),this.pendingTimeline&&(this.stopTimeline=N.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=N}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),F3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const o5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function l5(t){const e=o5.exec(t);if(!e)return[,];const[,n,s,a]=e;return[`--${n??s}`,a]}function LE(t,e,n=1){const[s,a]=l5(t);if(!s)return;const c=window.getComputedStyle(e).getPropertyValue(s);if(c){const u=c.trim();return aE(u)?parseFloat(u):u}return cx(a)?LE(a,e,n+1):a}function xx(t,e){return t?.[e]??t?.default??t}const UE=new Set(["width","height","top","left","right","bottom",...wc]),c5={test:t=>t==="auto",parse:t=>t},zE=t=>e=>e.test(t),BE=[bc,De,Gi,Ea,e3,JR,c5],H_=t=>BE.find(zE(t));function u5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lE(t):!0}const d5=new Set(["brightness","contrast","saturate","opacity"]);function h5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(ux)||[];if(!s)return t;const a=n.replace(s,"");let c=d5.has(e)?1:0;return s!==n&&(c*=100),e+"("+c+a+")"}const f5=/\b([a-z-]*)\(.*?\)/gu,ey={...Oa,getAnimatableNone:t=>{const e=t.match(f5);return e?e.map(h5).join(" "):t}},q_={...bc,transform:Math.round},m5={rotate:Ea,rotateX:Ea,rotateY:Ea,rotateZ:Ea,scale:lf,scaleX:lf,scaleY:lf,scaleZ:lf,skew:Ea,skewX:Ea,skewY:Ea,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:rd,originX:C_,originY:C_,originZ:De},vx={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De,...m5,zIndex:q_,fillOpacity:rd,strokeOpacity:rd,numOctaves:q_},p5={...vx,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:ey,WebkitFilter:ey},FE=t=>p5[t];function HE(t,e){let n=FE(t);return n!==ey&&(n=Oa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const g5=new Set(["auto","none","0"]);function y5(t,e,n){let s=0,a;for(;s<t.length&&!a;){const c=t[s];typeof c=="string"&&!g5.has(c)&&ad(c).values.length&&(a=t[s]),s++}if(a&&n)for(const c of e)t[c]=HE(n,a)}class x5 extends yx{constructor(e,n,s,a,c){super(e,n,s,a,c,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let p=e[m];if(typeof p=="string"&&(p=p.trim(),cx(p))){const x=LE(p,n.current);x!==void 0&&(e[m]=x),m===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!UE.has(s)||e.length!==2)return;const[a,c]=e,u=H_(a),h=H_(c);if(u!==h)if(U_(u)&&U_(h))for(let m=0;m<e.length;m++){const p=e[m];typeof p=="string"&&(e[m]=parseFloat(p))}else Ro[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let a=0;a<e.length;a++)(e[a]===null||u5(e[a]))&&s.push(a);s.length&&y5(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ro[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&e.getValue(s,a).jump(a,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const a=e.getValue(n);a&&a.jump(this.measuredOrigin,!1);const c=s.length-1,u=s[c];s[c]=Ro[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{e.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function v5(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=n?.[t]??s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const qE=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function $E(t){return oE(t)&&"offsetHeight"in t}const $_=30,b5=t=>!isNaN(parseFloat(t));class w5{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const a=ds.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ds.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=b5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rx);const s=this.events[e].add(n);return e==="change"?()=>{s(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ds.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$_);return cE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ac(t,e){return new w5(t,e)}const{schedule:bx}=bE(queueMicrotask,!1),hi={x:!1,y:!1};function GE(){return hi.x||hi.y}function _5(t){return t==="x"||t==="y"?hi[t]?null:(hi[t]=!0,()=>{hi[t]=!1}):hi.x||hi.y?null:(hi.x=hi.y=!0,()=>{hi.x=hi.y=!1})}function YE(t,e){const n=v5(t),s=new AbortController,a={passive:!0,...e,signal:s.signal};return[n,a,()=>s.abort()]}function G_(t){return!(t.pointerType==="touch"||GE())}function T5(t,e,n={}){const[s,a,c]=YE(t,n),u=h=>{if(!G_(h))return;const{target:m}=h,p=e(m,h);if(typeof p!="function"||!m)return;const x=v=>{G_(v)&&(p(v),m.removeEventListener("pointerleave",x))};m.addEventListener("pointerleave",x,a)};return s.forEach(h=>{h.addEventListener("pointerenter",u,a)}),c}const ZE=(t,e)=>e?t===e?!0:ZE(t,e.parentElement):!1,wx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function E5(t){return N5.has(t.tagName)||t.tabIndex!==-1}const Nf=new WeakSet;function Y_(t){return e=>{e.key==="Enter"&&t(e)}}function c0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const j5=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Y_(()=>{if(Nf.has(n))return;c0(n,"down");const a=Y_(()=>{c0(n,"up")}),c=()=>c0(n,"cancel");n.addEventListener("keyup",a,e),n.addEventListener("blur",c,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Z_(t){return wx(t)&&!GE()}function S5(t,e,n={}){const[s,a,c]=YE(t,n),u=h=>{const m=h.currentTarget;if(!Z_(h))return;Nf.add(m);const p=e(m,h),x=(N,A)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),Nf.has(m)&&Nf.delete(m),Z_(N)&&typeof p=="function"&&p(N,{success:A})},v=N=>{x(N,m===window||m===document||n.useGlobalTarget||ZE(m,N.target))},w=N=>{x(N,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",w,a)};return s.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),$E(h)&&(h.addEventListener("focus",p=>j5(p,a)),!E5(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function KE(t){return oE(t)&&"ownerSVGElement"in t}function A5(t){return KE(t)&&t.tagName==="svg"}const zn=t=>!!(t&&t.getVelocity),k5=[...BE,cn,Oa],I5=t=>k5.find(zE(t)),_x=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function K_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function C5(...t){return e=>{let n=!1;const s=t.map(a=>{const c=K_(a,e);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let a=0;a<s.length;a++){const c=s[a];typeof c=="function"?c():K_(t[a],null)}}}}function R5(...t){return E.useCallback(C5(...t),t)}class P5 extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,a=$E(s)&&s.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=a-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function D5({children:t,isPresent:e,anchorX:n,root:s}){const a=E.useId(),c=E.useRef(null),u=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=E.useContext(_x),m=R5(c,t?.ref);return E.useInsertionEffect(()=>{const{width:p,height:x,top:v,left:w,right:N}=u.current;if(e||!c.current||!p||!x)return;const A=n==="left"?`left: ${w}`:`right: ${N}`;c.current.dataset.motionPopId=a;const S=document.createElement("style");h&&(S.nonce=h);const k=s??document.head;return k.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${x}px !important;
            ${A}px !important;
            top: ${v}px !important;
          }
        `),()=>{k.contains(S)&&k.removeChild(S)}},[e]),o.jsx(P5,{isPresent:e,childRef:c,sizeRef:u,children:E.cloneElement(t,{ref:m})})}const M5=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:a,presenceAffectsLayout:c,mode:u,anchorX:h,root:m})=>{const p=Jy(V5),x=E.useId();let v=!0,w=E.useMemo(()=>(v=!1,{id:x,initial:e,isPresent:n,custom:a,onExitComplete:N=>{p.set(N,!0);for(const A of p.values())if(!A)return;s&&s()},register:N=>(p.set(N,!1),()=>p.delete(N))}),[n,p,s]);return c&&v&&(w={...w}),E.useMemo(()=>{p.forEach((N,A)=>p.set(A,!1))},[n]),E.useEffect(()=>{!n&&!p.size&&s&&s()},[n]),u==="popLayout"&&(t=o.jsx(D5,{isPresent:n,anchorX:h,root:m,children:t})),o.jsx(_m.Provider,{value:w,children:t})};function V5(){return new Map}function QE(t=!0){const e=E.useContext(_m);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:a}=e,c=E.useId();E.useEffect(()=>{if(t)return a(c)},[t]);const u=E.useCallback(()=>t&&s&&s(c),[c,s,t]);return!n&&s?[!1,u]:[!0]}const cf=t=>t.key||"";function Q_(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const Bn=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:c="sync",propagate:u=!1,anchorX:h="left",root:m})=>{const[p,x]=QE(u),v=E.useMemo(()=>Q_(t),[t]),w=u&&!p?[]:v.map(cf),N=E.useRef(!0),A=E.useRef(v),S=Jy(()=>new Map),[k,P]=E.useState(v),[U,O]=E.useState(v);rE(()=>{N.current=!1,A.current=v;for(let ee=0;ee<U.length;ee++){const C=cf(U[ee]);w.includes(C)?S.delete(C):S.get(C)!==!0&&S.set(C,!1)}},[U,w.length,w.join("-")]);const F=[];if(v!==k){let ee=[...v];for(let C=0;C<U.length;C++){const I=U[C],j=cf(I);w.includes(j)||(ee.splice(C,0,I),F.push(I))}return c==="wait"&&F.length&&(ee=F),O(Q_(ee)),P(v),null}const{forceRender:Z}=E.useContext(Xy);return o.jsx(o.Fragment,{children:U.map(ee=>{const C=cf(ee),I=u&&!p?!1:v===U||w.includes(C),j=()=>{if(S.has(C))S.set(C,!0);else return;let M=!0;S.forEach(z=>{z||(M=!1)}),M&&(Z?.(),O(A.current),u&&x?.(),s&&s())};return o.jsx(M5,{isPresent:I,initial:!N.current||n?void 0:!1,custom:e,presenceAffectsLayout:a,mode:c,root:m,onExitComplete:I?void 0:j,anchorX:h,children:ee},C)})})},WE=E.createContext({strict:!1}),W_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},oc={};for(const t in W_)oc[t]={isEnabled:e=>W_[t].some(n=>!!e[n])};function O5(t){for(const e in t)oc[e]={...oc[e],...t[e]}}const L5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L5.has(t)}let XE=t=>!Hf(t);function U5(t){typeof t=="function"&&(XE=e=>e.startsWith("on")?!Hf(e):t(e))}try{U5(require("@emotion/is-prop-valid").default)}catch{}function z5(t,e,n){const s={};for(const a in t)a==="values"&&typeof t.values=="object"||(XE(a)||n===!0&&Hf(a)||!e&&!Hf(a)||t.draggable&&a.startsWith("onDrag"))&&(s[a]=t[a]);return s}const Tm=E.createContext({});function Nm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function od(t){return typeof t=="string"||Array.isArray(t)}const Tx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nx=["initial",...Tx];function Em(t){return Nm(t.animate)||Nx.some(e=>od(t[e]))}function JE(t){return!!(Em(t)||t.variants)}function B5(t,e){if(Em(t)){const{initial:n,animate:s}=t;return{initial:n===!1||od(n)?n:void 0,animate:od(s)?s:void 0}}return t.inherit!==!1?e:{}}function F5(t){const{initial:e,animate:n}=B5(t,E.useContext(Tm));return E.useMemo(()=>({initial:e,animate:n}),[X_(e),X_(n)])}function X_(t){return Array.isArray(t)?t.join(" "):t}const ld={};function H5(t){for(const e in t)ld[e]=t[e],lx(e)&&(ld[e].isCSSVariable=!0)}function ej(t,{layout:e,layoutId:n}){return _c.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ld[t]||t==="opacity")}const q5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$5=wc.length;function G5(t,e,n){let s="",a=!0;for(let c=0;c<$5;c++){const u=wc[c],h=t[u];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(u.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||n){const p=qE(h,vx[u]);if(!m){a=!1;const x=q5[u]||u;s+=`${x}(${p}) `}n&&(e[u]=p)}}return s=s.trim(),n?s=n(e,a?"":s):a&&(s="none"),s}function Ex(t,e,n){const{style:s,vars:a,transformOrigin:c}=t;let u=!1,h=!1;for(const m in e){const p=e[m];if(_c.has(m)){u=!0;continue}else if(lx(m)){a[m]=p;continue}else{const x=qE(p,vx[m]);m.startsWith("origin")?(h=!0,c[m]=x):s[m]=x}}if(e.transform||(u||n?s.transform=G5(e,t.transform,n):s.transform&&(s.transform="none")),h){const{originX:m="50%",originY:p="50%",originZ:x=0}=c;s.transformOrigin=`${m} ${p} ${x}`}}const jx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tj(t,e,n){for(const s in e)!zn(e[s])&&!ej(s,n)&&(t[s]=e[s])}function Y5({transformTemplate:t},e){return E.useMemo(()=>{const n=jx();return Ex(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Z5(t,e){const n=t.style||{},s={};return tj(s,n,t),Object.assign(s,Y5(t,e)),s}function K5(t,e){const n={},s=Z5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Q5={offset:"stroke-dashoffset",array:"stroke-dasharray"},W5={offset:"strokeDashoffset",array:"strokeDasharray"};function X5(t,e,n=1,s=0,a=!0){t.pathLength=1;const c=a?Q5:W5;t[c.offset]=De.transform(-s);const u=De.transform(e),h=De.transform(n);t[c.array]=`${u} ${h}`}function nj(t,{attrX:e,attrY:n,attrScale:s,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...h},m,p,x){if(Ex(t,h,p),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:w}=t;v.transform&&(w.transform=v.transform,delete v.transform),(w.transform||v.transformOrigin)&&(w.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),w.transform&&(w.transformBox=x?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),s!==void 0&&(v.scale=s),a!==void 0&&X5(v,a,c,u,!1)}const sj=()=>({...jx(),attrs:{}}),ij=t=>typeof t=="string"&&t.toLowerCase()==="svg";function J5(t,e,n,s){const a=E.useMemo(()=>{const c=sj();return nj(c,e,ij(s),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[e]);if(t.style){const c={};tj(c,t.style,t),a.style={...c,...a.style}}return a}const eP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sx(t){return typeof t!="string"||t.includes("-")?!1:!!(eP.indexOf(t)>-1||/[A-Z]/u.test(t))}function tP(t,e,n,{latestValues:s},a,c=!1){const h=(Sx(t)?J5:K5)(e,s,a,t),m=z5(e,typeof t=="string",c),p=t!==E.Fragment?{...m,...h,ref:n}:{},{children:x}=e,v=E.useMemo(()=>zn(x)?x.get():x,[x]);return E.createElement(t,{...p,children:v})}function J_(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Ax(t,e,n,s){if(typeof e=="function"){const[a,c]=J_(s);e=e(n!==void 0?n:t.custom,a,c)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,c]=J_(s);e=e(n!==void 0?n:t.custom,a,c)}return e}function Ef(t){return zn(t)?t.get():t}function nP({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,a){return{latestValues:sP(n,s,a,t),renderState:e()}}function sP(t,e,n,s){const a={},c=s(t,{});for(const w in c)a[w]=Ef(c[w]);let{initial:u,animate:h}=t;const m=Em(t),p=JE(t);e&&p&&!m&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let x=n?n.initial===!1:!1;x=x||u===!1;const v=x?h:u;if(v&&typeof v!="boolean"&&!Nm(v)){const w=Array.isArray(v)?v:[v];for(let N=0;N<w.length;N++){const A=Ax(t,w[N]);if(A){const{transitionEnd:S,transition:k,...P}=A;for(const U in P){let O=P[U];if(Array.isArray(O)){const F=x?O.length-1:0;O=O[F]}O!==null&&(a[U]=O)}for(const U in S)a[U]=S[U]}}}return a}const rj=t=>(e,n)=>{const s=E.useContext(Tm),a=E.useContext(_m),c=()=>nP(t,e,s,a);return n?c():Jy(c)};function kx(t,e,n){const{style:s}=t,a={};for(const c in s)(zn(s[c])||e.style&&zn(e.style[c])||ej(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(a[c]=s[c]);return a}const iP=rj({scrapeMotionValuesFromProps:kx,createRenderState:jx});function aj(t,e,n){const s=kx(t,e,n);for(const a in t)if(zn(t[a])||zn(e[a])){const c=wc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[c]=t[a]}return s}const rP=rj({scrapeMotionValuesFromProps:aj,createRenderState:sj}),aP=Symbol.for("motionComponentSymbol");function Zl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oP(t,e,n){return E.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Zl(n)&&(n.current=s))},[e])}const Ix=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lP="framerAppearId",oj="data-"+Ix(lP),lj=E.createContext({});function cP(t,e,n,s,a){const{visualElement:c}=E.useContext(Tm),u=E.useContext(WE),h=E.useContext(_m),m=E.useContext(_x).reducedMotion,p=E.useRef(null);s=s||u.renderer,!p.current&&s&&(p.current=s(t,{visualState:e,parent:c,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const x=p.current,v=E.useContext(lj);x&&!x.projection&&a&&(x.type==="html"||x.type==="svg")&&uP(p.current,n,a,v);const w=E.useRef(!1);E.useInsertionEffect(()=>{x&&w.current&&x.update(n,h)});const N=n[oj],A=E.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return rE(()=>{x&&(w.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),x.scheduleRenderMicrotask(),A.current&&x.animationState&&x.animationState.animateChanges())}),E.useEffect(()=>{x&&(!A.current&&x.animationState&&x.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),A.current=!1),x.enteringChildren=void 0)}),x}function uP(t,e,n,s){const{layoutId:a,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:p,layoutCrossfade:x}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:cj(t.parent)),t.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!u||h&&Zl(h),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,crossfade:x,layoutScroll:m,layoutRoot:p})}function cj(t){if(t)return t.options.allowProjection!==!1?t.projection:cj(t.parent)}function u0(t,{forwardMotionProps:e=!1}={},n,s){n&&O5(n);const a=Sx(t)?rP:iP;function c(h,m){let p;const x={...E.useContext(_x),...h,layoutId:dP(h)},{isStatic:v}=x,w=F5(h),N=a(h,v);if(!v&&ex){hP();const A=fP(x);p=A.MeasureLayout,w.visualElement=cP(t,N,x,s,A.ProjectionNode)}return o.jsxs(Tm.Provider,{value:w,children:[p&&w.visualElement?o.jsx(p,{visualElement:w.visualElement,...x}):null,tP(t,h,oP(N,w.visualElement,m),N,v,e)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=E.forwardRef(c);return u[aP]=t,u}function dP({layoutId:t}){const e=E.useContext(Xy).id;return e&&t!==void 0?e+"-"+t:t}function hP(t,e){E.useContext(WE).strict}function fP(t){const{drag:e,layout:n}=oc;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function mP(t,e){if(typeof Proxy>"u")return u0;const n=new Map,s=(c,u)=>u0(c,u,t,e),a=(c,u)=>s(c,u);return new Proxy(a,{get:(c,u)=>u==="create"?s:(n.has(u)||n.set(u,u0(u,void 0,t,e)),n.get(u))})}function uj({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function pP({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gP(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function d0(t){return t===void 0||t===1}function ty({scale:t,scaleX:e,scaleY:n}){return!d0(t)||!d0(e)||!d0(n)}function Eo(t){return ty(t)||dj(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function dj(t){return e2(t.x)||e2(t.y)}function e2(t){return t&&t!=="0%"}function qf(t,e,n){const s=t-n,a=e*s;return n+a}function t2(t,e,n,s,a){return a!==void 0&&(t=qf(t,a,s)),qf(t,n,s)+e}function ny(t,e=0,n=1,s,a){t.min=t2(t.min,e,n,s,a),t.max=t2(t.max,e,n,s,a)}function hj(t,{x:e,y:n}){ny(t.x,e.translate,e.scale,e.originPoint),ny(t.y,n.translate,n.scale,n.originPoint)}const n2=.999999999999,s2=1.0000000000001;function yP(t,e,n,s=!1){const a=n.length;if(!a)return;e.x=e.y=1;let c,u;for(let h=0;h<a;h++){c=n[h],u=c.projectionDelta;const{visualElement:m}=c.options;m&&m.props.style&&m.props.style.display==="contents"||(s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ql(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,hj(t,u)),s&&Eo(c.latestValues)&&Ql(t,c.latestValues))}e.x<s2&&e.x>n2&&(e.x=1),e.y<s2&&e.y>n2&&(e.y=1)}function Kl(t,e){t.min=t.min+e,t.max=t.max+e}function i2(t,e,n,s,a=.5){const c=Mt(t.min,t.max,a);ny(t,e,n,c,s)}function Ql(t,e){i2(t.x,e.x,e.scaleX,e.scale,e.originX),i2(t.y,e.y,e.scaleY,e.scale,e.originY)}function fj(t,e){return uj(gP(t.getBoundingClientRect(),e))}function xP(t,e,n){const s=fj(t,n),{scroll:a}=e;return a&&(Kl(s.x,a.offset.x),Kl(s.y,a.offset.y)),s}const r2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:r2(),y:r2()}),a2=()=>({min:0,max:0}),Qt=()=>({x:a2(),y:a2()}),sy={current:null},mj={current:!1};function vP(){if(mj.current=!0,!!ex)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sy.current=t.matches;t.addEventListener("change",e),e()}else sy.current=!1}const bP=new WeakMap;function wP(t,e,n){for(const s in e){const a=e[s],c=n[s];if(zn(a))t.addValue(s,a);else if(zn(c))t.addValue(s,ac(a,{owner:t}));else if(c!==a)if(t.hasValue(s)){const u=t.getValue(s);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=t.getStaticValue(s);t.addValue(s,ac(u!==void 0?u:a,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const o2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _P{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:c,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=ds.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,kt.render(this.render,!1,!0))};const{latestValues:m,renderState:p}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=Em(n),this.isVariantNode=JE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in v){const N=v[w];m[w]!==void 0&&zn(N)&&N.set(m[w])}}mount(e){this.current=e,bP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),mj.current||vP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sy.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Va(this.notifyUpdate),Va(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=_c.has(e);s&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&kt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in oc){const n=oc[e];if(!n)continue;const{isEnabled:s,Feature:a}=n;if(!this.features[e]&&a&&s(this.props)&&(this.features[e]=new a(this)),this.features[e]){const c=this.features[e];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<o2.length;s++){const a=o2[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c="on"+a,u=e[c];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=wP(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ac(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(aE(s)||lE(s))?s=parseFloat(s):!I5(s)&&Oa.test(n)&&(s=HE(e,n)),this.setBaseTarget(e,zn(s)?s.get():s)),zn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const c=Ax(this.props,n,this.presenceContext?.custom);c&&(s=c[e])}if(n&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!zn(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){bx.render(this.render)}}class pj extends _P{constructor(){super(...arguments),this.KeyframeResolver=x5}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function gj(t,{style:e,vars:n},s,a){const c=t.style;let u;for(u in e)c[u]=e[u];a?.applyProjectionStyles(c,s);for(u in n)c.setProperty(u,n[u])}function TP(t){return window.getComputedStyle(t)}class NP extends pj{constructor(){super(...arguments),this.type="html",this.renderInstance=gj}readValueFromInstance(e,n){if(_c.has(n))return this.projection?.isProjecting?Z0(n):O3(e,n);{const s=TP(e),a=(lx(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return fj(e,n)}build(e,n,s){Ex(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return kx(e,n,s)}}const yj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EP(t,e,n,s){gj(t,e,void 0,s);for(const a in e.attrs)t.setAttribute(yj.has(a)?a:Ix(a),e.attrs[a])}class jP extends pj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_c.has(n)){const s=FE(n);return s&&s.default||0}return n=yj.has(n)?n:Ix(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return aj(e,n,s)}build(e,n,s){nj(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,a){EP(e,n,s,a)}mount(e){this.isSVGTag=ij(e.tagName),super.mount(e)}}const SP=(t,e)=>Sx(t)?new jP(e):new NP(e,{allowProjection:t!==E.Fragment});function Xl(t,e,n){const s=t.getProps();return Ax(s,e,n!==void 0?n:s.custom,t)}const iy=t=>Array.isArray(t);function AP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ac(n))}function kP(t){return iy(t)?t[t.length-1]||0:t}function IP(t,e){const n=Xl(t,e);let{transitionEnd:s={},transition:a={},...c}=n||{};c={...c,...s};for(const u in c){const h=kP(c[u]);AP(t,u,h)}}function CP(t){return!!(zn(t)&&t.add)}function ry(t,e){const n=t.getValue("willChange");if(CP(n))return n.add(e);if(!n&&Lr.WillChange){const s=new Lr.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function xj(t){return t.props[oj]}const RP=t=>t!==null;function PP(t,{repeat:e,repeatType:n="loop"},s){const a=t.filter(RP),c=e&&n!=="loop"&&e%2===1?0:a.length-1;return a[c]}const DP={type:"spring",stiffness:500,damping:25,restSpeed:10},MP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),VP={type:"keyframes",duration:.8},OP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LP=(t,{keyframes:e})=>e.length>2?VP:_c.has(t)?t.startsWith("scale")?MP(e[1]):DP:OP;function UP({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:a,repeat:c,repeatType:u,repeatDelay:h,from:m,elapsed:p,...x}){return!!Object.keys(x).length}const Cx=(t,e,n,s={},a,c)=>u=>{const h=xx(s,t)||{},m=h.delay||s.delay||0;let{elapsed:p=0}=s;p=p-$i(m);const x={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:w=>{e.set(w),h.onUpdate&&h.onUpdate(w)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:c?void 0:a};UP(h)||Object.assign(x,LP(t,x)),x.duration&&(x.duration=$i(x.duration)),x.repeatDelay&&(x.repeatDelay=$i(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let v=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(J0(x),x.delay===0&&(v=!0)),(Lr.instantAnimations||Lr.skipAnimations)&&(v=!0,J0(x),x.delay=0),x.allowFlatten=!h.type&&!h.ease,v&&!c&&e.get()!==void 0){const w=PP(x.keyframes,h);if(w!==void 0){kt.update(()=>{x.onUpdate(w),x.onComplete()});return}}return h.isSync?new gx(x):new a5(x)};function zP({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function vj(t,e,{delay:n=0,transitionOverride:s,type:a}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:u,...h}=e;s&&(c=s);const m=[],p=a&&t.animationState&&t.animationState.getState()[a];for(const x in h){const v=t.getValue(x,t.latestValues[x]??null),w=h[x];if(w===void 0||p&&zP(p,x))continue;const N={delay:n,...xx(c||{},x)},A=v.get();if(A!==void 0&&!v.isAnimating&&!Array.isArray(w)&&w===A&&!N.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const P=xj(t);if(P){const U=window.MotionHandoffAnimation(P,x,kt);U!==null&&(N.startTime=U,S=!0)}}ry(t,x),v.start(Cx(x,v,w,t.shouldReduceMotion&&UE.has(x)?{type:!1}:N,t,S));const k=v.animation;k&&m.push(k)}return u&&Promise.all(m).then(()=>{kt.update(()=>{u&&IP(t,u)})}),m}function bj(t,e,n,s=0,a=1){const c=Array.from(t).sort((p,x)=>p.sortNodePosition(x)).indexOf(e),u=t.size,h=(u-1)*s;return typeof n=="function"?n(c,u):a===1?c*s:h-c*s}function ay(t,e,n={}){const s=Xl(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const c=s?()=>Promise.all(vj(t,s,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:p=0,staggerChildren:x,staggerDirection:v}=a;return BP(t,e,m,p,x,v,n)}:()=>Promise.resolve(),{when:h}=a;if(h){const[m,p]=h==="beforeChildren"?[c,u]:[u,c];return m().then(()=>p())}else return Promise.all([c(),u(n.delay)])}function BP(t,e,n=0,s=0,a=0,c=1,u){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",e),h.push(ay(m,e,{...u,delay:n+(typeof s=="function"?0:s)+bj(t.variantChildren,m,s,a,c)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function FP(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const a=e.map(c=>ay(t,c,n));s=Promise.all(a)}else if(typeof e=="string")s=ay(t,e,n);else{const a=typeof e=="function"?Xl(t,e,n.custom):e;s=Promise.all(vj(t,a,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function wj(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const HP=Nx.length;function _j(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_j(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<HP;n++){const s=Nx[n],a=t.props[s];(od(a)||a===!1)&&(e[s]=a)}return e}const qP=[...Tx].reverse(),$P=Tx.length;function GP(t){return e=>Promise.all(e.map(({animation:n,options:s})=>FP(t,n,s)))}function YP(t){let e=GP(t),n=l2(),s=!0;const a=m=>(p,x)=>{const v=Xl(t,x,m==="exit"?t.presenceContext?.custom:void 0);if(v){const{transition:w,transitionEnd:N,...A}=v;p={...p,...A,...N}}return p};function c(m){e=m(t)}function u(m){const{props:p}=t,x=_j(t.parent)||{},v=[],w=new Set;let N={},A=1/0;for(let k=0;k<$P;k++){const P=qP[k],U=n[P],O=p[P]!==void 0?p[P]:x[P],F=od(O),Z=P===m?U.isActive:null;Z===!1&&(A=k);let ee=O===x[P]&&O!==p[P]&&F;if(ee&&s&&t.manuallyAnimateOnMount&&(ee=!1),U.protectedKeys={...N},!U.isActive&&Z===null||!O&&!U.prevProp||Nm(O)||typeof O=="boolean")continue;const C=ZP(U.prevProp,O);let I=C||P===m&&U.isActive&&!ee&&F||k>A&&F,j=!1;const M=Array.isArray(O)?O:[O];let z=M.reduce(a(P),{});Z===!1&&(z={});const{prevResolvedValues:B={}}=U,V={...B,...z},Ie=se=>{I=!0,w.has(se)&&(j=!0,w.delete(se)),U.needsAnimating[se]=!0;const fe=t.getValue(se);fe&&(fe.liveStyle=!1)};for(const se in V){const fe=z[se],be=B[se];if(N.hasOwnProperty(se))continue;let Ve=!1;iy(fe)&&iy(be)?Ve=!wj(fe,be):Ve=fe!==be,Ve?fe!=null?Ie(se):w.add(se):fe!==void 0&&w.has(se)?Ie(se):U.protectedKeys[se]=!0}U.prevProp=O,U.prevResolvedValues=z,U.isActive&&(N={...N,...z}),s&&t.blockInitialAnimation&&(I=!1);const J=ee&&C;I&&(!J||j)&&v.push(...M.map(se=>{const fe={type:P};if(typeof se=="string"&&s&&!J&&t.manuallyAnimateOnMount&&t.parent){const{parent:be}=t,Ve=Xl(be,se);if(be.enteringChildren&&Ve){const{delayChildren:q}=Ve.transition||{};fe.delay=bj(be.enteringChildren,t,q)}}return{animation:se,options:fe}}))}if(w.size){const k={};if(typeof p.initial!="boolean"){const P=Xl(t,Array.isArray(p.initial)?p.initial[0]:p.initial);P&&P.transition&&(k.transition=P.transition)}w.forEach(P=>{const U=t.getBaseTarget(P),O=t.getValue(P);O&&(O.liveStyle=!0),k[P]=U??null}),v.push({animation:k})}let S=!!v.length;return s&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(v):Promise.resolve()}function h(m,p){if(n[m].isActive===p)return Promise.resolve();t.variantChildren?.forEach(v=>v.animationState?.setActive(m,p)),n[m].isActive=p;const x=u(m);for(const v in n)n[v].protectedKeys={};return x}return{animateChanges:u,setActive:h,setAnimateFunction:c,getState:()=>n,reset:()=>{n=l2()}}}function ZP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wj(e,t):!1}function No(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function l2(){return{animate:No(!0),whileInView:No(),whileHover:No(),whileTap:No(),whileDrag:No(),whileFocus:No(),exit:No()}}class $a{constructor(e){this.isMounted=!1,this.node=e}update(){}}class KP extends $a{constructor(e){super(e),e.animationState||(e.animationState=YP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let QP=0;class WP extends $a{constructor(){super(...arguments),this.id=QP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const a=this.node.animationState.setActive("exit",!e);n&&!e&&a.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const XP={animation:{Feature:KP},exit:{Feature:WP}};function cd(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Ed(t){return{point:{x:t.pageX,y:t.pageY}}}const JP=t=>e=>wx(e)&&t(e,Ed(e));function Yu(t,e,n,s){return cd(t,e,JP(n),s)}const Tj=1e-4,eD=1-Tj,tD=1+Tj,Nj=.01,nD=0-Nj,sD=0+Nj;function Zn(t){return t.max-t.min}function iD(t,e,n){return Math.abs(t-e)<=n}function c2(t,e,n,s=.5){t.origin=s,t.originPoint=Mt(e.min,e.max,t.origin),t.scale=Zn(n)/Zn(e),t.translate=Mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=eD&&t.scale<=tD||isNaN(t.scale))&&(t.scale=1),(t.translate>=nD&&t.translate<=sD||isNaN(t.translate))&&(t.translate=0)}function Zu(t,e,n,s){c2(t.x,e.x,n.x,s?s.originX:void 0),c2(t.y,e.y,n.y,s?s.originY:void 0)}function u2(t,e,n){t.min=n.min+e.min,t.max=t.min+Zn(e)}function rD(t,e,n){u2(t.x,e.x,n.x),u2(t.y,e.y,n.y)}function d2(t,e,n){t.min=e.min-n.min,t.max=t.min+Zn(e)}function Ku(t,e,n){d2(t.x,e.x,n.x),d2(t.y,e.y,n.y)}function Zs(t){return[t("x"),t("y")]}const Ej=({current:t})=>t?t.ownerDocument.defaultView:null,h2=(t,e)=>Math.abs(t-e);function aD(t,e){const n=h2(t.x,e.x),s=h2(t.y,e.y);return Math.sqrt(n**2+s**2)}class jj{constructor(e,n,{transformPagePoint:s,contextWindow:a=window,dragSnapToOrigin:c=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=f0(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,A=aD(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!A)return;const{point:S}=w,{timestamp:k}=kn;this.history.push({...S,timestamp:k});const{onStart:P,onMove:U}=this.handlers;N||(P&&P(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,w)},this.handlePointerMove=(w,N)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=h0(N,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(w,N)=>{this.end();const{onEnd:A,onSessionEnd:S,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=f0(w.type==="pointercancel"?this.lastMoveEventInfo:h0(N,this.transformPagePoint),this.history);this.startEvent&&A&&A(w,P),S&&S(w,P)},!wx(e))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=u,this.contextWindow=a||window;const h=Ed(e),m=h0(h,this.transformPagePoint),{point:p}=m,{timestamp:x}=kn;this.history=[{...p,timestamp:x}];const{onSessionStart:v}=n;v&&v(e,f0(m,this.history)),this.removeListeners=_d(Yu(this.contextWindow,"pointermove",this.handlePointerMove),Yu(this.contextWindow,"pointerup",this.handlePointerUp),Yu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Va(this.updatePoint)}}function h0(t,e){return e?{point:e(t.point)}:t}function f2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function f0({point:t},e){return{point:t,delta:f2(t,Sj(e)),offset:f2(t,oD(e)),velocity:lD(e,.1)}}function oD(t){return t[0]}function Sj(t){return t[t.length-1]}function lD(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const a=Sj(t);for(;n>=0&&(s=t[n],!(a.timestamp-s.timestamp>$i(e)));)n--;if(!s)return{x:0,y:0};const c=Qs(a.timestamp-s.timestamp);if(c===0)return{x:0,y:0};const u={x:(a.x-s.x)/c,y:(a.y-s.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function cD(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?Mt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?Mt(n,t,s.max):Math.min(t,n)),t}function m2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uD(t,{top:e,left:n,bottom:s,right:a}){return{x:m2(t.x,n,a),y:m2(t.y,e,s)}}function p2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function dD(t,e){return{x:p2(t.x,e.x),y:p2(t.y,e.y)}}function hD(t,e){let n=.5;const s=Zn(t),a=Zn(e);return a>s?n=id(e.min,e.max-s,t.min):s>a&&(n=id(t.min,t.max-a,e.min)),Or(0,1,n)}function fD(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const oy=.35;function mD(t=oy){return t===!1?t=0:t===!0&&(t=oy),{x:g2(t,"left","right"),y:g2(t,"top","bottom")}}function g2(t,e,n){return{min:y2(t,e),max:y2(t,n)}}function y2(t,e){return typeof t=="number"?t:t[e]||0}const pD=new WeakMap;class gD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const c=v=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ed(v).point)},u=(v,w)=>{const{drag:N,dragPropagation:A,onDragStart:S}=this.getProps();if(N&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_5(N),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zs(P=>{let U=this.getAxisMotionValue(P).get()||0;if(Gi.test(U)){const{projection:O}=this.visualElement;if(O&&O.layout){const F=O.layout.layoutBox[P];F&&(U=Zn(F)*(parseFloat(U)/100))}}this.originPoint[P]=U}),S&&kt.postRender(()=>S(v,w)),ry(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},h=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w;const{dragPropagation:N,dragDirectionLock:A,onDirectionLock:S,onDrag:k}=this.getProps();if(!N&&!this.openDragLock)return;const{offset:P}=w;if(A&&this.currentDirection===null){this.currentDirection=yD(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",w.point,P),this.updateAxis("y",w.point,P),this.visualElement.render(),k&&k(v,w)},m=(v,w)=>{this.latestPointerEvent=v,this.latestPanInfo=w,this.stop(v,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Zs(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:x}=this.getProps();this.panSession=new jj(e,{onSessionStart:c,onStart:u,onMove:h,onSessionEnd:m,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,distanceThreshold:s,contextWindow:Ej(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,a=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!a||!s)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:h}=this.getProps();h&&kt.postRender(()=>h(s,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:a}=this.getProps();if(!s||!uf(e,a,this.currentDirection))return;const c=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=cD(u,this.constraints[e],this.elastic[e])),c.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Zl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=uD(s.layoutBox,e):this.constraints=!1,this.elastic=mD(n),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Zs(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=fD(s.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zl(e))return!1;const s=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=xP(s,a.root,this.visualElement.getTransformPagePoint());let u=dD(a.layout.layoutBox,c);if(n){const h=n(pP(u));this.hasMutatedConstraints=!!h,h&&(u=uj(h))}return u}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:a,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},p=Zs(x=>{if(!uf(x,n,this.currentDirection))return;let v=m&&m[x]||{};u&&(v={min:0,max:0});const w=a?200:1e6,N=a?40:1e7,A={type:"inertia",velocity:s?e[x]:0,bounceStiffness:w,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...c,...v};return this.startAxisValueAnimation(x,A)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return ry(this.visualElement,e),s.start(Cx(e,s,0,n,this.visualElement,!1))}stopAnimation(){Zs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zs(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),a=s[n];return a||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Zs(n=>{const{drag:s}=this.getProps();if(!uf(n,s,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(n);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[n];c.set(e[n]-Mt(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Zl(n)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Zs(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const m=h.get();a[u]=hD({min:m,max:m},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Zs(u=>{if(!uf(u,e,null))return;const h=this.getAxisMotionValue(u),{min:m,max:p}=this.constraints[u];h.set(Mt(m,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;pD.set(this.visualElement,this);const e=this.visualElement.current,n=Yu(e,"pointerdown",m=>{const{drag:p,dragListener:x=!0}=this.getProps();p&&x&&this.start(m)}),s=()=>{const{dragConstraints:m}=this.getProps();Zl(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),kt.read(s);const u=cd(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:p})=>{this.isDragging&&p&&(Zs(x=>{const v=this.getAxisMotionValue(x);v&&(this.originPoint[x]+=m[x].translate,v.set(v.get()+m[x].translate))}),this.visualElement.render())}));return()=>{u(),n(),c(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:u=oy,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:a,dragConstraints:c,dragElastic:u,dragMomentum:h}}}function uf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class xD extends $a{constructor(e){super(e),this.removeGroupControls=Ws,this.removeListeners=Ws,this.controls=new gD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ws}unmount(){this.removeGroupControls(),this.removeListeners()}}const x2=t=>(e,n)=>{t&&kt.postRender(()=>t(e,n))};class vD extends $a{constructor(){super(...arguments),this.removePointerDownListener=Ws}onPointerDown(e){this.session=new jj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ej(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:x2(e),onStart:x2(n),onMove:s,onEnd:(c,u)=>{delete this.session,a&&kt.postRender(()=>a(c,u))}}}mount(){this.removePointerDownListener=Yu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(De.test(t))t=parseFloat(t);else return t;const n=v2(t,e.target.x),s=v2(t,e.target.y);return`${n}% ${s}%`}},bD={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,a=Oa.parse(t);if(a.length>5)return s;const c=Oa.createTransformer(t),u=typeof a[0]!="number"?1:0,h=n.x.scale*e.x,m=n.y.scale*e.y;a[0+u]/=h,a[1+u]/=m;const p=Mt(h,m,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),c(a)}};let m0=!1;class wD extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:a}=this.props,{projection:c}=e;H5(_D),c&&(n.group&&n.group.add(c),s&&s.register&&a&&s.register(c),m0&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),jf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:a,isPresent:c}=this.props,{projection:u}=s;return u&&(u.isPresent=c,m0=!0,a||e.layoutDependency!==n||n===void 0||e.isPresent!==c?u.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?u.promote():u.relegate()||kt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:a}=e;m0=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Aj(t){const[e,n]=QE(),s=E.useContext(Xy);return o.jsx(wD,{...t,layoutGroup:s,switchLayoutGroup:E.useContext(lj),isPresent:e,safeToRemove:n})}const _D={borderRadius:{...Pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pu,borderTopRightRadius:Pu,borderBottomLeftRadius:Pu,borderBottomRightRadius:Pu,boxShadow:bD};function TD(t,e,n){const s=zn(t)?t:ac(t);return s.start(Cx("",s,e,n)),s.animation}const ND=(t,e)=>t.depth-e.depth;class ED{constructor(){this.children=[],this.isDirty=!1}add(e){tx(this.children,e),this.isDirty=!0}remove(e){nx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ND),this.isDirty=!1,this.children.forEach(e)}}function jD(t,e){const n=ds.now(),s=({timestamp:a})=>{const c=a-n;c>=e&&(Va(s),t(c-e))};return kt.setup(s,!0),()=>Va(s)}const kj=["TopLeft","TopRight","BottomLeft","BottomRight"],SD=kj.length,b2=t=>typeof t=="string"?parseFloat(t):t,w2=t=>typeof t=="number"||De.test(t);function AD(t,e,n,s,a,c){a?(t.opacity=Mt(0,n.opacity??1,kD(s)),t.opacityExit=Mt(e.opacity??1,0,ID(s))):c&&(t.opacity=Mt(e.opacity??1,n.opacity??1,s));for(let u=0;u<SD;u++){const h=`border${kj[u]}Radius`;let m=_2(e,h),p=_2(n,h);if(m===void 0&&p===void 0)continue;m||(m=0),p||(p=0),m===0||p===0||w2(m)===w2(p)?(t[h]=Math.max(Mt(b2(m),b2(p),s),0),(Gi.test(p)||Gi.test(m))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=Mt(e.rotate||0,n.rotate||0,s))}function _2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kD=Ij(0,.5,gE),ID=Ij(.5,.95,Ws);function Ij(t,e,n){return s=>s<t?0:s>e?1:n(id(t,e,s))}function T2(t,e){t.min=e.min,t.max=e.max}function Ys(t,e){T2(t.x,e.x),T2(t.y,e.y)}function N2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function E2(t,e,n,s,a){return t-=e,t=qf(t,1/n,s),a!==void 0&&(t=qf(t,1/a,s)),t}function CD(t,e=0,n=1,s=.5,a,c=t,u=t){if(Gi.test(e)&&(e=parseFloat(e),e=Mt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=Mt(c.min,c.max,s);t===c&&(h-=e),t.min=E2(t.min,e,n,h,a),t.max=E2(t.max,e,n,h,a)}function j2(t,e,[n,s,a],c,u){CD(t,e[n],e[s],e[a],e.scale,c,u)}const RD=["x","scaleX","originX"],PD=["y","scaleY","originY"];function S2(t,e,n,s){j2(t.x,e,RD,n?n.x:void 0,s?s.x:void 0),j2(t.y,e,PD,n?n.y:void 0,s?s.y:void 0)}function A2(t){return t.translate===0&&t.scale===1}function Cj(t){return A2(t.x)&&A2(t.y)}function k2(t,e){return t.min===e.min&&t.max===e.max}function DD(t,e){return k2(t.x,e.x)&&k2(t.y,e.y)}function I2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Rj(t,e){return I2(t.x,e.x)&&I2(t.y,e.y)}function C2(t){return Zn(t.x)/Zn(t.y)}function R2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class MD{constructor(){this.members=[]}add(e){tx(this.members,e),e.scheduleRender()}remove(e){if(nx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(a=>e===a);if(n===0)return!1;let s;for(let a=n;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){s=c;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VD(t,e,n){let s="";const a=t.x.translate/e.x,c=t.y.translate/e.y,u=n?.z||0;if((a||c||u)&&(s=`translate3d(${a}px, ${c}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:x,rotateX:v,rotateY:w,skewX:N,skewY:A}=n;p&&(s=`perspective(${p}px) ${s}`),x&&(s+=`rotate(${x}deg) `),v&&(s+=`rotateX(${v}deg) `),w&&(s+=`rotateY(${w}deg) `),N&&(s+=`skewX(${N}deg) `),A&&(s+=`skewY(${A}deg) `)}const h=t.x.scale*e.x,m=t.y.scale*e.y;return(h!==1||m!==1)&&(s+=`scale(${h}, ${m})`),s||"none"}const p0=["","X","Y","Z"],OD=1e3;let LD=0;function g0(t,e,n,s){const{latestValues:a}=e;a[t]&&(n[t]=a[t],e.setStaticValue(t,0),s&&(s[t]=0))}function Pj(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xj(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kt,!(a||c))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&Pj(s)}function Dj({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(u={},h=e?.()){this.id=LD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BD),this.nodes.forEach($D),this.nodes.forEach(GD),this.nodes.forEach(FD)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new ED)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new rx),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const m=this.eventHandlers.get(u);m&&m.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=KE(u)&&!A5(u),this.instance=u;const{layoutId:h,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let x,v=0;const w=()=>this.root.updateBlockedByResize=!1;kt.read(()=>{v=window.innerWidth}),t(u,()=>{const N=window.innerWidth;N!==v&&(v=N,this.root.updateBlockedByResize=!0,x&&x(),x=jD(w,250),jf.hasAnimatedSinceResize&&(jf.hasAnimatedSinceResize=!1,this.nodes.forEach(M2)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||m)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:v,hasRelativeLayoutChanged:w,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||p.getDefaultTransition()||WD,{onLayoutAnimationStart:S,onLayoutAnimationComplete:k}=p.getProps(),P=!this.targetLayout||!Rj(this.targetLayout,N),U=!v&&w;if(this.options.layoutRoot||this.resumeFrom||U||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...xx(A,"layout"),onPlay:S,onComplete:k};(p.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(x,U)}else v||M2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YD),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Pj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const v=this.path[x];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(P2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(D2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(qD),this.nodes.forEach(UD),this.nodes.forEach(zD)):this.nodes.forEach(D2),this.clearAllSnapshots();const h=ds.now();kn.delta=Or(0,1e3/60,h-kn.timestamp),kn.timestamp=h,kn.isProcessing=!0,i0.update.process(kn),i0.preRender.process(kn),i0.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HD),this.sharedNodes.forEach(ZD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Zn(this.snapshot.measuredBox.x)&&!Zn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const m=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:m,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!Cj(this.projectionDelta),m=this.getTransformTemplate(),p=m?m(this.latestValues,""):void 0,x=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||Eo(this.latestValues)||x)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return u&&(m=this.removeTransform(m)),XD(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Qt();const h=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(JD))){const{scroll:p}=this.root;p&&(Kl(h.x,p.offset.x),Kl(h.y,p.offset.y))}return h}removeElementScroll(u){const h=Qt();if(Ys(h,u),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const p=this.path[m],{scroll:x,options:v}=p;p!==this.root&&x&&v.layoutScroll&&(x.wasRoot&&Ys(h,u),Kl(h.x,x.offset.x),Kl(h.y,x.offset.y))}return h}applyTransform(u,h=!1){const m=Qt();Ys(m,u);for(let p=0;p<this.path.length;p++){const x=this.path[p];!h&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Ql(m,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),Eo(x.latestValues)&&Ql(m,x.latestValues)}return Eo(this.latestValues)&&Ql(m,this.latestValues),m}removeTransform(u){const h=Qt();Ys(h,u);for(let m=0;m<this.path.length;m++){const p=this.path[m];if(!p.instance||!Eo(p.latestValues))continue;ty(p.latestValues)&&p.updateSnapshot();const x=Qt(),v=p.measurePageBox();Ys(x,v),S2(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,x)}return Eo(this.latestValues)&&S2(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:v}=this.options;if(!(!this.layout||!(x||v))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Ku(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ys(this.target,this.layout.layoutBox),hj(this.target,this.targetDelta)):Ys(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Ku(this.relativeTargetOrigin,this.target,w.target),Ys(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ty(this.parent.latestValues)||dj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),h=!!this.resumingFrom||this!==u;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(m=!1),m)return;const{layout:p,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||x))return;Ys(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;yP(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Qt());const{target:N}=u;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(N2(this.prevProjectionDelta.x,this.projectionDelta.x),N2(this.prevProjectionDelta.y,this.projectionDelta.y)),Zu(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!R2(this.projectionDelta.x,this.prevProjectionDelta.x)||!R2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(u,h=!1){const m=this.snapshot,p=m?m.latestValues:{},x={...this.latestValues},v=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const w=Qt(),N=m?m.source:void 0,A=this.layout?this.layout.source:void 0,S=N!==A,k=this.getStack(),P=!k||k.members.length<=1,U=!!(S&&!P&&this.options.crossfade===!0&&!this.path.some(QD));this.animationProgress=0;let O;this.mixTargetDelta=F=>{const Z=F/1e3;V2(v.x,u.x,Z),V2(v.y,u.y,Z),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ku(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KD(this.relativeTarget,this.relativeTargetOrigin,w,Z),O&&DD(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Qt()),Ys(O,this.relativeTarget)),S&&(this.animationValues=x,AD(x,p,this.latestValues,Z,U,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{jf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ac(0)),this.currentAnimation=TD(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:m,layout:p,latestValues:x}=u;if(!(!h||!m||!p)){if(this!==u&&this.layout&&p&&Mj(this.options.animationType,this.layout.layoutBox,p.layoutBox)){m=this.target||Qt();const v=Zn(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+v;const w=Zn(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+w}Ys(h,m),Ql(h,x),Zu(this.projectionDeltaWithTransform,this.layoutCorrected,h,x)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new MD),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:m}={}){const p=this.getStack();p&&p.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:m}=u;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const p={};m.z&&g0("z",u,p,this.animationValues);for(let x=0;x<p0.length;x++)g0(`rotate${p0[x]}`,u,p,this.animationValues),g0(`skew${p0[x]}`,u,p,this.animationValues);u.render();for(const x in p)u.setStaticValue(x,p[x]),this.animationValues&&(this.animationValues[x]=p[x]);u.scheduleRender()}applyProjectionStyles(u,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=Ef(h?.pointerEvents)||"",u.transform=m?m(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=Ef(h?.pointerEvents)||""),this.hasProjected&&!Eo(this.latestValues)&&(u.transform=m?m({},""):"none",this.hasProjected=!1);return}u.visibility="";const x=p.animationValues||p.latestValues;this.applyTransformsToTarget();let v=VD(this.projectionDeltaWithTransform,this.treeScale,x);m&&(v=m(x,v)),u.transform=v;const{x:w,y:N}=this.projectionDelta;u.transformOrigin=`${w.origin*100}% ${N.origin*100}% 0`,p.animationValues?u.opacity=p===this?x.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:u.opacity=p===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const A in ld){if(x[A]===void 0)continue;const{correct:S,applyTo:k,isCSSVariable:P}=ld[A],U=v==="none"?x[A]:S(x[A],p);if(k){const O=k.length;for(let F=0;F<O;F++)u[k[F]]=U}else P?this.options.visualElement.renderState.vars[A]=U:u[A]=U}this.options.layoutId&&(u.pointerEvents=p===this?Ef(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(P2),this.root.sharedNodes.clear()}}}function UD(t){t.updateLayout()}function zD(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:a}=t.options,c=e.source!==t.layout.source;a==="size"?Zs(x=>{const v=c?e.measuredBox[x]:e.layoutBox[x],w=Zn(v);v.min=n[x].min,v.max=v.min+w}):Mj(a,e.layoutBox,n)&&Zs(x=>{const v=c?e.measuredBox[x]:e.layoutBox[x],w=Zn(n[x]);v.max=v.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+w)});const u=Wl();Zu(u,n,e.layoutBox);const h=Wl();c?Zu(h,t.applyTransform(s,!0),e.measuredBox):Zu(h,n,e.layoutBox);const m=!Cj(u);let p=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:v,layout:w}=x;if(v&&w){const N=Qt();Ku(N,e.layoutBox,v.layoutBox);const A=Qt();Ku(A,n,w.layoutBox),Rj(N,A)||(p=!0),x.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=N,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function BD(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HD(t){t.clearSnapshot()}function P2(t){t.clearMeasurements()}function D2(t){t.isLayoutDirty=!1}function qD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function M2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $D(t){t.resolveTargetDelta()}function GD(t){t.calcProjection()}function YD(t){t.resetSkewAndRotation()}function ZD(t){t.removeLeadSnapshot()}function V2(t,e,n){t.translate=Mt(e.translate,0,n),t.scale=Mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function O2(t,e,n,s){t.min=Mt(e.min,n.min,s),t.max=Mt(e.max,n.max,s)}function KD(t,e,n,s){O2(t.x,e.x,n.x,s),O2(t.y,e.y,n.y,s)}function QD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WD={duration:.45,ease:[.4,0,.1,1]},L2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U2=L2("applewebkit/")&&!L2("chrome/")?Math.round:Ws;function z2(t){t.min=U2(t.min),t.max=U2(t.max)}function XD(t){z2(t.x),z2(t.y)}function Mj(t,e,n){return t==="position"||t==="preserve-aspect"&&!iD(C2(e),C2(n),.2)}function JD(t){return t!==t.root&&t.scroll?.wasRoot}const e6=Dj({attachResizeListener:(t,e)=>cd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),y0={current:void 0},Vj=Dj({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!y0.current){const t=new e6({});t.mount(window),t.setOptions({layoutScroll:!0}),y0.current=t}return y0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),t6={pan:{Feature:vD},drag:{Feature:xD,ProjectionNode:Vj,MeasureLayout:Aj}};function B2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,c=s[a];c&&kt.postRender(()=>c(e,Ed(e)))}class n6 extends $a{mount(){const{current:e}=this.node;e&&(this.unmount=T5(e,(n,s)=>(B2(this.node,s,"Start"),a=>B2(this.node,a,"End"))))}unmount(){}}class s6 extends $a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_d(cd(this.node.current,"focus",()=>this.onFocus()),cd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F2(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),c=s[a];c&&kt.postRender(()=>c(e,Ed(e)))}class i6 extends $a{mount(){const{current:e}=this.node;e&&(this.unmount=S5(e,(n,s)=>(F2(this.node,s,"Start"),(a,{success:c})=>F2(this.node,a,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ly=new WeakMap,x0=new WeakMap,r6=t=>{const e=ly.get(t.target);e&&e(t)},a6=t=>{t.forEach(r6)};function o6({root:t,...e}){const n=t||document;x0.has(n)||x0.set(n,{});const s=x0.get(n),a=JSON.stringify(e);return s[a]||(s[a]=new IntersectionObserver(a6,{root:t,...e})),s[a]}function l6(t,e,n){const s=o6(e);return ly.set(t,n),s.observe(t),()=>{ly.delete(t),s.unobserve(t)}}const c6={some:0,all:1};class u6 extends $a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:a="some",once:c}=e,u={root:n?n.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:c6[a]},h=m=>{const{isIntersecting:p}=m;if(this.isInView===p||(this.isInView=p,c&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:x,onViewportLeave:v}=this.node.getProps(),w=p?x:v;w&&w(m)};return l6(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(d6(e,n))&&this.startObserver()}unmount(){}}function d6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const h6={inView:{Feature:u6},tap:{Feature:i6},focus:{Feature:s6},hover:{Feature:n6}},f6={layout:{ProjectionNode:Vj,MeasureLayout:Aj}},m6={...XP,...h6,...t6,...f6},L=mP(m6,SP);const p6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),H2=t=>{const e=g6(t);return e.charAt(0).toUpperCase()+e.slice(1)},Oj=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),y6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var x6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const v6=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:u,...h},m)=>E.createElement("svg",{ref:m,...x6,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:Oj("lucide",a),...!c&&!y6(h)&&{"aria-hidden":"true"},...h},[...u.map(([p,x])=>E.createElement(p,x)),...Array.isArray(c)?c:[c]]));const pe=(t,e)=>{const n=E.forwardRef(({className:s,...a},c)=>E.createElement(v6,{ref:c,iconNode:e,className:Oj(`lucide-${p6(H2(t))}`,`lucide-${t}`,s),...a}));return n.displayName=H2(t),n};const b6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["polyline",{points:"11 3 11 11 14 8 17 11 17 3",key:"1wcwz3"}]],w6=pe("album",b6);const _6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jm=pe("arrow-left",_6);const T6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cy=pe("arrow-right",T6);const N6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],E6=pe("award",N6);const j6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Rx=pe("calendar",j6);const S6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],A6=pe("camera",S6);const k6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],q2=pe("check",k6);const I6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$2=pe("chevron-right",I6);const C6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pi=pe("circle-alert",C6);const R6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ca=pe("circle-check-big",R6);const P6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],D6=pe("circle-check",P6);const M6=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V6=pe("circle-play",M6);const O6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],L6=pe("circle-x",O6);const U6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tc=pe("clock",U6);const z6=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],B6=pe("cloud",z6);const F6=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],H6=pe("code",F6);const q6=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G2=pe("compass",q6);const $6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]],Px=pe("disc-3",$6);const G6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$f=pe("download",G6);const Y6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],lc=pe("external-link",Y6);const Z6=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Y2=pe("eye-off",Z6);const K6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Z2=pe("eye",K6);const Q6=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],v0=pe("flame",Q6);const W6=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],uy=pe("folder-plus",W6);const X6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Lj=pe("funnel",X6);const J6=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],eM=pe("github",J6);const tM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Uj=pe("globe",tM);const nM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],sM=pe("grid-3x3",nM);const iM=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rM=pe("grip-vertical",iM);const aM=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],wn=pe("heart",aM);const oM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],lM=pe("house",oM);const cM=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],uM=pe("instagram",cM);const dM=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],hM=pe("linkedin",dM);const fM=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Yi=pe("list-music",fM);const mM=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],dy=pe("list-plus",mM);const pM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ud=pe("list",pM);const gM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],b0=pe("loader-circle",gM);const yM=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],xM=pe("loader",yM);const vM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Do=pe("lock",vM);const bM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],K2=pe("log-out",bM);const wM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ur=pe("mail",wM);const _M=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Q2=pe("map-pin",_M);const TM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],NM=pe("menu",TM);const EM=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],W2=pe("message-square",EM);const jM=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],Me=pe("music-2",jM);const SM=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],zj=pe("music",SM);const AM=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],dd=pe("pause",AM);const kM=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Bj=pe("pen-line",kM);const IM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],CM=pe("pen",IM);const RM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],PM=pe("phone",RM);const DM=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],xt=pe("play",DM);const MM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hy=pe("plus",MM);const VM=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fj=pe("radio",VM);const OM=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Hj=pe("repeat",OM);const LM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qj=pe("save",LM);const UM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hs=pe("search",UM);const zM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],BM=pe("send",zM);const FM=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],$j=pe("share-2",FM);const HM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qM=pe("shield-check",HM);const $M=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gj=pe("shield",$M);const GM=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Dx=pe("shuffle",GM);const YM=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],Yj=pe("skip-back",YM);const ZM=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Zj=pe("skip-forward",ZM);const KM=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],QM=pe("smartphone",KM);const WM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Zi=pe("sparkles",WM);const XM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],X2=pe("star",XM);const JM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],La=pe("trash-2",JM);const eV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Sm=pe("trending-up",eV);const tV=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],nV=pe("trophy",tV);const sV=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],iV=pe("twitter",sV);const rV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],aV=pe("user-plus",rV);const oV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pr=pe("user",oV);const lV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ki=pe("users",lV);const cV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Mx=pe("volume-2",cV);const uV=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Vx=pe("volume-x",uV);const dV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_n=pe("x",dV);const hV=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],qt=pe("youtube",hV);const fV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fy=pe("zap",fV),mV=()=>{};var J2={};const Kj=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},pV=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const a=t[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=t[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=t[n++],u=t[n++],h=t[n++],m=((a&7)<<18|(c&63)<<12|(u&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const c=t[n++],u=t[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Qj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<t.length;a+=3){const c=t[a],u=a+1<t.length,h=u?t[a+1]:0,m=a+2<t.length,p=m?t[a+2]:0,x=c>>2,v=(c&3)<<4|h>>4;let w=(h&15)<<2|p>>6,N=p&63;m||(N=64,u||(w=64)),s.push(n[x],n[v],n[w],n[N])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<t.length;){const c=n[t.charAt(a++)],h=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,c==null||h==null||p==null||v==null)throw new gV;const w=c<<2|h>>4;if(s.push(w),p!==64){const N=h<<4&240|p>>2;if(s.push(N),v!==64){const A=p<<6&192|v;s.push(A)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yV=function(t){const e=Kj(t);return Qj.encodeByteArray(e,!0)},Gf=function(t){return yV(t).replace(/\./g,"")},Wj=function(t){try{return Qj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const vV=()=>xV().__FIREBASE_DEFAULTS__,bV=()=>{if(typeof process>"u"||typeof J2>"u")return;const t=J2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wj(t[1]);return e&&JSON.parse(e)},Am=()=>{try{return mV()||vV()||bV()||wV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xj=t=>Am()?.emulatorHosts?.[t],Jj=t=>{const e=Xj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},eS=()=>Am()?.config,tS=t=>Am()?.[`_${t}`];class _V{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Ga(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ox(t){return(await fetch(t,{credentials:"include"})).ok}function nS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gf(JSON.stringify(n)),Gf(JSON.stringify(u)),""].join(".")}const Qu={};function TV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?t.emulator.push(e):t.prod.push(e);return t}function NV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eT=!1;function Lx(t,e){if(typeof window>"u"||typeof document>"u"||!Ga(window.location.host)||Qu[t]===e||Qu[t]||eT)return;Qu[t]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=TV().prod.length>0;function u(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function m(w,N){w.setAttribute("width","24"),w.setAttribute("id",N),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{eT=!0,u()},w}function x(w,N){w.setAttribute("id",N),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=NV(s),N=n("text"),A=document.getElementById(N)||document.createElement("span"),S=n("learnmore"),k=document.getElementById(S)||document.createElement("a"),P=n("preprendIcon"),U=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const O=w.element;h(O),x(k,S);const F=p();m(U,P),O.append(U,A,k,F),document.body.appendChild(O)}c?(A.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function jV(){const t=Am()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kV(){const t=Fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IV(){return!jV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function rS(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}function CV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const RV="FirebaseError";class ti extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=RV,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],u=c?PV(c,s):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ti(a,h,s)}}function PV(t,e){return t.replace(DV,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const DV=/\{\$([^}]+)}/g;function MV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=t[a],u=e[a];if(tT(c)&&tT(u)){if(!tr(c,u))return!1}else if(c!==u)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function tT(t){return t!==null&&typeof t=="object"}function jd(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Uu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,c]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VV(t,e){const n=new OV(t,e);return n.subscribe.bind(n)}class OV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let a;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");LV(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:s},a.next===void 0&&(a.next=w0),a.error===void 0&&(a.error=w0),a.complete===void 0&&(a.complete=w0);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function w0(){}const UV=1e3,zV=2,BV=14400*1e3,FV=.5;function nT(t,e=UV,n=zV){const s=e*Math.pow(n,t),a=Math.round(FV*s*(Math.random()-.5)*2);return Math.min(BV,s+a)}function ut(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jo="[DEFAULT]";class HV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new _V;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($V(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);s===h&&u.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qV(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qV(t){return t===jo?void 0:t}function $V(t){return t.instantiationMode==="EAGER"}class GV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const YV={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},ZV=We.INFO,KV={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},QV=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),a=KV[e];if(a)console[a](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=ZV,this._logHandler=QV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const WV=(t,e)=>e.some(n=>t instanceof n);let sT,iT;function XV(){return sT||(sT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JV(){return iT||(iT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aS=new WeakMap,my=new WeakMap,oS=new WeakMap,_0=new WeakMap,Ux=new WeakMap;function eO(t){const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("success",c),t.removeEventListener("error",u)},c=()=>{n(Ra(t.result)),a()},u=()=>{s(t.error),a()};t.addEventListener("success",c),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&aS.set(n,t)}).catch(()=>{}),Ux.set(e,t),e}function tO(t){if(my.has(t))return;const e=new Promise((n,s)=>{const a=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",u),t.removeEventListener("abort",u)},c=()=>{n(),a()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",c),t.addEventListener("error",u),t.addEventListener("abort",u)});my.set(t,e)}let py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ra(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nO(t){py=t(py)}function sO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(T0(this),e,...n);return oS.set(s,e.sort?e.sort():[e]),Ra(s)}:JV().includes(t)?function(...e){return t.apply(T0(this),e),Ra(aS.get(this))}:function(...e){return Ra(t.apply(T0(this),e))}}function iO(t){return typeof t=="function"?sO(t):(t instanceof IDBTransaction&&tO(t),WV(t,XV())?new Proxy(t,py):t)}function Ra(t){if(t instanceof IDBRequest)return eO(t);if(_0.has(t))return _0.get(t);const e=iO(t);return e!==t&&(_0.set(t,e),Ux.set(e,t)),e}const T0=t=>Ux.get(t);function lS(t,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const u=indexedDB.open(t,e),h=Ra(u);return s&&u.addEventListener("upgradeneeded",m=>{s(Ra(u.result),m.oldVersion,m.newVersion,Ra(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),h.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const rO=["get","getKey","getAll","getAllKeys","count"],aO=["put","add","delete","clear"],N0=new Map;function rT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(N0.get(e))return N0.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=aO.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||rO.includes(n)))return;const c=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),a&&m.done]))[0]};return N0.set(e,c),c}nO(t=>({...t,get:(e,n,s)=>rT(e,n)||t.get(e,n,s),has:(e,n)=>!!rT(e,n)||t.has(e,n)}));class oO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lO(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function lO(t){return t.getComponent()?.type==="VERSION"}const gy="@firebase/app",aT="0.14.5";const zr=new km("@firebase/app"),cO="@firebase/app-compat",uO="@firebase/analytics-compat",dO="@firebase/analytics",hO="@firebase/app-check-compat",fO="@firebase/app-check",mO="@firebase/auth",pO="@firebase/auth-compat",gO="@firebase/database",yO="@firebase/data-connect",xO="@firebase/database-compat",vO="@firebase/functions",bO="@firebase/functions-compat",wO="@firebase/installations",_O="@firebase/installations-compat",TO="@firebase/messaging",NO="@firebase/messaging-compat",EO="@firebase/performance",jO="@firebase/performance-compat",SO="@firebase/remote-config",AO="@firebase/remote-config-compat",kO="@firebase/storage",IO="@firebase/storage-compat",CO="@firebase/firestore",RO="@firebase/ai",PO="@firebase/firestore-compat",DO="firebase",MO="12.5.0";const yy="[DEFAULT]",VO={[gy]:"fire-core",[cO]:"fire-core-compat",[dO]:"fire-analytics",[uO]:"fire-analytics-compat",[fO]:"fire-app-check",[hO]:"fire-app-check-compat",[mO]:"fire-auth",[pO]:"fire-auth-compat",[gO]:"fire-rtdb",[yO]:"fire-data-connect",[xO]:"fire-rtdb-compat",[vO]:"fire-fn",[bO]:"fire-fn-compat",[wO]:"fire-iid",[_O]:"fire-iid-compat",[TO]:"fire-fcm",[NO]:"fire-fcm-compat",[EO]:"fire-perf",[jO]:"fire-perf-compat",[SO]:"fire-rc",[AO]:"fire-rc-compat",[kO]:"fire-gcs",[IO]:"fire-gcs-compat",[CO]:"fire-fst",[PO]:"fire-fst-compat",[RO]:"fire-vertex","fire-js":"fire-js",[DO]:"fire-js-all"};const Yf=new Map,OO=new Map,xy=new Map;function oT(t,e){try{t.container.addComponent(e)}catch(n){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if(xy.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;xy.set(e,t);for(const n of Yf.values())oT(n,t);for(const n of OO.values())oT(n,t);return!0}function Ya(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cs(t){return t==null?!1:t.settings!==void 0}const LO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pa=new $o("app","Firebase",LO);class UO{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pa.create("app-deleted",{appName:this._name})}}const Go=MO;function cS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:yy,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Pa.create("bad-app-name",{appName:String(a)});if(n||(n=eS()),!n)throw Pa.create("no-options");const c=Yf.get(a);if(c){if(tr(n,c.options)&&tr(s,c.config))return c;throw Pa.create("duplicate-app",{appName:a})}const u=new GV(a);for(const m of xy.values())u.addComponent(m);const h=new UO(n,s,u);return Yf.set(a,h),h}function Im(t=yy){const e=Yf.get(t);if(!e&&t===yy&&eS())return cS();if(!e)throw Pa.create("no-app",{appName:t});return e}function fs(t,e,n){let s=VO[t]??t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(u.join(" "));return}gi(new ei(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const zO="firebase-heartbeat-database",BO=1,hd="firebase-heartbeat-store";let E0=null;function uS(){return E0||(E0=lS(zO,BO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pa.create("idb-open",{originalErrorMessage:t.message})})),E0}async function FO(t){try{const n=(await uS()).transaction(hd),s=await n.objectStore(hd).get(dS(t));return await n.done,s}catch(e){if(e instanceof ti)zr.warn(e.message);else{const n=Pa.create("idb-get",{originalErrorMessage:e?.message});zr.warn(n.message)}}}async function lT(t,e){try{const s=(await uS()).transaction(hd,"readwrite");await s.objectStore(hd).put(e,dS(t)),await s.done}catch(n){if(n instanceof ti)zr.warn(n.message);else{const s=Pa.create("idb-set",{originalErrorMessage:n?.message});zr.warn(s.message)}}}function dS(t){return`${t.name}!${t.options.appId}`}const HO=1024,qO=30;class $O{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YO(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>qO){const a=ZO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cT(),{heartbeatsToSend:n,unsentEntries:s}=GO(this._heartbeatsCache.heartbeats),a=Gf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return zr.warn(e),""}}}function cT(){return new Date().toISOString().substring(0,10)}function GO(t,e=HO){const n=[];let s=t.slice();for(const a of t){const c=n.find(u=>u.agent===a.agent);if(c){if(c.dates.push(a.date),uT(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),uT(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class YO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?rS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return lT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return lT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uT(t){return Gf(JSON.stringify({version:2,heartbeats:t})).length}function ZO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function KO(t){gi(new ei("platform-logger",e=>new oO(e),"PRIVATE")),gi(new ei("heartbeat",e=>new $O(e),"PRIVATE")),fs(gy,aT,t),fs(gy,aT,"esm2020"),fs("fire-js","")}KO("");function hS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QO=hS,fS=new $o("auth","Firebase",hS());const Zf=new km("@firebase/auth");function WO(t,...e){Zf.logLevel<=We.WARN&&Zf.warn(`Auth (${Go}): ${t}`,...e)}function Sf(t,...e){Zf.logLevel<=We.ERROR&&Zf.error(`Auth (${Go}): ${t}`,...e)}function Rs(t,...e){throw Bx(t,...e)}function mi(t,...e){return Bx(t,...e)}function zx(t,e,n){const s={...QO(),[e]:n};return new $o("auth","Firebase",s).create(e,{appName:t.name})}function Dr(t){return zx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XO(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Rs(t,"argument-error"),zx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bx(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return fS.create(t,...e)}function Ae(t,e,...n){if(!t)throw Bx(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sf(e),new Error(e)}function Br(t,e){t||kr(e)}function vy(){return typeof self<"u"&&self.location?.href||""}function JO(){return dT()==="http:"||dT()==="https:"}function dT(){return typeof self<"u"&&self.location?.protocol||null}function eL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JO()||sS()||"connection"in navigator)?navigator.onLine:!0}function tL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Sd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=EV()||AV()}get(){return eL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fx(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class mS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iL=new Sd(3e4,6e4);function ir(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ni(t,e,n,s,a={}){return pS(t,a,async()=>{let c={},u={};s&&(e==="GET"?u=s:c={body:JSON.stringify(s)});const h=jd({key:t.config.apiKey,...u}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...c};return SV()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Ga(t.emulatorConfig.host)&&(p.credentials="include"),mS.fetch()(await gS(t,t.config.apiHost,n,h),p)})}async function pS(t,e,n){t._canInitEmulator=!1;const s={...nL,...e};try{const a=new aL(t),c=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw df(t,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const h=c.ok?u.errorMessage:u.error.message,[m,p]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(t,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw df(t,"email-already-in-use",u);if(m==="USER_DISABLED")throw df(t,"user-disabled",u);const x=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw zx(t,x,p);Rs(t,x)}}catch(a){if(a instanceof ti)throw a;Rs(t,"network-request-failed",{message:String(a)})}}async function Ad(t,e,n,s,a={}){const c=await ni(t,e,n,s,a);return"mfaPendingCredential"in c&&Rs(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function gS(t,e,n,s){const a=`${e}${n}?${s}`,c=t,u=c.config.emulator?Fx(t.config,a):`${t.config.apiScheme}://${a}`;return sL.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function rL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),iL.get())})}}function df(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=mi(t,e,s);return a.customData._tokenResponse=n,a}function hT(t){return t!==void 0&&t.enterprise!==void 0}class oL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lL(t,e){return ni(t,"GET","/v2/recaptchaConfig",ir(t,e))}async function cL(t,e){return ni(t,"POST","/v1/accounts:delete",e)}async function Kf(t,e){return ni(t,"POST","/v1/accounts:lookup",e)}function Wu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uL(t,e=!1){const n=ut(t),s=await n.getIdToken(e),a=Hx(s);Ae(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,u=c?.sign_in_provider;return{claims:a,token:s,authTime:Wu(j0(a.auth_time)),issuedAtTime:Wu(j0(a.iat)),expirationTime:Wu(j0(a.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function j0(t){return Number(t)*1e3}function Hx(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Wj(n);return a?JSON.parse(a):(Sf("Failed to decode base64 JWT payload"),null)}catch(a){return Sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function fT(t){const e=Hx(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Oo(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ti&&dL(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function dL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class hL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class by{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wu(this.lastLoginAt),this.creationTime=Wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qf(t){const e=t.auth,n=await t.getIdToken(),s=await Oo(t,Kf(e,{idToken:n}));Ae(s?.users.length,e,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=a.providerUserInfo?.length?yS(a.providerUserInfo):[],u=mL(t.providerData,c),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!u?.length,p=h?m:!1,x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new by(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,x)}async function fL(t){const e=ut(t);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mL(t,e){return[...t.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function yS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function pL(t,e){const n=await pS(t,{},async()=>{const s=jd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=t.config,u=await gS(t,a,"/v1/token",`key=${c}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:s};return t.emulatorConfig&&Ga(t.emulatorConfig.host)&&(m.credentials="include"),mS.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gL(t,e){return ni(t,"POST","/v2/accounts:revokeToken",ir(t,e))}class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=fT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:a,expiresIn:c}=await pL(e,n);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:a,expirationTime:c}=n,u=new Jl;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Ae(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),c&&(Ae(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return kr("not implemented")}}function Na(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new hL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new by(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Oo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uL(this,e)}reload(){return fL(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Qf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cs(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await Oo(this,cL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,a=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,h=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:N,providerData:A,stsTokenManager:S}=n;Ae(v&&S,e,"internal-error");const k=Jl.fromJSON(this.name,S);Ae(typeof v=="string",e,"internal-error"),Na(s,e.name),Na(a,e.name),Ae(typeof w=="boolean",e,"internal-error"),Ae(typeof N=="boolean",e,"internal-error"),Na(c,e.name),Na(u,e.name),Na(h,e.name),Na(m,e.name),Na(p,e.name),Na(x,e.name);const P=new fi({uid:v,auth:e,email:a,emailVerified:w,displayName:s,isAnonymous:N,photoURL:u,phoneNumber:c,tenantId:h,stsTokenManager:k,createdAt:p,lastLoginAt:x});return A&&Array.isArray(A)&&(P.providerData=A.map(U=>({...U}))),m&&(P._redirectEventId=m),P}static async _fromIdTokenResponse(e,n,s=!1){const a=new Jl;a.updateFromServerResponse(n);const c=new fi({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Qf(c),c}static async _fromGetAccountInfoResponse(e,n,s){const a=n.users[0];Ae(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?yS(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!c?.length,h=new Jl;h.updateFromIdToken(s);const m=new fi({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new by(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(m,p),m}}const mT=new Map;function Ir(t){Br(t instanceof Function,"Expected a class definition");let e=mT.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mT.set(t,e),e)}class xS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xS.type="NONE";const pT=xS;function Af(t,e,n){return`firebase:${t}:${e}:${n}`}class ec{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=Af(this.userKey,a.apiKey,c),this.fullPersistenceKey=Af("persistence",a.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kf(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ec(Ir(pT),e,s);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=a[0]||Ir(pT);const u=Af(s,e.config.apiKey,e.name);let h=null;for(const p of n)try{const x=await p._get(u);if(x){let v;if(typeof x=="string"){const w=await Kf(e,{idToken:x}).catch(()=>{});if(!w)break;v=await fi._fromGetAccountInfoResponse(e,w,x)}else v=fi._fromJSON(e,x);p!==c&&(h=v),c=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new ec(c,e,s):(c=m[0],h&&await c._set(u,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==c)try{await p._remove(u)}catch{}})),new ec(c,e,s))}}function gT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NS(e))return"Blackberry";if(ES(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||wS(e))&&!e.includes("edge/"))return"Chrome";if(TS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function vS(t=Fn()){return/firefox\//i.test(t)}function bS(t=Fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wS(t=Fn()){return/crios\//i.test(t)}function _S(t=Fn()){return/iemobile/i.test(t)}function TS(t=Fn()){return/android/i.test(t)}function NS(t=Fn()){return/blackberry/i.test(t)}function ES(t=Fn()){return/webos/i.test(t)}function qx(t=Fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yL(t=Fn()){return qx(t)&&!!window.navigator?.standalone}function xL(){return kV()&&document.documentMode===10}function jS(t=Fn()){return qx(t)||TS(t)||ES(t)||NS(t)||/windows phone/i.test(t)||_S(t)}function SS(t,e=[]){let n;switch(t){case"Browser":n=gT(Fn());break;case"Worker":n=`${gT(Fn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Go}/${s}`}class vL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((u,h)=>{try{const m=e(c);u(m)}catch(m){h(m)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function bL(t,e={}){return ni(t,"GET","/v2/passwordPolicy",ir(t,e))}const wL=6;class _L{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class TL{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yT(this),this.idTokenSubscription=new yT(this),this.beforeStateQueue=new vL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ec.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kf(this,{idToken:e}),s=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&h?.user&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cs(this.app))return Promise.reject(Dr(this));const n=e?ut(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cs(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cs(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bL(this),n=new _L(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await gL(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await ec.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(h,this,"internal-error"),h.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,a);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(cs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WO(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rr(t){return ut(t)}class yT{constructor(e){this.auth=e,this.observer=null,this.addObserver=VV(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(t){Cm=t}function AS(t){return Cm.loadJS(t)}function EL(){return Cm.recaptchaEnterpriseScript}function jL(){return Cm.gapiScript}function SL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class AL{constructor(){this.enterprise=new kL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class kL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const IL="recaptcha-enterprise",kS="NO_RECAPTCHA";class CL{constructor(e){this.type=IL,this.auth=rr(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,h)=>{lL(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new oL(m);return c.tenantId==null?c._agentRecaptchaConfig=p:c._tenantRecaptchaConfigs[c.tenantId]=p,u(p.siteKey)}}).catch(m=>{h(m)})})}function a(c,u,h){const m=window.grecaptcha;hT(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(p=>{u(p)}).catch(()=>{u(kS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AL().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{s(this.auth).then(h=>{if(!n&&hT(window.grecaptcha))a(h,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=EL();m.length!==0&&(m+=h),AS(m).then(()=>{a(h,c,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function xT(t,e,n,s=!1,a=!1){const c=new CL(t);let u;if(a)u=kS;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const h={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Wf(t,e,n,s,a){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await xT(t,e,n,n==="getOobCode");return s(t,c)}else return s(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await xT(t,e,n,n==="getOobCode");return s(t,u)}else return Promise.reject(c)})}function RL(t,e){const n=Ya(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),c=n.getOptions();if(tr(c,e??{}))return a;Rs(a,"already-initialized")}return n.initialize({options:e})}function PL(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function DL(t,e,n){const s=rr(t);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=IS(e),{host:u,port:h}=ML(e),m=h===null?"":`:${h}`,p={url:`${c}//${u}${m}/`},x=Object.freeze({host:u,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(tr(p,s.config.emulator)&&tr(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,Ga(u)?(Ox(`${c}//${u}${m}`),Lx("Auth",!0)):VL()}function IS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ML(t){const e=IS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:vT(s.substr(c.length+1))}}else{const[c,u]=s.split(":");return{host:c,port:vT(u)}}}function vT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class $x{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function CS(t,e){return ni(t,"POST","/v1/accounts:resetPassword",ir(t,e))}async function OL(t,e){return ni(t,"POST","/v1/accounts:update",e)}async function LL(t,e){return ni(t,"POST","/v1/accounts:signUp",e)}async function UL(t,e){return Ad(t,"POST","/v1/accounts:signInWithPassword",ir(t,e))}async function zL(t,e){return ni(t,"POST","/v1/accounts:sendOobCode",ir(t,e))}async function BL(t,e){return zL(t,e)}async function FL(t,e){return Ad(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}async function HL(t,e){return Ad(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}class fd extends $x{constructor(e,n,s,a=null){super("password",s),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new fd(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new fd(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,n,"signInWithPassword",UL);case"emailLink":return FL(e,{email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wf(e,s,"signUpPassword",LL);case"emailLink":return HL(e,{idToken:n,email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tc(t,e){return Ad(t,"POST","/v1/accounts:signInWithIdp",ir(t,e))}const qL="http://localhost";class Lo extends $x{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...c}=n;if(!s||!a)return null;const u=new Lo(s,a);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return tc(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,tc(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,tc(e,n)}buildRequest(){const e={requestUri:qL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jd(n)}return e}}function $L(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GL(t){const e=Uu(zu(t)).link,n=e?Uu(zu(e)).deep_link_id:null,s=Uu(zu(t)).deep_link_id;return(s?Uu(zu(s)).link:null)||s||n||e||t}class Gx{constructor(e){const n=Uu(zu(e)),s=n.apiKey??null,a=n.oobCode??null,c=$L(n.mode??null);Ae(s&&a&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=GL(e);try{return new Gx(n)}catch{return null}}}class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,n){return fd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Gx.parseLink(n);return Ae(s,"argument-error"),fd._fromEmailAndCode(e,s.code,s.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Yx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kd extends Yx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ja extends kd{constructor(){super("facebook.com")}static credential(e){return Lo._fromParams({providerId:ja.PROVIDER_ID,signInMethod:ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ja.credentialFromTaggedObject(e)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ja.credential(e.oauthAccessToken)}catch{return null}}}ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";ja.PROVIDER_ID="facebook.com";class Ar extends kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Lo._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ar.credential(n,s)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";class Sa extends kd{constructor(){super("github.com")}static credential(e){return Lo._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sa.credential(e.oauthAccessToken)}catch{return null}}}Sa.GITHUB_SIGN_IN_METHOD="github.com";Sa.PROVIDER_ID="github.com";class Aa extends kd{constructor(){super("twitter.com")}static credential(e,n){return Lo._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Aa.credential(n,s)}catch{return null}}}Aa.TWITTER_SIGN_IN_METHOD="twitter.com";Aa.PROVIDER_ID="twitter.com";async function YL(t,e){return Ad(t,"POST","/v1/accounts:signUp",ir(t,e))}class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,a=!1){const c=await fi._fromIdTokenResponse(e,s,a),u=bT(s);return new Uo({user:c,providerId:u,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const a=bT(s);return new Uo({user:e,providerId:a,_tokenResponse:s,operationType:n})}}function bT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Xf extends ti{constructor(e,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Xf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,a){return new Xf(e,n,s,a)}}function RS(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Xf._fromErrorAndOperation(t,c,e,s):c})}async function ZL(t,e,n=!1){const s=await Oo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Uo._forOperation(t,"link",s)}async function KL(t,e,n=!1){const{auth:s}=t;if(cs(s.app))return Promise.reject(Dr(s));const a="reauthenticate";try{const c=await Oo(t,RS(s,a,e,t),n);Ae(c.idToken,s,"internal-error");const u=Hx(c.idToken);Ae(u,s,"internal-error");const{sub:h}=u;return Ae(t.uid===h,s,"user-mismatch"),Uo._forOperation(t,a,c)}catch(c){throw c?.code==="auth/user-not-found"&&Rs(s,"user-mismatch"),c}}async function PS(t,e,n=!1){if(cs(t.app))return Promise.reject(Dr(t));const s="signIn",a=await RS(t,s,e),c=await Uo._fromIdTokenResponse(t,s,a);return n||await t._updateCurrentUser(c.user),c}async function QL(t,e){return PS(rr(t),e)}class Zx{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Kx._fromServerResponse(e,n):"totpInfo"in n?Qx._fromServerResponse(e,n):Rs(e,"internal-error")}}class Kx extends Zx{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Kx(n)}}class Qx extends Zx{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Qx(n)}}async function Wx(t){const e=rr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WL(t,e,n){const s=rr(t);await Wf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BL)}async function XL(t,e,n){await CS(ut(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Wx(t),s})}async function JL(t,e){const n=ut(t),s=await CS(n,{oobCode:e}),a=s.requestType;switch(Ae(a,n,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(s.mfaInfo,n,"internal-error");default:Ae(s.email,n,"internal-error")}let c=null;return s.mfaInfo&&(c=Zx._fromServerResponse(rr(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:c},operation:a}}async function e9(t,e){const{data:n}=await JL(ut(t),e);return n.email}async function t9(t,e,n){if(cs(t.app))return Promise.reject(Dr(t));const s=rr(t),u=await Wf(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YL).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Wx(t),m}),h=await Uo._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(h.user),h}function n9(t,e,n){return cs(t.app)?Promise.reject(Dr(t)):QL(ut(t),Nc.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Wx(t),s})}async function s9(t,e){return ni(t,"POST","/v1/accounts:update",e)}async function wy(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=ut(t),c={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},u=await Oo(s,s9(s.auth,c));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;const h=s.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=s.displayName,h.photoURL=s.photoURL),await s._updateTokensIfNecessary(u)}function i9(t,e){return r9(ut(t),null,e)}async function r9(t,e,n){const{auth:s}=t,c={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const u=await Oo(t,OL(s,c));await t._updateTokensIfNecessary(u,!0)}function a9(t,e,n,s){return ut(t).onIdTokenChanged(e,n,s)}function o9(t,e,n){return ut(t).beforeAuthStateChanged(e,n)}function l9(t,e,n,s){return ut(t).onAuthStateChanged(e,n,s)}function c9(t){return ut(t).signOut()}const Jf="__sak";class DS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const u9=1e3,d9=10;class MS extends DS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&e(n,a,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,h,m)=>{this.notifyListeners(u,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!n&&this.localCache[s]===u||this.notifyListeners(s,u)},c=this.storage.getItem(s);xL()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,d9):a()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},u9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MS.type="LOCAL";const h9=MS;class VS extends DS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VS.type="SESSION";const OS=VS;function f9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const s=new Rm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:a,data:c}=n.data,u=this.handlersMap[a];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(u).map(async p=>p(n.origin,c)),m=await f9(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];function Xx(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class m9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((h,m)=>{const p=Xx("",20);a.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(w.data.response);break;default:clearTimeout(x),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Qi(){return window}function p9(t){Qi().location.href=t}function LS(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function g9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function y9(){return navigator?.serviceWorker?.controller||null}function x9(){return LS()?self:null}const US="firebaseLocalStorageDb",v9=1,em="firebaseLocalStorage",zS="fbase_key";class Id{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(t,e){return t.transaction([em],e?"readwrite":"readonly").objectStore(em)}function b9(){const t=indexedDB.deleteDatabase(US);return new Id(t).toPromise()}function _y(){const t=indexedDB.open(US,v9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(em,{keyPath:zS})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(em)?e(s):(s.close(),await b9(),e(await _y()))})})}async function wT(t,e,n){const s=Pm(t,!0).put({[zS]:e,value:n});return new Id(s).toPromise()}async function w9(t,e){const n=Pm(t,!1).get(e),s=await new Id(n).toPromise();return s===void 0?null:s.value}function _T(t,e){const n=Pm(t,!0).delete(e);return new Id(n).toPromise()}const _9=800,T9=3;class BS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _y(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>T9)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(x9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await g9(),!this.activeServiceWorker)return;this.sender=new m9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||y9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _y();return await wT(e,Jf,"1"),await _T(e,Jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>wT(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>w9(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_T(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Pm(a,!1).getAll();return new Id(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BS.type="LOCAL";const N9=BS;new Sd(3e4,6e4);function FS(t,e){return e?Ir(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Jx extends $x{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return tc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function E9(t){return PS(t.auth,new Jx(t),t.bypassAuthState)}function j9(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),KL(n,new Jx(t),t.bypassAuthState)}async function S9(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),ZL(n,new Jx(t),t.bypassAuthState)}class HS{constructor(e,n,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:a,tenantId:c,error:u,type:h}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E9;case"linkViaPopup":case"linkViaRedirect":return S9;case"reauthViaPopup":case"reauthViaRedirect":return j9;default:Rs(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const A9=new Sd(2e3,1e4);async function TT(t,e,n){if(cs(t.app))return Promise.reject(mi(t,"operation-not-supported-in-this-environment"));const s=rr(t);XO(t,e,Yx);const a=FS(s,n);return new ko(s,"signInViaPopup",e,a).executeNotNull()}class ko extends HS{constructor(e,n,s,a,c){super(e,n,a,c),this.provider=s,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,A9.get())};e()}}ko.currentPopupAction=null;const k9="pendingRedirect",kf=new Map;class I9 extends HS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const s=await C9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C9(t,e){const n=D9(e),s=P9(t);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function R9(t,e){kf.set(t._key(),e)}function P9(t){return Ir(t._redirectPersistence)}function D9(t){return Af(k9,t.config.apiKey,t.name)}async function M9(t,e,n=!1){if(cs(t.app))return Promise.reject(Dr(t));const s=rr(t),a=FS(s,e),u=await new I9(s,a,n).execute();return u&&!n&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}const V9=600*1e3;class O9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V9&&this.cachedEventUids.clear(),this.cachedEventUids.has(NT(e))}saveEventToCache(e){this.cachedEventUids.add(NT(e)),this.lastProcessedEventTime=Date.now()}}function NT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function L9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(t);default:return!1}}async function U9(t,e={}){return ni(t,"GET","/v1/projects",e)}const z9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B9=/^https?/;async function F9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await U9(t);for(const n of e)try{if(H9(n))return}catch{}Rs(t,"unauthorized-domain")}function H9(t){const e=vy(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===s}if(!B9.test(n))return!1;if(z9.test(t))return s===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}const q9=new Sd(3e4,6e4);function ET(){const t=Qi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $9(t){return new Promise((e,n)=>{function s(){ET(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ET(),n(mi(t,"network-request-failed"))},timeout:q9.get()})}if(Qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qi().gapi?.load)s();else{const a=SL("iframefcb");return Qi()[a]=()=>{gapi.load?s():n(mi(t,"network-request-failed"))},AS(`${jL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw If=null,e})}let If=null;function G9(t){return If=If||$9(t),If}const Y9=new Sd(5e3,15e3),Z9="__/auth/iframe",K9="emulator/auth/iframe",Q9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X9(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fx(e,K9):`https://${t.config.authDomain}/${Z9}`,s={apiKey:e.apiKey,appName:t.name,v:Go},a=W9.get(t.config.apiHost);a&&(s.eid=a);const c=t._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${jd(s).slice(1)}`}async function J9(t){const e=await G9(t),n=Qi().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:X9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q9,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const u=mi(t,"network-request-failed"),h=Qi().setTimeout(()=>{c(u)},Y9.get());function m(){Qi().clearTimeout(h),a(s)}s.ping(m).then(m,()=>{c(u)})}))}const eU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tU=500,nU=600,sU="_blank",iU="http://localhost";class jT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rU(t,e,n,s=tU,a=nU){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const m={...eU,width:s.toString(),height:a.toString(),top:c,left:u},p=Fn().toLowerCase();n&&(h=wS(p)?sU:n),vS(p)&&(e=e||iU,m.scrollbars="yes");const x=Object.entries(m).reduce((w,[N,A])=>`${w}${N}=${A},`,"");if(yL(p)&&h!=="_self")return aU(e||"",h),new jT(null);const v=window.open(e||"",h,x);Ae(v,t,"popup-blocked");try{v.focus()}catch{}return new jT(v)}function aU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const oU="__/auth/handler",lU="emulator/auth/handler",cU=encodeURIComponent("fac");async function ST(t,e,n,s,a,c){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Go,eventId:a};if(e instanceof Yx){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",MV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,v]of Object.entries({}))u[x]=v}if(e instanceof kd){const x=e.getScopes().filter(v=>v!=="");x.length>0&&(u.scopes=x.join(","))}t.tenantId&&(u.tid=t.tenantId);const h=u;for(const x of Object.keys(h))h[x]===void 0&&delete h[x];const m=await t._getAppCheckToken(),p=m?`#${cU}=${encodeURIComponent(m)}`:"";return`${uU(t)}?${jd(h).slice(1)}${p}`}function uU({config:t}){return t.emulator?Fx(t,lU):`https://${t.authDomain}/${oU}`}const S0="webStorageSupport";class dU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OS,this._completeRedirectFn=M9,this._overrideRedirectResult=R9}async _openPopup(e,n,s,a){Br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await ST(e,n,s,vy(),a);return rU(e,c,Xx())}async _openRedirect(e,n,s,a){await this._originValidation(e);const c=await ST(e,n,s,vy(),a);return p9(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:c}=this.eventManagers[n];return a?Promise.resolve(a):(Br(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await J9(e),s=new O9(e);return n.register("authEvent",a=>(Ae(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(S0,{type:S0},a=>{const c=a?.[0]?.[S0];c!==void 0&&n(!!c),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=F9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jS()||bS()||qx()}}const hU=dU;var AT="@firebase/auth",kT="1.11.1";class fU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pU(t){gi(new ei("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=s.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SS(t)},p=new TL(s,a,c,m);return PL(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),gi(new ei("auth-internal",e=>{const n=rr(e.getProvider("auth").getImmediate());return(s=>new fU(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(AT,kT,mU(t)),fs(AT,kT,"esm2020")}const gU=300,yU=tS("authIdTokenMaxAge")||gU;let IT=null;const xU=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>yU)return;const a=n?.token;IT!==a&&(IT=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function vU(t=Im()){const e=Ya(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RL(t,{popupRedirectResolver:hU,persistence:[N9,h9,OS]}),s=tS("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const u=xU(c.toString());o9(n,u,()=>u(n.currentUser)),a9(n,h=>u(h))}}const a=Xj("auth");return a&&DL(n,`http://${a}`),n}function bU(){return document.getElementsByTagName("head")?.[0]??document}NL({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=a=>{const c=mi("internal-error");c.customData=a,n(c)},s.type="text/javascript",s.charset="UTF-8",bU().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pU("Browser");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Da,$S;(function(){var t;function e(C,I){function j(){}j.prototype=I.prototype,C.F=I.prototype,C.prototype=new j,C.prototype.constructor=C,C.D=function(M,z,B){for(var V=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)V[Ie-2]=arguments[Ie];return I.prototype[z].apply(M,V)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,I,j){j||(j=0);const M=Array(16);if(typeof I=="string")for(var z=0;z<16;++z)M[z]=I.charCodeAt(j++)|I.charCodeAt(j++)<<8|I.charCodeAt(j++)<<16|I.charCodeAt(j++)<<24;else for(z=0;z<16;++z)M[z]=I[j++]|I[j++]<<8|I[j++]<<16|I[j++]<<24;I=C.g[0],j=C.g[1],z=C.g[2];let B=C.g[3],V;V=I+(B^j&(z^B))+M[0]+3614090360&4294967295,I=j+(V<<7&4294967295|V>>>25),V=B+(z^I&(j^z))+M[1]+3905402710&4294967295,B=I+(V<<12&4294967295|V>>>20),V=z+(j^B&(I^j))+M[2]+606105819&4294967295,z=B+(V<<17&4294967295|V>>>15),V=j+(I^z&(B^I))+M[3]+3250441966&4294967295,j=z+(V<<22&4294967295|V>>>10),V=I+(B^j&(z^B))+M[4]+4118548399&4294967295,I=j+(V<<7&4294967295|V>>>25),V=B+(z^I&(j^z))+M[5]+1200080426&4294967295,B=I+(V<<12&4294967295|V>>>20),V=z+(j^B&(I^j))+M[6]+2821735955&4294967295,z=B+(V<<17&4294967295|V>>>15),V=j+(I^z&(B^I))+M[7]+4249261313&4294967295,j=z+(V<<22&4294967295|V>>>10),V=I+(B^j&(z^B))+M[8]+1770035416&4294967295,I=j+(V<<7&4294967295|V>>>25),V=B+(z^I&(j^z))+M[9]+2336552879&4294967295,B=I+(V<<12&4294967295|V>>>20),V=z+(j^B&(I^j))+M[10]+4294925233&4294967295,z=B+(V<<17&4294967295|V>>>15),V=j+(I^z&(B^I))+M[11]+2304563134&4294967295,j=z+(V<<22&4294967295|V>>>10),V=I+(B^j&(z^B))+M[12]+1804603682&4294967295,I=j+(V<<7&4294967295|V>>>25),V=B+(z^I&(j^z))+M[13]+4254626195&4294967295,B=I+(V<<12&4294967295|V>>>20),V=z+(j^B&(I^j))+M[14]+2792965006&4294967295,z=B+(V<<17&4294967295|V>>>15),V=j+(I^z&(B^I))+M[15]+1236535329&4294967295,j=z+(V<<22&4294967295|V>>>10),V=I+(z^B&(j^z))+M[1]+4129170786&4294967295,I=j+(V<<5&4294967295|V>>>27),V=B+(j^z&(I^j))+M[6]+3225465664&4294967295,B=I+(V<<9&4294967295|V>>>23),V=z+(I^j&(B^I))+M[11]+643717713&4294967295,z=B+(V<<14&4294967295|V>>>18),V=j+(B^I&(z^B))+M[0]+3921069994&4294967295,j=z+(V<<20&4294967295|V>>>12),V=I+(z^B&(j^z))+M[5]+3593408605&4294967295,I=j+(V<<5&4294967295|V>>>27),V=B+(j^z&(I^j))+M[10]+38016083&4294967295,B=I+(V<<9&4294967295|V>>>23),V=z+(I^j&(B^I))+M[15]+3634488961&4294967295,z=B+(V<<14&4294967295|V>>>18),V=j+(B^I&(z^B))+M[4]+3889429448&4294967295,j=z+(V<<20&4294967295|V>>>12),V=I+(z^B&(j^z))+M[9]+568446438&4294967295,I=j+(V<<5&4294967295|V>>>27),V=B+(j^z&(I^j))+M[14]+3275163606&4294967295,B=I+(V<<9&4294967295|V>>>23),V=z+(I^j&(B^I))+M[3]+4107603335&4294967295,z=B+(V<<14&4294967295|V>>>18),V=j+(B^I&(z^B))+M[8]+1163531501&4294967295,j=z+(V<<20&4294967295|V>>>12),V=I+(z^B&(j^z))+M[13]+2850285829&4294967295,I=j+(V<<5&4294967295|V>>>27),V=B+(j^z&(I^j))+M[2]+4243563512&4294967295,B=I+(V<<9&4294967295|V>>>23),V=z+(I^j&(B^I))+M[7]+1735328473&4294967295,z=B+(V<<14&4294967295|V>>>18),V=j+(B^I&(z^B))+M[12]+2368359562&4294967295,j=z+(V<<20&4294967295|V>>>12),V=I+(j^z^B)+M[5]+4294588738&4294967295,I=j+(V<<4&4294967295|V>>>28),V=B+(I^j^z)+M[8]+2272392833&4294967295,B=I+(V<<11&4294967295|V>>>21),V=z+(B^I^j)+M[11]+1839030562&4294967295,z=B+(V<<16&4294967295|V>>>16),V=j+(z^B^I)+M[14]+4259657740&4294967295,j=z+(V<<23&4294967295|V>>>9),V=I+(j^z^B)+M[1]+2763975236&4294967295,I=j+(V<<4&4294967295|V>>>28),V=B+(I^j^z)+M[4]+1272893353&4294967295,B=I+(V<<11&4294967295|V>>>21),V=z+(B^I^j)+M[7]+4139469664&4294967295,z=B+(V<<16&4294967295|V>>>16),V=j+(z^B^I)+M[10]+3200236656&4294967295,j=z+(V<<23&4294967295|V>>>9),V=I+(j^z^B)+M[13]+681279174&4294967295,I=j+(V<<4&4294967295|V>>>28),V=B+(I^j^z)+M[0]+3936430074&4294967295,B=I+(V<<11&4294967295|V>>>21),V=z+(B^I^j)+M[3]+3572445317&4294967295,z=B+(V<<16&4294967295|V>>>16),V=j+(z^B^I)+M[6]+76029189&4294967295,j=z+(V<<23&4294967295|V>>>9),V=I+(j^z^B)+M[9]+3654602809&4294967295,I=j+(V<<4&4294967295|V>>>28),V=B+(I^j^z)+M[12]+3873151461&4294967295,B=I+(V<<11&4294967295|V>>>21),V=z+(B^I^j)+M[15]+530742520&4294967295,z=B+(V<<16&4294967295|V>>>16),V=j+(z^B^I)+M[2]+3299628645&4294967295,j=z+(V<<23&4294967295|V>>>9),V=I+(z^(j|~B))+M[0]+4096336452&4294967295,I=j+(V<<6&4294967295|V>>>26),V=B+(j^(I|~z))+M[7]+1126891415&4294967295,B=I+(V<<10&4294967295|V>>>22),V=z+(I^(B|~j))+M[14]+2878612391&4294967295,z=B+(V<<15&4294967295|V>>>17),V=j+(B^(z|~I))+M[5]+4237533241&4294967295,j=z+(V<<21&4294967295|V>>>11),V=I+(z^(j|~B))+M[12]+1700485571&4294967295,I=j+(V<<6&4294967295|V>>>26),V=B+(j^(I|~z))+M[3]+2399980690&4294967295,B=I+(V<<10&4294967295|V>>>22),V=z+(I^(B|~j))+M[10]+4293915773&4294967295,z=B+(V<<15&4294967295|V>>>17),V=j+(B^(z|~I))+M[1]+2240044497&4294967295,j=z+(V<<21&4294967295|V>>>11),V=I+(z^(j|~B))+M[8]+1873313359&4294967295,I=j+(V<<6&4294967295|V>>>26),V=B+(j^(I|~z))+M[15]+4264355552&4294967295,B=I+(V<<10&4294967295|V>>>22),V=z+(I^(B|~j))+M[6]+2734768916&4294967295,z=B+(V<<15&4294967295|V>>>17),V=j+(B^(z|~I))+M[13]+1309151649&4294967295,j=z+(V<<21&4294967295|V>>>11),V=I+(z^(j|~B))+M[4]+4149444226&4294967295,I=j+(V<<6&4294967295|V>>>26),V=B+(j^(I|~z))+M[11]+3174756917&4294967295,B=I+(V<<10&4294967295|V>>>22),V=z+(I^(B|~j))+M[2]+718787259&4294967295,z=B+(V<<15&4294967295|V>>>17),V=j+(B^(z|~I))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(z+(V<<21&4294967295|V>>>11))&4294967295,C.g[2]=C.g[2]+z&4294967295,C.g[3]=C.g[3]+B&4294967295}s.prototype.v=function(C,I){I===void 0&&(I=C.length);const j=I-this.blockSize,M=this.C;let z=this.h,B=0;for(;B<I;){if(z==0)for(;B<=j;)a(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<I;)if(M[z++]=C.charCodeAt(B++),z==this.blockSize){a(this,M),z=0;break}}else for(;B<I;)if(M[z++]=C[B++],z==this.blockSize){a(this,M),z=0;break}}this.h=z,this.o+=I},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var j=C.length-8;j<C.length;++j)C[j]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,j=0;j<4;++j)for(let M=0;M<32;M+=8)C[I++]=this.g[j]>>>M&255;return C};function c(C,I){var j=h;return Object.prototype.hasOwnProperty.call(j,C)?j[C]:j[C]=I(C)}function u(C,I){this.h=I;const j=[];let M=!0;for(let z=C.length-1;z>=0;z--){const B=C[z]|0;M&&B==I||(j[z]=B,M=!1)}this.g=j}var h={};function m(C){return-128<=C&&C<128?c(C,function(I){return new u([I|0],I<0?-1:0)}):new u([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return k(p(-C));const I=[];let j=1;for(let M=0;C>=j;M++)I[M]=C/j|0,j*=4294967296;return new u(I,0)}function x(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return k(x(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=p(Math.pow(I,8));let M=v;for(let B=0;B<C.length;B+=8){var z=Math.min(8,C.length-B);const V=parseInt(C.substring(B,B+z),I);z<8?(z=p(Math.pow(I,z)),M=M.j(z).add(p(V))):(M=M.j(j),M=M.add(p(V)))}return M}var v=m(0),w=m(1),N=m(16777216);t=u.prototype,t.m=function(){if(S(this))return-k(this).m();let C=0,I=1;for(let j=0;j<this.g.length;j++){const M=this.i(j);C+=(M>=0?M:4294967296+M)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(S(this))return"-"+k(this).toString(C);const I=p(Math.pow(C,6));var j=this;let M="";for(;;){const z=F(j,I).g;j=P(j,z.j(I));let B=((j.g.length>0?j.g[0]:j.h)>>>0).toString(C);if(j=z,A(j))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function S(C){return C.h==-1}t.l=function(C){return C=P(this,C),S(C)?-1:A(C)?0:1};function k(C){const I=C.g.length,j=[];for(let M=0;M<I;M++)j[M]=~C.g[M];return new u(j,~C.h).add(w)}t.abs=function(){return S(this)?k(this):this},t.add=function(C){const I=Math.max(this.g.length,C.g.length),j=[];let M=0;for(let z=0;z<=I;z++){let B=M+(this.i(z)&65535)+(C.i(z)&65535),V=(B>>>16)+(this.i(z)>>>16)+(C.i(z)>>>16);M=V>>>16,B&=65535,V&=65535,j[z]=V<<16|B}return new u(j,j[j.length-1]&-2147483648?-1:0)};function P(C,I){return C.add(k(I))}t.j=function(C){if(A(this)||A(C))return v;if(S(this))return S(C)?k(this).j(k(C)):k(k(this).j(C));if(S(C))return k(this.j(k(C)));if(this.l(N)<0&&C.l(N)<0)return p(this.m()*C.m());const I=this.g.length+C.g.length,j=[];for(var M=0;M<2*I;M++)j[M]=0;for(M=0;M<this.g.length;M++)for(let z=0;z<C.g.length;z++){const B=this.i(M)>>>16,V=this.i(M)&65535,Ie=C.i(z)>>>16,J=C.i(z)&65535;j[2*M+2*z]+=V*J,U(j,2*M+2*z),j[2*M+2*z+1]+=B*J,U(j,2*M+2*z+1),j[2*M+2*z+1]+=V*Ie,U(j,2*M+2*z+1),j[2*M+2*z+2]+=B*Ie,U(j,2*M+2*z+2)}for(C=0;C<I;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=I;C<2*I;C++)j[C]=0;return new u(j,0)};function U(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function O(C,I){this.g=C,this.h=I}function F(C,I){if(A(I))throw Error("division by zero");if(A(C))return new O(v,v);if(S(C))return I=F(k(C),I),new O(k(I.g),k(I.h));if(S(I))return I=F(C,k(I)),new O(k(I.g),I.h);if(C.g.length>30){if(S(C)||S(I))throw Error("slowDivide_ only works with positive integers.");for(var j=w,M=I;M.l(C)<=0;)j=Z(j),M=Z(M);var z=ee(j,1),B=ee(M,1);for(M=ee(M,2),j=ee(j,2);!A(M);){var V=B.add(M);V.l(C)<=0&&(z=z.add(j),B=V),M=ee(M,1),j=ee(j,1)}return I=P(C,z.j(I)),new O(z,I)}for(z=v;C.l(I)>=0;){for(j=Math.max(1,Math.floor(C.m()/I.m())),M=Math.ceil(Math.log(j)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=p(j),V=B.j(I);S(V)||V.l(C)>0;)j-=M,B=p(j),V=B.j(I);A(B)&&(B=w),z=z.add(B),C=P(C,V)}return new O(z,C)}t.B=function(C){return F(this,C).h},t.and=function(C){const I=Math.max(this.g.length,C.g.length),j=[];for(let M=0;M<I;M++)j[M]=this.i(M)&C.i(M);return new u(j,this.h&C.h)},t.or=function(C){const I=Math.max(this.g.length,C.g.length),j=[];for(let M=0;M<I;M++)j[M]=this.i(M)|C.i(M);return new u(j,this.h|C.h)},t.xor=function(C){const I=Math.max(this.g.length,C.g.length),j=[];for(let M=0;M<I;M++)j[M]=this.i(M)^C.i(M);return new u(j,this.h^C.h)};function Z(C){const I=C.g.length+1,j=[];for(let M=0;M<I;M++)j[M]=C.i(M)<<1|C.i(M-1)>>>31;return new u(j,C.h)}function ee(C,I){const j=I>>5;I%=32;const M=C.g.length-j,z=[];for(let B=0;B<M;B++)z[B]=I>0?C.i(B+j)>>>I|C.i(B+j+1)<<32-I:C.i(B+j);return new u(z,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,$S=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=x,Da=u}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var GS,Bu,YS,Cf,Ty,ZS,KS,QS;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var b=0;b<f.length;++b){var T=f[b];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=n(this);function a(f,b){if(b)e:{var T=s;f=f.split(".");for(var D=0;D<f.length-1;D++){var K=f[D];if(!(K in T))break e;T=T[K]}f=f[f.length-1],D=T[f],b=b(D),b!=D&&b!=null&&e(T,f,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(b){var T=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&T.push([D,b[D]]);return T}});var c=c||{},u=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function m(f,b,T){return f.call.apply(f.bind,arguments)}function p(f,b,T){return p=m,p.apply(null,arguments)}function x(f,b){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),f.apply(this,D)}}function v(f,b){function T(){}T.prototype=b.prototype,f.Z=b.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(D,K,te){for(var he=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)he[Fe-2]=arguments[Fe];return b.prototype[K].apply(D,he)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function N(f){const b=f.length;if(b>0){const T=Array(b);for(let D=0;D<b;D++)T[D]=f[D];return T}return[]}function A(f,b){for(let D=1;D<arguments.length;D++){const K=arguments[D];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=f.length||0;const te=K.length||0;f.length=T+te;for(let he=0;he<te;he++)f[T+he]=K[he]}else f.push(K)}}class S{constructor(b,T){this.i=b,this.j=T,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function k(f){u.setTimeout(()=>{throw f},0)}function P(){var f=C;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class U{constructor(){this.h=this.g=null}add(b,T){const D=O.get();D.set(b,T),this.h?this.h.next=D:this.g=D,this.h=D}}var O=new S(()=>new F,f=>f.reset());class F{constructor(){this.next=this.g=this.h=null}set(b,T){this.h=b,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ee=!1,C=new U,I=()=>{const f=Promise.resolve(void 0);Z=()=>{f.then(j)}};function j(){for(var f;f=P();){try{f.h.call(f.g)}catch(T){k(T)}var b=O;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}ee=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,b),u.removeEventListener("test",T,b)}catch{}return f})();function V(f){return/^[\s\xa0]*$/.test(f)}function Ie(f,b){z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}v(Ie,z),Ie.prototype.init=function(f,b){const T=this.type=f.type,D=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(T=="mouseover"?b=f.fromElement:T=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),Y=0;function se(f,b,T,D,K){this.listener=f,this.proxy=null,this.src=b,this.type=T,this.capture=!!D,this.ha=K,this.key=++Y,this.da=this.fa=!1}function fe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function be(f,b,T){for(const D in f)b.call(T,f[D],D,f)}function Ve(f,b){for(const T in f)b.call(void 0,f[T],T,f)}function q(f){const b={};for(const T in f)b[T]=f[T];return b}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(f,b){let T,D;for(let K=1;K<arguments.length;K++){D=arguments[K];for(T in D)f[T]=D[T];for(let te=0;te<ae.length;te++)T=ae[te],Object.prototype.hasOwnProperty.call(D,T)&&(f[T]=D[T])}}function ge(f){this.src=f,this.g={},this.h=0}ge.prototype.add=function(f,b,T,D,K){const te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);const he=ce(f,b,D,K);return he>-1?(b=f[he],T||(b.fa=!1)):(b=new se(b,this.src,te,!!D,K),b.fa=T,f.push(b)),b};function ke(f,b){const T=b.type;if(T in f.g){var D=f.g[T],K=Array.prototype.indexOf.call(D,b,void 0),te;(te=K>=0)&&Array.prototype.splice.call(D,K,1),te&&(fe(b),f.g[T].length==0&&(delete f.g[T],f.h--))}}function ce(f,b,T,D){for(let K=0;K<f.length;++K){const te=f[K];if(!te.da&&te.listener==b&&te.capture==!!T&&te.ha==D)return K}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ye={};function Be(f,b,T,D,K){if(Array.isArray(b)){for(let te=0;te<b.length;te++)Be(f,b[te],T,D,K);return null}return T=_i(T),f&&f[J]?f.J(b,T,h(D)?!!D.capture:!1,K):lt(f,b,T,!1,D,K)}function lt(f,b,T,D,K,te){if(!b)throw Error("Invalid event type");const he=h(K)?!!K.capture:!!K;let Fe=or(f);if(Fe||(f[_e]=Fe=new ge(f)),T=Fe.add(b,T,D,he,te),T.proxy)return T;if(D=Jt(),T.proxy=D,D.src=f,D.listener=T,f.addEventListener)B||(K=he),K===void 0&&(K=!1),f.addEventListener(b.toString(),D,K);else if(f.attachEvent)f.attachEvent(Qn(b.toString()),D);else if(f.addListener&&f.removeListener)f.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Jt(){function f(T){return b.call(f.src,f.listener,T)}const b=Wn;return f}function wi(f,b,T,D,K){if(Array.isArray(b))for(var te=0;te<b.length;te++)wi(f,b[te],T,D,K);else D=h(D)?!!D.capture:!!D,T=_i(T),f&&f[J]?(f=f.i,te=String(b).toString(),te in f.g&&(b=f.g[te],T=ce(b,T,D,K),T>-1&&(fe(b[T]),Array.prototype.splice.call(b,T,1),b.length==0&&(delete f.g[te],f.h--)))):f&&(f=or(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ce(b,T,D,K)),(T=f>-1?b[f]:null)&&Mn(T))}function Mn(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[J])ke(b.i,f);else{var T=f.type,D=f.proxy;b.removeEventListener?b.removeEventListener(T,D,f.capture):b.detachEvent?b.detachEvent(Qn(T),D):b.addListener&&b.removeListener&&b.removeListener(D),(T=or(b))?(ke(T,f),T.h==0&&(T.src=null,b[_e]=null)):fe(f)}}}function Qn(f){return f in Ye?Ye[f]:Ye[f]="on"+f}function Wn(f,b){if(f.da)f=!0;else{b=new Ie(b,this);const T=f.listener,D=f.ha||f.src;f.fa&&Mn(f),f=T.call(D,b)}return f}function or(f){return f=f[_e],f instanceof ge?f:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function _i(f){return typeof f=="function"?f:(f[Pe]||(f[Pe]=function(b){return f.handleEvent(b)}),f[Pe])}function Pt(){M.call(this),this.i=new ge(this),this.M=this,this.G=null}v(Pt,M),Pt.prototype[J]=!0,Pt.prototype.removeEventListener=function(f,b,T,D){wi(this,f,b,T,D)};function en(f,b){var T,D=f.G;if(D)for(T=[];D;D=D.G)T.push(D);if(f=f.M,D=b.type||b,typeof b=="string")b=new z(b,f);else if(b instanceof z)b.target=b.target||f;else{var K=b;b=new z(D,f),me(b,K)}K=!0;let te,he;if(T)for(he=T.length-1;he>=0;he--)te=b.g=T[he],K=Ot(te,D,!0,b)&&K;if(te=b.g=f,K=Ot(te,D,!0,b)&&K,K=Ot(te,D,!1,b)&&K,T)for(he=0;he<T.length;he++)te=b.g=T[he],K=Ot(te,D,!1,b)&&K}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const T=f.g[b];for(let D=0;D<T.length;D++)fe(T[D]);delete f.g[b],f.h--}}this.G=null},Pt.prototype.J=function(f,b,T,D){return this.i.add(String(f),b,!1,T,D)},Pt.prototype.K=function(f,b,T,D){return this.i.add(String(f),b,!0,T,D)};function Ot(f,b,T,D){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let K=!0;for(let te=0;te<b.length;++te){const he=b[te];if(he&&!he.da&&he.capture==T){const Fe=he.listener,Yt=he.ha||he.src;he.fa&&ke(f.i,he),K=Fe.call(Yt,D)!==!1&&K}}return K&&!D.defaultPrevented}function Rc(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:u.setTimeout(f,b||0)}function qr(f){f.g=Rc(()=>{f.g=null,f.i&&(f.i=!1,qr(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class Tn extends M{constructor(b,T){super(),this.m=b,this.l=T,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(f){M.call(this),this.h=f,this.g={}}v(Ti,M);var $r=[];function Wa(f){be(f.g,function(b,T){this.g.hasOwnProperty(T)&&Mn(b)},f),f.g={}}Ti.prototype.N=function(){Ti.Z.N.call(this),Wa(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=u.JSON.stringify,Xo=u.JSON.parse,Jo=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function el(){}function tl(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fn(){z.call(this,"d")}v(fn,z);function Xn(){z.call(this,"c")}v(Xn,z);var Dt={},Gr=null;function Ds(){return Gr=Gr||new Pt}Dt.Ia="serverreachability";function Xa(f){z.call(this,Dt.Ia,f)}v(Xa,z);function gs(f){const b=Ds();en(b,new Xa(b))}Dt.STAT_EVENT="statevent";function Ni(f,b){z.call(this,Dt.STAT_EVENT,f),this.stat=b}v(Ni,z);function Lt(f){const b=Ds();en(b,new Ni(b,f))}Dt.Ja="timingevent";function Jn(f,b){z.call(this,Dt.Ja,f),this.size=b}v(Jn,z);function ys(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},b)}function ue(){this.g=!0}ue.prototype.ua=function(){this.g=!1};function xe(f,b,T,D,K,te){f.info(function(){if(f.g)if(te){var he="",Fe=te.split("&");for(let at=0;at<Fe.length;at++){var Yt=Fe[at].split("=");if(Yt.length>1){const St=Yt[0];Yt=Yt[1];const Ls=St.split("_");he=Ls.length>=2&&Ls[1]=="type"?he+(St+"="+Yt+"&"):he+(St+"=redacted&")}}}else he=null;else he=te;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+b+`
`+T+`
`+he})}function Te(f,b,T,D,K,te,he){f.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+b+`
`+T+`
`+te+" "+he})}function Ee(f,b,T,D){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Ze(f,T)+(D?" "+D:"")})}function et(f,b){f.info(function(){return"TIMEOUT: "+b})}ue.prototype.info=function(){};function Ze(f,b){if(!f.g)return b;if(!b)return null;try{const te=JSON.parse(b);if(te){for(f=0;f<te.length;f++)if(Array.isArray(te[f])){var T=te[f];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var K=D[0];if(K!="noop"&&K!="stop"&&K!="close")for(let he=1;he<D.length;he++)D[he]=""}}}}return ms(te)}catch{return b}}var jt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},si={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ei;function lr(){}v(lr,el),lr.prototype.g=function(){return new XMLHttpRequest},Ei=new lr;function xs(f){return encodeURIComponent(String(f))}function gn(f){var b=1;f=f.split(":");const T=[];for(;b>0&&f.length;)T.push(f.shift()),b--;return f.length&&T.push(f.join(":")),T}function vs(f,b,T,D){this.j=f,this.i=b,this.l=T,this.S=D||1,this.V=new Ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var Ut={},yn={};function ji(f,b,T){f.M=1,f.A=Ja(nn(b)),f.u=T,f.R=!0,nl(f,null)}function nl(f,b){f.F=Date.now(),Si(f),f.B=nn(f.A);var T=f.B,D=f.S;Array.isArray(D)||(D=[String(D)]),al(T.i,"t",D),f.C=0,T=f.j.L,f.h=new es,f.g=Xd(f.j,T?b:null,!f.u),f.P>0&&(f.O=new Tn(p(f.Y,f,f.g),f.P)),b=f.V,T=f.g,D=f.ba;var K="readystatechange";Array.isArray(K)||(K&&($r[0]=K.toString()),K=$r);for(let te=0;te<K.length;te++){const he=Be(T,K[te],D||b.handleEvent,!1,b.h||b);if(!he)break;b.g[he.key]=he}b=f.J?q(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),gs(),xe(f.i,f.v,f.B,f.l,f.S,f.u)}vs.prototype.ba=function(f){f=f.target;const b=this.O;b&&ai(f)==3?b.j():this.Y(f)},vs.prototype.Y=function(f){try{if(f==this.g)e:{const Fe=ai(this.g),Yt=this.g.ya(),at=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||Fe!=4||Yt==7||(Yt==8||at<=0?gs(3):gs(2)),Ai(this);var b=this.g.ca();this.X=b;var T=np(this);if(this.o=b==200,Te(this.i,this.v,this.B,this.l,this.S,Fe,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,K=this.g;if((D=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(D)){var te=D;break t}}te=null}if(f=te)Ee(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ki(this,f);else{this.o=!1,this.m=3,Lt(12),bs(this),Ms(this);break e}}if(this.R){f=!0;let St;for(;!this.K&&this.C<T.length;)if(St=Ud(this,T),St==yn){Fe==4&&(this.m=4,Lt(14),f=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Ut){this.m=4,Lt(15),Ee(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else Ee(this.i,this.l,St,null),ki(this,St);if(Ld(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||T.length!=0||this.h.h||(this.m=1,Lt(16),f=!1),this.o=this.o&&f,!f)Ee(this.i,this.l,T,"[Invalid Chunked Response]"),bs(this),Ms(this);else if(T.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Yc(he),he.P=!0,Lt(11))}}else Ee(this.i,this.l,T,null),ki(this,T);Fe==4&&bs(this),this.o&&!this.K&&(Fe==4?Zd(this.j,this):(this.o=!1,Si(this)))}else ur(this.g),b==400&&T.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),bs(this),Ms(this)}}}catch{}finally{}};function np(f){if(!Ld(f))return f.g.la();const b=Nn(f.g);if(b==="")return"";let T="";const D=b.length,K=ai(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return bs(f),Ms(f),"";f.h.i=new u.TextDecoder}for(let te=0;te<D;te++)f.h.h=!0,T+=f.h.i.decode(b[te],{stream:!(K&&te==D-1)});return b.length=0,f.h.g+=T,f.C=0,f.h.g}function Ld(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ud(f,b){var T=f.C,D=b.indexOf(`
`,T);return D==-1?yn:(T=Number(b.substring(T,D)),isNaN(T)?Ut:(D+=1,D+T>b.length?yn:(b=b.slice(D,D+T),f.C=D+T,b)))}vs.prototype.cancel=function(){this.K=!0,bs(this)};function Si(f){f.T=Date.now()+f.H,sl(f,f.H)}function sl(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ys(p(f.aa,f),b)}function Ai(f){f.D&&(u.clearTimeout(f.D),f.D=null)}vs.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(et(this.i,this.B),this.M!=2&&(gs(),Lt(17)),bs(this),this.m=2,Ms(this)):sl(this,this.T-f)};function Ms(f){f.j.I==0||f.K||Zd(f.j,f)}function bs(f){Ai(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,Wa(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function ki(f,b){try{var T=f.j;if(T.I!=0&&(T.g==f||Ci(T.h,f))){if(!f.L&&Ci(T.h,f)&&T.I==3){try{var D=T.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var K=D;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)dl(T),ea(T);else break e;ao(T),Lt(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ys(p(T.Va,T),6e3));Ii(T.h)<=1&&T.ta&&(T.ta=void 0)}else Oi(T,11)}else if((f.L||T.g==f)&&dl(T),!V(b))for(K=T.Ba.g.parse(b),b=0;b<K.length;b++){let at=K[b];const St=at[0];if(!(St<=T.K))if(T.K=St,at=at[1],T.I==2)if(at[0]=="c"){T.M=at[1],T.ba=at[2];const Ls=at[3];Ls!=null&&(T.ka=Ls,T.j.info("VER="+T.ka));const Li=at[4];Li!=null&&(T.za=Li,T.j.info("SVER="+T.za));const oi=at[5];oi!=null&&typeof oi=="number"&&oi>0&&(D=1.5*oi,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const li=f.g;if(li){const oo=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var te=D.h;te.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Mc(te,te.h),te.h=null))}if(D.G){const hl=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(D.wa=hl,dt(D.J,D.G,hl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var he=f;if(D.na=Wd(D,D.L?D.ba:null,D.W),he.L){Vc(D.h,he);var Fe=he,Yt=D.O;Yt&&(Fe.H=Yt),Fe.D&&(Ai(Fe),Si(Fe)),D.g=he}else Gd(D);T.i.length>0&&Vi(T)}else at[0]!="stop"&&at[0]!="close"||Oi(T,7);else T.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Oi(T,7):$c(T):at[0]!="noop"&&T.l&&T.l.qa(at),T.A=0)}}gs(4)}catch{}}var tn=class{constructor(f,b){this.g=f,this.map=b}};function Pc(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ii(f){return f.h?1:f.g?f.g.size:0}function Ci(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function Mc(f,b){f.g?f.g.add(b):f.h=b}function Vc(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Pc.prototype.cancel=function(){if(this.i=Oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Oc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const T of f.g.values())b=b.concat(T.G);return b}return N(f.i)}var zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(f,b){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const D=f[T].indexOf("=");let K,te=null;D>=0?(K=f[T].substring(0,D),te=f[T].substring(D+1)):K=f[T],b(K,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ws(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof ws?(this.l=f.l,xn(this,f.j),this.o=f.o,this.g=f.g,Yr(this,f.u),this.h=f.h,Lc(this,qd(f.i)),this.m=f.m):f&&(b=String(f).match(zd))?(this.l=!1,xn(this,b[1]||"",!0),this.o=Ri(b[2]||""),this.g=Ri(b[3]||"",!0),Yr(this,b[4]),this.h=Ri(b[5]||"",!0),Lc(this,b[6]||"",!0),this.m=Ri(b[7]||"")):(this.l=!1,this.i=new Kr(null,this.l))}ws.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(eo(b,rl,!0),":");var T=this.g;return(T||b=="file")&&(f.push("//"),(b=this.o)&&f.push(eo(b,rl,!0),"@"),f.push(xs(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(eo(T,T.charAt(0)=="/"?Uc:Bd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",eo(T,Fd)),f.join("")},ws.prototype.resolve=function(f){const b=nn(this);let T=!!f.j;T?xn(b,f.j):T=!!f.o,T?b.o=f.o:T=!!f.g,T?b.g=f.g:T=f.u!=null;var D=f.h;if(T)Yr(b,f.u);else if(T=!!f.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var K=b.h.lastIndexOf("/");K!=-1&&(D=b.h.slice(0,K+1)+D)}if(K=D,K==".."||K==".")D="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){D=K.lastIndexOf("/",0)==0,K=K.split("/");const te=[];for(let he=0;he<K.length;){const Fe=K[he++];Fe=="."?D&&he==K.length&&te.push(""):Fe==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&he==K.length&&te.push("")):(te.push(Fe),D=!0)}D=te.join("/")}else D=K}return T?b.h=D:T=f.i.toString()!=="",T?Lc(b,qd(f.i)):T=!!f.m,T&&(b.m=f.m),b};function nn(f){return new ws(f)}function xn(f,b,T){f.j=T?Ri(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function Yr(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function Lc(f,b,T){b instanceof Kr?(f.i=b,ol(f.i,f.l)):(T||(b=eo(b,Zr)),f.i=new Kr(b,f.l))}function dt(f,b,T){f.i.set(b,T)}function Ja(f){return dt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Ri(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function eo(f,b,T){return typeof f=="string"?(f=encodeURI(f).replace(b,ts),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ts(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var rl=/[#\/\?@]/g,Bd=/[#\?:]/g,Uc=/[#\?]/g,Zr=/[#\?@]/g,Fd=/#/g;function Kr(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function ns(f){f.g||(f.g=new Map,f.h=0,f.i&&il(f.i,function(b,T){f.add(decodeURIComponent(b.replace(/\+/g," ")),T)}))}t=Kr.prototype,t.add=function(f,b){ns(this),this.i=null,f=Qr(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(b),this.h+=1,this};function Hd(f,b){ns(f),b=Qr(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function zc(f,b){return ns(f),b=Qr(f,b),f.g.has(b)}t.forEach=function(f,b){ns(this),this.g.forEach(function(T,D){T.forEach(function(K){f.call(b,K,D,this)},this)},this)};function Bc(f,b){ns(f);let T=[];if(typeof b=="string")zc(f,b)&&(T=T.concat(f.g.get(Qr(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)T=T.concat(f[b]);return T}t.set=function(f,b){return ns(this),this.i=null,f=Qr(this,f),zc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=Bc(this,f),f.length>0?String(f[0]):b):b};function al(f,b,T){Hd(f,b),T.length>0&&(f.i=null,f.g.set(Qr(f,b),N(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var T=b[D];const K=xs(T);T=Bc(this,T);for(let te=0;te<T.length;te++){let he=K;T[te]!==""&&(he+="="+xs(T[te])),f.push(he)}}return this.i=f.join("&")};function qd(f){const b=new Kr;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function Qr(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function ol(f,b){b&&!f.j&&(ns(f),f.i=null,f.g.forEach(function(T,D){const K=D.toLowerCase();D!=K&&(Hd(this,D),al(this,K,T))},f)),f.j=b}function ii(f,b){const T=new ue;if(u.Image){const D=new Image;D.onload=x(Vs,T,"TestLoadImage: loaded",!0,b,D),D.onerror=x(Vs,T,"TestLoadImage: error",!1,b,D),D.onabort=x(Vs,T,"TestLoadImage: abort",!1,b,D),D.ontimeout=x(Vs,T,"TestLoadImage: timeout",!1,b,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=f}else b(!1)}function Fc(f,b){const T=new ue,D=new AbortController,K=setTimeout(()=>{D.abort(),Vs(T,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:D.signal}).then(te=>{clearTimeout(K),te.ok?Vs(T,"TestPingServer: ok",!0,b):Vs(T,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),Vs(T,"TestPingServer: error",!1,b)})}function Vs(f,b,T,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(T)}catch{}}function Wr(){this.g=new Jo}function Pi(f){this.i=f.Sb||null,this.h=f.ab||!1}v(Pi,el),Pi.prototype.g=function(){return new to(this.i,this.h)};function to(f,b){Pt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(to,Pt),t=to.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,ri(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||u).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ll(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function ll(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Xr(this):ri(this),this.readyState==3&&ll(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Xr(this))},t.Na=function(f){this.g&&(this.response=f,Xr(this))},t.ga=function(){this.g&&Xr(this)};function Xr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,ri(f)}t.setRequestHeader=function(f,b){this.A.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var T=b.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=b.next();return f.join(`\r
`)};function ri(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Os(f){let b="";return be(f,function(T,D){b+=D,b+=":",b+=T,b+=`\r
`}),b}function no(f,b,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Os(T),typeof f=="string"?T!=null&&xs(T):dt(f,b,T))}function mt(f){Pt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(mt,Pt);var Di=/^https?$/i,Hc=["POST","PUT"];t=mt.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,b,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ei.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(te){so(this,te);return}if(f=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)T.set(K,D[K]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())T.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),K=u.FormData&&f instanceof u.FormData,!(Array.prototype.indexOf.call(Hc,b,void 0)>=0)||D||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,he]of T)this.g.setRequestHeader(te,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(te){so(this,te)}};function so(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,qc(f),cr(f)}function qc(f){f.A||(f.A=!0,en(f,"complete"),en(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,en(this,"complete"),en(this,"abort"),cr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),mt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?io(this):this.Xa())},t.Xa=function(){io(this)};function io(f){if(f.h&&typeof c<"u"){if(f.v&&ai(f)==4)setTimeout(f.Ca.bind(f),0);else if(en(f,"readystatechange"),ai(f)==4){f.h=!1;try{const te=f.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var T;if(!(T=b)){var D;if(D=te===0){let he=String(f.D).match(zd)[1]||null;!he&&u.self&&u.self.location&&(he=u.self.location.protocol.slice(0,-1)),D=!Di.test(he?he.toLowerCase():"")}T=D}if(T)en(f,"complete"),en(f,"success");else{f.o=6;try{var K=ai(f)>2?f.g.statusText:""}catch{K=""}f.l=K+" ["+f.ca()+"]",qc(f)}}finally{cr(f)}}}}function cr(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,b||en(f,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(f){return f.g?f.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Xo(b)}};function Nn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(f){const b={};f=(f.g&&ai(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<f.length;D++){if(V(f[D]))continue;var T=gn(f[D]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=b[K]||[];b[K]=te,te.push(T)}Ve(b,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(f,b,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||b}function Jr(f){this.za=0,this.i=[],this.j=new ue,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,f),this.Za=Mi("retryDelaySeedMs",1e4,f),this.Ta=Mi("forwardChannelMaxRetries",2,f),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Pc(f&&f.concurrentRequestLimit),this.Ba=new Wr,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Jr.prototype,t.ka=8,t.I=1,t.connect=function(f,b,T,D){Lt(0),this.W=f,this.H=b||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Wd(this,null,this.W),Vi(this)};function $c(f){if(cl(f),f.I==3){var b=f.V++,T=nn(f.J);if(dt(T,"SID",f.M),dt(T,"RID",b),dt(T,"TYPE","terminate"),ro(f,T),b=new vs(f,f.j,b),b.M=2,b.A=Ja(nn(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(b.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=b.A,T=!0),T||(b.g=Xd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Si(b)}Qd(f)}function ea(f){f.g&&(Yc(f),f.g.cancel(),f.g=null)}function cl(f){ea(f),f.v&&(u.clearTimeout(f.v),f.v=null),dl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&u.clearTimeout(f.m),f.m=null)}function Vi(f){if(!Dc(f.h)&&!f.m){f.m=!0;var b=f.Ea;Z||I(),ee||(Z(),ee=!0),C.add(b,f),f.D=0}}function ul(f,b){return Ii(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ys(p(f.Ea,f,b),Kd(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const K=new vs(this,this.j,f);let te=this.o;if(this.U&&(te?(te=q(te),me(te,this.U)):te=this.U),this.u!==null||this.R||(K.J=te,te=null),this.S)e:{for(var b=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=T;break e}if(b===4096||T===this.i.length-1){b=T+1;break e}}b=1e3}else b=1e3;b=$d(this,K,b),T=nn(this.J),dt(T,"RID",f),dt(T,"CVER",22),this.G&&dt(T,"X-HTTP-Session-Id",this.G),ro(this,T),te&&(this.R?b="headers="+xs(Os(te))+"&"+b:this.u&&no(T,this.u,te)),Mc(this.h,K),this.Ra&&dt(T,"TYPE","init"),this.S?(dt(T,"$req",b),dt(T,"SID","null"),K.U=!0,ji(K,T,null)):ji(K,T,b),this.I=2}}else this.I==3&&(f?Gc(this,f):this.i.length==0||Dc(this.h)||Gc(this))};function Gc(f,b){var T;b?T=b.l:T=f.V++;const D=nn(f.J);dt(D,"SID",f.M),dt(D,"RID",T),dt(D,"AID",f.K),ro(f,D),f.u&&f.o&&no(D,f.u,f.o),T=new vs(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),b&&(f.i=b.G.concat(f.i)),b=$d(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Mc(f.h,T),ji(T,D,b)}function ro(f,b){f.H&&be(f.H,function(T,D){dt(b,D,T)}),f.l&&be({},function(T,D){dt(b,D,T)})}function $d(f,b,T){T=Math.min(f.i.length,T);const D=f.l?p(f.l.Ka,f.l,f):null;e:{var K=f.i;let Fe=-1;for(;;){const Yt=["count="+T];Fe==-1?T>0?(Fe=K[0].g,Yt.push("ofs="+Fe)):Fe=0:Yt.push("ofs="+Fe);let at=!0;for(let St=0;St<T;St++){var te=K[St].g;const Ls=K[St].map;if(te-=Fe,te<0)Fe=Math.max(0,K[St].g-100),at=!1;else try{te="req"+te+"_"||"";try{var he=Ls instanceof Map?Ls:Object.entries(Ls);for(const[Li,oi]of he){let li=oi;h(oi)&&(li=ms(oi)),Yt.push(te+Li+"="+encodeURIComponent(li))}}catch(Li){throw Yt.push(te+"type="+encodeURIComponent("_badmap")),Li}}catch{D&&D(Ls)}}if(at){he=Yt.join("&");break e}}he=void 0}return f=f.i.splice(0,T),b.G=f,he}function Gd(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;Z||I(),ee||(Z(),ee=!0),C.add(b,f),f.A=0}}function ao(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ys(p(f.Da,f),Kd(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,Yd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ys(p(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),ea(this),Yd(this))};function Yc(f){f.B!=null&&(u.clearTimeout(f.B),f.B=null)}function Yd(f){f.g=new vs(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=nn(f.na);dt(b,"RID","rpc"),dt(b,"SID",f.M),dt(b,"AID",f.K),dt(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&dt(b,"TO",f.ia),dt(b,"TYPE","xmlhttp"),ro(f,b),f.u&&f.o&&no(b,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ja(nn(b)),T.u=null,T.R=!0,nl(T,f)}t.Va=function(){this.C!=null&&(this.C=null,ea(this),ao(this),Lt(19))};function dl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Zd(f,b){var T=null;if(f.g==b){dl(f),Yc(f),f.g=null;var D=2}else if(Ci(f.h,b))T=b.G,Vc(f.h,b),D=1;else return;if(f.I!=0){if(b.o)if(D==1){T=b.u?b.u.length:0,b=Date.now()-b.F;var K=f.D;D=Ds(),en(D,new Jn(D,T)),Vi(f)}else Gd(f);else if(K=b.m,K==3||K==0&&b.X>0||!(D==1&&ul(f,b)||D==2&&ao(f)))switch(T&&T.length>0&&(b=f.h,b.i=b.i.concat(T)),K){case 1:Oi(f,5);break;case 4:Oi(f,10);break;case 3:Oi(f,6);break;default:Oi(f,2)}}}function Kd(f,b){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*b}function Oi(f,b){if(f.j.info("Error code "+b),b==2){var T=p(f.bb,f),D=f.Ua;const K=!D;D=new ws(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xn(D,"https"),Ja(D),K?ii(D.toString(),T):Fc(D.toString(),T)}else Lt(2);f.I=0,f.l&&f.l.pa(b),Qd(f),cl(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Qd(f){if(f.I=0,f.ja=[],f.l){const b=Oc(f.h);(b.length!=0||f.i.length!=0)&&(A(f.ja,b),A(f.ja,f.i),f.h.i.length=0,N(f.i),f.i.length=0),f.l.oa()}}function Wd(f,b,T){var D=T instanceof ws?nn(T):new ws(T);if(D.g!="")b&&(D.g=b+"."+D.g),Yr(D,D.u);else{var K=u.location;D=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;const te=new ws(null);D&&xn(te,D),b&&(te.g=b),K&&Yr(te,K),T&&(te.h=T),D=te}return T=f.G,b=f.wa,T&&b&&dt(D,T,b),dt(D,"VER",f.ka),ro(f,D),D}function Xd(f,b,T){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new mt(new Pi({ab:T})):new mt(f.ma),b.Fa(f.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jd(){}t=Jd.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ta(){}ta.prototype.g=function(f,b){return new Hn(f,b)};function Hn(f,b){Pt.call(this),this.g=new Jr(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!V(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!V(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new dr(this)}v(Hn,Pt),Hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){$c(this.g)},Hn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=ms(f),f=T);b.i.push(new tn(b.Ya++,f)),b.I==3&&Vi(b)},Hn.prototype.N=function(){this.g.l=null,delete this.j,$c(this.g),delete this.g,Hn.Z.N.call(this)};function eh(f){fn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const T in b){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}v(eh,fn);function th(){Xn.call(this),this.status=1}v(th,Xn);function dr(f){this.g=f}v(dr,Jd),dr.prototype.ra=function(){en(this.g,"a")},dr.prototype.qa=function(f){en(this.g,new eh(f))},dr.prototype.pa=function(f){en(this.g,new th)},dr.prototype.oa=function(){en(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,QS=function(){return new ta},KS=function(){return Ds()},ZS=Dt,Ty={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},jt.NO_ERROR=0,jt.TIMEOUT=8,jt.HTTP_ERROR=6,Cf=jt,si.COMPLETE="complete",YS=si,tl.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Bu=tl,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,GS=mt}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const RT="@firebase/firestore",PT="4.9.2";class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let Ec="12.3.0";const zo=new km("@firebase/firestore");function Hl(){return zo.logLevel}function ve(t,...e){if(zo.logLevel<=We.DEBUG){const n=e.map(ev);zo.debug(`Firestore (${Ec}): ${t}`,...n)}}function Fr(t,...e){if(zo.logLevel<=We.ERROR){const n=e.map(ev);zo.error(`Firestore (${Ec}): ${t}`,...n)}}function cc(t,...e){if(zo.logLevel<=We.WARN){const n=e.map(ev);zo.warn(`Firestore (${Ec}): ${t}`,...n)}}function ev(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Re(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,WS(t,s,n)}function WS(t,e,n){let s=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Fr(s),new Error(s)}function ct(t,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,t||WS(e,a,s)}function Ue(t,e){return t}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class XS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ln.UNAUTHENTICATED)))}shutdown(){}}class _U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TU{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let c=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Mr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Mr)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ct(typeof s.accessToken=="string",31837,{l:s}),new XS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class NU{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EU{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new NU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new DT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function SU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=SU(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Xe(t,e){return t<e?-1:t>e?1:0}function Ny(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const a=t.charAt(s),c=e.charAt(s);if(a!==c)return A0(a)===A0(c)?Xe(a,c):A0(a)?1:-1}return Xe(t.length,e.length)}const AU=55296,kU=57343;function A0(t){const e=t.charCodeAt(0);return e>=AU&&e<=kU}function uc(t,e,n){return t.length===e.length&&t.every(((s,a)=>n(s,e[a])))}const MT="__name__";class Hi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Re(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Hi.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Xe(e.length,n.length)}static compareSegments(e,n){const s=Hi.isNumericId(e),a=Hi.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):Ny(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Da.fromString(e.substring(4,e.length-2))}}class _t extends Hi{construct(e,n,s){return new _t(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new _t(n)}static emptyPath(){return new _t([])}}const IU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends Hi{construct(e,n,s){return new Rn(e,n,s)}static isValidIdentifier(e){return IU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new Rn([MT])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ye(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ye(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(s+=h,a++):(c(),a++)}if(c(),u)throw new ye(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(_t.fromString(e))}static fromName(e){return new Se(_t.fromString(e).popFirst(5))}static empty(){return new Se(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new _t(e.slice()))}}function JS(t,e,n){if(!n)throw new ye(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CU(t,e,n,s){if(e===!0&&s===!0)throw new ye(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VT(t){if(!Se.isDocumentKey(t))throw new ye(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OT(t){if(Se.isDocumentKey(t))throw new ye(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function yi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dm(t);throw new ye(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Cd(t,e){if(!eA(t))throw new ye(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const u=t[s];if(a&&typeof u!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ye(le.INVALID_ARGUMENT,n);return!0}const LT=-62135596800,UT=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*UT);return new Et(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LT)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cd(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:dn("string",Et._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Et(0,0))}static max(){return new Oe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const md=-1;function RU(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,a=Oe.fromTimestamp(s===1e9?new Et(n+1,0):new Et(n,s));return new Ua(a,Se.empty(),e)}function PU(t){return new Ua(t.readTime,t.key,md)}class Ua{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ua(Oe.min(),Se.empty(),md)}static max(){return new Ua(Oe.max(),Se.empty(),md)}}function DU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}const MU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jc(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==MU)throw t;ve("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,s)=>{n(e)}))}static reject(e){return new de(((n,s)=>{s(e)}))}static waitFor(e){return new de(((n,s)=>{let a=0,c=0,u=!1;e.forEach((h=>{++a,h.next((()=>{++c,u&&c===a&&n()}),(m=>s(m)))})),u=!0,c===a&&n()}))}static or(e){let n=de.resolve(!1);for(const s of e)n=n.next((a=>a?de.resolve(a):s()));return n}static forEach(e,n){const s=[];return e.forEach(((a,c)=>{s.push(n.call(this,a,c))})),this.waitFor(s)}static mapArray(e,n){return new de(((s,a)=>{const c=e.length,u=new Array(c);let h=0;for(let m=0;m<c;m++){const p=m;n(e[p]).next((x=>{u[p]=x,++h,h===c&&s(u)}),(x=>a(x)))}}))}static doWhile(e,n){return new de(((s,a)=>{const c=()=>{e()===!0?n().next((()=>{c()}),a):s()};c()}))}}function OU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sc(t){return t.name==="IndexedDbTransactionError"}class Mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mm.ce=-1;const nv=-1;function Vm(t){return t==null}function tm(t){return t===0&&1/t==-1/0}function LU(t){return typeof t=="number"&&Number.isInteger(t)&&!tm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const tA="";function UU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zT(e)),e=zU(t.get(n),e);return zT(e)}function zU(t,e){let n=e;const s=t.length;for(let a=0;a<s;a++){const c=t.charAt(a);switch(c){case"\0":n+="";break;case tA:n+="";break;default:n+=c}}return n}function zT(t){return t+tA+""}function BT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Vt{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??In.RED,this.left=a??In.EMPTY,this.right=c??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new In(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new pn(this.comparator);return n.data=e,n}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ks{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new ks([])}unionWith(e){let n=new pn(Rn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ks(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class sA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new sA("Invalid base64 string: "+c):c}})(e);return new Pn(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let u=0;u<a.length;++u)c+=String.fromCharCode(a[u]);return c})(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const BU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=BU.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ba(t){return typeof t=="string"?Pn.fromBase64String(t):Pn.fromUint8Array(t)}const iA="server_timestamp",rA="__type__",aA="__previous_value__",oA="__local_write_time__";function sv(t){return(t?.mapValue?.fields||{})[rA]?.stringValue===iA}function Om(t){const e=t.mapValue.fields[aA];return sv(e)?Om(e):e}function pd(t){const e=za(t.mapValue.fields[oA].timestampValue);return new Et(e.seconds,e.nanos)}class FU{constructor(e,n,s,a,c,u,h,m,p,x){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=x}}const nm="(default)";class gd{constructor(e,n){this.projectId=e,this.database=n||nm}static empty(){return new gd("","")}get isDefaultDatabase(){return this.database===nm}isEqual(e){return e instanceof gd&&e.projectId===this.projectId&&e.database===this.database}}const lA="__type__",HU="__max__",mf={mapValue:{}},cA="__vector__",sm="value";function Fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sv(t)?4:$U(t)?9007199254740991:qU(t)?10:11:Re(28295,{value:t})}function nr(t,e){if(t===e)return!0;const n=Fa(t);if(n!==Fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pd(t).isEqual(pd(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const u=za(a.timestampValue),h=za(c.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,c){return Ba(a.bytesValue).isEqual(Ba(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,c){return Wt(a.geoPointValue.latitude)===Wt(c.geoPointValue.latitude)&&Wt(a.geoPointValue.longitude)===Wt(c.geoPointValue.longitude)})(t,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Wt(a.integerValue)===Wt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const u=Wt(a.doubleValue),h=Wt(c.doubleValue);return u===h?tm(u)===tm(h):isNaN(u)&&isNaN(h)}return!1})(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(a,c){const u=a.mapValue.fields||{},h=c.mapValue.fields||{};if(BT(u)!==BT(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!nr(u[m],h[m])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function yd(t,e){return(t.values||[]).find((n=>nr(n,e)))!==void 0}function dc(t,e){if(t===e)return 0;const n=Fa(t),s=Fa(e);if(n!==s)return Xe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return(function(c,u){const h=Wt(c.integerValue||c.doubleValue),m=Wt(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(t,e);case 3:return HT(t.timestampValue,e.timestampValue);case 4:return HT(pd(t),pd(e));case 5:return Ny(t.stringValue,e.stringValue);case 6:return(function(c,u){const h=Ba(c),m=Ba(u);return h.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(c,u){const h=c.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const x=Xe(h[p],m[p]);if(x!==0)return x}return Xe(h.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,u){const h=Xe(Wt(c.latitude),Wt(u.latitude));return h!==0?h:Xe(Wt(c.longitude),Wt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qT(t.arrayValue,e.arrayValue);case 10:return(function(c,u){const h=c.fields||{},m=u.fields||{},p=h[sm]?.arrayValue,x=m[sm]?.arrayValue,v=Xe(p?.values?.length||0,x?.values?.length||0);return v!==0?v:qT(p,x)})(t.mapValue,e.mapValue);case 11:return(function(c,u){if(c===mf.mapValue&&u===mf.mapValue)return 0;if(c===mf.mapValue)return 1;if(u===mf.mapValue)return-1;const h=c.fields||{},m=Object.keys(h),p=u.fields||{},x=Object.keys(p);m.sort(),x.sort();for(let v=0;v<m.length&&v<x.length;++v){const w=Ny(m[v],x[v]);if(w!==0)return w;const N=dc(h[m[v]],p[x[v]]);if(N!==0)return N}return Xe(m.length,x.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function HT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=za(t),s=za(e),a=Xe(n.seconds,s.seconds);return a!==0?a:Xe(n.nanos,s.nanos)}function qT(t,e){const n=t.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=dc(n[a],s[a]);if(c)return c}return Xe(n.length,s.length)}function hc(t){return Ey(t)}function Ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=za(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ba(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Se.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=Ey(c);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const u of s)c?c=!1:a+=",",a+=`${u}:${Ey(n.fields[u])}`;return a+"}"})(t.mapValue):Re(61005,{value:t})}function Rf(t){switch(Fa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Om(t);return e?16+Rf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+Rf(c)),0)})(t.arrayValue);case 10:case 11:return(function(s){let a=0;return Za(s.fields,((c,u)=>{a+=c.length+Rf(u)})),a})(t.mapValue);default:throw Re(13486,{value:t})}}function $T(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jy(t){return!!t&&"integerValue"in t}function iv(t){return!!t&&"arrayValue"in t}function GT(t){return!!t&&"nullValue"in t}function YT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function qU(t){return(t?.mapValue?.fields||{})[lA]?.stringValue===cA}function Xu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Xu(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return{...t}}function $U(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HU}class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=Rn.emptyPath(),s={},a=[];e.forEach(((u,h)=>{if(!n.isImmediateParentOf(h)){const m=this.getFieldsMap(n);this.applyChanges(m,s,a),s={},a=[],n=h.popLast()}u?s[h.lastSegment()]=Xu(u):a.push(h.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Pf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Za(n,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new us(Xu(this.value))}}function uA(t){const e=[];return Za(t.fields,((n,s)=>{const a=new Rn([n]);if(Pf(s)){const c=uA(s.mapValue).fields;if(c.length===0)e.push(a);else for(const u of c)e.push(a.child(u))}else e.push(a)})),new ks(e)}class Un{constructor(e,n,s,a,c,u,h){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Un(e,0,Oe.min(),Oe.min(),Oe.min(),us.empty(),0)}static newFoundDocument(e,n,s,a){return new Un(e,1,n,Oe.min(),s,a,0)}static newNoDocument(e,n){return new Un(e,2,n,Oe.min(),Oe.min(),us.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,Oe.min(),Oe.min(),us.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class im{constructor(e,n){this.position=e,this.inclusive=n}}function ZT(t,e,n){let s=0;for(let a=0;a<t.position.length;a++){const c=e[a],u=t.position[a];if(c.field.isKeyField()?s=Se.comparator(Se.fromName(u.referenceValue),n.key):s=dc(u,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function KT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}class rm{constructor(e,n="asc"){this.field=e,this.dir=n}}function GU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class dA{}class un extends dA{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZU(e,n,s):n==="array-contains"?new WU(e,s):n==="in"?new XU(e,s):n==="not-in"?new JU(e,s):n==="array-contains-any"?new ez(e,s):new un(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new KU(e,s):new QU(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dc(n,this.value)):n!==null&&Fa(this.value)===Fa(n)&&this.matchesComparison(dc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xi extends dA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xi(e,n)}matches(e){return hA(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hA(t){return t.op==="and"}function fA(t){return YU(t)&&hA(t)}function YU(t){for(const e of t.filters)if(e instanceof xi)return!1;return!0}function Sy(t){if(t instanceof un)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(fA(t))return t.filters.map((e=>Sy(e))).join(",");{const e=t.filters.map((n=>Sy(n))).join(",");return`${t.op}(${e})`}}function mA(t,e){return t instanceof un?(function(s,a){return a instanceof un&&s.op===a.op&&s.field.isEqual(a.field)&&nr(s.value,a.value)})(t,e):t instanceof xi?(function(s,a){return a instanceof xi&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,u,h)=>c&&mA(u,a.filters[h])),!0):!1})(t,e):void Re(19439)}function pA(t){return t instanceof un?(function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`})(t):t instanceof xi?(function(n){return n.op.toString()+" {"+n.getFilters().map(pA).join(" ,")+"}"})(t):"Filter"}class ZU extends un{constructor(e,n,s){super(e,n,s),this.key=Se.fromName(s.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class KU extends un{constructor(e,n){super(e,"in",n),this.keys=gA("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class QU extends un{constructor(e,n){super(e,"not-in",n),this.keys=gA("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gA(t,e){return(e.arrayValue?.values||[]).map((n=>Se.fromName(n.referenceValue)))}class WU extends un{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iv(n)&&yd(n.arrayValue,this.value)}}class XU extends un{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yd(this.value.arrayValue,n)}}class JU extends un{constructor(e,n){super(e,"not-in",n)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yd(this.value.arrayValue,n)}}class ez extends un{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>yd(this.value.arrayValue,s)))}}class tz{constructor(e,n=null,s=[],a=[],c=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=u,this.endAt=h,this.Te=null}}function QT(t,e=null,n=[],s=[],a=null,c=null,u=null){return new tz(t,e,n,s,a,c,u)}function rv(t){const e=Ue(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Sy(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Vm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>hc(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>hc(s))).join(",")),e.Te=n}return e.Te}function av(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KT(t.startAt,e.startAt)&&KT(t.endAt,e.endAt)}function Ay(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Rd{constructor(e,n=null,s=[],a=[],c=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=u,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function nz(t,e,n,s,a,c,u,h){return new Rd(t,e,n,s,a,c,u,h)}function ov(t){return new Rd(t)}function WT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yA(t){return t.collectionGroup!==null}function Ju(t){const e=Ue(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new pn(Rn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new rm(c,s))})),n.has(Rn.keyField().canonicalString())||e.Ie.push(new rm(Rn.keyField(),s))}return e.Ie}function Wi(t){const e=Ue(t);return e.Ee||(e.Ee=sz(e,Ju(t))),e.Ee}function sz(t,e){if(t.limitType==="F")return QT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new rm(a.field,c)}));const n=t.endAt?new im(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new im(t.startAt.position,t.startAt.inclusive):null;return QT(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ky(t,e){const n=t.filters.concat([e]);return new Rd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iy(t,e,n){return new Rd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lm(t,e){return av(Wi(t),Wi(e))&&t.limitType===e.limitType}function xA(t){return`${rv(Wi(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>pA(a))).join(", ")}]`),Vm(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>hc(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>hc(a))).join(",")),`Target(${s})`})(Wi(t))}; limitType=${t.limitType})`}function Um(t,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Se.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(t,e)&&(function(s,a){for(const c of Ju(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(t,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(t,e)&&(function(s,a){return!(s.startAt&&!(function(u,h,m){const p=ZT(u,h,m);return u.inclusive?p<=0:p<0})(s.startAt,Ju(s),a)||s.endAt&&!(function(u,h,m){const p=ZT(u,h,m);return u.inclusive?p>=0:p>0})(s.endAt,Ju(s),a))})(t,e)}function iz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vA(t){return(e,n)=>{let s=!1;for(const a of Ju(t)){const c=rz(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function rz(t,e,n){const s=t.field.isKeyField()?Se.comparator(e.key,n.key):(function(c,u,h){const m=u.data.field(c),p=h.data.field(c);return m!==null&&p!==null?dc(m,p):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:t.dir})}}class Yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,((n,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return nA(this.inner)}size(){return this.innerSize}}const az=new Vt(Se.comparator);function Hr(){return az}const bA=new Vt(Se.comparator);function Fu(...t){let e=bA;for(const n of t)e=e.insert(n.key,n);return e}function wA(t){let e=bA;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Io(){return ed()}function _A(){return ed()}function ed(){return new Yo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const oz=new Vt(Se.comparator),lz=new pn(Se.comparator);function Je(...t){let e=lz;for(const n of t)e=e.add(n);return e}const cz=new pn(Xe);function uz(){return cz}function lv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(e)?"-0":e}}function TA(t){return{integerValue:""+t}}function dz(t,e){return LU(e)?TA(e):lv(t,e)}class zm{constructor(){this._=void 0}}function hz(t,e,n){return t instanceof xd?(function(a,c){const u={fields:{[rA]:{stringValue:iA},[oA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&sv(c)&&(c=Om(c)),c&&(u.fields[aA]=c),{mapValue:u}})(n,e):t instanceof fc?EA(t,e):t instanceof mc?jA(t,e):(function(a,c){const u=NA(a,c),h=XT(u)+XT(a.Ae);return jy(u)&&jy(a.Ae)?TA(h):lv(a.serializer,h)})(t,e)}function fz(t,e,n){return t instanceof fc?EA(t,e):t instanceof mc?jA(t,e):n}function NA(t,e){return t instanceof am?(function(s){return jy(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class xd extends zm{}class fc extends zm{constructor(e){super(),this.elements=e}}function EA(t,e){const n=SA(e);for(const s of t.elements)n.some((a=>nr(a,s)))||n.push(s);return{arrayValue:{values:n}}}class mc extends zm{constructor(e){super(),this.elements=e}}function jA(t,e){let n=SA(e);for(const s of t.elements)n=n.filter((a=>!nr(a,s)));return{arrayValue:{values:n}}}class am extends zm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function XT(t){return Wt(t.integerValue||t.doubleValue)}function SA(t){return iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class cv{constructor(e,n){this.field=e,this.transform=n}}function mz(t,e){return t.field.isEqual(e.field)&&(function(s,a){return s instanceof fc&&a instanceof fc||s instanceof mc&&a instanceof mc?uc(s.elements,a.elements,nr):s instanceof am&&a instanceof am?nr(s.Ae,a.Ae):s instanceof xd&&a instanceof xd})(t.transform,e.transform)}class pz{constructor(e,n){this.version=e,this.transformResults=n}}class Xs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bm{}function AA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uv(t.key,Xs.none()):new Pd(t.key,t.data,Xs.none());{const n=t.data,s=us.empty();let a=new pn(Rn.comparator);for(let c of e.fields)if(!a.has(c)){let u=n.field(c);u===null&&c.length>1&&(c=c.popLast(),u=n.field(c)),u===null?s.delete(c):s.set(c,u),a=a.add(c)}return new Ka(t.key,s,new ks(a.toArray()),Xs.none())}}function gz(t,e,n){t instanceof Pd?(function(a,c,u){const h=a.value.clone(),m=eN(a.fieldTransforms,c,u.transformResults);h.setAll(m),c.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(t,e,n):t instanceof Ka?(function(a,c,u){if(!Df(a.precondition,c))return void c.convertToUnknownDocument(u.version);const h=eN(a.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(kA(a)),m.setAll(h),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(t,e,n):(function(a,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function td(t,e,n,s){return t instanceof Pd?(function(c,u,h,m){if(!Df(c.precondition,u))return h;const p=c.value.clone(),x=tN(c.fieldTransforms,m,u);return p.setAll(x),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(t,e,n,s):t instanceof Ka?(function(c,u,h,m){if(!Df(c.precondition,u))return h;const p=tN(c.fieldTransforms,m,u),x=u.data;return x.setAll(kA(c)),x.setAll(p),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(t,e,n,s):(function(c,u,h){return Df(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(t,e,n)}function yz(t,e){let n=null;for(const s of t.fieldTransforms){const a=e.data.field(s.field),c=NA(s.transform,a||null);c!=null&&(n===null&&(n=us.empty()),n.set(s.field,c))}return n||null}function JT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&uc(s,a,((c,u)=>mz(c,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pd extends Bm{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ka extends Bm{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function kA(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function eN(t,e,n){const s=new Map;ct(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const c=t[a],u=c.transform,h=e.data.field(c.field);s.set(c.field,fz(u,h,n[a]))}return s}function tN(t,e,n){const s=new Map;for(const a of t){const c=a.transform,u=n.data.field(a.field);s.set(a.field,hz(c,u,e))}return s}class uv extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xz extends Bm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vz{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&gz(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=td(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=td(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=_A();return this.mutations.forEach((a=>{const c=e.get(a.key),u=c.overlayedDocument;let h=this.applyToLocalView(u,c.mutatedFields);h=n.has(a.key)?null:h;const m=AA(u,h);m!==null&&s.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Oe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,((n,s)=>JT(n,s)))&&uc(this.baseMutations,e.baseMutations,((n,s)=>JT(n,s)))}}class dv{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){ct(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return oz})();const c=e.mutations;for(let u=0;u<c.length;u++)a=a.insert(c[u].key,s[u].version);return new dv(e,n,s,a)}}class bz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class wz{constructor(e,n){this.count=e,this.unchangedNames=n}}var ln,nt;function _z(t){switch(t){case le.OK:return Re(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function IA(t){if(t===void 0)return Fr("GRPC error has no .code"),le.UNKNOWN;switch(t){case ln.OK:return le.OK;case ln.CANCELLED:return le.CANCELLED;case ln.UNKNOWN:return le.UNKNOWN;case ln.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ln.INTERNAL:return le.INTERNAL;case ln.UNAVAILABLE:return le.UNAVAILABLE;case ln.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ln.NOT_FOUND:return le.NOT_FOUND;case ln.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ln.ABORTED:return le.ABORTED;case ln.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ln.DATA_LOSS:return le.DATA_LOSS;default:return Re(39323,{code:t})}}(nt=ln||(ln={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function Tz(){return new TextEncoder}const Nz=new Da([4294967295,4294967295],0);function nN(t){const e=Tz().encode(t),n=new $S;return n.update(e),new Uint8Array(n.digest())}function sN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Da([n,s],0),new Da([a,c],0)]}class hv{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Hu(`Invalid padding: ${n}`);if(s<0)throw new Hu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Da.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(Da.fromNumber(s)));return a.compare(Nz)===1&&(a=new Da([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nN(e),[s,a]=sN(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,a,c);if(!this.we(u))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new hv(c,a,n);return s.forEach((h=>u.insert(h))),u}insert(e){if(this.ge===0)return;const n=nN(e),[s,a]=sN(n);for(let c=0;c<this.hashCount;c++){const u=this.ye(s,a,c);this.Se(u)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fm{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Fm(Oe.min(),a,new Vt(Xe),Hr(),Je())}}class Dd{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Dd(s,n,Je(),Je(),Je())}}class Mf{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class CA{constructor(e,n){this.targetId=e,this.Ce=n}}class RA{constructor(e,n,s=Pn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class iN{constructor(){this.ve=0,this.Fe=rN(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),s=Je();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Re(38017,{changeType:c})}})),new Dd(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ez{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hr(),this.Je=pf(),this.He=pf(),this.Ye=new Vt(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const c=a.target;if(Ay(c))if(s===0){const u=new Se(c.path);this.et(n,u,Un.newNoDocument(u,Oe.min()))}else ct(s===1,20013,{expectedCount:s});else{const u=this._t(n);if(u!==s){const h=this.ut(e),m=h?this.ct(h,e,u):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let u,h;try{u=Ba(s).toUint8Array()}catch(m){if(m instanceof sA)return cc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new hv(u,a,c)}catch(m){return cc(m instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((c=>{const u=this.Ge.ht(),h=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.et(n,c,null),a++)})),a}Tt(e){const n=new Map;this.ze.forEach(((c,u)=>{const h=this.ot(u);if(h){if(c.current&&Ay(h.target)){const m=new Se(h.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Un.newNoDocument(m,e))}c.Be&&(n.set(u,c.ke()),c.qe())}}));let s=Je();this.He.forEach(((c,u)=>{let h=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const a=new Fm(e,n,this.Ye,this.je,s);return this.je=Hr(),this.Je=pf(),this.He=pf(),this.Ye=new Vt(Xe),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pn(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pn(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iN),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function pf(){return new Vt(Se.comparator)}function rN(){return new Vt(Se.comparator)}const jz={asc:"ASCENDING",desc:"DESCENDING"},Sz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Az={and:"AND",or:"OR"};class kz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cy(t,e){return t.useProto3Json||Vm(e)?e:{value:e}}function om(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Iz(t,e){return om(t,e.toTimestamp())}function Xi(t){return ct(!!t,49232),Oe.fromTimestamp((function(n){const s=za(n);return new Et(s.seconds,s.nanos)})(t))}function fv(t,e){return Ry(t,e).canonicalString()}function Ry(t,e){const n=(function(a){return new _t(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function DA(t){const e=_t.fromString(t);return ct(UA(e),10190,{key:e.toString()}),e}function Py(t,e){return fv(t.databaseId,e.path)}function k0(t,e){const n=DA(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(VA(n))}function MA(t,e){return fv(t.databaseId,e)}function Cz(t){const e=DA(t);return e.length===4?_t.emptyPath():VA(e)}function Dy(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VA(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function aN(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function Rz(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(p,x){return p.useProto3Json?(ct(x===void 0||typeof x=="string",58123),Pn.fromBase64String(x||"")):(ct(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Pn.fromUint8Array(x||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const x=p.code===void 0?le.UNKNOWN:IA(p.code);return new ye(x,p.message||"")})(u);n=new RA(s,a,c,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=k0(t,s.document.name),c=Xi(s.document.updateTime),u=s.document.createTime?Xi(s.document.createTime):Oe.min(),h=new us({mapValue:{fields:s.document.fields}}),m=Un.newFoundDocument(a,c,u,h),p=s.targetIds||[],x=s.removedTargetIds||[];n=new Mf(p,x,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=k0(t,s.document),c=s.readTime?Xi(s.readTime):Oe.min(),u=Un.newNoDocument(a,c),h=s.removedTargetIds||[];n=new Mf([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=k0(t,s.document),c=s.removedTargetIds||[];n=new Mf([],c,a,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,u=new wz(a,c),h=s.targetId;n=new CA(h,u)}}return n}function Pz(t,e){let n;if(e instanceof Pd)n={update:aN(t,e.key,e.value)};else if(e instanceof uv)n={delete:Py(t,e.key)};else if(e instanceof Ka)n={update:aN(t,e.key,e.data),updateMask:Fz(e.fieldMask)};else{if(!(e instanceof xz))return Re(16599,{Vt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,u){const h=u.transform;if(h instanceof xd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof mc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof am)return{fieldPath:u.field.canonicalString(),increment:h.Ae};throw Re(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Iz(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Re(27497)})(t,e.precondition)),n}function Dz(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map((n=>(function(a,c){let u=a.updateTime?Xi(a.updateTime):Xi(c);return u.isEqual(Oe.min())&&(u=Xi(c)),new pz(u,a.transformResults||[])})(n,e)))):[]}function Mz(t,e){return{documents:[MA(t,e.path)]}}function Vz(t,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=MA(t,a);const c=(function(p){if(p.length!==0)return LA(xi.create(p,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const u=(function(p){if(p.length!==0)return p.map((x=>(function(w){return{field:$l(w.field),direction:Uz(w.dir)}})(x)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=Cy(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:a}}function Oz(t){let e=Cz(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){ct(s===1,65062);const x=n.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(v){const w=OA(v);return w instanceof xi&&fA(w)?w.getFilters():[w]})(n.where));let u=[];n.orderBy&&(u=(function(v){return v.map((w=>(function(A){return new rm(Gl(A.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(w)))})(n.orderBy));let h=null;n.limit&&(h=(function(v){let w;return w=typeof v=="object"?v.value:v,Vm(w)?null:w})(n.limit));let m=null;n.startAt&&(m=(function(v){const w=!!v.before,N=v.values||[];return new im(N,w)})(n.startAt));let p=null;return n.endAt&&(p=(function(v){const w=!v.before,N=v.values||[];return new im(N,w)})(n.endAt)),nz(e,a,u,c,h,"F",m,p)}function Lz(t,e){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:a})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Gl(n.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Gl(n.unaryFilter.field);return un.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Gl(n.unaryFilter.field);return un.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gl(n.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return un.create(Gl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return xi.create(n.compositeFilter.filters.map((s=>OA(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function Uz(t){return jz[t]}function zz(t){return Sz[t]}function Bz(t){return Az[t]}function $l(t){return{fieldPath:t.canonicalString()}}function Gl(t){return Rn.fromServerFormat(t.fieldPath)}function LA(t){return t instanceof un?(function(n){if(n.op==="=="){if(YT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NAN"}};if(GT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NAN"}};if(GT(n.value))return{unaryFilter:{field:$l(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$l(n.field),op:zz(n.op),value:n.value}}})(t):t instanceof xi?(function(n){const s=n.getFilters().map((a=>LA(a)));return s.length===1?s[0]:{compositeFilter:{op:Bz(n.op),filters:s}}})(t):Re(54877,{filter:t})}function Fz(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function UA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Ia{constructor(e,n,s,a,c=Oe.min(),u=Oe.min(),h=Pn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hz{constructor(e){this.yt=e}}function qz(t){const e=Oz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iy(e,e.limit,"L"):e}class $z{constructor(){this.Cn=new Gz}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Ua.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Ua.min())}updateCollectionGroup(e,n,s){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class Gz{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new pn(_t.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new pn(_t.comparator)).toArray()}}const oN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zA=41943040;class ls{static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(zA,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class pc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pc(0)}static cr(){return new pc(-1)}}const lN="LruGarbageCollector",Yz=1048576;function cN([t,e],[n,s]){const a=Xe(t,n);return a===0?Xe(e,s):a}class Zz{constructor(e){this.Ir=e,this.buffer=new pn(cN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();cN(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Kz{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(lN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sc(n)?ve(lN,"Ignoring IndexedDB error during garbage collection: ",n):await jc(n)}await this.Vr(3e5)}))}}class Qz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Mm.ce);const s=new Zz(n);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(oN)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oN):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,c,u,h,m,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(s=v,h=Date.now(),this.removeTargets(e,s,n)))).next((v=>(c=v,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(p=Date.now(),Hl()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-x}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${c} targets in `+(m-h)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-x}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:v}))))}}function Wz(t,e){return new Qz(t,e)}class Xz{constructor(){this.changes=new Yo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?de.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Jz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class e8{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,n)))).next((a=>(s!==null&&td(s.mutation,a,ks.empty(),Et.now()),a)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Je()){const a=Io();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,s).next((c=>{let u=Fu();return c.forEach(((h,m)=>{u=u.insert(h,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const s=Io();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Je())))}populateOverlays(e,n,s){const a=[];return s.forEach((c=>{n.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((u,h)=>{n.set(u,h)}))}))}computeViews(e,n,s,a){let c=Hr();const u=ed(),h=(function(){return ed()})();return n.forEach(((m,p)=>{const x=s.get(p.key);a.has(p.key)&&(x===void 0||x.mutation instanceof Ka)?c=c.insert(p.key,p):x!==void 0?(u.set(p.key,x.mutation.getFieldMask()),td(x.mutation,p,x.mutation.getFieldMask(),Et.now())):u.set(p.key,ks.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((p,x)=>u.set(p,x))),n.forEach(((p,x)=>h.set(p,new Jz(x,u.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,n){const s=ed();let a=new Vt(((u,h)=>u-h)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const h of u)h.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let x=s.get(m)||ks.empty();x=h.applyToLocalView(p,x),s.set(m,x);const v=(a.get(h.batchId)||Je()).add(m);a=a.insert(h.batchId,v)}))})).next((()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,x=m.value,v=_A();x.forEach((w=>{if(!c.has(w)){const N=AA(n.get(w),s.get(w));N!==null&&v.set(w,N),c=c.add(w)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return de.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,a){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next((c=>{const u=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):de.resolve(Io());let h=md,m=c;return u.next((p=>de.forEach(p,((x,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),c.get(x)?de.resolve():this.remoteDocumentCache.getEntry(e,x).next((w=>{m=m.insert(x,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,m,p,Je()))).next((x=>({batchId:h,changes:wA(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((s=>{let a=Fu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let u=Fu();return this.indexManager.getCollectionParents(e,c).next((h=>de.forEach(h,(m=>{const p=(function(v,w){return new Rd(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((x=>{x.forEach(((v,w)=>{u=u.insert(v,w)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a)))).next((u=>{c.forEach(((m,p)=>{const x=p.getKey();u.get(x)===null&&(u=u.insert(x,Un.newInvalidDocument(x)))}));let h=Fu();return u.forEach(((m,p)=>{const x=c.get(m);x!==void 0&&td(x.mutation,p,ks.empty(),Et.now()),Um(n,p)&&(h=h.insert(m,p))})),h}))}}class t8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return de.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:Xi(a.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:qz(a.bundledQuery),readTime:Xi(a.readTime)}})(n)),de.resolve()}}class n8{constructor(){this.overlays=new Vt(Se.comparator),this.qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Io();return de.forEach(n,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((a,c)=>{this.St(e,n,c)})),de.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),de.resolve()}getOverlaysForCollection(e,n,s){const a=Io(),c=n.length+1,u=new Se(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===c&&m.largestBatchId>s&&a.set(m.getKey(),m)}return de.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Vt(((p,x)=>p-x));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let x=c.get(p.largestBatchId);x===null&&(x=Io(),c=c.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const h=Io(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,x)=>h.set(p,x))),!(h.size()>=a)););return de.resolve(h)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new bz(n,s));let c=this.qr.get(n);c===void 0&&(c=Je(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class s8{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}class mv{constructor(){this.Qr=new pn(bn.$r),this.Ur=new pn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new bn(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new bn(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Se(new _t([])),s=new bn(n,e),a=new bn(n,e+1),c=[];return this.Ur.forEachInRange([s,a],(u=>{this.Gr(u),c.push(u.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new _t([])),s=new bn(n,e),a=new bn(n,e+1);let c=Je();return this.Ur.forEachInRange([s,a],(u=>{c=c.add(u.key)})),c}containsKey(e){const n=new bn(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}class i8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pn(bn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new vz(c,n,s,a);this.mutationQueue.push(u);for(const h of a)this.Zr=this.Zr.add(new bn(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,n){return de.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),c=a<0?0:a;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?nv:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new bn(n,0),a=new bn(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,a],(u=>{const h=this.Xr(u.Yr);c.push(h)})),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new pn(Xe);return n.forEach((a=>{const c=new bn(a,0),u=new bn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,u],(h=>{s=s.add(h.Yr)}))})),de.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;Se.isDocumentKey(c)||(c=c.child(""));const u=new bn(new Se(c),0);let h=new pn(Xe);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Yr)),!0)}),u),de.resolve(this.ti(h))}ti(e){const n=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(e,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return de.forEach(n.mutations,(a=>{const c=new bn(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new bn(n,0),a=this.Zr.firstAfterOrEqual(s);return de.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class r8{constructor(e){this.ri=e,this.docs=(function(){return new Vt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,u=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return de.resolve(s?s.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let s=Hr();return n.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Un.newInvalidDocument(a))})),de.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Hr();const u=n.path,h=new Se(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:x}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||DU(PU(x),s)<=0||(a.has(x.key)||Um(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,n,s,a){Re(9500)}ii(e,n){return de.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new a8(this)}getSize(e){return de.resolve(this.size)}}class a8 extends Xz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),de.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class o8{constructor(e){this.persistence=e,this.si=new Yo((n=>rv(n)),av),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new mv,this.targetCount=0,this.ai=pc.ur()}forEachTarget(e,n){return this.si.forEach(((s,a)=>n(a))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),de.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Pr(n),de.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.si.forEach(((u,h)=>{h.sequenceNumber<=n&&s.get(h.targetId)===null&&(this.si.delete(u),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),de.waitFor(c).next((()=>a))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return de.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),de.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach((u=>{c.push(a.markPotentiallyOrphaned(e,u))})),de.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return de.resolve(s)}containsKey(e,n){return de.resolve(this._i.containsKey(n))}}class BA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mm(0),this.li=!1,this.li=!0,this.hi=new s8,this.referenceDelegate=e(this),this.Pi=new o8(this),this.indexManager=new $z,this.remoteDocumentCache=(function(a){return new r8(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Hz(n),this.Ii=new t8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new n8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new i8(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ve("MemoryPersistence","Starting transaction:",e);const a=new l8(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,n){return de.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class l8 extends VU{constructor(e){super(),this.currentSequenceNumber=e}}class pv{constructor(e){this.persistence=e,this.Ri=new mv,this.Vi=null}static mi(e){return new pv(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),de.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(s=>{const a=Se.fromPath(s);return this.gi(e,a).next((c=>{c||n.removeEntry(a,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lm{constructor(e,n){this.persistence=e,this.pi=new Yo((s=>UU(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=Wz(this,n)}static mi(e,n){return new lm(e,n)}Ei(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((a=>s+a))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return de.forEach(this.pi,((s,a)=>this.br(e,s,a).next((c=>c?de.resolve():n(a)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,n).next((h=>{h||(s++,c.removeEntry(u,Oe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rf(e.data.value)),n}br(e,n,s){return de.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return de.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gv{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Je(),a=Je();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new gv(e,n.fromCache,s,a)}}class c8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class u8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return IV()?8:OU(Fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ys(e,n).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ws(e,n,a,s).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new c8;return this.Ss(e,n,u).next((h=>{if(c.result=h,this.Vs)return this.bs(e,n,u,h.size)}))})).next((()=>c.result))}bs(e,n,s,a){return s.documentReadCount<this.fs?(Hl()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(Hl()<=We.DEBUG&&ve("QueryEngine","Query:",ql(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Hl()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(n))):de.resolve())}ys(e,n){if(WT(n))return de.resolve(null);let s=Wi(n);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Iy(n,null,"F"),s=Wi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const u=Je(...c);return this.ps.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,s).next((m=>{const p=this.Ds(n,h);return this.Cs(n,p,u,m.readTime)?this.ys(e,Iy(n,null,"F")):this.vs(e,p,n,m)}))))})))))}ws(e,n,s,a){return WT(n)||a.isEqual(Oe.min())?de.resolve(null):this.ps.getDocuments(e,s).next((c=>{const u=this.Ds(n,c);return this.Cs(n,u,s,a)?de.resolve(null):(Hl()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ql(n)),this.vs(e,u,n,RU(a,md)).next((h=>h)))}))}Ds(e,n){let s=new pn(vA(e));return n.forEach(((a,c)=>{Um(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return Hl()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",ql(n)),this.ps.getDocumentsMatchingQuery(e,n,Ua.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((c=>(n.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const yv="LocalStore",d8=3e8;class h8{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Vt(Xe),this.xs=new Yo((c=>rv(c)),av),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function f8(t,e,n,s){return new h8(t,e,n,s)}async function FA(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const u=[],h=[];let m=Je();for(const p of a){u.push(p.batchId);for(const x of p.mutations)m=m.add(x.key)}for(const p of c){h.push(p.batchId);for(const x of p.mutations)m=m.add(x.key)}return n.localDocuments.getDocuments(s,m).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function m8(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,p,x){const v=p.batch,w=v.keys();let N=de.resolve();return w.forEach((A=>{N=N.next((()=>x.getEntry(m,A))).next((S=>{const k=p.docVersions.get(A);ct(k!==null,48541),S.version.compareTo(k)<0&&(v.applyToRemoteDocument(S,p),S.isValidDocument()&&(S.setReadTime(p.commitVersion),x.addEntry(S)))}))})),N.next((()=>h.mutationQueue.removeMutationBatch(m,v)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let m=Je();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(m=m.add(h.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function HA(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function p8(t,e){const n=Ue(t),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const h=[];e.targetChanges.forEach(((x,v)=>{const w=a.get(v);if(!w)return;h.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,v))));let N=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?N=N.withResumeToken(Pn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,s)),a=a.insert(v,N),(function(S,k,P){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=d8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(w,N,x)&&h.push(n.Pi.updateTargetData(c,N))}));let m=Hr(),p=Je();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),h.push(g8(c,u,e.documentUpdates).next((x=>{m=x.ks,p=x.qs}))),!s.isEqual(Oe.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((v=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));h.push(x)}return de.waitFor(h).next((()=>u.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,m,p))).next((()=>m))})).then((c=>(n.Ms=a,c)))}function g8(t,e,n){let s=Je(),a=Je();return n.forEach((c=>s=s.add(c))),e.getEntries(t,s).next((c=>{let u=Hr();return n.forEach(((h,m)=>{const p=c.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(Oe.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):ve(yv,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function y8(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=nv),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function x8(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,e).next((c=>c?(a=c,de.resolve(a)):n.Pi.allocateTargetId(s).next((u=>(a=new Ia(e,u,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function My(t,e,n){const s=Ue(t),a=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Sc(u))throw u;ve(yv,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function uN(t,e,n){const s=Ue(t);let a=Oe.min(),c=Je();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,x){const v=Ue(m),w=v.xs.get(x);return w!==void 0?de.resolve(v.Ms.get(w)):v.Pi.getTargetData(p,x)})(s,u,Wi(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,h.targetId).next((m=>{c=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,n?a:Oe.min(),n?c:Je()))).next((h=>(v8(s,iz(e),h),{documents:h,Qs:c})))))}function v8(t,e,n){let s=t.Os.get(e)||Oe.min();n.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),t.Os.set(e,s)}class dN{constructor(){this.activeTargetIds=uz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b8{constructor(){this.Mo=new dN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dN,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class w8{Oo(e){}shutdown(){}}const hN="ConnectivityMonitor";class fN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(hN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(hN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let gf=null;function Vy(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}const I0="RestConnection",_8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===nm?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,c){const u=Vy(),h=this.zo(e,n.toUriEncodedString());ve(I0,`Sending RPC '${e}' ${u}:`,h,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,c);const{host:p}=new URL(h),x=Ga(p);return this.Jo(e,h,m,s,x).then((v=>(ve(I0,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw cc(I0,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(e,n,s,a,c,u){return this.Go(e,n,s,a,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}zo(e,n){const s=_8[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class N8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const On="WebChannelConnection";class E8 extends T8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const u=Vy();return new Promise(((h,m)=>{const p=new GS;p.setWithCredentials(!0),p.listenOnce(YS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Cf.NO_ERROR:const v=p.getResponseJson();ve(On,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case Cf.TIMEOUT:ve(On,`RPC '${e}' ${u} timed out`),m(new ye(le.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const w=p.getStatus();if(ve(On,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const A=N?.error;if(A&&A.status&&A.message){const S=(function(P){const U=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(U)>=0?U:le.UNKNOWN})(A.status);m(new ye(S,A.message))}else m(new ye(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ye(le.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ve(On,`RPC '${e}' ${u} completed.`)}}));const x=JSON.stringify(a);ve(On,`RPC '${e}' ${u} sending request:`,a),p.send(n,"POST",x,s,15)}))}T_(e,n,s){const a=Vy(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=QS(),h=KS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const x=c.join("");ve(On,`Creating RPC '${e}' stream ${a}: ${x}`,m);const v=u.createWebChannel(x,m);this.I_(v);let w=!1,N=!1;const A=new N8({Yo:k=>{N?ve(On,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(w||(ve(On,`Opening RPC '${e}' stream ${a} transport.`),v.open(),w=!0),ve(On,`RPC '${e}' stream ${a} sending:`,k),v.send(k))},Zo:()=>v.close()}),S=(k,P,U)=>{k.listen(P,(O=>{try{U(O)}catch(F){setTimeout((()=>{throw F}),0)}}))};return S(v,Bu.EventType.OPEN,(()=>{N||(ve(On,`RPC '${e}' stream ${a} transport opened.`),A.o_())})),S(v,Bu.EventType.CLOSE,(()=>{N||(N=!0,ve(On,`RPC '${e}' stream ${a} transport closed`),A.a_(),this.E_(v))})),S(v,Bu.EventType.ERROR,(k=>{N||(N=!0,cc(On,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),A.a_(new ye(le.UNAVAILABLE,"The operation could not be completed")))})),S(v,Bu.EventType.MESSAGE,(k=>{if(!N){const P=k.data[0];ct(!!P,16349);const U=P,O=U?.error||U[0]?.error;if(O){ve(On,`RPC '${e}' stream ${a} received error:`,O);const F=O.status;let Z=(function(I){const j=ln[I];if(j!==void 0)return IA(j)})(F),ee=O.message;Z===void 0&&(Z=le.INTERNAL,ee="Unknown error status: "+F+" with message "+O.message),N=!0,A.a_(new ye(Z,ee)),v.close()}else ve(On,`RPC '${e}' stream ${a} received:`,P),A.u_(P)}})),S(h,ZS.STAT_EVENT,(k=>{k.stat===Ty.PROXY?ve(On,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===Ty.NOPROXY&&ve(On,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function C0(){return typeof document<"u"?document:null}function Hm(t){return new kz(t,!0)}class qA{constructor(e,n,s=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const mN="PersistentStream";class $A{constructor(e,n,s,a,c,u,h,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{e((()=>{const a=new ye(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(mN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(mN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j8 extends $A{constructor(e,n,s,a,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,u),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Rz(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Oe.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?Xi(u.readTime):Oe.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Dy(this.serializer),n.addTarget=(function(c,u){let h;const m=u.target;if(h=Ay(m)?{documents:Mz(c,m)}:{query:Vz(c,m).ft},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=PA(c,u.resumeToken);const p=Cy(c,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Oe.min())>0){h.readTime=om(c,u.snapshotVersion.toTimestamp());const p=Cy(c,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=Lz(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Dy(this.serializer),n.removeTarget=e,this.q_(n)}}class S8 extends $A{constructor(e,n,s,a,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,u),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Dz(e.writeResults,e.commitTime),s=Xi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Dy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>Pz(this.serializer,s)))};this.q_(n)}}class A8{}class k8 extends A8{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Go(e,Ry(n,s),a,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(le.UNKNOWN,c.toString())}))}Ho(e,n,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Ho(e,Ry(n,s),a,u,h,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(le.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class I8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fr(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bo="RemoteStore";class C8{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Zo(this)&&(ve(Bo,"Restarting streams for network reachability change."),await(async function(m){const p=Ue(m);p.Ea.add(4),await Md(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qm(p)})(this))}))})),this.Ra=new I8(s,a)}}async function qm(t){if(Zo(t))for(const e of t.da)await e(!0)}async function Md(t){for(const e of t.da)await e(!1)}function GA(t,e){const n=Ue(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wv(n)?bv(n):Ac(n).O_()&&vv(n,e))}function xv(t,e){const n=Ue(t),s=Ac(n);n.Ia.delete(e),s.O_()&&YA(n,e),n.Ia.size===0&&(s.O_()?s.L_():Zo(n)&&n.Ra.set("Unknown"))}function vv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ac(t).Y_(e)}function YA(t,e){t.Va.Ue(e),Ac(t).Z_(e)}function bv(t){t.Va=new Ez({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ac(t).start(),t.Ra.ua()}function wv(t){return Zo(t)&&!Ac(t).x_()&&t.Ia.size>0}function Zo(t){return Ue(t).Ea.size===0}function ZA(t){t.Va=void 0}async function R8(t){t.Ra.set("Online")}async function P8(t){t.Ia.forEach(((e,n)=>{vv(t,e)}))}async function D8(t,e){ZA(t),wv(t)?(t.Ra.ha(e),bv(t)):t.Ra.set("Unknown")}async function M8(t,e,n){if(t.Ra.set("Online"),e instanceof RA&&e.state===2&&e.cause)try{await(async function(a,c){const u=c.cause;for(const h of c.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ia.delete(h),a.Va.removeTarget(h))})(t,e)}catch(s){ve(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await cm(t,s)}else if(e instanceof Mf?t.Va.Ze(e):e instanceof CA?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const s=await HA(t.localStore);n.compareTo(s)>=0&&await(function(c,u){const h=c.Va.Tt(u);return h.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const x=c.Ia.get(p);x&&c.Ia.set(p,x.withResumeToken(m.resumeToken,u))}})),h.targetMismatches.forEach(((m,p)=>{const x=c.Ia.get(m);if(!x)return;c.Ia.set(m,x.withResumeToken(Pn.EMPTY_BYTE_STRING,x.snapshotVersion)),YA(c,m);const v=new Ia(x.target,m,p,x.sequenceNumber);vv(c,v)})),c.remoteSyncer.applyRemoteEvent(h)})(t,n)}catch(s){ve(Bo,"Failed to raise snapshot:",s),await cm(t,s)}}async function cm(t,e,n){if(!Sc(e))throw e;t.Ea.add(1),await Md(t),t.Ra.set("Offline"),n||(n=()=>HA(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ve(Bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qm(t)}))}function KA(t,e){return e().catch((n=>cm(t,n,e)))}async function $m(t){const e=Ue(t),n=Ha(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nv;for(;V8(e);)try{const a=await y8(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,O8(e,a)}catch(a){await cm(e,a)}QA(e)&&WA(e)}function V8(t){return Zo(t)&&t.Ta.length<10}function O8(t,e){t.Ta.push(e);const n=Ha(t);n.O_()&&n.X_&&n.ea(e.mutations)}function QA(t){return Zo(t)&&!Ha(t).x_()&&t.Ta.length>0}function WA(t){Ha(t).start()}async function L8(t){Ha(t).ra()}async function U8(t){const e=Ha(t);for(const n of t.Ta)e.ea(n.mutations)}async function z8(t,e,n){const s=t.Ta.shift(),a=dv.from(s,e,n);await KA(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await $m(t)}async function B8(t,e){e&&Ha(t).X_&&await(async function(s,a){if((function(u){return _z(u)&&u!==le.ABORTED})(a.code)){const c=s.Ta.shift();Ha(s).B_(),await KA(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await $m(s)}})(t,e),QA(t)&&WA(t)}async function pN(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ve(Bo,"RemoteStore received new credentials");const s=Zo(n);n.Ea.add(3),await Md(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qm(n)}async function F8(t,e){const n=Ue(t);e?(n.Ea.delete(2),await qm(n)):e||(n.Ea.add(2),await Md(n),n.Ra.set("Unknown"))}function Ac(t){return t.ma||(t.ma=(function(n,s,a){const c=Ue(n);return c.sa(),new j8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(t.datastore,t.asyncQueue,{Xo:R8.bind(null,t),t_:P8.bind(null,t),r_:D8.bind(null,t),H_:M8.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),wv(t)?bv(t):t.Ra.set("Unknown")):(await t.ma.stop(),ZA(t))}))),t.ma}function Ha(t){return t.fa||(t.fa=(function(n,s,a){const c=Ue(n);return c.sa(),new S8(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:L8.bind(null,t),r_:B8.bind(null,t),ta:U8.bind(null,t),na:z8.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await $m(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(Bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class _v{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const u=Date.now()+s,h=new _v(e,n,u,a,c);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),Sc(t))return new ye(le.UNAVAILABLE,`${e}: ${t}`);throw t}class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Se.comparator(n.key,s.key):(n,s)=>Se.comparator(n.key,s.key),this.keyedMap=Fu(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new nc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class gN{constructor(){this.ga=new Vt(Se.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class gc{constructor(e,n,s,a,c,u,h,m,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,a,c){const u=[];return n.forEach((h=>{u.push({type:0,doc:h})})),new gc(e,n,nc.emptySet(n),u,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}class H8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class q8{constructor(){this.queries=yN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Ue(n),c=a.queries;a.queries=yN(),c.forEach(((u,h)=>{for(const m of h.Sa)m.onError(s)}))})(this,new ye(le.ABORTED,"Firestore shutting down"))}}function yN(){return new Yo((t=>xA(t)),Lm)}async function XA(t,e){const n=Ue(t);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.ba()&&e.Da()&&(s=2):(c=new H8,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(a,!0);break;case 1:c.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(u){const h=Tv(u,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(h)}n.queries.set(a,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Nv(n)}async function JA(t,e){const n=Ue(t),s=e.query;let a=3;const c=n.queries.get(s);if(c){const u=c.Sa.indexOf(e);u>=0&&(c.Sa.splice(u,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function $8(t,e){const n=Ue(t);let s=!1;for(const a of e){const c=a.query,u=n.queries.get(c);if(u){for(const h of u.Sa)h.Fa(a)&&(s=!0);u.wa=a}}s&&Nv(n)}function G8(t,e,n){const s=Ue(t),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function Nv(t){t.Ca.forEach((e=>{e.next()}))}var Oy,xN;(xN=Oy||(Oy={})).Ma="default",xN.Cache="cache";class ek{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new gc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Oy.Cache}}class tk{constructor(e){this.key=e}}class nk{constructor(e){this.key=e}}class Y8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=vA(e),this.tu=new nc(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new gN,a=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((x,v)=>{const w=a.get(x),N=Um(this.query,v)?v:null,A=!!w&&this.mutatedKeys.has(w.key),S=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let k=!1;w&&N?w.data.isEqual(N.data)?A!==S&&(s.track({type:3,doc:N}),k=!0):this.su(w,N)||(s.track({type:2,doc:N}),k=!0,(m&&this.eu(N,m)>0||p&&this.eu(N,p)<0)&&(h=!0)):!w&&N?(s.track({type:0,doc:N}),k=!0):w&&!N&&(s.track({type:1,doc:w}),k=!0,(m||p)&&(h=!0)),k&&(N?(u=u.add(N),c=S?c.add(x):c.delete(x)):(u=u.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const x=this.query.limitType==="F"?u.last():u.first();u=u.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:u,iu:s,Cs:h,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((x,v)=>(function(N,A){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:k})}};return S(N)-S(A)})(x.type,v.type)||this.eu(x.doc,v.doc))),this.ou(s),a=a??!1;const h=n&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new gc(this.query,e.tu,c,u,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new nk(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new tk(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ev="SyncEngine";class Z8{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class K8{constructor(e){this.key=e,this.hu=!1}}class Q8{constructor(e,n,s,a,c,u){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Yo((h=>xA(h)),Lm),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Se.comparator),this.Au=new Map,this.Ru=new mv,this.Vu={},this.mu=new Map,this.fu=pc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function W8(t,e,n=!0){const s=lk(t);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await sk(s,e,n,!0),a}async function X8(t,e){const n=lk(t);await sk(n,e,!0,!1)}async function sk(t,e,n,s){const a=await x8(t.localStore,Wi(e)),c=a.targetId,u=t.sharedClientState.addLocalQueryTarget(c,n);let h;return s&&(h=await J8(t,e,c,u==="current",a.resumeToken)),t.isPrimaryClient&&n&&GA(t.remoteStore,a),h}async function J8(t,e,n,s,a){t.pu=(v,w,N)=>(async function(S,k,P,U){let O=k.view.ru(P);O.Cs&&(O=await uN(S.localStore,k.query,!1).then((({documents:C})=>k.view.ru(C,O))));const F=U&&U.targetChanges.get(k.targetId),Z=U&&U.targetMismatches.get(k.targetId)!=null,ee=k.view.applyChanges(O,S.isPrimaryClient,F,Z);return bN(S,k.targetId,ee.au),ee.snapshot})(t,v,w,N);const c=await uN(t.localStore,e,!0),u=new Y8(e,c.Qs),h=u.ru(c.documents),m=Dd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",a),p=u.applyChanges(h,t.isPrimaryClient,m);bN(t,n,p.au);const x=new Z8(e,n,u);return t.Tu.set(e,x),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function eB(t,e,n){const s=Ue(t),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((u=>!Lm(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await My(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&xv(s.remoteStore,a.targetId),Ly(s,a.targetId)})).catch(jc)):(Ly(s,a.targetId),await My(s.localStore,a.targetId,!0))}async function tB(t,e){const n=Ue(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),xv(n.remoteStore,s.targetId))}async function nB(t,e,n){const s=cB(t);try{const a=await(function(u,h){const m=Ue(u),p=Et.now(),x=h.reduce(((N,A)=>N.add(A.key)),Je());let v,w;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let A=Hr(),S=Je();return m.Ns.getEntries(N,x).next((k=>{A=k,A.forEach(((P,U)=>{U.isValidDocument()||(S=S.add(P))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,A))).next((k=>{v=k;const P=[];for(const U of h){const O=yz(U,v.get(U.key).overlayedDocument);O!=null&&P.push(new Ka(U.key,O,uA(O.value.mapValue),Xs.exists(!0)))}return m.mutationQueue.addMutationBatch(N,p,P,h)})).next((k=>{w=k;const P=k.applyToLocalDocumentSet(v,S);return m.documentOverlayCache.saveOverlays(N,k.batchId,P)}))})).then((()=>({batchId:w.batchId,changes:wA(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,h,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new Vt(Xe)),p=p.insert(h,m),u.Vu[u.currentUser.toKey()]=p})(s,a.batchId,n),await Vd(s,a.changes),await $m(s.remoteStore)}catch(a){const c=Tv(a,"Failed to persist write");n.reject(c)}}async function ik(t,e){const n=Ue(t);try{const s=await p8(n.localStore,e);e.targetChanges.forEach(((a,c)=>{const u=n.Au.get(c);u&&(ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ct(u.hu,14607):a.removedDocuments.size>0&&(ct(u.hu,42227),u.hu=!1))})),await Vd(n,s,e)}catch(s){await jc(s)}}function vN(t,e,n){const s=Ue(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((c,u)=>{const h=u.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(u,h){const m=Ue(u);m.onlineState=h;let p=!1;m.queries.forEach(((x,v)=>{for(const w of v.Sa)w.va(h)&&(p=!0)})),p&&Nv(m)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function sB(t,e,n){const s=Ue(t);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),c=a&&a.key;if(c){let u=new Vt(Se.comparator);u=u.insert(c,Un.newNoDocument(c,Oe.min()));const h=Je().add(c),m=new Fm(Oe.min(),new Map,new Vt(Xe),u,h);await ik(s,m),s.du=s.du.remove(c),s.Au.delete(e),jv(s)}else await My(s.localStore,e,!1).then((()=>Ly(s,e,n))).catch(jc)}async function iB(t,e){const n=Ue(t),s=e.batch.batchId;try{const a=await m8(n.localStore,e);ak(n,s,null),rk(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Vd(n,a)}catch(a){await jc(a)}}async function rB(t,e,n){const s=Ue(t);try{const a=await(function(u,h){const m=Ue(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let x;return m.mutationQueue.lookupMutationBatch(p,h).next((v=>(ct(v!==null,37113),x=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,x,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x))).next((()=>m.localDocuments.getDocuments(p,x)))}))})(s.localStore,e);ak(s,e,n),rk(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Vd(s,a)}catch(a){await jc(a)}}function rk(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ak(t,e,n){const s=Ue(t);let a=s.Vu[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Ly(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||ok(t,s)}))}function ok(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jv(t))}function bN(t,e,n){for(const s of n)s instanceof tk?(t.Ru.addReference(s.key,e),aB(t,s)):s instanceof nk?(ve(Ev,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||ok(t,s.key)):Re(19791,{wu:s})}function aB(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ve(Ev,"New document in limbo: "+n),t.Eu.add(s),jv(t))}function jv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Se(_t.fromString(e)),s=t.fu.next();t.Au.set(s,new K8(n)),t.du=t.du.insert(n,s),GA(t.remoteStore,new Ia(Wi(ov(n.path)),s,"TargetPurposeLimboResolution",Mm.ce))}}async function Vd(t,e,n){const s=Ue(t),a=[],c=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,m)=>{u.push(s.pu(m,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const x=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,x?"current":"not-current")}if(p){a.push(p);const x=gv.As(m.targetId,p);c.push(x)}})))})),await Promise.all(u),s.Pu.H_(a),await(async function(m,p){const x=Ue(m);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>de.forEach(p,(w=>de.forEach(w.Es,(N=>x.persistence.referenceDelegate.addReference(v,w.targetId,N))).next((()=>de.forEach(w.ds,(N=>x.persistence.referenceDelegate.removeReference(v,w.targetId,N)))))))))}catch(v){if(!Sc(v))throw v;ve(yv,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const N=x.Ms.get(w),A=N.snapshotVersion,S=N.withLastLimboFreeSnapshotVersion(A);x.Ms=x.Ms.insert(w,S)}}})(s.localStore,c))}async function oB(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ve(Ev,"User change. New user:",e.toKey());const s=await FA(n.localStore,e);n.currentUser=e,(function(c,u){c.mu.forEach((h=>{h.forEach((m=>{m.reject(new ye(le.CANCELLED,u))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Vd(n,s.Ls)}}function lB(t,e){const n=Ue(t),s=n.Au.get(e);if(s&&s.hu)return Je().add(s.key);{let a=Je();const c=n.Iu.get(e);if(!c)return a;for(const u of c){const h=n.Tu.get(u);a=a.unionWith(h.view.nu)}return a}}function lk(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ik.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sB.bind(null,e),e.Pu.H_=$8.bind(null,e.eventManager),e.Pu.yu=G8.bind(null,e.eventManager),e}function cB(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rB.bind(null,e),e}class um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return f8(this.persistence,new u8,e.initialUser,this.serializer)}Cu(e){return new BA(pv.mi,this.serializer)}Du(e){return new b8}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}um.provider={build:()=>new um};class uB extends um{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof lm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Kz(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new BA((s=>lm.mi(s,n)),this.serializer)}}class Uy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>vN(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oB.bind(null,this.syncEngine),await F8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new q8})()}createDatastore(e){const n=Hm(e.databaseInfo.databaseId),s=(function(c){return new E8(c)})(e.databaseInfo);return(function(c,u,h,m){return new k8(c,u,h,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,a,c,u,h){return new C8(s,a,c,u,h)})(this.localStore,this.datastore,e.asyncQueue,(n=>vN(this.syncEngine,n,0)),(function(){return fN.v()?new fN:new w8})())}createSyncEngine(e,n){return(function(a,c,u,h,m,p,x){const v=new Q8(a,c,u,h,m,p);return x&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ue(n);ve(Bo,"RemoteStore shutting down."),s.Ea.add(5),await Md(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Uy.provider={build:()=>new Uy};class ck{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const qa="FirestoreClient";class dB{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ln.UNAUTHENTICATED,this.clientId=tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async u=>{ve(qa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ve(qa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Tv(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function R0(t,e){t.asyncQueue.verifyOperationInProgress(),ve(qa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async a=>{s.isEqual(a)||(await FA(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function wN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hB(t);ve(qa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>pN(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,a)=>pN(e.remoteStore,a))),t._onlineComponents=e}async function hB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(qa,"Using user provided OfflineComponentProvider");try{await R0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;cc("Error using user provided cache. Falling back to memory cache: "+n),await R0(t,new um)}}else ve(qa,"Using default OfflineComponentProvider"),await R0(t,new uB(void 0));return t._offlineComponents}async function uk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(qa,"Using user provided OnlineComponentProvider"),await wN(t,t._uninitializedComponentsProvider._online)):(ve(qa,"Using default OnlineComponentProvider"),await wN(t,new Uy))),t._onlineComponents}function fB(t){return uk(t).then((e=>e.syncEngine))}async function dk(t){const e=await uk(t),n=e.eventManager;return n.onListen=W8.bind(null,e.syncEngine),n.onUnlisten=eB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=X8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tB.bind(null,e.syncEngine),n}function mB(t,e,n={}){const s=new Mr;return t.asyncQueue.enqueueAndForget((async()=>(function(c,u,h,m,p){const x=new ck({next:w=>{x.Nu(),u.enqueueAndForget((()=>JA(c,v)));const N=w.docs.has(h);!N&&w.fromCache?p.reject(new ye(le.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&w.fromCache&&m&&m.source==="server"?p.reject(new ye(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new ek(ov(h.path),x,{includeMetadataChanges:!0,qa:!0});return XA(c,v)})(await dk(t),t.asyncQueue,e,n,s))),s.promise}function pB(t,e,n={}){const s=new Mr;return t.asyncQueue.enqueueAndForget((async()=>(function(c,u,h,m,p){const x=new ck({next:w=>{x.Nu(),u.enqueueAndForget((()=>JA(c,v))),w.fromCache&&m.source==="server"?p.reject(new ye(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new ek(h,x,{includeMetadataChanges:!0,qa:!0});return XA(c,v)})(await dk(t),t.asyncQueue,e,n,s))),s.promise}function hk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const _N=new Map;const fk="firestore.googleapis.com",TN=!0;class NN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fk,this.ssl=TN}else this.host=e.host,this.ssl=e.ssl??TN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yz)throw new ye(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hk(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new wU;switch(s.type){case"firstParty":return new EU(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=_N.get(n);s&&(ve("ComponentProvider","Removing Datastore"),_N.delete(n),s.terminate())})(this),Promise.resolve()}}function gB(t,e,n,s={}){t=yi(t,Gm);const a=Ga(e),c=t._getSettings(),u={...c,emulatorOptions:t._getEmulatorOptions()},h=`${e}:${n}`;a&&(Ox(`https://${h}`),Lx("Firestore",!0)),c.host!==fk&&c.host!==h&&cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:h,ssl:a,emulatorOptions:s};if(!tr(m,u)&&(t._setSettings(m),s.mockUserToken)){let p,x;if(typeof s.mockUserToken=="string")p=s.mockUserToken,x=Ln.MOCK_USER;else{p=nS(s.mockUserToken,t._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ye(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ln(v)}t._authCredentials=new _U(new XS(p,x))}}class kc{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new kc(this.firestore,e,this._query)}}class Xt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Cd(n,Xt._jsonSchema))return new Xt(e,s||null,new Se(_t.fromString(n.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:dn("string",Xt._jsonSchemaVersion),referencePath:dn("string")};class Ma extends kc{constructor(e,n,s){super(e,n,ov(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new Se(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function vd(t,e,...n){if(t=ut(t),JS("collection","path",e),t instanceof Gm){const s=_t.fromString(e,...n);return OT(s),new Ma(t,null,s)}{if(!(t instanceof Xt||t instanceof Ma))throw new ye(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_t.fromString(e,...n));return OT(s),new Ma(t.firestore,null,s)}}function hn(t,e,...n){if(t=ut(t),arguments.length===1&&(e=tv.newId()),JS("doc","path",e),t instanceof Gm){const s=_t.fromString(e,...n);return VT(s),new Xt(t,null,new Se(s))}{if(!(t instanceof Xt||t instanceof Ma))throw new ye(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_t.fromString(e,...n));return VT(s),new Xt(t.firestore,t instanceof Ma?t.converter:null,new Se(s))}}const EN="AsyncQueue";class jN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qA(this,"async_queue_retry"),this._c=()=>{const s=C0();s&&ve(EN,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=C0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=C0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Sc(e))throw e;ve(EN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Fr("INTERNAL UNHANDLED ERROR: ",SN(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=_v.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&Re(47125,{Pc:SN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function SN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ko extends Gm{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new jN,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jN(e),this._firestoreClient=void 0,await e}}}function yB(t,e){const n=typeof t=="object"?t:Im(),s=typeof t=="string"?t:nm,a=Ya(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Jj("firestore");c&&gB(a,...c)}return a}function Sv(t){if(t._terminated)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xB(t),t._firestoreClient}function xB(t){const e=t._freezeSettings(),n=(function(a,c,u,h){return new FU(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,hk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dB(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Pn.fromBase64String(e))}catch(n){throw new ye(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cd(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:dn("string",Ks._jsonSchemaVersion),bytes:dn("string")};class Ym{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ic{constructor(e){this._methodName=e}}class Ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(Cd(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:dn("string",Ji._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};class er{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cd(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new er(e.vectorValues);throw new ye(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:dn("string",er._jsonSchemaVersion),vectorValues:dn("object")};const vB=/^__.*__$/;class bB{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ka(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pd(e,this.data,n,this.fieldTransforms)}}class mk{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ka(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class Zm{constructor(e,n,s,a,c,u){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pk(this.Ac)&&vB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wB{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Hm(e)}Cc(e,n,s,a=!1){return new Zm({Ac:e,methodName:n,Dc:s,path:Rn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Km(t){const e=t._freezeSettings(),n=Hm(t._databaseId);return new wB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gk(t,e,n,s,a,c={}){const u=t.Cc(c.merge||c.mergeFields?2:0,e,n,a);Cv("Data must be an object, but it was:",u,s);const h=xk(s,u);let m,p;if(c.merge)m=new ks(u.fieldMask),p=u.fieldTransforms;else if(c.mergeFields){const x=[];for(const v of c.mergeFields){const w=zy(e,v,n);if(!u.contains(w))throw new ye(le.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);bk(x,w)||x.push(w)}m=new ks(x),p=u.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=u.fieldTransforms;return new bB(new us(h),m,p)}class Qm extends Ic{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qm}}function yk(t,e,n){return new Zm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Av extends Ic{_toFieldTransform(e){return new cv(e.path,new xd)}isEqual(e){return e instanceof Av}}class kv extends Ic{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=yk(this,e,!0),s=this.vc.map((c=>Qo(c,n))),a=new fc(s);return new cv(e.path,a)}isEqual(e){return e instanceof kv&&tr(this.vc,e.vc)}}class Iv extends Ic{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=yk(this,e,!0),s=this.vc.map((c=>Qo(c,n))),a=new mc(s);return new cv(e.path,a)}isEqual(e){return e instanceof Iv&&tr(this.vc,e.vc)}}function _B(t,e,n,s){const a=t.Cc(1,e,n);Cv("Data must be an object, but it was:",a,s);const c=[],u=us.empty();Za(s,((m,p)=>{const x=Rv(e,m,n);p=ut(p);const v=a.yc(x);if(p instanceof Qm)c.push(x);else{const w=Qo(p,v);w!=null&&(c.push(x),u.set(x,w))}}));const h=new ks(c);return new mk(u,h,a.fieldTransforms)}function TB(t,e,n,s,a,c){const u=t.Cc(1,e,n),h=[zy(e,s,n)],m=[a];if(c.length%2!=0)throw new ye(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)h.push(zy(e,c[w])),m.push(c[w+1]);const p=[],x=us.empty();for(let w=h.length-1;w>=0;--w)if(!bk(p,h[w])){const N=h[w];let A=m[w];A=ut(A);const S=u.yc(N);if(A instanceof Qm)p.push(N);else{const k=Qo(A,S);k!=null&&(p.push(N),x.set(N,k))}}const v=new ks(p);return new mk(x,v,u.fieldTransforms)}function NB(t,e,n,s=!1){return Qo(n,t.Cc(s?4:3,e))}function Qo(t,e){if(vk(t=ut(t)))return Cv("Unsupported field value:",e,t),xk(t,e);if(t instanceof Ic)return(function(s,a){if(!pk(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const c=[];let u=0;for(const h of s){let m=Qo(h,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(t,e)}return(function(s,a){if((s=ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return dz(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Et.fromDate(s);return{timestampValue:om(a.serializer,c)}}if(s instanceof Et){const c=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:om(a.serializer,c)}}if(s instanceof Ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ks)return{bytesValue:PA(a.serializer,s._byteString)};if(s instanceof Xt){const c=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(c))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:fv(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof er)return(function(u,h){return{mapValue:{fields:{[lA]:{stringValue:cA},[sm]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return lv(h.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Dm(s)}`)})(t,e)}function xk(t,e){const n={};return nA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,((s,a)=>{const c=Qo(a,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function vk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof Ji||t instanceof Ks||t instanceof Xt||t instanceof Ic||t instanceof er)}function Cv(t,e,n){if(!vk(n)||!eA(n)){const s=Dm(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function zy(t,e,n){if((e=ut(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return Rv(t,e);throw dm("Field path arguments must be of type string or ",t,!1,void 0,n)}const EB=new RegExp("[~\\*/\\[\\]]");function Rv(t,e,n){if(e.search(EB)>=0)throw dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ym(...e.split("."))._internalPath}catch{throw dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dm(t,e,n,s,a){const c=s&&!s.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${s}`),u&&(m+=` in document ${a}`),m+=")"),new ye(le.INVALID_ARGUMENT,h+t+m)}function bk(t,e){return t.some((n=>n.isEqual(e)))}class wk{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jB extends wk{data(){return super.data()}}function Pv(t,e){return typeof e=="string"?Rv(t,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}function SB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dv{}class AB extends Dv{}function _k(t,e,...n){let s=[];e instanceof Dv&&s.push(e),s=s.concat(n),(function(c){const u=c.filter((m=>m instanceof Mv)).length,h=c.filter((m=>m instanceof Wm)).length;if(u>1||u>0&&h>0)throw new ye(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)t=a._apply(t);return t}class Wm extends AB{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Wm(e,n,s)}_apply(e){const n=this._parse(e);return Nk(e._query,n),new kc(e.firestore,e.converter,ky(e._query,n))}_parse(e){const n=Km(e.firestore);return(function(c,u,h,m,p,x,v){let w;if(p.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ye(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){kN(v,x);const A=[];for(const S of v)A.push(AN(m,c,S));w={arrayValue:{values:A}}}else w=AN(m,c,v)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||kN(v,x),w=NB(h,u,v,x==="in"||x==="not-in");return un.create(p,x,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Tk(t,e,n){const s=e,a=Pv("where",t);return Wm._create(a,s,n)}class Mv extends Dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mv(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:xi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let u=a;const h=c.getFlattenedFilters();for(const m of h)Nk(u,m),u=ky(u,m)})(e._query,n),new kc(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AN(t,e,n){if(typeof(n=ut(n))=="string"){if(n==="")throw new ye(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yA(e)&&n.indexOf("/")!==-1)throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(_t.fromString(n));if(!Se.isDocumentKey(s))throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $T(t,new Se(s))}if(n instanceof Xt)return $T(t,n._key);throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(n)}.`)}function kN(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nk(t,e){const n=(function(a,c){for(const u of a)for(const h of u.getFlattenedFilters())if(c.indexOf(h.op)>=0)return h.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kB{convertValue(e,n="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Za(e,((a,c)=>{s[a]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[sm].arrayValue?.values?.map((s=>Wt(s.doubleValue)));return new er(n)}convertGeoPoint(e){return new Ji(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Om(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const n=za(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=_t.fromString(e);ct(UA(s),9688,{name:e});const a=new gd(s.get(1),s.get(3)),c=new Se(s.popFirst(5));return a.isEqual(n)||Fr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Ek(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class qu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends wk{constructor(e,n,s,a,c,u){super(e,n,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Pv("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:dn("string",Mo._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class Vf extends Mo{data(e={}){return super.data(e)}}class sc{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new qu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Vf(this._firestore,this._userDataWriter,s.key,s,new qu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((h=>{const m=new Vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new qu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>c||h.type!==3)).map((h=>{const m=new Vf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new qu(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,x=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),x=u.indexOf(h.doc.key)),{type:IB(h.type),doc:m,oldIndex:p,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}function Qa(t){t=yi(t,Xt);const e=yi(t.firestore,Ko);return mB(Sv(e),t._key).then((n=>RB(e,t,n)))}sc._jsonSchemaVersion="firestore/querySnapshot/1.0",sc._jsonSchema={type:dn("string",sc._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class jk extends kB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function Sk(t){t=yi(t,kc);const e=yi(t.firestore,Ko),n=Sv(e),s=new jk(e);return SB(t._query),pB(n,t._query).then((a=>new sc(e,s,t,a)))}function Of(t,e,n){t=yi(t,Xt);const s=yi(t.firestore,Ko),a=Ek(t.converter,e,n);return Xm(s,[gk(Km(s),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,Xs.none())])}function Ps(t,e,n,...s){t=yi(t,Xt);const a=yi(t.firestore,Ko),c=Km(a);let u;return u=typeof(e=ut(e))=="string"||e instanceof Ym?TB(c,"updateDoc",t._key,e,n,s):_B(c,"updateDoc",t._key,e),Xm(a,[u.toMutation(t._key,Xs.exists(!0))])}function CB(t){return Xm(yi(t.firestore,Ko),[new uv(t._key,Xs.none())])}function Vv(t,e){const n=yi(t.firestore,Ko),s=hn(t),a=Ek(t.converter,e);return Xm(n,[gk(Km(t.firestore),"addDoc",s._key,a,t.converter!==null,{}).toMutation(s._key,Xs.exists(!1))]).then((()=>s))}function Xm(t,e){return(function(s,a){const c=new Mr;return s.asyncQueue.enqueueAndForget((async()=>nB(await fB(s),a,c))),c.promise})(Sv(t),e)}function RB(t,e,n){const s=n.docs.get(e._key),a=new jk(t);return new Mo(t,a,e._key,s,new qu(n.hasPendingWrites,n.fromCache),e.converter)}function hm(){return new Av("serverTimestamp")}function Cc(...t){return new kv("arrayUnion",t)}function Wo(...t){return new Iv("arrayRemove",t)}(function(e,n=!0){(function(a){Ec=a})(Go),gi(new ei("firestore",((s,{instanceIdentifier:a,options:c})=>{const u=s.getProvider("app").getImmediate(),h=new Ko(new TU(s.getProvider("auth-internal")),new jU(u,s.getProvider("app-check-internal")),(function(p,x){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(p.options.projectId,x)})(u,a),u);return c={useFetchStreams:n,...c},h._setSettings(c),h}),"PUBLIC").setMultipleInstances(!0)),fs(RT,PT,e),fs(RT,PT,"esm2020")})();var PB="firebase",DB="12.5.0";fs(PB,DB,"app");const Ak="firebasestorage.googleapis.com",kk="storageBucket",MB=120*1e3,VB=600*1e3;class Gt extends ti{constructor(e,n,s=0){super(P0(e),`Firebase Storage: ${n} (${P0(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return P0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $t;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($t||($t={}));function P0(t){return"storage/"+t}function Ov(){const t="An unknown error occurred, please check the error payload for server response.";return new Gt($t.UNKNOWN,t)}function OB(t){return new Gt($t.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function LB(t){return new Gt($t.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt($t.UNAUTHENTICATED,t)}function zB(){return new Gt($t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BB(t){return new Gt($t.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function FB(){return new Gt($t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HB(){return new Gt($t.CANCELED,"User canceled the upload/download.")}function qB(t){return new Gt($t.INVALID_URL,"Invalid URL '"+t+"'.")}function $B(t){return new Gt($t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GB(){return new Gt($t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kk+"' property when initializing the app?")}function YB(){return new Gt($t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZB(){return new Gt($t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KB(t){return new Gt($t.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function By(t){return new Gt($t.INVALID_ARGUMENT,t)}function Ik(){return new Gt($t.APP_DELETED,"The Firebase app was deleted.")}function QB(t){return new Gt($t.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nd(t,e){return new Gt($t.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Du(t){throw new Gt($t.INTERNAL_ERROR,"Internal error: "+t)}class Is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Is.makeFromUrl(e,n)}catch{return new Is(e,"")}if(s.path==="")return s;throw $B(e)}static makeFromUrl(e,n){let s=null;const a="([A-Za-z0-9.\\-_]+)";function c(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function p(F){F.path_=decodeURIComponent(F.path)}const x="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",N=new RegExp(`^https?://${v}/${x}/b/${a}/o${w}`,"i"),A={bucket:1,path:3},S=n===Ak?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",P=new RegExp(`^https?://${S}/${a}/${k}`,"i"),O=[{regex:h,indices:m,postModify:c},{regex:N,indices:A,postModify:p},{regex:P,indices:{bucket:1,path:2},postModify:p}];for(let F=0;F<O.length;F++){const Z=O[F],ee=Z.regex.exec(e);if(ee){const C=ee[Z.indices.bucket];let I=ee[Z.indices.path];I||(I=""),s=new Is(C,I),Z.postModify(s);break}}if(s==null)throw qB(e);return s}}class WB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function XB(t,e,n){let s=1,a=null,c=null,u=!1,h=0;function m(){return h===2}let p=!1;function x(...k){p||(p=!0,e.apply(null,k))}function v(k){a=setTimeout(()=>{a=null,t(N,m())},k)}function w(){c&&clearTimeout(c)}function N(k,...P){if(p){w();return}if(k){w(),x.call(null,k,...P);return}if(m()||u){w(),x.call(null,k,...P);return}s<64&&(s*=2);let O;h===1?(h=2,O=0):O=(s+Math.random())*1e3,v(O)}let A=!1;function S(k){A||(A=!0,w(),!p&&(a!==null?(k||(h=2),clearTimeout(a),v(0)):k||(h=1)))}return v(0),c=setTimeout(()=>{u=!0,S(!0)},n),S}function JB(t){t(!1)}function e7(t){return t!==void 0}function t7(t){return typeof t=="object"&&!Array.isArray(t)}function Lv(t){return typeof t=="string"||t instanceof String}function IN(t){return Uv()&&t instanceof Blob}function Uv(){return typeof Blob<"u"}function CN(t,e,n,s){if(s<e)throw By(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw By(`Invalid value for '${t}'. Expected ${n} or less.`)}function zv(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Ck(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const a=e(s)+"="+e(t[s]);n=n+a+"&"}return n=n.slice(0,-1),n}var Vo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vo||(Vo={}));function n7(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,c=e.indexOf(t)!==-1;return n||a||c}class s7{constructor(e,n,s,a,c,u,h,m,p,x,v,w=!0,N=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=x,this.connectionFactory_=v,this.retry=w,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,S)=>{this.resolve_=A,this.reject_=S,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new yf(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=h=>{const m=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const h=c.getErrorCode()===Vo.NO_ERROR,m=c.getStatus();if(!h||n7(m,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===Vo.ABORT;s(!1,new yf(!1,null,x));return}const p=this.successCodes_.indexOf(m)!==-1;s(!0,new yf(p,c))})},n=(s,a)=>{const c=this.resolve_,u=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());e7(m)?c(m):c()}catch(m){u(m)}else if(h!==null){const m=Ov();m.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,m)):u(m)}else if(a.canceled){const m=this.appDelete_?Ik():HB();u(m)}else{const m=FB();u(m)}};this.canceled_?n(!1,new yf(!1,null,!0)):this.backoffId_=XB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yf{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function i7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function r7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function o7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function l7(t,e,n,s,a,c,u=!0,h=!1){const m=Ck(t.urlParams),p=t.url+m,x=Object.assign({},t.headers);return a7(x,e),i7(x,n),r7(x,c),o7(x,s),new s7(p,t.method,x,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,u,h)}function c7(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function u7(...t){const e=c7();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Uv())return new Blob(t);throw new Gt($t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function d7(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function h7(t){if(typeof atob>"u")throw KB("base-64");return atob(t)}const qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class D0{constructor(e,n){this.data=e,this.contentType=n||null}}function f7(t,e){switch(t){case qi.RAW:return new D0(Rk(e));case qi.BASE64:case qi.BASE64URL:return new D0(Pk(t,e));case qi.DATA_URL:return new D0(p7(e),g7(e))}throw Ov()}function Rk(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=s,u=t.charCodeAt(++n);s=65536|(c&1023)<<10|u&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function m7(t){let e;try{e=decodeURIComponent(t)}catch{throw nd(qi.DATA_URL,"Malformed data URL.")}return Rk(e)}function Pk(t,e){switch(t){case qi.BASE64:{const a=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(a||c)throw nd(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{const a=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(a||c)throw nd(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=h7(e)}catch(a){throw a.message.includes("polyfill")?a:nd(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}class Dk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nd(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=y7(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function p7(t){const e=new Dk(t);return e.base64?Pk(qi.BASE64,e.rest):m7(e.rest)}function g7(t){return new Dk(t).contentType}function y7(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class ka{constructor(e,n){let s=0,a="";IN(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(IN(this.data_)){const s=this.data_,a=d7(s,e,n);return a===null?null:new ka(a)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ka(s,!0)}}static getBlob(...e){if(Uv()){const n=e.map(s=>s instanceof ka?s.data_:s);return new ka(u7.apply(null,n))}else{const n=e.map(u=>Lv(u)?f7(qi.RAW,u).data:u.data_);let s=0;n.forEach(u=>{s+=u.byteLength});const a=new Uint8Array(s);let c=0;return n.forEach(u=>{for(let h=0;h<u.length;h++)a[c++]=u[h]}),new ka(a,!0)}}uploadData(){return this.data_}}function Mk(t){let e;try{e=JSON.parse(t)}catch{return null}return t7(e)?e:null}function x7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function v7(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Vk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function b7(t,e){return e}class $n{constructor(e,n,s,a){this.server=e,this.local=n||e,this.writable=!!s,this.xform=a||b7}}let xf=null;function w7(t){return!Lv(t)||t.length<2?t:Vk(t)}function Ok(){if(xf)return xf;const t=[];t.push(new $n("bucket")),t.push(new $n("generation")),t.push(new $n("metageneration")),t.push(new $n("name","fullPath",!0));function e(c,u){return w7(u)}const n=new $n("name");n.xform=e,t.push(n);function s(c,u){return u!==void 0?Number(u):u}const a=new $n("size");return a.xform=s,t.push(a),t.push(new $n("timeCreated")),t.push(new $n("updated")),t.push(new $n("md5Hash",null,!0)),t.push(new $n("cacheControl",null,!0)),t.push(new $n("contentDisposition",null,!0)),t.push(new $n("contentEncoding",null,!0)),t.push(new $n("contentLanguage",null,!0)),t.push(new $n("contentType",null,!0)),t.push(new $n("metadata","customMetadata",!0)),xf=t,xf}function _7(t,e){function n(){const s=t.bucket,a=t.fullPath,c=new Is(s,a);return e._makeStorageReference(c)}Object.defineProperty(t,"ref",{get:n})}function T7(t,e,n){const s={};s.type="file";const a=n.length;for(let c=0;c<a;c++){const u=n[c];s[u.local]=u.xform(s,e[u.server])}return _7(s,t),s}function Lk(t,e,n){const s=Mk(e);return s===null?null:T7(t,s,n)}function N7(t,e,n,s){const a=Mk(e);if(a===null||!Lv(a.downloadTokens))return null;const c=a.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(p=>{const x=t.bucket,v=t.fullPath,w="/b/"+u(x)+"/o/"+u(v),N=zv(w,n,s),A=Ck({alt:"media",token:p});return N+A})[0]}function E7(t,e){const n={},s=e.length;for(let a=0;a<s;a++){const c=e[a];c.writable&&(n[c.server]=t[c.local])}return JSON.stringify(n)}class Uk{constructor(e,n,s,a){this.url=e,this.method=n,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zk(t){if(!t)throw Ov()}function j7(t,e){function n(s,a){const c=Lk(t,a,e);return zk(c!==null),c}return n}function S7(t,e){function n(s,a){const c=Lk(t,a,e);return zk(c!==null),N7(c,a,t.host,t._protocol)}return n}function Bk(t){function e(n,s){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=zB():a=UB():n.getStatus()===402?a=LB(t.bucket):n.getStatus()===403?a=BB(t.path):a=s,a.status=n.getStatus(),a.serverResponse=s.serverResponse,a}return e}function A7(t){const e=Bk(t);function n(s,a){let c=e(s,a);return s.getStatus()===404&&(c=OB(t.path)),c.serverResponse=a.serverResponse,c}return n}function k7(t,e,n){const s=e.fullServerUrl(),a=zv(s,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new Uk(a,c,S7(t,n),u);return h.errorHandler=A7(e),h}function I7(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function C7(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=I7(null,e)),s}function R7(t,e,n,s,a){const c=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let O="";for(let F=0;F<2;F++)O=O+Math.random().toString().slice(2);return O}const m=h();u["Content-Type"]="multipart/related; boundary="+m;const p=C7(e,s,a),x=E7(p,n),v="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+m+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+m+"--",N=ka.getBlob(v,s,w);if(N===null)throw YB();const A={name:p.fullPath},S=zv(c,t.host,t._protocol),k="POST",P=t.maxUploadRetryTime,U=new Uk(S,k,j7(t,n),P);return U.urlParams=A,U.headers=u,U.body=N.uploadData(),U.errorHandler=Bk(e),U}class P7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,a,c){if(this.sent_)throw Du("cannot .send() more than once");if(Ga(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Du("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Du("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Du("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Du("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class D7 extends P7{initXhr(){this.xhr_.responseType="text"}}function Fk(){return new D7}class Fo{constructor(e,n){this._service=e,n instanceof Is?this._location=n:this._location=Is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fo(e,n)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vk(this._location.path)}get storage(){return this._service}get parent(){const e=x7(this._location.path);if(e===null)return null;const n=new Is(this._location.bucket,e);return new Fo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw QB(e)}}function M7(t,e,n){t._throwIfRoot("uploadBytes");const s=R7(t.storage,t._location,Ok(),new ka(e,!0),n);return t.storage.makeRequestWithTokens(s,Fk).then(a=>({metadata:a,ref:t}))}function V7(t){t._throwIfRoot("getDownloadURL");const e=k7(t.storage,t._location,Ok());return t.storage.makeRequestWithTokens(e,Fk).then(n=>{if(n===null)throw ZB();return n})}function O7(t,e){const n=v7(t._location.path,e),s=new Is(t._location.bucket,n);return new Fo(t.storage,s)}function L7(t){return/^[A-Za-z]+:\/\//.test(t)}function U7(t,e){return new Fo(t,e)}function Hk(t,e){if(t instanceof Bv){const n=t;if(n._bucket==null)throw GB();const s=new Fo(n,n._bucket);return e!=null?Hk(s,e):s}else return e!==void 0?O7(t,e):t}function z7(t,e){if(e&&L7(e)){if(t instanceof Bv)return U7(t,e);throw By("To use ref(service, url), the first argument must be a Storage instance.")}else return Hk(t,e)}function RN(t,e){const n=e?.[kk];return n==null?null:Is.makeFromBucketSpec(n,t)}function B7(t,e,n,s={}){t.host=`${e}:${n}`;const a=Ga(e);a&&(Ox(`https://${t.host}/b`),Lx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:c}=s;c&&(t._overrideAuthToken=typeof c=="string"?c:nS(c,t.app.options.projectId))}class Bv{constructor(e,n,s,a,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=a,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=Ak,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MB,this._maxUploadRetryTime=VB,this._requests=new Set,a!=null?this._bucket=Is.makeFromBucketSpec(a,this._host):this._bucket=RN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=RN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,n,s,a,c=!0){if(this._deleted)return new WB(Ik());{const u=l7(e,this._appId,s,a,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,a).getPromise()}}const PN="@firebase/storage",DN="0.14.0";const qk="storage";function F7(t,e,n){return t=ut(t),M7(t,e,n)}function H7(t){return t=ut(t),V7(t)}function q7(t,e){return t=ut(t),z7(t,e)}function $7(t=Im(),e){t=ut(t);const s=Ya(t,qk).getImmediate({identifier:e}),a=Jj("storage");return a&&G7(s,...a),s}function G7(t,e,n,s={}){B7(t,e,n,s)}function Y7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Bv(n,s,a,e,Go)}function Z7(){gi(new ei(qk,Y7,"PUBLIC").setMultipleInstances(!0)),fs(PN,DN,""),fs(PN,DN,"esm2020")}Z7();const $k="@firebase/installations",Fv="0.6.19";const Gk=1e4,Yk=`w:${Fv}`,Zk="FIS_v2",K7="https://firebaseinstallations.googleapis.com/v1",Q7=3600*1e3,W7="installations",X7="Installations";const J7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ho=new $o(W7,X7,J7);function Kk(t){return t instanceof ti&&t.code.includes("request-failed")}function Qk({projectId:t}){return`${K7}/projects/${t}/installations`}function Wk(t){return{token:t.token,requestStatus:2,expiresIn:tF(t.expiresIn),creationTime:Date.now()}}async function Xk(t,e){const s=(await e.json()).error;return Ho.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Jk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function eF(t,{refreshToken:e}){const n=Jk(t);return n.append("Authorization",nF(e)),n}async function eI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function tF(t){return Number(t.replace("s","000"))}function nF(t){return`${Zk} ${t}`}async function sF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=Qk(t),a=Jk(t),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:n,authVersion:Zk,appId:t.appId,sdkVersion:Yk},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await eI(()=>fetch(s,h));if(m.ok){const p=await m.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:Wk(p.authToken)}}else throw await Xk("Create Installation",m)}function tI(t){return new Promise(e=>{setTimeout(e,t)})}function iF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const rF=/^[cdef][\w-]{21}$/,Fy="";function aF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=oF(t);return rF.test(n)?n:Fy}catch{return Fy}}function oF(t){return iF(t).substr(0,22)}function Jm(t){return`${t.appName}!${t.appId}`}const nI=new Map;function sI(t,e){const n=Jm(t);iI(n,e),lF(n,e)}function iI(t,e){const n=nI.get(t);if(n)for(const s of n)s(e)}function lF(t,e){const n=cF();n&&n.postMessage({key:t,fid:e}),uF()}let Co=null;function cF(){return!Co&&"BroadcastChannel"in self&&(Co=new BroadcastChannel("[Firebase] FID Change"),Co.onmessage=t=>{iI(t.data.key,t.data.fid)}),Co}function uF(){nI.size===0&&Co&&(Co.close(),Co=null)}const dF="firebase-installations-database",hF=1,qo="firebase-installations-store";let M0=null;function Hv(){return M0||(M0=lS(dF,hF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qo)}}})),M0}async function fm(t,e){const n=Jm(t),a=(await Hv()).transaction(qo,"readwrite"),c=a.objectStore(qo),u=await c.get(n);return await c.put(e,n),await a.done,(!u||u.fid!==e.fid)&&sI(t,e.fid),e}async function rI(t){const e=Jm(t),s=(await Hv()).transaction(qo,"readwrite");await s.objectStore(qo).delete(e),await s.done}async function ep(t,e){const n=Jm(t),a=(await Hv()).transaction(qo,"readwrite"),c=a.objectStore(qo),u=await c.get(n),h=e(u);return h===void 0?await c.delete(n):await c.put(h,n),await a.done,h&&(!u||u.fid!==h.fid)&&sI(t,h.fid),h}async function qv(t){let e;const n=await ep(t.appConfig,s=>{const a=fF(s),c=mF(t,a);return e=c.registrationPromise,c.installationEntry});return n.fid===Fy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function fF(t){const e=t||{fid:aF(),registrationStatus:0};return aI(e)}function mF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ho.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=pF(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:gF(t)}:{installationEntry:e}}async function pF(t,e){try{const n=await sF(t,e);return fm(t.appConfig,n)}catch(n){throw Kk(n)&&n.customData.serverCode===409?await rI(t.appConfig):await fm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function gF(t){let e=await MN(t.appConfig);for(;e.registrationStatus===1;)await tI(100),e=await MN(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await qv(t);return s||n}return e}function MN(t){return ep(t,e=>{if(!e)throw Ho.create("installation-not-found");return aI(e)})}function aI(t){return yF(t)?{fid:t.fid,registrationStatus:0}:t}function yF(t){return t.registrationStatus===1&&t.registrationTime+Gk<Date.now()}async function xF({appConfig:t,heartbeatServiceProvider:e},n){const s=vF(t,n),a=eF(t,n),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:Yk,appId:t.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},m=await eI(()=>fetch(s,h));if(m.ok){const p=await m.json();return Wk(p)}else throw await Xk("Generate Auth Token",m)}function vF(t,{fid:e}){return`${Qk(t)}/${e}/authTokens:generate`}async function $v(t,e=!1){let n;const s=await ep(t.appConfig,c=>{if(!oI(c))throw Ho.create("not-registered");const u=c.authToken;if(!e&&_F(u))return c;if(u.requestStatus===1)return n=bF(t,e),c;{if(!navigator.onLine)throw Ho.create("app-offline");const h=NF(c);return n=wF(t,h),h}});return n?await n:s.authToken}async function bF(t,e){let n=await VN(t.appConfig);for(;n.authToken.requestStatus===1;)await tI(100),n=await VN(t.appConfig);const s=n.authToken;return s.requestStatus===0?$v(t,e):s}function VN(t){return ep(t,e=>{if(!oI(e))throw Ho.create("not-registered");const n=e.authToken;return EF(n)?{...e,authToken:{requestStatus:0}}:e})}async function wF(t,e){try{const n=await xF(t,e),s={...e,authToken:n};return await fm(t.appConfig,s),n}catch(n){if(Kk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rI(t.appConfig);else{const s={...e,authToken:{requestStatus:0}};await fm(t.appConfig,s)}throw n}}function oI(t){return t!==void 0&&t.registrationStatus===2}function _F(t){return t.requestStatus===2&&!TF(t)}function TF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Q7}function NF(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function EF(t){return t.requestStatus===1&&t.requestTime+Gk<Date.now()}async function jF(t){const e=t,{installationEntry:n,registrationPromise:s}=await qv(e);return s?s.catch(console.error):$v(e).catch(console.error),n.fid}async function SF(t,e=!1){const n=t;return await AF(n),(await $v(n,e)).token}async function AF(t){const{registrationPromise:e}=await qv(t);e&&await e}function kF(t){if(!t||!t.options)throw V0("App Configuration");if(!t.name)throw V0("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw V0(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function V0(t){return Ho.create("missing-app-config-values",{valueName:t})}const lI="installations",IF="installations-internal",CF=t=>{const e=t.getProvider("app").getImmediate(),n=kF(e),s=Ya(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},RF=t=>{const e=t.getProvider("app").getImmediate(),n=Ya(e,lI).getImmediate();return{getId:()=>jF(n),getToken:a=>SF(n,a)}};function PF(){gi(new ei(lI,CF,"PUBLIC")),gi(new ei(IF,RF,"PRIVATE"))}PF();fs($k,Fv);fs($k,Fv,"esm2020");const mm="analytics",DF="firebase_id",MF="origin",VF=60*1e3,OF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gv="https://www.googletagmanager.com/gtag/js";const Kn=new km("@firebase/analytics");const LF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cs=new $o("analytics","Analytics",LF);function UF(t){if(!t.startsWith(Gv)){const e=Cs.create("invalid-gtag-resource",{gtagURL:t});return Kn.warn(e.message),""}return t}function cI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function BF(t,e){const n=zF("firebase-js-sdk-policy",{createScriptURL:UF}),s=document.createElement("script"),a=`${Gv}?l=${t}&id=${e}`;s.src=n?n?.createScriptURL(a):a,s.async=!0,document.head.appendChild(s)}function FF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function HF(t,e,n,s,a,c){const u=s[a];try{if(u)await e[u];else{const m=(await cI(n)).find(p=>p.measurementId===a);m&&await e[m.appId]}}catch(h){Kn.error(h)}t("config",a,c)}async function qF(t,e,n,s,a){try{let c=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await cI(n);for(const m of u){const p=h.find(v=>v.measurementId===m),x=p&&e[p.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),t("event",s,a||{})}catch(c){Kn.error(c)}}function $F(t,e,n,s){async function a(c,...u){try{if(c==="event"){const[h,m]=u;await qF(t,e,n,h,m)}else if(c==="config"){const[h,m]=u;await HF(t,e,n,s,h,m)}else if(c==="consent"){const[h,m]=u;t("consent",h,m)}else if(c==="get"){const[h,m,p]=u;t("get",h,m,p)}else if(c==="set"){const[h]=u;t("set",h)}else t(c,...u)}catch(h){Kn.error(h)}}return a}function GF(t,e,n,s,a){let c=function(...u){window[s].push(arguments)};return window[a]&&typeof window[a]=="function"&&(c=window[a]),window[a]=$F(c,t,e,n),{gtagCore:c,wrappedGtag:window[a]}}function YF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Gv)&&n.src.includes(t))return n;return null}const ZF=30,KF=1e3;class QF{constructor(e={},n=KF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uI=new QF;function WF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function XF(t){const{appId:e,apiKey:n}=t,s={method:"GET",headers:WF(n)},a=OF.replace("{app-id}",e),c=await fetch(a,s);if(c.status!==200&&c.status!==304){let u="";try{const h=await c.json();h.error?.message&&(u=h.error.message)}catch{}throw Cs.create("config-fetch-failed",{httpStatus:c.status,responseMessage:u})}return c.json()}async function JF(t,e=uI,n){const{appId:s,apiKey:a,measurementId:c}=t.options;if(!s)throw Cs.create("no-app-id");if(!a){if(c)return{measurementId:c,appId:s};throw Cs.create("no-api-key")}const u=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new nH;return setTimeout(async()=>{h.abort()},VF),dI({appId:s,apiKey:a,measurementId:c},u,h,e)}async function dI(t,{throttleEndTimeMillis:e,backoffCount:n},s,a=uI){const{appId:c,measurementId:u}=t;try{await eH(s,e)}catch(h){if(u)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw h}try{const h=await XF(t);return a.deleteThrottleMetadata(c),h}catch(h){const m=h;if(!tH(m)){if(a.deleteThrottleMetadata(c),u)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:u};throw h}const p=Number(m?.customData?.httpStatus)===503?nT(n,a.intervalMillis,ZF):nT(n,a.intervalMillis),x={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return a.setThrottleMetadata(c,x),Kn.debug(`Calling attemptFetch again in ${p} millis`),dI(t,x,s,a)}}function eH(t,e){return new Promise((n,s)=>{const a=Math.max(e-Date.now(),0),c=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(c),s(Cs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function tH(t){if(!(t instanceof ti)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class nH{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sH(t,e,n,s,a){if(a&&a.global){t("event",n,s);return}else{const c=await e,u={...s,send_to:c};t("event",n,u)}}async function iH(t,e,n,s){if(s&&s.global){const a={};for(const c of Object.keys(n))a[`user_properties.${c}`]=n[c];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:n})}}async function rH(){if(iS())try{await rS()}catch(t){return Kn.warn(Cs.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Kn.warn(Cs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function aH(t,e,n,s,a,c,u){const h=JF(t);h.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Kn.error(w)),e.push(h);const m=rH().then(w=>{if(w)return s.getId()}),[p,x]=await Promise.all([h,m]);YF(c)||BF(c,p.measurementId),a("js",new Date);const v=u?.config??{};return v[MF]="firebase",v.update=!0,x!=null&&(v[DF]=x),a("config",p.measurementId,v),p.measurementId}class oH{constructor(e){this.app=e}_delete(){return delete ic[this.app.options.appId],Promise.resolve()}}let ic={},ON=[];const LN={};let O0="dataLayer",lH="gtag",UN,Yv,zN=!1;function cH(){const t=[];if(sS()&&t.push("This is a browser extension environment."),CV()||t.push("Cookies are not available."),t.length>0){const e=t.map((s,a)=>`(${a+1}) ${s}`).join(" "),n=Cs.create("invalid-analytics-context",{errorInfo:e});Kn.warn(n.message)}}function uH(t,e,n){cH();const s=t.options.appId;if(!s)throw Cs.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cs.create("no-api-key");if(ic[s]!=null)throw Cs.create("already-exists",{id:s});if(!zN){FF(O0);const{wrappedGtag:c,gtagCore:u}=GF(ic,ON,LN,O0,lH);Yv=c,UN=u,zN=!0}return ic[s]=aH(t,ON,LN,e,UN,O0,n),new oH(t)}function dH(t=Im()){t=ut(t);const e=Ya(t,mm);return e.isInitialized()?e.getImmediate():hH(t)}function hH(t,e={}){const n=Ya(t,mm);if(n.isInitialized()){const a=n.getImmediate();if(tr(e,n.getOptions()))return a;throw Cs.create("already-initialized")}return n.initialize({options:e})}function fH(t,e,n){t=ut(t),iH(Yv,ic[t.app.options.appId],e,n).catch(s=>Kn.error(s))}function mH(t,e,n,s){t=ut(t),sH(Yv,ic[t.app.options.appId],e,n,s).catch(a=>Kn.error(a))}const BN="@firebase/analytics",FN="0.10.19";function pH(){gi(new ei(mm,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return uH(s,a,n)},"PUBLIC")),gi(new ei("analytics-internal",t,"PRIVATE")),fs(BN,FN),fs(BN,FN,"esm2020");function t(e){try{const n=e.getProvider(mm).getImmediate();return{logEvent:(s,a,c)=>mH(n,s,a,c),setUserProperties:(s,a)=>fH(n,s,a)}}catch(n){throw Cs.create("interop-component-reg-failed",{reason:n})}}}pH();const gH={apiKey:"<YOUR_FIREBASE_API_KEY>",authDomain:"your-app.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-app.firebasestorage.app",messagingSenderId:"<YOUR_SENDER_ID>",appId:"<YOUR_APP_ID>",measurementId:"<YOUR_MEASUREMENT_ID>"},tp=cS(gH),Sr=vU(tp),It=yB(tp),yH=$7(tp);dH(tp);const pm=new Ar;pm.addScope("https://www.googleapis.com/auth/youtube.readonly");pm.setCustomParameters({prompt:"consent",access_type:"offline"});const rc="https://your-api.vercel.app/api",Mu={async syncUser(t,e){try{const n=await fetch(`${rc}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,email:e.email,displayName:e.displayName,photoURL:e.photoURL,provider:e.providerData?.[0]?.providerId||"email",googleAccessToken:e.googleAccessToken||null,googleRefreshToken:e.googleRefreshToken||null})});if(!n.ok)throw new Error("Failed to sync user");return await n.json()}catch(n){throw console.error("Error syncing user:",n),n}},async getUser(t){try{const e=await fetch(`${rc}/users?userId=${t}`);if(!e.ok)throw new Error("Failed to fetch user");return(await e.json()).user}catch(e){return console.error("Error fetching user:",e),null}},async updateProfile(t,e){try{const n=await fetch(`${rc}/users`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,...e})});if(!n.ok)throw new Error("Failed to update profile");return await n.json()}catch(n){throw console.error("Error updating profile:",n),n}}},gm={async getSearchHistory(t,e=20){try{const n=await fetch(`${rc}/search-history?userId=${t}&limit=${e}`);if(!n.ok)throw new Error("Failed to fetch search history");return(await n.json()).history||[]}catch(n){return console.error("Error fetching search history:",n),[]}},async addToHistory(t,e,n=0){try{const s=await fetch(`${rc}/search-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,query:e,results:n})});if(!s.ok)throw new Error("Failed to add to search history");return await s.json()}catch(s){throw console.error("Error adding to search history:",s),s}},async clearHistory(t){try{const e=await fetch(`${rc}/search-history`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})});if(!e.ok)throw new Error("Failed to clear search history");return await e.json()}catch(e){throw console.error("Error clearing search history:",e),e}}},hI=E.createContext(),Dn=()=>{const t=E.useContext(hI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},xH=({children:t})=>{const[e,n]=E.useState(null),[s,a]=E.useState(!0),[c,u]=E.useState(null),h=async(S,k={})=>{if(S)try{const P=hn(It,"users",S.uid);if(!(await Qa(P)).exists()){const{email:O,displayName:F,photoURL:Z}=S,ee=new Date;try{await Of(P,{email:O,displayName:F,photoURL:Z,createdAt:ee,likedTracks:[],playlists:[],...k})}catch(C){console.error("Error creating user document:",C)}}try{await Mu.syncUser(S.uid,{email:S.email,displayName:S.displayName,photoURL:S.photoURL,providerData:S.providerData}),console.log(" User synced to MongoDB")}catch(O){console.error("MongoDB sync error:",O)}return P}catch(P){return P.code==="unavailable"||P.message?.includes("offline")||console.error("Error accessing user document:",P),null}},m=async(S,k,P)=>{const U=await t9(Sr,S,k);return await wy(U.user,{displayName:P}),await h(U.user,{displayName:P}),U},p=async(S,k)=>{const P=await n9(Sr,S,k);try{await Mu.syncUser(P.user.uid,{email:P.user.email,displayName:P.user.displayName,photoURL:P.user.photoURL,providerData:P.user.providerData}),console.log(" User synced to MongoDB on sign in")}catch(U){console.error("MongoDB sync error on sign in:",U)}return P},x=async()=>{const S=await TT(Sr,pm);console.log(" Google Sign-In Result:",{hasTokenResponse:!!S._tokenResponse,hasOAuthAccessToken:!!S._tokenResponse?.oauthAccessToken,tokenPreview:S._tokenResponse?.oauthAccessToken?.substring(0,30)});const k=S._tokenResponse;if(k?.oauthAccessToken){u(k.oauthAccessToken),console.log(" Google access token obtained for YouTube API");const P=Date.now()+3600*1e3,U=k.refreshToken||null;U?console.log(" Refresh token obtained (will never expire)"):console.warn(" No refresh token in response. May need to revoke app permissions and sign in again.");try{await Mu.syncUser(S.user.uid,{email:S.user.email,displayName:S.user.displayName,photoURL:S.user.photoURL,providerData:S.user.providerData,googleAccessToken:k.oauthAccessToken,googleRefreshToken:U,tokenExpiresAt:P}),console.log(" Access token and refresh token saved to MongoDB")}catch(O){console.error("Failed to save tokens:",O)}}else console.error(" No OAuth access token in response!"),console.error("Token response keys:",Object.keys(k||{}));return await h(S.user),S},v=()=>c9(Sr);E.useEffect(()=>l9(Sr,async k=>{try{if(k){await h(k);try{const P=await Mu.getUser(k.uid);if(P?.googleAccessToken)if(P.tokenExpiresAt&&Date.now()>P.tokenExpiresAt){console.warn(" Token has expired. Attempting auto-refresh...");try{const O=await w(k.uid);console.log(" Token auto-refreshed on startup")}catch(O){console.error(" Auto-refresh failed:",O),u(null)}}else u(P.googleAccessToken),console.log(" Google access token restored from MongoDB");else console.warn(" No token found in MongoDB - user needs to sign in with Google again")}catch(P){console.error("Failed to restore access token:",P)}}else u(null);n(k)}catch(P){console.error("Auth state change error:",P)}finally{a(!1)}}),[]);const w=async S=>{try{console.log(" Auto-refreshing token using refresh token...");const k=await fetch("/api/refresh-google-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:S})});if(!k.ok){const U=await k.json();throw new Error(U.message||"Failed to refresh token")}const P=await k.json();return u(P.accessToken),console.log(" Token auto-refreshed successfully (no popup needed!)"),P.accessToken}catch(k){throw console.error(" Auto-refresh failed:",k),k}},A={currentUser:e,signUp:m,signIn:p,signInWithGoogle:x,refreshGoogleAuth:async()=>{if(!e)throw new Error("No user signed in");try{return console.log(" Attempting automatic token refresh..."),await w(e.uid)}catch(P){console.warn(" Automatic refresh failed, falling back to popup:",P.message)}const S=await TT(Sr,pm),k=S._tokenResponse;if(k?.oauthAccessToken){u(k.oauthAccessToken),console.log(" Google access token refreshed successfully");const P=Date.now()+3600*1e3;try{await Mu.syncUser(S.user.uid,{email:S.user.email,displayName:S.user.displayName,googleAccessToken:k.oauthAccessToken,tokenExpiresAt:P}),console.log(" Refreshed token saved to MongoDB")}catch(U){console.error("MongoDB sync error on token refresh:",U)}return k.oauthAccessToken}else throw new Error("Failed to obtain access token")},autoRefreshToken:w,logout:v,loading:s,googleAccessToken:c};return o.jsx(hI.Provider,{value:A,children:!s&&t})},vH=({onClose:t,onSwitchToSignUp:e})=>{const[n,s]=E.useState(""),[a,c]=E.useState(""),[u,h]=E.useState(""),[m,p]=E.useState(!1),{signIn:x,signInWithGoogle:v}=Dn(),w=Rt(),N=async S=>{S.preventDefault(),h(""),p(!0);try{await x(n,a),t(),w("/dashboard")}catch(k){console.error("Sign in error:",k);let P="Failed to sign in. Please try again.";k.code==="auth/invalid-credential"||k.code==="auth/wrong-password"||k.code==="auth/user-not-found"?P="Invalid email or password.":k.code==="auth/invalid-email"?P="Invalid email address.":k.code==="auth/too-many-requests"?P="Too many failed attempts. Please try again later.":k.code==="auth/unauthorized-domain"?P="This domain is not authorized. Please add it to Firebase console.":k.message&&(P=k.message),h(P)}finally{p(!1)}},A=async()=>{h(""),p(!0);try{await v(),t(),w("/dashboard")}catch(S){console.error("Google sign in error:",S);let k="Failed to sign in with Google.";S.code==="auth/popup-closed-by-user"?k="Sign in cancelled.":S.code==="auth/unauthorized-domain"?k="This domain is not authorized for Google sign-in. Please add it to Firebase console.":S.message&&(k=S.message),h(k)}finally{p(!1)}};return o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 rounded-2xl p-8 max-w-md w-full relative",onClick:S=>S.stopPropagation(),children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-400",children:"Sign in to continue your music journey"})]}),u&&o.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 rounded-lg p-3 mb-6 text-sm",children:u}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"email",value:n,onChange:S=>s(S.target.value),placeholder:"your@email.com",required:!0,autoComplete:"email",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Do,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"password",value:a,onChange:S=>c(S.target.value),placeholder:"",required:!0,autoComplete:"current-password",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),o.jsx("div",{className:"text-right",children:o.jsx(Yn,{to:"/forgot-password",onClick:t,className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Forgot Password?"})}),o.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Signing In...":"Sign In"})]}),o.jsxs("div",{className:"flex items-center gap-4 my-6",children:[o.jsx("div",{className:"flex-1 h-px bg-white/10"}),o.jsx("span",{className:"text-gray-400 text-sm",children:"OR"}),o.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),o.jsxs("button",{onClick:A,disabled:m,className:"w-full py-3 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-semibold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-lg font-bold",children:"G"}),"Continue with Google"]}),o.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Don't have an account?"," ",o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign Up"})]})]})})},bH=({onClose:t,onSwitchToSignIn:e})=>{const[n,s]=E.useState(""),[a,c]=E.useState(""),[u,h]=E.useState(""),[m,p]=E.useState(""),[x,v]=E.useState(!1),{signUp:w,signInWithGoogle:N}=Dn(),A=Rt(),S=async P=>{if(P.preventDefault(),p(""),a.length<6){p("Password must be at least 6 characters long.");return}v(!0);try{await w(n,a,u),t(),A("/dashboard")}catch(U){p(U.message||"Failed to create account. Please try again.")}finally{v(!1)}},k=async()=>{p(""),v(!0);try{await N(),t(),A("/dashboard")}catch(P){p(P.message||"Failed to sign up with Google.")}finally{v(!1)}};return o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 rounded-2xl p-8 max-w-md w-full relative",onClick:P=>P.stopPropagation(),children:[o.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:24})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),o.jsx("p",{className:"text-gray-400",children:"Join VMusic and start your journey"})]}),m&&o.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-400 rounded-lg p-3 mb-6 text-sm",children:m}),o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:u,onChange:P=>h(P.target.value),placeholder:"John Doe",required:!0,autoComplete:"name",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"email",value:n,onChange:P=>s(P.target.value),placeholder:"your@email.com",required:!0,autoComplete:"email",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Do,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"password",value:a,onChange:P=>c(P.target.value),placeholder:"",required:!0,minLength:6,autoComplete:"new-password",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),o.jsx("button",{type:"submit",disabled:x,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Creating Account...":"Sign Up"})]}),o.jsxs("div",{className:"flex items-center gap-4 my-6",children:[o.jsx("div",{className:"flex-1 h-px bg-white/10"}),o.jsx("span",{className:"text-gray-400 text-sm",children:"OR"}),o.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),o.jsxs("button",{onClick:k,disabled:x,className:"w-full py-3 bg-white/5 hover:bg-white/10 border border-white/10 text-white font-semibold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"w-5 h-5 flex items-center justify-center text-lg font-bold",children:"G"}),"Continue with Google"]}),o.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Already have an account?"," ",o.jsx("button",{onClick:e,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign In"})]})]})})},wH=()=>{const[t,e]=E.useState(""),[n,s]=E.useState(!1),[a,c]=E.useState(!1),[u,h]=E.useState(!1),[m,p]=E.useState(!1),[x,v]=E.useState(!1),{currentUser:w,logout:N}=Dn(),A=Rt(),S=F=>{F.preventDefault(),t.trim()&&(A(`/search?q=${encodeURIComponent(t)}`),e(""),s(!1),v(!1))},k=async()=>{await N(),p(!1),A("/")},O=w?[{name:"Dashboard",path:"/dashboard",icon:lM},{name:"Explore",path:"/explore",icon:G2},{name:"Artists",path:"/artists",icon:Ki},{name:"Vibe Zone",path:"/vibe-zone",icon:Zi},{name:"VibeTube",path:"/vibetube",icon:qt}]:[{name:"Explore",path:"/explore",icon:G2},{name:"Artists",path:"/artists",icon:Ki},{name:"Vibe Zone",path:"/vibe-zone",icon:Px},{name:"VibeTube",path:"/vibetube",icon:qt}];return o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-40 bg-gray-900/80 backdrop-blur-lg border-b border-white/10",children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Yn,{to:"/",className:"flex items-center gap-3 group",children:[o.jsx(L.div,{whileHover:{rotate:360},transition:{duration:.5},className:"w-14 h-14 flex items-center justify-center",children:o.jsx("img",{src:"/logo.png",alt:"VMusic Logo",className:"w-full h-full object-contain"})}),o.jsxs("span",{className:"text-3xl font-bold text-white hidden sm:block",children:["V",o.jsx("span",{className:"text-purple-400",children:"Music"})]})]}),o.jsx("div",{className:"hidden md:flex items-center gap-1",children:O.map(F=>o.jsxs(Yn,{to:F.path,className:"flex items-center gap-2 px-4 py-2 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:[o.jsx(F.icon,{size:18}),F.name]},F.path))}),o.jsx("div",{className:"hidden md:flex items-center",children:w?o.jsx("button",{onClick:()=>v(!x),className:"p-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full text-gray-400 hover:text-white transition-all",title:"Search",children:o.jsx(hs,{size:20})}):o.jsx("form",{onSubmit:S,className:"flex items-center flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),o.jsx("input",{type:"text",value:t,onChange:F=>e(F.target.value),placeholder:"Search songs, artists...",className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-full text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})})}),o.jsx("div",{className:"hidden md:flex items-center gap-3",children:w?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>p(!m),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-full transition-all border border-white/20",children:[w.photoURL?o.jsx("img",{src:w.photoURL,alt:w.displayName,className:"w-6 h-6 rounded-full"}):o.jsx(Pr,{size:18}),o.jsx("span",{className:"text-white font-medium",children:w.displayName?.split(" ")[0]||"User"})]}),o.jsx(Bn,{children:m&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl border border-white/10 overflow-hidden",children:[o.jsxs(Yn,{to:"/profile",onClick:()=>p(!1),className:"flex items-center gap-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white transition-colors",children:[o.jsx(Pr,{size:18}),"Profile Settings"]}),o.jsxs("button",{onClick:k,className:"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-500/10 transition-colors",children:[o.jsx(K2,{size:18}),"Sign Out"]})]})})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 text-white hover:text-purple-400 font-medium transition-colors",children:"Sign In"}),o.jsx("button",{onClick:()=>h(!0),className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-full hover:from-purple-700 hover:to-pink-700 transition-all",children:"Sign Up"})]})}),o.jsx("button",{onClick:()=>s(!n),className:"md:hidden text-white p-2 hover:bg-white/10 rounded-lg transition-colors",children:n?o.jsx(_n,{size:24}):o.jsx(NM,{size:24})})]}),o.jsx("form",{onSubmit:S,className:"md:hidden pb-4",children:o.jsxs("div",{className:"relative",children:[o.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),o.jsx("input",{type:"text",value:t,onChange:F=>e(F.target.value),placeholder:"Search songs, artists...",className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-full text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})})]}),o.jsx(Bn,{children:w&&x&&o.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-white/10 bg-gray-900/95 backdrop-blur-lg overflow-hidden",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:o.jsxs("form",{onSubmit:S,className:"relative",children:[o.jsx(hs,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:t,onChange:F=>e(F.target.value),placeholder:"Search for songs, artists, albums...",className:"w-full pl-12 pr-12 py-3 bg-white/5 border border-white/20 rounded-full text-white text-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",autoFocus:!0}),o.jsx("button",{type:"button",onClick:()=>v(!1),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:20})})]})})})}),o.jsx(Bn,{children:n&&o.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-white/10 bg-gray-900",children:o.jsxs("div",{className:"px-4 py-4 space-y-2",children:[O.map(F=>o.jsxs(Yn,{to:F.path,onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:[o.jsx(F.icon,{size:20}),F.name]},F.path)),w?o.jsxs(o.Fragment,{children:[o.jsxs(Yn,{to:"/profile",onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:[o.jsx(Pr,{size:20}),"Profile Settings"]}),o.jsxs("button",{onClick:k,className:"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:[o.jsx(K2,{size:20}),"Sign Out"]})]}):o.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[o.jsx("button",{onClick:()=>{c(!0),s(!1)},className:"w-full px-4 py-3 text-white border border-white/20 rounded-lg hover:bg-white/10 transition-all",children:"Sign In"}),o.jsx("button",{onClick:()=>{h(!0),s(!1)},className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:"Sign Up"})]})]})})})]}),o.jsxs(Bn,{children:[a&&o.jsx(vH,{onClose:()=>c(!1),onSwitchToSignUp:()=>{c(!1),h(!0)}}),u&&o.jsx(bH,{onClose:()=>h(!1),onSwitchToSignIn:()=>{h(!1),c(!0)}})]}),o.jsx("div",{className:"h-16"})]})},Vu=({children:t})=>{const{currentUser:e,loading:n}=Dn();return n?o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading..."})]})}):e?t:o.jsx(J4,{to:"/",replace:!0})},fI=E.createContext(),ar=()=>{const t=E.useContext(fI);if(!t)throw new Error("usePlayer must be used within PlayerProvider");return t},_H=({children:t})=>{const e=E.useRef(new Audio),[n,s]=E.useState(null),[a,c]=E.useState(!1),[u,h]=E.useState(0),[m,p]=E.useState(0),[x,v]=E.useState(1),[w,N]=E.useState([]),[A,S]=E.useState(0),[k,P]=E.useState("jamendo");E.useEffect(()=>{if(n?.audio){e.current.src=n.audio,e.current.volume=x,P(n.source||"jamendo");const B=e.current.play();B!==void 0&&B.then(()=>{c(!0)}).catch(V=>{console.error("Playback error:",V),c(!1),n.source==="spotify"&&!n.audio&&console.warn("Spotify preview not available for this track")})}},[n]),E.useEffect(()=>{const B=e.current,V=()=>{h(B.currentTime)},Ie=()=>{p(B.duration)},J=()=>{F()},Y=se=>{console.error("Audio error:",se),c(!1)};return B.addEventListener("timeupdate",V),B.addEventListener("loadedmetadata",Ie),B.addEventListener("ended",J),B.addEventListener("error",Y),()=>{B.removeEventListener("timeupdate",V),B.removeEventListener("loadedmetadata",Ie),B.removeEventListener("ended",J),B.removeEventListener("error",Y)}},[A,w]),E.useEffect(()=>{e.current.volume=x},[x]);const U=(B,V=[])=>{if(s(B),V.length>0){N(V);const Ie=V.findIndex(J=>J.id===B.id);S(Ie>=0?Ie:0)}else N([B]),S(0)},O=()=>{if(a)e.current.pause(),c(!1);else{const B=e.current.play();B!==void 0&&B.then(()=>{c(!0)}).catch(V=>{console.error("Play error:",V)})}},F=()=>{if(w.length===0)return;const B=(A+1)%w.length;S(B),s(w[B])},z={currentTrack:n,isPlaying:a,currentTime:u,duration:m,volume:x,queue:w,currentIndex:A,musicSource:k,playTrack:U,togglePlay:O,playNext:F,playPrevious:()=>{if(w.length===0)return;if(u>3){e.current.currentTime=0;return}const B=A===0?w.length-1:A-1;S(B),s(w[B])},seek:B=>{e.current.currentTime=B,h(B)},changeVolume:B=>{const V=Math.max(0,Math.min(1,B));v(V)},addToQueue:B=>{N(V=>[...V,B])},removeFromQueue:B=>{N(V=>V.filter((Ie,J)=>J!==B)),B<A&&S(V=>V-1)},clearQueue:()=>{N([]),S(0)}};return o.jsx(fI.Provider,{value:z,children:t})},bt="https://api.jamendo.com/v3.0",wt="<YOUR_JAMENDO_CLIENT_ID>",ze={getTrendingTracks:async(t=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&limit=${t}&order=popularity_total&audioformat=mp32`)).json()}catch(e){return console.error("Error fetching trending tracks:",e),{headers:{status:"error"},results:[]}}},getPopularTracks:async(t=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&limit=${t}&order=popularity_week&audioformat=mp32`)).json()}catch(e){return console.error("Error fetching popular tracks:",e),{headers:{status:"error"},results:[]}}},getTopArtists:async(t=20)=>{try{return await(await fetch(`${bt}/artists/?client_id=${wt}&format=json&limit=${t}&order=popularity_total&hasimage=true`)).json()}catch(e){return console.error("Error fetching top artists:",e),{headers:{status:"error"},results:[]}}},getLatestAlbums:async(t=20)=>{try{return await(await fetch(`${bt}/albums/?client_id=${wt}&format=json&limit=${t}&order=releasedate_desc&imagesize=200&audioformat=mp32`)).json()}catch(e){return console.error("Error fetching latest albums:",e),{headers:{status:"error"},results:[]}}},getNewReleases:async(t=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&limit=${t}&order=releasedate_desc&audioformat=mp32`)).json()}catch(e){return console.error("Error fetching new releases:",e),{headers:{status:"error"},results:[]}}},searchTracks:async(t,e=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&search=${encodeURIComponent(t)}&limit=${e}&audioformat=mp32`)).json()}catch(n){return console.error("Error searching tracks:",n),{headers:{status:"error"},results:[]}}},getTracksByTag:async(t,e=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&tags=${t}&limit=${e}&audioformat=mp32`)).json()}catch(n){return console.error("Error fetching tracks by tag:",n),{headers:{status:"error"},results:[]}}},getTrackById:async t=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&id=${t}&audioformat=mp32`)).json()}catch(e){return console.error("Error fetching track:",e),{headers:{status:"error"},results:[]}}},getArtist:async t=>{try{return await(await fetch(`${bt}/artists/?client_id=${wt}&format=json&id=${t}`)).json()}catch(e){return console.error("Error fetching artist:",e),{headers:{status:"error"},results:[]}}},getArtists:async({limit:t=50,order:e="popularity_total",hasImage:n}={})=>{try{let s=`${bt}/artists/?client_id=${wt}&format=json&limit=${t}&order=${e}`;return n&&(s+="&hasimage=true"),await(await fetch(s)).json()}catch(s){return console.error("Error fetching artists:",s),{headers:{status:"error"},results:[]}}},searchArtists:async({query:t,limit:e=50,order:n="popularity_total"}={})=>{try{return await(await fetch(`${bt}/artists/?client_id=${wt}&format=json&namesearch=${encodeURIComponent(t)}&limit=${e}&order=${n}`)).json()}catch(s){return console.error("Error searching artists:",s),{headers:{status:"error"},results:[]}}},getArtistTracks:async(t,e=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&artist_id=${t}&limit=${e}&audioformat=mp32`)).json()}catch(n){return console.error("Error fetching artist tracks:",n),{headers:{status:"error"},results:[]}}},getAlbum:async t=>{try{return await(await fetch(`${bt}/albums/?client_id=${wt}&format=json&id=${t}`)).json()}catch(e){return console.error("Error fetching album:",e),{headers:{status:"error"},results:[]}}},getRadios:async()=>{try{return await(await fetch(`${bt}/radios/?client_id=${wt}&format=json`)).json()}catch(t){return console.error("Error fetching radios:",t),{headers:{status:"error"},results:[]}}},getRadioTracks:async(t,e=20)=>{try{return await(await fetch(`${bt}/tracks/?client_id=${wt}&format=json&fuzzytags=${t}&limit=${e}`)).json()}catch(n){return console.error("Error fetching radio tracks:",n),{headers:{status:"error"},results:[]}}},getPlaylists:async(t=20)=>{try{return await(await fetch(`${bt}/playlists/?client_id=${wt}&format=json&limit=${t}`)).json()}catch(e){return console.error("Error fetching playlists:",e),{headers:{status:"error"},results:[]}}},getArtistsByLocation:async({country:t,city:e,limit:n=50})=>{try{let s=`${bt}/artists/locations/?client_id=${wt}&format=json&limit=${n}&haslocation=true`;return t&&(s+=`&location_country=${t}`),e&&(s+=`&location_city=${encodeURIComponent(e)}`),await(await fetch(s)).json()}catch(s){return console.error("Error fetching artists by location:",s),{headers:{status:"error"},results:[]}}},formatDuration:t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`},getArtistsWithAlbums:async({limit:t=50,offset:e=0,order:n="popularity_total",hasImage:s=!1,datebetween:a=null,album_datebetween:c=null})=>{try{let u=`${bt}/artists/albums?client_id=${wt}&format=json&limit=${t}&offset=${e}&order=${n}&imagesize=200`;s&&(u+="&hasimage=true"),a&&(u+=`&datebetween=${a}`),c&&(u+=`&album_datebetween=${c}`);const h=await fetch(u);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return await h.json()}catch(u){return console.error("Error fetching artists with albums:",u),{headers:{status:"error"},results:[]}}},searchArtistsWithAlbums:async({query:t,limit:e=50,offset:n=0,order:s="popularity_total"})=>{try{const a=`${bt}/artists/albums?client_id=${wt}&format=json&limit=${e}&offset=${n}&order=${s}&namesearch=${encodeURIComponent(t)}&imagesize=200`,c=await fetch(a);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(a){return console.error("Error searching artists with albums:",a),{headers:{status:"error"},results:[]}}},getArtistsByLocationWithAlbums:async({country:t,city:e,limit:n=50,offset:s=0})=>{try{let a=`${bt}/artists/albums?client_id=${wt}&format=json&limit=${n}&offset=${s}&order=popularity_total&imagesize=200`;t&&(a+=`&location_country=${t}`),e&&(a+=`&location_city=${encodeURIComponent(e)}`);const c=await fetch(a);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(a){return console.error("Error fetching artists by location with albums:",a),{headers:{status:"error"},results:[]}}},getArtistsMusicInfo:async({limit:t=50,offset:e=0,order:n="popularity_total",hasImage:s=!1,tag:a=null,namesearch:c=null})=>{try{let u=`${bt}/artists/musicinfo/?client_id=${wt}&format=json&limit=${t}&offset=${e}&order=${n}`;return s&&(u+="&hasimage=true"),a&&(u+=`&tag=${encodeURIComponent(a)}`),c&&(u+=`&namesearch=${encodeURIComponent(c)}`),await(await fetch(u)).json()}catch(u){return console.error("Error fetching artists music info:",u),{headers:{status:"error"},results:[]}}},getAlbumById:async t=>{try{const e=`${bt}/albums/?client_id=${wt}&format=json&id=${t}&imagesize=500`,n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();return s.results&&s.results.length>0?s.results[0]:null}catch(e){return console.error("Error fetching album:",e),null}},getAlbums:async({limit:t=50,offset:e=0,order:n="popularity_total",artist_id:s=null,namesearch:a=null,type:c=null})=>{try{let u=`${bt}/albums/?client_id=${wt}&format=json&limit=${t}&offset=${e}&order=${n}&imagesize=200&audioformat=mp32`;s&&(u+=`&artist_id=${s}`),a&&(u+=`&namesearch=${encodeURIComponent(a)}`),c&&(u+=`&type=${c}`);const h=await fetch(u);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return await h.json()}catch(u){return console.error("Error fetching albums:",u),{headers:{status:"error"},results:[]}}},getAlbumTracks:async t=>{try{const e=`${bt}/albums/tracks/?client_id=${wt}&format=json&id=${t}&audioformat=mp32&imagesize=200`,n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(e){return console.error("Error fetching album tracks:",e),{headers:{status:"error"},results:[]}}},getAlbumDownloadUrl:(t,e="mp32")=>`${bt}/albums/file/?client_id=${wt}&id=${t}&audioformat=${e}`,checkAlbumDownload:async t=>{try{const e=`${bt}/albums/?client_id=${wt}&format=json&id=${t}`,n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();return s.results&&s.results.length>0?{allowed:s.results[0].zip_allowed||!1,zipUrl:s.results[0].zip||null,album:s.results[0]}:{allowed:!1,zipUrl:null,album:null}}catch(e){return console.error("Error checking album download:",e),{allowed:!1,zipUrl:null,album:null}}}},TH=()=>{const{currentTrack:t,isPlaying:e,currentTime:n,duration:s,volume:a,togglePlay:c,playNext:u,playPrevious:h,seek:m,changeVolume:p}=ar(),x=Rt(),[v,w]=E.useState(!1),[N,A]=E.useState(!1),[S,k]=E.useState(a),[P,U]=E.useState(!0);if(!t||!P)return null;const O=s>0?n/s*100:0,F=I=>{const M=I.currentTarget.getBoundingClientRect(),V=(I.clientX-M.left)/M.width*s;m(V)},Z=I=>{const j=parseFloat(I.target.value);p(j),j>0&&N&&A(!1)},ee=()=>{N?(p(S),A(!1)):(k(a),p(0),A(!0))},C=I=>{if(!I||isNaN(I))return"0:00";const j=Math.floor(I/60),M=Math.floor(I%60);return`${j}:${M.toString().padStart(2,"0")}`};return o.jsx(Bn,{children:o.jsxs(L.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"fixed bottom-0 left-0 right-0 z-50 bg-gray-900/95 backdrop-blur-xl border-t border-white/10 shadow-2xl",children:[o.jsx("div",{onClick:F,className:"absolute top-0 left-0 right-0 h-1 bg-white/10 cursor-pointer group",children:o.jsx(L.div,{className:"h-full bg-gradient-to-r from-green-500 to-emerald-400 relative",style:{width:`${O}%`},children:o.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"})})}),o.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[o.jsxs(L.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(`/track/${t.id}`),className:"relative w-16 h-16 md:w-20 md:h-20 shrink-0 bg-gradient-to-br from-purple-600/20 to-blue-600/20 rounded-lg overflow-hidden shadow-xl cursor-pointer group",children:[t.image?o.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Yi,{size:28,className:"text-purple-400"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(lc,{size:20,className:"text-white"})})]}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs(L.h4,{whileHover:{x:3},onClick:()=>x(`/track/${t.id}`),className:"text-white font-semibold truncate text-sm md:text-base hover:text-green-400 transition-colors cursor-pointer flex items-center gap-2 w-fit group",children:[t.name,o.jsx(lc,{size:14,className:"opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]}),o.jsx(L.p,{whileHover:{x:3},onClick:I=>{I.stopPropagation(),x(`/artist/${t.artist_id}`)},className:"text-gray-400 text-xs md:text-sm truncate hover:text-purple-400 hover:underline transition-all cursor-pointer w-fit",children:t.artist_name})]}),o.jsx("button",{className:"hidden md:block text-gray-400 hover:text-pink-500 transition-colors",children:o.jsx(wn,{size:20})})]}),o.jsxs("div",{className:"flex items-center gap-3 md:gap-4 shrink-0",children:[o.jsx("button",{className:"hidden lg:block text-gray-400 hover:text-white transition-colors",children:o.jsx(Dx,{size:18})}),o.jsx("button",{onClick:h,className:"text-gray-300 hover:text-white transition-all hover:scale-110",children:o.jsx(Yj,{size:20,"md:size":24,fill:"currentColor"})}),o.jsx(L.button,{whileHover:{scale:1.08},whileTap:{scale:.92},onClick:c,className:"w-11 h-11 md:w-14 md:h-14 bg-white rounded-full flex items-center justify-center shadow-xl hover:shadow-2xl transition-all",children:e?o.jsx(dd,{size:22,className:"text-gray-900 md:w-6 md:h-6",fill:"currentColor"}):o.jsx(xt,{size:22,className:"text-gray-900 ml-0.5 md:w-6 md:h-6",fill:"currentColor"})}),o.jsx("button",{onClick:u,className:"text-gray-300 hover:text-white transition-all hover:scale-110",children:o.jsx(Zj,{size:20,"md:size":24,fill:"currentColor"})}),o.jsx("button",{className:"hidden lg:block text-gray-400 hover:text-white transition-colors",children:o.jsx(Hj,{size:18})}),o.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs text-gray-400 min-w-20",children:[o.jsx("span",{children:C(n)}),o.jsx("span",{children:"/"}),o.jsx("span",{children:C(s)})]})]}),o.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[o.jsx("button",{className:"hidden lg:block text-gray-400 hover:text-white transition-colors",children:o.jsx(Yi,{size:20})}),o.jsxs("div",{className:"hidden md:flex items-center gap-2",onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[o.jsx("button",{onClick:ee,className:"text-gray-400 hover:text-white transition-colors",children:N||a===0?o.jsx(Vx,{size:20}):o.jsx(Mx,{size:20})}),o.jsx(Bn,{children:v&&o.jsx(L.div,{initial:{width:0,opacity:0},animate:{width:100,opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:o.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,onChange:Z,className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer"})})})]}),o.jsxs("div",{className:"md:hidden text-xs text-gray-400 min-w-[60px] text-right",children:[o.jsx("div",{children:C(n)}),o.jsx("div",{className:"text-gray-600",children:C(s)})]}),o.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-white transition-colors p-1 hover:bg-white/10 rounded-full",title:"Hide player",children:o.jsx(_n,{size:20})})]})]})})]})})};let ym=null;const rt={show:(t,e="info")=>{ym&&ym(t,e)}},NH=()=>{const[t,e]=E.useState([]);E.useEffect(()=>(ym=(s,a)=>{const c=Date.now();e(u=>[...u,{id:c,message:s,type:a}]),setTimeout(()=>{e(u=>u.filter(h=>h.id!==c))},3e3)},()=>{ym=null}),[]);const n=s=>{e(a=>a.filter(c=>c.id!==s))};return o.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2",children:o.jsx(Bn,{children:t.map(s=>o.jsx(L.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:`
              min-w-[300px] max-w-md p-4 rounded-lg shadow-lg backdrop-blur-xl border
              ${s.type==="error"?"bg-red-500/10 border-red-500/50 text-red-400":"bg-blue-500/10 border-blue-500/50 text-blue-400"}
            `,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(pi,{size:20,className:"flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"flex-1 text-sm font-medium",children:s.message}),o.jsx("button",{onClick:()=>n(s.id),className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:o.jsx(_n,{size:18})})]})},s.id))})})};class EH extends s4.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error(" Error Boundary Caught:",e),console.error(" Error Info:",n),console.error(" Component Stack:",n.componentStack),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-8",children:o.jsxs("div",{className:"max-w-2xl w-full bg-red-900/20 border-2 border-red-500 rounded-xl p-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-red-400 mb-4",children:" Something went wrong"}),o.jsxs("div",{className:"bg-black/50 rounded-lg p-4 mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Error:"}),o.jsx("pre",{className:"text-red-300 text-sm overflow-auto",children:this.state.error&&this.state.error.toString()})]}),this.state.errorInfo&&o.jsxs("div",{className:"bg-black/50 rounded-lg p-4 mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Component Stack:"}),o.jsx("pre",{className:"text-gray-300 text-xs overflow-auto max-h-60",children:this.state.errorInfo.componentStack})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors",children:"Reload Page"}),o.jsx("div",{className:"mt-6 p-4 bg-yellow-900/20 border border-yellow-600 rounded-lg",children:o.jsxs("p",{className:"text-yellow-200 text-sm",children:[" ",o.jsx("strong",{children:"This is the REAL error that needs to be fixed."}),o.jsx("br",{}),"Please copy the error message above and share it to get help fixing the issue."]})})]})}):this.props.children}}const jH=()=>o.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx(L.div,{className:"absolute top-20 left-10 w-72 h-72 bg-purple-500/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),o.jsx(L.div,{className:"absolute bottom-20 right-10 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.5,.3,.5]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),o.jsx(L.div,{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/20 rounded-full blur-3xl",animate:{x:[-100,100,-100],y:[-50,50,-50]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}})]}),o.jsx(L.div,{className:"absolute top-32 left-20 text-white/10",animate:{y:[0,-20,0],rotate:[0,10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},children:o.jsx(Me,{size:64})}),o.jsx(L.div,{className:"absolute bottom-32 right-32 text-white/10",animate:{y:[0,20,0],rotate:[0,-10,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:o.jsx(Me,{size:80})}),o.jsxs("div",{className:"relative z-10 text-center px-4 max-w-5xl mx-auto",children:[o.jsx(L.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,duration:1},className:"mb-12 flex justify-center",children:o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-full blur-3xl opacity-60 animate-pulse"}),o.jsx(L.div,{animate:{rotate:360},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full",style:{background:"conic-gradient(from 0deg, transparent 0deg, rgba(139, 92, 246, 0.3) 90deg, transparent 180deg, rgba(236, 72, 153, 0.3) 270deg, transparent 360deg)",transform:"scale(1.15)"}}),o.jsxs(L.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"relative p-3 bg-gradient-to-br from-gray-900/80 to-purple-900/80 rounded-full backdrop-blur-sm border-4 border-purple-500/30 shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-800 to-gray-900 rounded-full shadow-inner"})}),o.jsx("img",{src:"/logo.png",alt:"VMusic Logo",className:"w-40 h-40 md:w-48 md:h-48 drop-shadow-2xl relative z-10"})]}),o.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",children:[...Array(5)].map((t,e)=>o.jsx(L.div,{className:"absolute inset-0 rounded-full border border-white/5",style:{transform:`scale(${1+e*.08})`},animate:{opacity:[.1,.3,.1]},transition:{duration:2,repeat:1/0,delay:e*.2}},e))})]})}),o.jsxs(L.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-6xl md:text-7xl lg:text-8xl font-bold mb-6",children:[o.jsx("span",{className:"bg-gradient-to-r from-purple-400 via-pink-400 to-purple-500 bg-clip-text text-transparent",children:"V"}),o.jsx("span",{className:"bg-gradient-to-r from-white via-blue-100 to-purple-100 bg-clip-text text-transparent",children:"Music"})]}),o.jsx(L.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-xl md:text-2xl lg:text-3xl text-gray-200 mb-4 font-light",children:"Discover & Stream Free Independent Music"}),o.jsxs(L.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"text-base md:text-lg text-gray-400 mb-12 max-w-2xl mx-auto",children:["Stream half a million royalty-free tracks powered by Jamendo API.",o.jsx("span",{className:"inline-flex items-center ml-2",children:o.jsx(Zi,{size:20,className:"text-yellow-400"})})]}),o.jsx(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:o.jsx(Yn,{to:"/explore",children:o.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"group px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full font-semibold text-lg shadow-lg shadow-green-500/50 hover:shadow-green-500/80 transition-all duration-300 flex items-center gap-2",children:[o.jsx(xt,{size:20,fill:"white"}),"Explore Music",o.jsx(L.span,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},children:""})]})})}),o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1.2},className:"mt-16 grid grid-cols-3 gap-8 max-w-3xl mx-auto",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"500K+"}),o.jsx("div",{className:"text-sm md:text-base text-gray-400",children:"Free Tracks"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"40K+"}),o.jsx("div",{className:"text-sm md:text-base text-gray-400",children:"Artists"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"100%"}),o.jsx("div",{className:"text-sm md:text-base text-gray-400",children:"Legal & Free"})]})]}),o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1.5},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:o.jsx(L.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"w-6 h-10 border-2 border-white/30 rounded-full flex justify-center pt-2",children:o.jsx("div",{className:"w-1.5 h-3 bg-white/50 rounded-full"})})})]})]}),SH=[{icon:hs,title:"Powerful Search",description:"Instantly find any song, artist, or album from our massive library powered by Jamendo API.",gradient:"from-blue-500 to-cyan-500"},{icon:wn,title:"Like & Save",description:"Create custom playlists, save your favorite tracks, and organize your music library.",gradient:"from-pink-500 to-rose-500"},{icon:Fj,title:"Smart Radio",description:"Discover new music with mood-based radio stations. Chill, Focus, Workout, and more.",gradient:"from-purple-500 to-indigo-500"},{icon:B6,title:"Cloud Sync",description:"Access your playlists and favorites from any device. Everything syncs seamlessly.",gradient:"from-green-500 to-emerald-500"},{icon:QM,title:"Responsive Design",description:"Perfect experience on mobile, tablet, and desktop. Listen anywhere, anytime.",gradient:"from-orange-500 to-amber-500"},{icon:Zi,title:"Ad-Free Forever",description:"No ads, no interruptions, no premium tiers. Just pure music streaming for everyone.",gradient:"from-yellow-500 to-orange-500"}],AH=()=>{const t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},e={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return o.jsx("section",{className:"py-20 px-4 bg-gray-50 dark:bg-gray-900",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Why Choose VMusic?"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Experience the future of independent music streaming with powerful features designed for music lovers."})]}),o.jsx(L.div,{variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:SH.map((n,s)=>{const a=n.icon;return o.jsxs(L.div,{variants:e,whileHover:{y:-10,scale:1.02},className:"group relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl blur-xl -z-10",style:{backgroundImage:"linear-gradient(to right, var(--tw-gradient-stops))"}}),o.jsxs("div",{className:"relative bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100 dark:border-gray-700 h-full",children:[o.jsx("div",{className:`inline-flex p-4 rounded-xl bg-gradient-to-r ${n.gradient} mb-6`,children:o.jsx(a,{className:"text-white",size:28})}),o.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-900 dark:text-white",children:n.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:n.description}),o.jsx(L.div,{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${n.gradient} rounded-b-2xl`,initial:{scaleX:0},whileHover:{scaleX:1},transition:{duration:.3}})]})]},s)})}),o.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.3},className:"text-center mt-16",children:[o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"Ready to experience the difference?"}),o.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Get Started Free"})]})]})})},kH="<YOUR_SPOTIFY_CLIENT_ID>",IH="https://your-app.netlify.app/callback",CH="https://api.spotify.com/v1",RH="https://accounts.spotify.com/authorize";class PH{constructor(){this.accessToken=null,this.tokenExpiry=null,this.isAuthenticated=!1,this.loadTokenFromStorage()}loadTokenFromStorage(){const e=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_token_expiry");e&&n&&Date.now()<parseInt(n)&&(this.accessToken=e,this.tokenExpiry=parseInt(n),this.isAuthenticated=!0)}saveTokenToStorage(e,n){const s=Date.now()+n*1e3;localStorage.setItem("spotify_access_token",e),localStorage.setItem("spotify_token_expiry",s.toString()),this.accessToken=e,this.tokenExpiry=s,this.isAuthenticated=!0}getAuthUrl(){const e=["user-read-private","user-read-email","user-library-read","user-top-read","playlist-read-private","streaming","user-read-playback-state","user-read-currently-playing"],n=new URLSearchParams({client_id:kH,response_type:"token",redirect_uri:IH,scope:e.join(" "),show_dialog:"false"});return`${RH}?${n.toString()}`}handleCallback(){const e=window.location.hash.substring(1),n=new URLSearchParams(e),s=n.get("access_token"),a=n.get("expires_in");return s&&a?(this.saveTokenToStorage(s,parseInt(a)),window.history.replaceState({},document.title,window.location.pathname),!0):!1}isTokenValid(){return this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry}logout(){localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_token_expiry"),this.accessToken=null,this.tokenExpiry=null,this.isAuthenticated=!1}async getAccessToken(){return this.isTokenValid()?this.accessToken:null}async request(e,n={}){const s=await this.getAccessToken();if(!s)throw new Error("Not authenticated. Please login with Spotify.");const a=await fetch(`${CH}${e}`,{...n,headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",...n.headers}});if(a.status===401)throw this.logout(),new Error("Token expired. Please login again.");if(!a.ok)throw new Error(`Spotify API error: ${a.status}`);return a.json()}async searchTracks(e,n=20){try{const s=await this.request(`/search?q=${encodeURIComponent(e)}&type=track&limit=${n}`);return this.formatTracksResponse(s.tracks)}catch(s){return console.error("Error searching tracks:",s),{items:[],total:0}}}async getNewReleases(e=20){try{const s=(await this.request(`/browse/new-releases?limit=${e}`)).albums.items.map(u=>u.id).join(","),c=(await this.request(`/albums?ids=${s}`)).albums.flatMap(u=>u.tracks.items.map(h=>({...h,album:{id:u.id,name:u.name,images:u.images,release_date:u.release_date}})));return{items:c,total:c.length}}catch(n){return console.error("Error getting new releases:",n),{items:[],total:0}}}async getFeaturedPlaylists(e=20){try{return(await this.request(`/browse/featured-playlists?limit=${e}`)).playlists}catch(n){return console.error("Error getting featured playlists:",n),{items:[],total:0}}}async getPlaylistTracks(e,n=50){try{const s=await this.request(`/playlists/${e}/tracks?limit=${n}`);return this.formatTracksResponse(s)}catch(s){return console.error("Error getting playlist tracks:",s),{items:[],total:0}}}async getTrack(e){try{const n=await this.request(`/tracks/${e}`);return this.formatTrack(n)}catch(n){return console.error("Error getting track:",n),null}}async getArtist(e){try{return await this.request(`/artists/${e}`)}catch(n){return console.error("Error getting artist:",n),null}}async getArtistTopTracks(e,n="US"){try{const s=await this.request(`/artists/${e}/top-tracks?market=${n}`);return{items:s.tracks,total:s.tracks.length}}catch(s){return console.error("Error getting artist top tracks:",s),{items:[],total:0}}}async getRecommendations(e=[],n=[],s=20){try{const a=new URLSearchParams({limit:s.toString()});e.length>0&&a.append("seed_tracks",e.slice(0,5).join(",")),n.length>0&&a.append("seed_artists",n.slice(0,5).join(","));const c=await this.request(`/recommendations?${a.toString()}`);return{items:c.tracks,total:c.tracks.length}}catch(a){return console.error("Error getting recommendations:",a),{items:[],total:0}}}async getSavedTracks(e=20,n=0){try{const s=await this.request(`/me/tracks?limit=${e}&offset=${n}`);return this.formatTracksResponse(s)}catch(s){return console.error("Error getting saved tracks:",s),{items:[],total:0}}}async getUserTopTracks(e="medium_term",n=20){try{const s=await this.request(`/me/top/tracks?time_range=${e}&limit=${n}`);return{items:s.items,total:s.total}}catch(s){return console.error("Error getting user top tracks:",s),{items:[],total:0}}}formatTracksResponse(e){if(!e||!e.items)return{items:[],total:0};const n=e.items.map(s=>{const a=s.track||s;return this.formatTrack(a)});return{items:n,total:e.total||n.length}}formatTrack(e){return{id:e.id,name:e.name,artist_name:e.artists[0]?.name||"Unknown Artist",artist_id:e.artists[0]?.id||"",album_name:e.album?.name||"",album_id:e.album?.id||"",album_image:e.album?.images?.[0]?.url||"",duration:Math.floor(e.duration_ms/1e3),audio:e.preview_url,preview_url:e.preview_url,external_url:e.external_urls?.spotify||"",image:e.album?.images?.[1]?.url||e.album?.images?.[0]?.url||"",releasedate:e.album?.release_date||"",popularity:e.popularity||0,explicit:e.explicit||!1,source:"spotify"}}logout(){this.accessToken=null,this.tokenExpiry=null,this.isAuthenticated=!1,localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_refresh_token"),localStorage.removeItem("spotify_token_expiry")}isUserAuthenticated(){const e=localStorage.getItem("spotify_access_token"),n=localStorage.getItem("spotify_token_expiry");return e&&n&&Date.now()<parseInt(n)}}const Gn=new PH;class DH{constructor(){this.useSpotify=!1,this.spotifyEnabled=!1}async initializeGuestSpotify(){try{return Gn.isTokenValid()?(this.spotifyEnabled=!0,!0):(this.spotifyEnabled=!1,!1)}catch(e){return console.error("Failed to initialize Spotify:",e),this.spotifyEnabled=!1,!1}}enableSpotify(){this.useSpotify=!0,this.spotifyEnabled=!0}disableSpotify(){this.useSpotify=!1}isSpotifyEnabled(){return this.spotifyEnabled}async getTrendingTracks(e=20){if(this.useSpotify&&this.spotifyEnabled){const s=await Gn.getFeaturedPlaylists(5);if(s.items.length>0)return{results:(await Gn.getPlaylistTracks(s.items[0].id,e)).items,source:"spotify",message:"Spotify Previews (30s)"}}return{results:(await ze.getTrendingTracks(e)).results||[],source:"jamendo",message:"Full Tracks"}}async getNewReleases(e=20){return this.useSpotify&&this.spotifyEnabled?{results:(await Gn.getNewReleases(e)).items,source:"spotify",message:"Spotify Previews (30s)"}:{results:(await ze.getNewReleases(e)).results||[],source:"jamendo",message:"Full Tracks"}}async searchTracks(e,n=20){return this.useSpotify&&this.spotifyEnabled?{results:(await Gn.searchTracks(e,n)).items,source:"spotify",message:"Spotify Previews (30s)"}:{results:(await ze.searchTracks(e,n)).results||[],source:"jamendo",message:"Full Tracks"}}async getTrackById(e,n="jamendo"){if(n==="spotify"&&this.spotifyEnabled){const s=await Gn.getTrack(e);return{results:s?[s]:[],source:"spotify"}}return await ze.getTrackById(e)}async getTracksByTag(e,n=20){return{results:(await ze.getTracksByTag(e,n)).results||[],source:"jamendo",message:"Full Tracks"}}async getArtist(e,n="jamendo"){return n==="spotify"&&this.spotifyEnabled?await Gn.getArtist(e):await ze.getArtist(e)}async getArtistTracks(e,n="jamendo",s=20){return n==="spotify"&&this.spotifyEnabled?{results:(await Gn.getArtistTopTracks(e)).items,source:"spotify"}:{results:(await ze.getArtistTracks(e,s)).results||[],source:"jamendo"}}async getRecommendations(e=[],n=[],s=20){return this.spotifyEnabled?{results:(await Gn.getRecommendations(e,n,s)).items,source:"spotify",message:"Personalized Recommendations"}:this.getTrendingTracks(s)}async getSavedTracks(e=20,n=0){return Gn.isUserAuthenticated()?{results:(await Gn.getSavedTracks(e,n)).items,source:"spotify"}:{results:[],source:"none",message:"Login with Spotify to access your library"}}async getUserTopTracks(e="medium_term",n=20){return Gn.isUserAuthenticated()?{results:(await Gn.getUserTopTracks(e,n)).items,source:"spotify"}:{results:[],source:"none",message:"Login with Spotify to see your top tracks"}}async getCombinedTracks(e="trending",n=20){const s=Math.floor(n/2);let a=[],c=[];try{a=(e==="trending"?await ze.getTrendingTracks(s):await ze.getNewReleases(s)).results||[]}catch(h){console.error("Error fetching Jamendo tracks:",h)}if(this.spotifyEnabled)try{const h=e==="trending"?await this.getTrendingTracks(s):await Gn.getNewReleases(s);c=h.results||h.items||[]}catch(h){console.error("Error fetching Spotify tracks:",h)}const u=[...a,...c];return{results:this.shuffleArray(u),source:"combined",message:"Jamendo + Spotify"}}shuffleArray(e){const n=[...e];for(let s=n.length-1;s>0;s--){const a=Math.floor(Math.random()*(s+1));[n[s],n[a]]=[n[a],n[s]]}return n}formatDuration(e){const n=Math.floor(e/60),s=e%60;return`${n}:${s.toString().padStart(2,"0")}`}}const Lf=new DH,MH=()=>{const t=Rt(),{playTrack:e}=ar(),[n,s]=E.useState([]),[a,c]=E.useState([]),[u,h]=E.useState(!0),[m,p]=E.useState(!0),[x,v]=E.useState("combined");E.useEffect(()=>{(async()=>{await Lf.initializeGuestSpotify()})()},[]),E.useEffect(()=>{(async()=>{h(!0);const S=await Lf.getCombinedTracks("trending",10);S.results&&s(S.results),h(!1)})()},[]),E.useEffect(()=>{(async()=>{p(!0);const S=await Lf.getCombinedTracks("new",10);S.results&&c(S.results),p(!1)})()},[]);const w=({track:A,tracks:S})=>o.jsxs(L.div,{whileHover:{y:-8},transition:{duration:.2,ease:"easeOut"},className:"group relative bg-gray-800/50 backdrop-blur-lg rounded-xl overflow-hidden border border-gray-700 hover:border-green-500/50 transition-colors duration-300 cursor-pointer shrink-0 w-[200px]",onClick:()=>t(`/track/${A.id}`),children:[o.jsxs("div",{className:"relative overflow-hidden aspect-square",children:[o.jsx("img",{src:A.image||A.album_image||"https://via.placeholder.com/200",alt:A.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),A.source==="spotify"&&o.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-green-500 rounded-full text-xs font-semibold flex items-center gap-1",children:[o.jsx(Me,{size:12}),"Spotify"]}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:o.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:k=>{k.stopPropagation(),(A.audio||A.preview_url)&&e(A,S)},className:`w-12 h-12 bg-green-500 rounded-full shadow-lg hover:bg-green-600 transition-colors flex items-center justify-center ${!A.audio&&!A.preview_url?"opacity-50 cursor-not-allowed":""}`,disabled:!A.audio&&!A.preview_url,children:o.jsx(xt,{size:20,fill:"white",className:"text-white ml-0.5"})})}),o.jsx("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/70 backdrop-blur-sm rounded-full text-xs",children:A.source==="spotify"&&A.preview_url?"0:30":ze.formatDuration(A.duration)})]}),o.jsxs("div",{className:"p-3",children:[o.jsx("h3",{className:"font-semibold text-sm mb-1 truncate group-hover:text-green-400 transition-colors",children:A.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate",children:A.artist_name})]})]}),N=()=>o.jsxs("div",{className:"shrink-0 w-[200px] bg-gray-800/50 rounded-xl overflow-hidden animate-pulse",children:[o.jsx("div",{className:"aspect-square bg-gray-700"}),o.jsxs("div",{className:"p-3",children:[o.jsx("div",{className:"h-4 bg-gray-700 rounded mb-2"}),o.jsx("div",{className:"h-3 bg-gray-700 rounded w-2/3"})]})]});return o.jsxs("section",{className:"py-20 px-4 bg-gradient-to-b from-gray-900 to-black text-white",children:[o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"mb-16",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:" Popular Right Now"}),o.jsx("p",{className:"text-gray-400",children:"Most played tracks this week"})]}),o.jsxs("button",{onClick:()=>t("/explore"),className:"flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-full transition-all group",children:[o.jsx("span",{className:"font-semibold",children:"Show More"}),o.jsx($2,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),o.jsx("div",{className:"relative",children:o.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide scroll-smooth",children:u?[...Array(6)].map((A,S)=>o.jsx(N,{},S)):n.length>0?n.map((A,S)=>o.jsx(w,{track:A,tracks:n},`popular-${A.id}-${S}`)):o.jsxs("div",{className:"w-full text-center py-8 text-gray-400",children:[o.jsx(Me,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No tracks available"})]})})})]}),o.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:" Latest Releases"}),o.jsx("p",{className:"text-gray-400",children:"Fresh music added today"})]}),o.jsxs("button",{onClick:()=>t("/explore"),className:"flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-full transition-all group",children:[o.jsx("span",{className:"font-semibold",children:"Show More"}),o.jsx($2,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),o.jsx("div",{className:"relative",children:o.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide scroll-smooth",children:m?[...Array(6)].map((A,S)=>o.jsx(N,{},S)):a.length>0?a.map((A,S)=>o.jsx(w,{track:A,tracks:a},`latest-${A.id}-${S}`)):o.jsxs("div",{className:"w-full text-center py-8 text-gray-400",children:[o.jsx(Me,{size:48,className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No tracks available"})]})})})]}),o.jsx(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"text-center mt-16",children:o.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/explore"),className:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transition-all duration-300",children:"Explore Full Library"})})]}),o.jsx("style",{jsx:!0,children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `})]})},HN=[{icon:aV,number:"01",title:"Sign Up / Log In",description:"Create your free account with email or Google. Connect Spotify for enhanced features and personalized recommendations.",gradient:"from-purple-500 to-pink-500",badge:"Free Forever"},{icon:hs,number:"02",title:"Discover Music",description:"Browse 500,000+ royalty-free tracks from Jamendo. Access millions of Spotify previews (30s) as guest or full library when logged in.",gradient:"from-blue-500 to-cyan-500",badge:"Dual Source"},{icon:Yi,number:"03",title:"Save & Create Playlists",description:"Like your favorites, create custom playlists, and sync across all your devices. Get AI-powered recommendations.",gradient:"from-green-500 to-emerald-500",badge:"Smart Playlists"}],VH=()=>o.jsx("section",{className:"py-20 px-4 bg-white dark:bg-gray-900",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-20",children:[o.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 text-gray-900 dark:text-white",children:"How It Works"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto",children:"Get started with VMusic in three simple steps. Access millions of tracks and discover your next favorite song."})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"hidden lg:block absolute top-1/2 left-0 right-0 h-1 bg-gradient-to-r from-purple-200 via-blue-200 to-green-200 dark:from-purple-900 dark:via-blue-900 dark:to-green-900 transform -translate-y-1/2 -z-10"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 lg:gap-8",children:HN.map((t,e)=>{const n=t.icon;return o.jsx(L.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.2},className:"relative",children:o.jsxs("div",{className:"relative bg-gray-50 dark:bg-gray-800 rounded-3xl p-8 border-2 border-gray-200 dark:border-gray-700 hover:border-transparent hover:shadow-2xl transition-all duration-300 group",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${t.gradient} rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10 blur-xl`}),o.jsx("div",{className:"absolute -top-6 -left-6 w-16 h-16 bg-gradient-to-br from-white to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl flex items-center justify-center text-3xl font-bold text-gray-300 dark:text-gray-600 border-4 border-gray-200 dark:border-gray-700 shadow-lg",children:t.number}),o.jsxs("div",{className:"relative inline-block",children:[o.jsx(L.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:`inline-flex p-6 rounded-2xl bg-gradient-to-r ${t.gradient} mb-6 mt-4`,children:o.jsx(n,{className:"text-white",size:36})}),t.badge&&o.jsx("span",{className:"absolute -top-2 -right-2 px-2 py-1 bg-white dark:bg-gray-900 text-xs font-bold text-gray-900 dark:text-white rounded-full border-2 border-gray-200 dark:border-gray-700 shadow-lg",children:t.badge})]}),o.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:t.title}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:t.description}),e<HN.length-1&&o.jsx(L.div,{className:"hidden lg:block absolute top-1/2 -right-12 transform -translate-y-1/2",animate:{x:[0,10,0]},transition:{duration:2,repeat:1/0},children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",className:"text-gray-300 dark:text-gray-700",children:o.jsx("path",{d:"M20 12L32 24L20 36",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})})})]})},e)})})]})]})});class Od{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const OH=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Cn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:OH()},Zv=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},LH=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Zv(t);Cn.publicKey=n.publicKey,Cn.blockHeadless=n.blockHeadless,Cn.storageProvider=n.storageProvider,Cn.blockList=n.blockList,Cn.limitRate=n.limitRate,Cn.origin=n.origin||e},mI=async(t,e,n={})=>{const s=await fetch(Cn.origin+t,{method:"POST",headers:n,body:e}),a=await s.text(),c=new Od(s.status,a);if(s.ok)return c;throw c},pI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},UH=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},gI=t=>t.webdriver||!t.languages||t.languages.length===0,yI=()=>new Od(451,"Unavailable For Headless Browser"),zH=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},BH=t=>!t.list?.length||!t.watchVariable,FH=(t,e)=>t instanceof FormData?t.get(e):t[e],xI=(t,e)=>{if(BH(t))return!1;zH(t.list,t.watchVariable);const n=FH(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},vI=()=>new Od(403,"Forbidden"),HH=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},qH=async(t,e,n)=>{const s=Number(await n.get(t)||0);return e-Date.now()+s},bI=async(t,e,n)=>{if(!e.throttle||!n)return!1;HH(e.throttle,e.id);const s=e.id||t;return await qH(s,e.throttle,n)>0?!0:(await n.set(s,Date.now().toString()),!1)},wI=()=>new Od(429,"Too Many Requests"),$H=async(t,e,n,s)=>{const a=Zv(s),c=a.publicKey||Cn.publicKey,u=a.blockHeadless||Cn.blockHeadless,h=a.storageProvider||Cn.storageProvider,m={...Cn.blockList,...a.blockList},p={...Cn.limitRate,...a.limitRate};return u&&gI(navigator)?Promise.reject(yI()):(pI(c,t,e),UH(n),n&&xI(m,n)?Promise.reject(vI()):await bI(location.pathname,p,h)?Promise.reject(wI()):mI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:c,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},GH=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},YH=t=>typeof t=="string"?document.querySelector(t):t,ZH=async(t,e,n,s)=>{const a=Zv(s),c=a.publicKey||Cn.publicKey,u=a.blockHeadless||Cn.blockHeadless,h=Cn.storageProvider||a.storageProvider,m={...Cn.blockList,...a.blockList},p={...Cn.limitRate,...a.limitRate};if(u&&gI(navigator))return Promise.reject(yI());const x=YH(n);pI(c,t,e),GH(x);const v=new FormData(x);return xI(m,v)?Promise.reject(vI()):await bI(location.pathname,p,h)?Promise.reject(wI()):(v.append("lib_version","4.4.1"),v.append("service_id",t),v.append("template_id",e),v.append("user_id",c),mI("/api/v1.0/email/send-form",v))},_I={init:LH,send:$H,sendForm:ZH,EmailJSResponseStatus:Od},KH=()=>{const t=new Date().getFullYear(),[e,n]=E.useState(""),[s,a]=E.useState(!1),[c,u]=E.useState({type:"",message:""}),h={product:[{name:"Explore Music",href:"/explore"},{name:"VibeTube",href:"/vibetube"},{name:"Artists",href:"/artists"},{name:"Playlists",href:"/playlists"},{name:"About",href:"/about"}],company:[{name:"Contact Us",href:"/contact"}],legal:[{name:"Privacy Policy",href:"/privacy-policy"},{name:"Terms of Service",href:"/terms-of-service"}],resources:[{name:"Spotify API",href:"https://developer.spotify.com",external:!0},{name:"Google Cloud",href:"https://console.cloud.google.com",external:!0},{name:"Firebase",href:"https://console.firebase.google.com",external:!0},{name:"MongoDB Atlas",href:"https://cloud.mongodb.com",external:!0},{name:"Jamendo API",href:"https://developer.jamendo.com",external:!0}]},m=[{icon:eM,href:"https://github.com/mr-baraiya",label:"GitHub"},{icon:iV,href:"https://x.com/baraiya1014",label:"Twitter"},{icon:hM,href:"https://www.linkedin.com/in/baraiya-vishalbhai/",label:"LinkedIn"},{icon:uM,href:"https://www.instagram.com/vishalbaraiya_1014/",label:"Instagram"}],p=async x=>{x.preventDefault();const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.trim()||!v.test(e)){u({type:"error",message:"Please enter a valid email address"}),setTimeout(()=>u({type:"",message:""}),3e3);return}a(!0),u({type:"",message:""});try{const w={title:"VMusic Newsletter Subscription",from_name:"Newsletter Subscriber",from_email:e,subject:"Newsletter Subscription",message:`New newsletter subscription from: ${e}`,phone:"Not provided",name:e},N=await _I.send("<YOUR_EMAILJS_SERVICE_ID>","<YOUR_EMAILJS_TEMPLATE_ID>",w,"<YOUR_EMAILJS_USER_ID>");console.log("Newsletter email sent:",N),Vv(vd(It,"newsletter"),{email:e,subscribedAt:hm(),status:"active"}).catch(A=>{console.warn("Firestore save failed:",A)}),n(""),u({type:"success",message:"Successfully subscribed!"}),a(!1),setTimeout(()=>u({type:"",message:""}),5e3)}catch(w){console.error("Error subscribing to newsletter:",w),a(!1),u({type:"error",message:"Subscription failed. Please try again."}),setTimeout(()=>u({type:"",message:""}),3e3)}};return o.jsx("footer",{className:"bg-gray-900 text-gray-300 pt-16 pb-8",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-12 mb-12",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsxs(L.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 p-3 rounded-xl",children:o.jsx(xt,{size:24,className:"text-white",fill:"white"})}),o.jsx("span",{className:"text-2xl font-bold text-white",children:"VMusic"})]}),o.jsx("p",{className:"text-gray-400 mb-6 leading-relaxed",children:"Stream half a million royalty-free tracks from independent artists. Free, legal, and ad-free forever."}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-semibold text-white",children:"Stay updated"}),o.jsxs("form",{onSubmit:p,className:"space-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"email",value:e,onChange:x=>n(x.target.value),placeholder:"Enter your email",disabled:s,className:"flex-1 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-green-500 text-white placeholder-gray-500 disabled:opacity-50 disabled:cursor-not-allowed"}),o.jsx(L.button,{type:"submit",disabled:s,whileHover:{scale:s?1:1.05},whileTap:{scale:s?1:.95},className:"px-4 py-2 bg-linear-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s?o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Ur,{size:20})})]}),o.jsx(Bn,{children:c.message&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`flex items-center gap-2 text-xs p-2 rounded ${c.type==="success"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[c.type==="success"?o.jsx(Ca,{size:14}):o.jsx(pi,{size:14}),o.jsx("span",{children:c.message})]})})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold mb-4",children:"Product"}),o.jsx("ul",{className:"space-y-3",children:h.product.map((x,v)=>o.jsx(L.li,{whileHover:{x:5},transition:{duration:.2},children:x.external?o.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name}):o.jsx(Yn,{to:x.href,className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name})},v))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold mb-4",children:"Company"}),o.jsx("ul",{className:"space-y-3",children:h.company.map((x,v)=>o.jsx(L.li,{whileHover:{x:5},transition:{duration:.2},children:x.external?o.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name}):o.jsx(Yn,{to:x.href,className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name})},v))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold mb-4",children:"Resources"}),o.jsx("ul",{className:"space-y-3",children:h.resources.map((x,v)=>o.jsx(L.li,{whileHover:{x:5},transition:{duration:.2},children:x.external?o.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name}):o.jsx(Yn,{to:x.href,className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name})},v))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold mb-4",children:"Legal"}),o.jsx("ul",{className:"space-y-3",children:h.legal.map((x,v)=>o.jsx(L.li,{whileHover:{x:5},transition:{duration:.2},children:x.external?o.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name}):o.jsx(Yn,{to:x.href,className:"text-gray-400 hover:text-green-400 transition-colors",children:x.name})},v))})]})]}),o.jsx("div",{className:"border-t border-gray-800 my-8"}),o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[o.jsxs("div",{className:"text-gray-500 text-sm",children:[" ",t," VMusic. All rights reserved."]}),o.jsx("div",{className:"flex items-center gap-4",children:m.map((x,v)=>{const w=x.icon;return o.jsx(L.a,{href:x.href,target:"_blank",rel:"noopener noreferrer","aria-label":x.label,whileHover:{scale:1.2,y:-2},whileTap:{scale:.9},className:"p-2 bg-gray-800 hover:bg-gradient-to-r hover:from-green-500 hover:to-blue-500 rounded-lg transition-all duration-300",children:o.jsx(w,{size:20})},v)})})]})]})})},QH=()=>{const[t]=Wy(),e=Rt();return E.useEffect(()=>{const n=t.get("mode"),s=t.get("oobCode");if(n==="resetPassword"&&s){const a=new URLSearchParams(t);e(`/reset-password?${a.toString()}`,{replace:!0})}},[t,e]),o.jsxs("div",{children:[o.jsx(jH,{}),o.jsx(AH,{}),o.jsx(MH,{}),o.jsx(VH,{}),o.jsx(KH,{})]})},WH=()=>{const t=Rt(),e=[{icon:Me,value:"500K+",label:"Tracks Available"},{icon:Ki,value:"40K+",label:"Independent Artists"},{icon:Uj,value:"150+",label:"Countries Worldwide"},{icon:E6,value:"100%",label:"Royalty-Free"}];return o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 py-20",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full mb-6",children:o.jsx(Me,{size:40,className:"text-white"})}),o.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"About VMusic"}),o.jsx("p",{className:"text-xl text-gray-400",children:"Free, independent music for everyone"})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(wn,{className:"text-purple-400",size:28}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Our Mission"})]}),o.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"VMusic was built to celebrate independent artists and provide free access to incredible music. We believe music should be accessible to everyone, and artists deserve to be discovered. Powered by Jamendo API, we offer over 500,000 royalty-free tracks from talented musicians worldwide."}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:"Whether you're a music lover discovering new sounds or an artist looking to share your work, VMusic provides a platform that connects passionate creators with engaged listeners around the globe."})]}),o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:e.map((n,s)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3+s*.1},className:"bg-linear-to-br from-white/10 to-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10 text-center hover:scale-105 transition-transform",children:[o.jsx(n.icon,{className:"text-purple-400 mx-auto mb-3",size:32}),o.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n.value}),o.jsx("div",{className:"text-sm text-gray-400",children:n.label})]},n.label))}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(H6,{className:"text-blue-400",size:28}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Built With"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-gray-300",children:[o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"React 19"}),o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"Vite"}),o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"Tailwind CSS"}),o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"Firebase"}),o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"Framer Motion"}),o.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:"Jamendo API"})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Zi,{className:"text-yellow-400",size:28}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Features"})]}),o.jsxs("ul",{className:"space-y-4 text-gray-300",children:[o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"500,000+ royalty-free tracks from independent artists"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"Create custom playlists and save your favorites"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"Discover music by genre, mood, and popularity"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"100% legal and free - no subscriptions required"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"Beautiful, responsive design with smooth animations"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"High-quality audio streaming with no interruptions"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:""}),o.jsx("span",{children:"Support independent artists from around the world"})]})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(Gj,{className:"text-green-400",size:28}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"Why Choose VMusic?"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"100% Legal & Free"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"All tracks on VMusic are licensed under Creative Commons, ensuring you can enjoy music without any legal concerns or subscription fees."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Support Artists"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"By using VMusic, you help independent artists gain exposure and grow their audience worldwide."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Ads, No Interruptions"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Enjoy uninterrupted music streaming without annoying advertisements or forced breaks in your listening experience."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Discover Hidden Gems"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Find unique tracks and talented artists you won't hear on mainstream platforms. Explore diverse genres and styles."})]})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-linear-to-r from-purple-600/20 to-pink-600/20 backdrop-blur-sm rounded-2xl p-8 border border-purple-500/30 text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Ready to Explore?"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Start discovering amazing music from independent artists around the world"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsx("button",{onClick:()=>t("/explore"),className:"px-8 py-3 bg-linear-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:"Browse Music"}),o.jsx("button",{onClick:()=>t("/contact"),className:"px-8 py-3 bg-white/10 hover:bg-white/20 text-white font-semibold rounded-lg border border-white/20 transition-all",children:"Contact Us"})]})]})]})})},XH=()=>{const{trackId:t}=bm(),e=Rt(),{currentUser:n}=Dn(),{playTrack:s,currentTrack:a,isPlaying:c,togglePlay:u}=ar(),[h,m]=E.useState(null),[p,x]=E.useState(null),[v,w]=E.useState([]),[N,A]=E.useState(!1),[S,k]=E.useState(!0);E.useEffect(()=>{P(),n&&U()},[t,n]);const P=async()=>{try{k(!0);const C=await ze.getTrackById(t);if(C.results&&C.results.length>0){const I=C.results[0];if(m(I),I.artist_id){const j=await ze.getArtist(I.artist_id);j.results&&j.results.length>0&&x(j.results[0]);const M=await ze.getArtistTracks(I.artist_id,6);if(M.results){const z=M.results.filter(B=>B.id!==t);w(z)}}}}catch(C){console.error("Error loading track details:",C)}finally{k(!1)}},U=async()=>{try{const C=hn(It,"users",n.uid),I=await Qa(C);if(I.exists()){const M=I.data().likedTracks||[];A(M.includes(t))}}catch(C){console.error("Error checking if liked:",C)}},O=async()=>{if(!n){rt.show("Please sign in to like tracks","error");return}try{const C=hn(It,"users",n.uid);N?(await Ps(C,{likedTracks:Wo(t)}),A(!1)):(await Ps(C,{likedTracks:Cc(t)}),A(!0))}catch(C){console.error("Error toggling like:",C)}},F=()=>{a?.id===h.id?u():s(h,[h,...v])},Z=async()=>{if(navigator.share)try{await navigator.share({title:h.name,text:`Check out "${h.name}" by ${h.artist_name}`,url:window.location.href})}catch(C){console.error("Error sharing:",C)}else navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")};if(S)return o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Me,{size:48,className:"text-green-500 animate-pulse mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading track details..."})]})});if(!h)return o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Me,{size:48,className:"text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Track not found"}),o.jsx("button",{onClick:()=>e(-1),className:"mt-4 px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-full transition-all",children:"Go Back"})]})});const ee=a?.id===h.id&&c;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-32",children:[o.jsx("div",{className:"relative overflow-hidden bg-gradient-to-b from-green-900/40 to-transparent",children:o.jsxs("div",{className:"container mx-auto px-4 py-12",children:[o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col md:flex-row gap-8 items-start md:items-end",children:[o.jsx(L.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5},className:"w-full md:w-64 h-64 flex-shrink-0 shadow-2xl",children:o.jsx("img",{src:h.image||"https://via.placeholder.com/300",alt:h.name,className:"w-full h-full object-cover rounded-lg shadow-2xl"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-semibold text-white/80 mb-2",children:"TRACK"}),o.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-4 leading-tight",children:h.name}),o.jsxs("div",{className:"flex items-center gap-3 text-white/90",children:[p?.image&&o.jsx("img",{src:p.image,alt:h.artist_name,className:"w-8 h-8 rounded-full"}),o.jsx("button",{onClick:()=>e(`/artist/${h.artist_id}`),className:"font-semibold hover:underline",children:h.artist_name}),o.jsx("span",{children:""}),o.jsx("span",{children:new Date(h.releasedate).getFullYear()}),o.jsx("span",{children:""}),o.jsx("span",{children:ze.formatDuration(h.duration)})]})]})]}),o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex items-center gap-4 mt-8",children:[o.jsx("button",{onClick:F,className:"w-14 h-14 bg-green-500 hover:bg-green-600 rounded-full flex items-center justify-center hover:scale-105 transition-all shadow-lg",children:ee?o.jsx(dd,{size:24,className:"text-white",fill:"white"}):o.jsx(xt,{size:24,className:"text-white ml-1",fill:"white"})}),o.jsx("button",{onClick:O,className:`p-3 rounded-full transition-all ${N?"text-green-500 hover:bg-green-500/20":"text-white/70 hover:text-white hover:bg-white/10"}`,children:o.jsx(wn,{size:28,fill:N?"currentColor":"none"})}),o.jsx("button",{onClick:()=>{n?rt.show("Playlist feature coming soon!","info"):rt.show("Please sign in to add tracks to playlists","error")},className:"p-3 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-all",children:o.jsx(hy,{size:28})}),o.jsx("button",{onClick:Z,className:"p-3 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-all",children:o.jsx($j,{size:28})})]})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-2 space-y-8",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Rx,{className:"text-green-500",size:20}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Released"})]}),o.jsx("p",{className:"text-white font-semibold",children:new Date(h.releasedate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Tc,{className:"text-green-500",size:20}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Duration"})]}),o.jsx("p",{className:"text-white font-semibold",children:ze.formatDuration(h.duration)})]}),h.album_name&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 col-span-2",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Me,{className:"text-green-500",size:20}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Album"})]}),o.jsx("p",{className:"text-white font-semibold",children:h.album_name})]})]})}),p&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/[0.02] border border-white/10 rounded-xl p-6 backdrop-blur-sm",children:[o.jsx("h3",{className:"text-white font-bold text-lg mb-6",children:"About Artist"}),o.jsxs("div",{className:"mb-6",children:[o.jsx("button",{onClick:()=>e(`/artist/${p.id}`),className:"group w-full",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:p.image||"https://via.placeholder.com/100",alt:p.name,className:"w-20 h-20 rounded-full object-cover border-2 border-white/10 group-hover:border-green-500/50 transition-all"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsxs("div",{className:"text-left flex-1",children:[o.jsx("p",{className:"text-white font-bold text-xl group-hover:text-green-500 transition-colors",children:p.name}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Artist"})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Ki,{className:"text-green-500",size:16}),o.jsx("p",{className:"text-gray-400 text-xs",children:"Fans"})]}),o.jsx("p",{className:"text-white font-bold text-sm",children:p.stats?.fans?p.stats.fans.toLocaleString():"N/A"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Me,{className:"text-green-500",size:16}),o.jsx("p",{className:"text-gray-400 text-xs",children:"Tracks"})]}),o.jsx("p",{className:"text-white font-bold text-sm",children:p.stats?.tracks||"N/A"})]})]}),p.location&&o.jsxs("div",{className:"mb-4 flex items-center gap-2 text-gray-400 text-sm",children:[o.jsx(Pr,{size:16}),o.jsxs("span",{children:["From ",p.location]})]}),p.website&&o.jsx("div",{className:"mb-4",children:o.jsxs("a",{href:p.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-green-500 hover:text-green-400 text-sm transition-colors",children:[o.jsx(lc,{size:16}),o.jsx("span",{children:"Visit Website"})]})})]}),o.jsx("button",{onClick:()=>e(`/artist/${p.id}`),className:"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white rounded-lg transition-all text-sm font-bold shadow-lg shadow-green-500/25",children:"View Full Profile"})]})})]}),v.length>0&&o.jsxs("div",{className:"mt-12",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["More by ",h.artist_name]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:v.map(C=>o.jsxs(L.div,{whileHover:{scale:1.05},className:"group bg-white/5 hover:bg-white/10 rounded-xl p-4 transition-all cursor-pointer",onClick:()=>e(`/track/${C.id}`),children:[o.jsxs("div",{className:"relative mb-3",children:[o.jsx("img",{src:C.image||"https://via.placeholder.com/150",alt:C.name,className:"w-full aspect-square object-cover rounded-lg"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:o.jsx("button",{onClick:I=>{I.stopPropagation(),s(C,v)},className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 hover:scale-110 transition-all",children:o.jsx(xt,{size:20,className:"text-white ml-0.5",fill:"white"})})})]}),o.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:C.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate",children:C.artist_name})]},C.id))})]})]})]})},JH=()=>{const t=Rt(),[e,n]=E.useState("loading"),[s,a]=E.useState("Connecting to Spotify...");return E.useEffect(()=>{(async()=>{try{const u=new URLSearchParams(window.location.search),h=u.get("code");if(u.get("error")){n("error"),a("Authorization denied. You can still use VMusic with Jamendo tracks."),setTimeout(()=>t("/dashboard"),3e3);return}if(!h){n("error"),a("No authorization code received."),setTimeout(()=>t("/dashboard"),3e3);return}a("Authenticating with Spotify..."),await Gn.getAccessTokenFromCode(h),Lf.enableSpotify(),n("success"),a("Successfully connected to Spotify! Redirecting to dashboard..."),localStorage.setItem("spotify_connected","true"),setTimeout(()=>t("/dashboard"),2e3)}catch(u){console.error("Spotify callback error:",u),n("error"),a("Failed to connect to Spotify. Please try again later."),setTimeout(()=>t("/dashboard"),3e3)}})()},[t]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 text-center",children:[o.jsxs("div",{className:"flex justify-center mb-6",children:[e==="loading"&&o.jsx(L.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"p-6 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full",children:o.jsx(Me,{className:"text-white",size:48})}),e==="success"&&o.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"p-6 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full",children:o.jsx(Ca,{className:"text-white",size:48})}),e==="error"&&o.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"p-6 bg-gradient-to-br from-red-500 to-pink-500 rounded-full",children:o.jsx(L6,{className:"text-white",size:48})})]}),o.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:[e==="loading"&&"Connecting to Spotify",e==="success"&&"Connection Successful!",e==="error"&&"Connection Failed"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:s}),e==="loading"&&o.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2].map(c=>o.jsx(L.div,{animate:{y:[0,-10,0]},transition:{duration:.6,repeat:1/0,delay:c*.2},className:"w-3 h-3 bg-purple-500 rounded-full"},c))}),e==="error"&&o.jsx("button",{onClick:()=>t("/dashboard"),className:"mt-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all",children:"Go to Dashboard"})]})})},eq=()=>{const[t,e]=E.useState(""),[n,s]=E.useState(!1),[a,c]=E.useState(""),[u,h]=E.useState(""),m=async p=>{p.preventDefault(),h(""),c(""),s(!0);try{console.log("Sending password reset email to:",t),await WL(Sr,t),console.log("Password reset email sent successfully"),console.log(" Email should arrive within 5-10 minutes"),console.log(" Check your spam/junk folder!"),c(`Password reset email sent to ${t}! Please check your inbox and spam folder. The link expires in 1 hour.`),e("")}catch(x){console.error(" Password reset error:",x),console.error("Error code:",x.code),console.error("Error message:",x.message),console.error("Full error:",JSON.stringify(x,null,2));let v="Failed to send reset email. Please try again.";x.code==="auth/user-not-found"?v="No account found with this email address. Please check the email or sign up.":x.code==="auth/invalid-email"?v="Invalid email address format.":x.code==="auth/too-many-requests"?v="Too many requests. Please wait a few minutes and try again.":x.code==="auth/network-request-failed"?v="Network error. Please check your internet connection.":x.code==="auth/unauthorized-domain"?v="This domain is not authorized. Please add it to Firebase Console.":x.message&&(v=x.message),h(v)}finally{s(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-black flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative w-full max-w-md",children:[o.jsx(Yn,{to:"/",children:o.jsxs(L.button,{whileHover:{x:-5},className:"flex items-center gap-2 text-gray-400 hover:text-white mb-6 transition-colors",children:[o.jsx(jm,{size:20}),o.jsx("span",{children:"Back to Home"})]})}),o.jsxs(L.div,{initial:{scale:.95},animate:{scale:1},className:"bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 rounded-2xl p-8 backdrop-blur-xl border border-white/10 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ur,{size:32,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Forgot Password?"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"No worries! Enter your email and we'll send you a reset link."})]}),a&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-6 flex items-start gap-3",children:[o.jsx(Ca,{size:20,className:"text-green-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-green-400 text-sm font-medium",children:a}),o.jsx("p",{className:"text-green-400/70 text-xs mt-1",children:"If you don't see the email, check your spam folder."})]})]}),u&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6 flex items-start gap-3",children:[o.jsx(pi,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-400 text-sm",children:u})]}),o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"email",value:t,onChange:p=>e(p.target.value),placeholder:"your@email.com",required:!0,autoComplete:"email",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})]}),o.jsx("button",{type:"submit",disabled:n,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-500/25",children:n?"Sending...":"Send Reset Link"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Remember your password?"," ",o.jsx(Yn,{to:"/",className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign In"})]})})]})]})]})},tq=()=>{const[t]=Wy(),e=Rt(),[n,s]=E.useState(""),[a,c]=E.useState(""),[u,h]=E.useState(!1),[m,p]=E.useState(!1),[x,v]=E.useState(!1),[w,N]=E.useState(!0),[A,S]=E.useState(""),[k,P]=E.useState(""),[U,O]=E.useState(""),F=t.get("oobCode");E.useEffect(()=>{(async()=>{if(!F){P("Invalid reset link. Please request a new password reset."),N(!1);return}try{const C=await e9(Sr,F);O(C),N(!1)}catch(C){console.error("Error verifying reset code:",C);let I="Invalid or expired reset link.";C.code==="auth/expired-action-code"?I="This reset link has expired. Please request a new one.":C.code==="auth/invalid-action-code"&&(I="This reset link is invalid or has already been used."),P(I),N(!1)}})()},[F]);const Z=async ee=>{if(ee.preventDefault(),P(""),S(""),n.length<6){P("Password must be at least 6 characters long.");return}if(n!==a){P("Passwords do not match.");return}v(!0);try{await XL(Sr,F,n),S("Password reset successful! Redirecting to sign in..."),setTimeout(()=>{e("/")},2e3)}catch(C){console.error("Password reset error:",C);let I="Failed to reset password. Please try again.";C.code==="auth/expired-action-code"?I="This reset link has expired. Please request a new one.":C.code==="auth/invalid-action-code"?I="This reset link is invalid or has already been used.":C.code==="auth/weak-password"?I="Password is too weak. Please use a stronger password.":C.message&&(I=C.message),P(I)}finally{v(!1)}};return w?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-black flex items-center justify-center p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx(L.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-lg",children:"Verifying reset link..."})]})}):k&&!U?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-black flex items-center justify-center p-4",children:o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 rounded-2xl p-8 max-w-md w-full backdrop-blur-xl border border-white/10 shadow-2xl text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(pi,{size:32,className:"text-red-400"})}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Invalid Reset Link"}),o.jsx("p",{className:"text-gray-400 mb-6",children:k}),o.jsx("button",{onClick:()=>e("/forgot-password"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:"Request New Reset Link"})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-black flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative w-full max-w-md",children:o.jsxs(L.div,{initial:{scale:.95},animate:{scale:1},className:"bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 rounded-2xl p-8 backdrop-blur-xl border border-white/10 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Do,{size:32,className:"text-white"})}),o.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Reset Password"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["Enter your new password for ",o.jsx("span",{className:"text-purple-400 font-semibold",children:U})]})]}),A&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-500/10 border border-green-500/50 rounded-lg p-4 mb-6 flex items-start gap-3",children:[o.jsx(Ca,{size:20,className:"text-green-400 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-green-400 text-sm font-medium",children:A})]}),k&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 mb-6 flex items-start gap-3",children:[o.jsx(pi,{size:20,className:"text-red-400 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-400 text-sm",children:k})]}),o.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Do,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:u?"text":"password",value:n,onChange:ee=>s(ee.target.value),placeholder:"",required:!0,minLength:6,autoComplete:"new-password",className:"w-full pl-10 pr-12 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"}),o.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:u?o.jsx(Y2,{size:20}):o.jsx(Z2,{size:20})})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Do,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:m?"text":"password",value:a,onChange:ee=>c(ee.target.value),placeholder:"",required:!0,minLength:6,autoComplete:"new-password",className:"w-full pl-10 pr-12 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"}),o.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:m?o.jsx(Y2,{size:20}):o.jsx(Z2,{size:20})})]})]}),o.jsx("button",{type:"submit",disabled:x||!!A,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-500/25",children:x?"Resetting Password...":"Reset Password"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-gray-400 text-sm",children:["Remember your password?"," ",o.jsx("button",{onClick:()=>e("/"),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign In"})]})})]})})]})},nq=()=>{const t=Rt(),[e,n]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(!1),[h,m]=E.useState(""),[p,x]=E.useState("popularity_total"),[v,w]=E.useState(!1),[N,A]=E.useState(50),[S,k]=E.useState(""),[P,U]=E.useState(""),[O,F]=E.useState(!1),[Z,ee]=E.useState(!0),C=[{code:"USA",name:"United States",flag:""},{code:"GBR",name:"United Kingdom",flag:""},{code:"FRA",name:"France",flag:""},{code:"DEU",name:"Germany",flag:""},{code:"ITA",name:"Italy",flag:""},{code:"ESP",name:"Spain",flag:""},{code:"CAN",name:"Canada",flag:""},{code:"AUS",name:"Australia",flag:""},{code:"BRA",name:"Brazil",flag:""},{code:"JPN",name:"Japan",flag:""},{code:"KOR",name:"South Korea",flag:""},{code:"IND",name:"India",flag:""}],I=[{value:"popularity_total",label:"Most Popular"},{value:"popularity_month",label:"Popular This Month"},{value:"popularity_week",label:"Popular This Week"},{value:"joindate_desc",label:"Newest First"},{value:"joindate_asc",label:"Oldest First"},{value:"name_asc",label:"Name (A-Z)"},{value:"name_desc",label:"Name (Z-A)"}];E.useEffect(()=>{j()},[p,v,S,P]),E.useEffect(()=>{const J=()=>{if(c||!Z)return;const Y=window.scrollY,se=window.innerHeight,fe=document.documentElement.scrollHeight;Y+se>=fe-500&&M()};return window.addEventListener("scroll",J),()=>window.removeEventListener("scroll",J)},[c,Z,N]);const j=async()=>{a(!0),A(50),ee(!0);try{let J;S||P?J=await ze.getArtistsByLocationWithAlbums({country:S,city:P,limit:N,order:p}):J=await ze.getArtistsWithAlbums({limit:N,order:p,hasImage:v||void 0}),n(J.results||[]),J.results&&J.results.length<50&&ee(!1)}catch(J){console.error("Error fetching artists:",J),n([]),ee(!1)}finally{a(!1)}},M=async()=>{if(c||!Z)return;u(!0);const J=N+50;try{let Y;h.trim()?Y=await ze.searchArtistsWithAlbums({query:h,limit:J,order:p}):S||P?Y=await ze.getArtistsByLocationWithAlbums({country:S,city:P,limit:J,order:p}):Y=await ze.getArtistsWithAlbums({limit:J,order:p,hasImage:v||void 0}),Y.results&&(n(Y.results),A(J),Y.results.length<J&&ee(!1))}catch(Y){console.error("Error loading more artists:",Y),ee(!1)}finally{u(!1)}},z=async J=>{if(J.preventDefault(),!h.trim()){j();return}a(!0),A(50),ee(!0);try{const Y=await ze.searchArtistsWithAlbums({query:h,limit:50,order:p});n(Y.results||[]),Y.results&&Y.results.length<50&&ee(!1)}catch(Y){console.error("Error searching artists:",Y),n([]),ee(!1)}finally{a(!1)}},B=()=>{m(""),j()},V=()=>{k(""),U(""),F(!1)},Ie=J=>{k(J),U("")};return E.useEffect(()=>{N>50&&M()},[]),o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-900/40 via-purple-900/40 to-pink-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Ki,{size:32,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2",children:"Discover Artists"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"Explore talented musicians from around the world"})]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("form",{onSubmit:z,className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(hs,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:h,onChange:J=>m(J.target.value),placeholder:"Search artists by name...",className:"w-full pl-12 pr-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),h&&o.jsx("button",{type:"button",onClick:B,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:""})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("select",{value:p,onChange:J=>x(J.target.value),className:"px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500 cursor-pointer",children:I.map(J=>o.jsx("option",{value:J.value,className:"bg-gray-900",children:J.label},J.value))}),o.jsxs("button",{onClick:()=>w(!v),className:`px-4 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${v?"bg-purple-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,title:"Show only artists with images",children:[o.jsx(Lj,{size:20}),"With Image"]}),o.jsxs("button",{onClick:()=>F(!O),className:`px-4 py-3 rounded-xl font-medium transition-all flex items-center gap-2 ${O||S?"bg-green-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,title:"Filter by location",children:[o.jsx(Q2,{size:20}),"By Location"]})]})]}),(S||P)&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 flex items-center gap-2 text-white",children:[o.jsx(Q2,{size:16,className:"text-green-400"}),o.jsx("span",{children:"Filtering by:"}),S&&o.jsxs("span",{className:"px-3 py-1 bg-green-600/20 border border-green-500/50 rounded-lg text-sm",children:[C.find(J=>J.code===S)?.flag," ",C.find(J=>J.code===S)?.name||S]}),P&&o.jsx("span",{className:"px-3 py-1 bg-green-600/20 border border-green-500/50 rounded-lg text-sm",children:P}),o.jsx("button",{onClick:V,className:"ml-2 p-1 hover:bg-white/10 rounded-full transition-colors",title:"Clear location filter",children:o.jsx(_n,{size:16})})]})]})})]}),O&&o.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-b border-white/10 bg-gray-900/50 backdrop-blur-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[o.jsx(Uj,{size:20,className:"text-green-400"}),"Filter by Location"]}),o.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:24})})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Search by City"}),o.jsx("input",{type:"text",value:P,onChange:J=>U(J.target.value),placeholder:"Enter city name (e.g., London, Paris, Tokyo)...",className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-400 mb-3",children:"Popular Countries"}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:C.map(J=>o.jsxs("button",{onClick:()=>Ie(J.code),className:`p-3 rounded-xl border transition-all text-center ${S===J.code?"bg-green-600/20 border-green-500 shadow-lg shadow-green-500/20":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}`,children:[o.jsx("div",{className:"text-2xl mb-1",children:J.flag}),o.jsx("p",{className:"text-white text-xs font-medium",children:J.name})]},J.code))})]})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[!s&&e.length>0&&o.jsx("div",{className:"mb-6 flex items-center justify-between",children:o.jsxs("p",{className:"text-gray-400",children:["Showing ",o.jsx("span",{className:"text-white font-semibold",children:e.length})," artists"]})}),s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading artists..."})]}):e.length>0?o.jsxs(o.Fragment,{children:[o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((J,Y)=>o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Y*.02},whileHover:{y:-4},className:"group relative bg-gradient-to-br from-white/10 via-white/5 to-transparent backdrop-blur-sm rounded-2xl overflow-hidden transition-all border border-white/10 hover:border-purple-500/50 shadow-xl hover:shadow-2xl hover:shadow-purple-500/20",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/0 via-pink-600/0 to-indigo-600/0 group-hover:from-purple-600/10 group-hover:via-pink-600/10 group-hover:to-indigo-600/10 transition-all duration-500 pointer-events-none"}),o.jsxs("div",{className:"relative p-6 cursor-pointer",onClick:()=>t(`/artist/${J.id}`),children:[o.jsxs("div",{className:"relative flex-shrink-0 mb-4",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-indigo-500 rounded-full blur-xl opacity-0 group-hover:opacity-50 transition-opacity duration-500"}),o.jsx("div",{className:"relative w-20 h-20 mx-auto rounded-full overflow-hidden bg-gradient-to-br from-purple-600 via-pink-600 to-indigo-600 p-1 shadow-lg group-hover:scale-110 transition-transform duration-300",children:o.jsx("div",{className:"w-full h-full rounded-full overflow-hidden bg-gray-900",children:J.image?o.jsx("img",{src:J.image,alt:J.name,className:"w-full h-full object-cover",loading:"lazy"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-600/20 to-pink-600/20",children:o.jsx(Ki,{size:28,className:"text-white/70"})})})})]}),o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white via-purple-200 to-pink-200 mb-2 group-hover:from-purple-300 group-hover:via-pink-300 group-hover:to-indigo-300 transition-all duration-300 line-clamp-2 px-2",children:J.name}),o.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 group-hover:border-purple-500/30 transition-colors",children:[o.jsx(Rx,{size:14,className:"text-purple-400"}),o.jsx("span",{className:"font-medium",children:new Date(J.joindate).getFullYear()})]}),J.albums&&J.albums.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 group-hover:border-pink-500/30 transition-colors",children:[o.jsx(Me,{size:14,className:"text-pink-400"}),o.jsxs("span",{className:"font-medium",children:[J.albums.length," ",J.albums.length!==1?"albums":"album"]})]})]})]}),o.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-white/20 to-transparent mb-4"})]}),J.albums&&J.albums.length>0&&o.jsxs("div",{className:"relative px-6 pb-6 space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3 pt-1 pb-2 border-t border-white/10",children:[o.jsx(Me,{size:16,className:"text-cyan-400"}),o.jsxs("span",{className:"text-sm font-semibold text-cyan-300",children:["Albums (",J.albums.length,")"]})]}),J.albums.map(se=>o.jsxs(L.div,{whileHover:{x:6,scale:1.02},className:"flex items-center gap-3 p-2.5 rounded-xl hover:bg-gradient-to-r hover:from-cyan-500/10 hover:to-blue-500/10 transition-all cursor-pointer border border-transparent hover:border-cyan-500/30 group/album",onClick:fe=>{fe.stopPropagation(),t(`/album/${se.id}`)},children:[o.jsxs("div",{className:"relative w-14 h-14 rounded-lg overflow-hidden bg-white/5 flex-shrink-0 shadow-md group-hover/album:shadow-lg group-hover/album:shadow-cyan-500/20 transition-shadow",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 opacity-0 group-hover/album:opacity-100 transition-opacity"}),se.image?o.jsx("img",{src:se.image,alt:se.name,className:"relative w-full h-full object-cover group-hover/album:scale-110 transition-transform duration-300",loading:"lazy"}):o.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:o.jsx(Me,{size:20,className:"text-white/30 group-hover/album:text-white/50 transition-colors"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-white text-sm font-semibold truncate group-hover/album:text-cyan-300 transition-colors mb-1",children:se.name}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-gray-400 text-xs px-2 py-0.5 rounded-full bg-white/5 border border-white/10",children:new Date(se.releasedate).getFullYear()})})]}),o.jsx("div",{className:"opacity-0 group-hover/album:opacity-100 transition-opacity",children:o.jsx("div",{className:"w-6 h-6 rounded-full bg-cyan-500/20 flex items-center justify-center",children:o.jsx("svg",{className:"w-3 h-3 text-cyan-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]},se.id))]}),(!J.albums||J.albums.length===0)&&o.jsx("div",{className:"relative px-6 pb-6 text-center",children:o.jsxs("div",{className:"py-6 rounded-xl bg-white/5 border border-dashed border-white/10",children:[o.jsx(Me,{size:24,className:"text-gray-500 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"No albums available"})]})})]},J.id))}),c&&o.jsxs("div",{className:"mt-8 text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading more artists..."})]}),!Z&&e.length>0&&o.jsx("div",{className:"mt-8 text-center",children:o.jsx("p",{className:"text-gray-400",children:" You've reached the end!"})})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ki,{size:32,className:"text-gray-400"})}),o.jsx("h3",{className:"text-white text-xl font-semibold mb-2",children:"No Artists Found"}),o.jsx("p",{className:"text-gray-400",children:h?"Try a different search term":"Unable to load artists"})]})]})]})},sq=()=>{const{id:t}=bm(),e=Rt(),{currentUser:n}=Dn(),{playTrack:s,isPlaying:a,currentTrack:c}=ar(),[u,h]=E.useState(null),[m,p]=E.useState([]),[x,v]=E.useState(!0),[w,N]=E.useState([]);E.useEffect(()=>{A(),n&&S()},[t,n]);const A=async()=>{v(!0);try{const F=await ze.getAlbumById(t);if(F){h(F);const Z=await ze.getAlbumTracks(t);if(Z.results&&Z.results.length>0){const ee=Z.results[0];p(ee.tracks||[])}}}catch(F){console.error("Error loading album:",F)}finally{v(!1)}},S=async()=>{if(n)try{const F=await Sk(_k(vd(It,"users"),Tk("uid","==",n.uid)));if(!F.empty){const Z=F.docs[0].data();N(Z.likedTracks||[])}}catch(F){console.error("Error loading liked tracks:",F)}},k=async F=>{if(!n){rt.show("Please login to like tracks","error");return}try{const Z=hn(It,"users",n.uid);w.includes(F.id)?(await Ps(Z,{likedTracks:Wo(F.id)}),N(C=>C.filter(I=>I!==F.id)),rt.show("Removed from favorites","info")):(await Ps(Z,{likedTracks:Cc(F.id)}),N(C=>[...C,F.id]),rt.show("Added to favorites","info"))}catch(Z){console.error("Error toggling like:",Z),rt.show("Failed to update favorites","error")}},P=F=>{s(F)},U=()=>{m.length>0&&s(m[0])},O=async()=>{if(navigator.share&&u)try{await navigator.share({title:u.name,text:`Check out ${u.name} by ${u.artist_name} on VMusic`,url:u.shareurl||window.location.href})}catch(F){console.log("Error sharing:",F)}else navigator.clipboard.writeText(window.location.href),rt.show("Link copied to clipboard!","info")};return x?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading album..."})]})}):u?o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-32",children:[o.jsxs("div",{className:"relative h-96 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${u.image})`,filter:"blur(50px)",transform:"scale(1.1)"}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/80 to-gray-900"}),o.jsx("div",{className:"relative h-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-end pb-8",children:o.jsxs("div",{className:"flex items-end gap-6",children:[o.jsx(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"w-48 h-48 rounded-lg overflow-hidden shadow-2xl flex-shrink-0",children:u.image?o.jsx("img",{src:u.image,alt:u.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-cyan-600 to-blue-600 flex items-center justify-center",children:o.jsx(Me,{size:64,className:"text-white/50"})})}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex-1",children:[o.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-4 transition-colors",children:[o.jsx(jm,{size:20}),"Back"]}),o.jsx("p",{className:"text-sm font-semibold text-cyan-400 tracking-wider mb-2",children:"ALBUM"}),o.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-4 drop-shadow-lg",children:u.name}),o.jsxs("div",{className:"flex items-center gap-4 text-gray-300",children:[o.jsxs("button",{onClick:()=>e(`/artist/${u.artist_id}`),className:"flex items-center gap-2 hover:text-white transition-colors",children:[o.jsx(Pr,{size:18}),o.jsx("span",{className:"font-medium",children:u.artist_name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Rx,{size:18}),o.jsx("span",{children:new Date(u.releasedate).getFullYear()})]}),m.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Me,{size:18}),o.jsxs("span",{children:[m.length," track",m.length!==1?"s":""]})]})]})]})]})})]}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:U,className:"px-8 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white font-semibold rounded-full flex items-center gap-2 transition-all shadow-lg hover:shadow-cyan-500/50",children:[o.jsx(xt,{size:20,fill:"white"}),"Play All"]}),u.zip_allowed&&u.zip&&o.jsx("a",{href:u.zip,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all",title:"Download Album",children:o.jsx($f,{size:20,className:"text-white"})}),o.jsx("button",{onClick:O,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all",title:"Share Album",children:o.jsx($j,{size:20,className:"text-white"})})]})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"bg-white/5 rounded-xl overflow-hidden",children:m.length>0?o.jsx("div",{className:"divide-y divide-white/10",children:m.map((F,Z)=>{const ee=c?.id===F.id,C=w.includes(F.id);return o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Z*.05},className:`flex items-center gap-4 p-4 hover:bg-white/5 transition-all group ${ee?"bg-white/10":""}`,children:[o.jsxs("div",{className:"w-8 flex-shrink-0 text-center",children:[o.jsx("span",{className:"text-gray-400 group-hover:hidden",children:Z+1}),o.jsx("button",{onClick:()=>P(F),className:"hidden group-hover:block",children:o.jsx(xt,{size:20,className:ee&&a?"text-cyan-400":"text-white",fill:ee&&a?"currentColor":"none"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:`font-medium truncate ${ee?"text-cyan-400":"text-white"}`,children:F.name}),o.jsx("p",{className:"text-sm text-gray-400 truncate",children:F.artist_name})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[o.jsx(Tc,{size:14}),ze.formatDuration(F.duration)]}),o.jsx("button",{onClick:()=>k(F),className:"p-2 hover:bg-white/10 rounded-full transition-all",children:o.jsx(wn,{size:20,className:C?"text-red-500 fill-red-500":"text-gray-400"})})]},F.id)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Me,{size:48,className:"text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No tracks available"})]})})})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Album Not Found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"The album you're looking for doesn't exist."}),o.jsx("button",{onClick:()=>e(-1),className:"px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-colors",children:"Go Back"})]})})},iq=()=>{const{currentUser:t}=Dn(),[e,n]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(""),[h,m]=E.useState("trending"),[p,x]=E.useState(null),[v,w]=E.useState([]),[N,A]=E.useState(.7),[S,k]=E.useState(!1),P=E.useRef(null),[U,O]=E.useState(null),[F,Z]=E.useState(null),[ee,C]=E.useState(!1),[I,j]=E.useState(0),[M,z]=E.useState(!0),[B,V]=E.useState(!1),Ie=[{id:"hindi",name:"Hindi Vibes",icon:Me,query:"year:2023-2024 hindi"},{id:"bollywood",name:"Bollywood",icon:Zi,query:"year:2023-2024 bollywood"},{id:"romantic",name:"Romantic",icon:wn,query:"romantic songs"},{id:"trending",name:"Trending",icon:Sm,query:"top hits 2024"},{id:"lofi",name:"Lo-Fi",icon:Px,query:"lofi hip hop"},{id:"party",name:"Party",icon:Me,query:"party hits"},{id:"chill",name:"Chill",icon:Me,query:"chill vibes"}];E.useEffect(()=>{J(),t&&be()},[t]),E.useEffect(()=>{U&&(n([]),j(0),z(!0),Y(0))},[h,U]),E.useEffect(()=>{const ce=()=>{if(B||!M)return;const _e=window.pageYOffset||document.documentElement.scrollTop,Ye=document.documentElement.scrollHeight,Be=window.innerHeight;_e+Be>=Ye-500&&se()};return window.addEventListener("scroll",ce),()=>window.removeEventListener("scroll",ce)},[B,M,I,U,h,c]);const J=async()=>{try{const ce=localStorage.getItem("spotify_token"),_e=localStorage.getItem("spotify_token_expiry");if(ce&&_e&&Date.now()<parseInt(_e)){O(ce),Z(parseInt(_e));return}const Be=await fetch("https://your-api.vercel.app/api/spotify-token");if(!Be.ok)throw new Error("Failed to get Spotify token from backend");const lt=await Be.json();if(lt.access_token){const Jt=Date.now()+lt.expires_in*1e3-6e4;localStorage.setItem("spotify_token",lt.access_token),localStorage.setItem("spotify_token_expiry",Jt.toString()),O(lt.access_token),Z(Jt)}else throw new Error("No access token received")}catch(ce){console.error("Error getting Spotify token:",ce),rt.show("Failed to connect to Spotify. Please try again.","error"),a(!1)}},Y=async(ce=I,_e=!1)=>{if(U){_e?V(!0):a(!0);try{const Ye=Ie.find(Wn=>Wn.id===h),Be=c||Ye.query,lt=`https://api.spotify.com/v1/search?q=${encodeURIComponent(Be)}&type=track&limit=20&offset=${ce}&market=IN`,Jt=await fetch(lt,{headers:{Authorization:`Bearer ${U}`}});if(Jt.status===401){localStorage.removeItem("spotify_token"),localStorage.removeItem("spotify_token_expiry"),await J();return}if(!Jt.ok){const Wn=await Jt.text();throw new Error("Failed to fetch tracks")}const Mn=(await Jt.json()).tracks.items;(Mn.length===0||Mn.length<20)&&z(!1),n(_e?Wn=>[...Wn,...Mn]:Mn);const Qn=Mn.filter(Wn=>Wn.preview_url);!_e&&Qn.length===0&&Mn.length>0&&rt.show("Tracks loaded, but previews may not be available","info")}catch(Ye){console.error("Error fetching tracks:",Ye),rt.show("Failed to load tracks. Please try again.","error")}finally{a(!1),V(!1)}}},se=()=>{if(!B&&M){const ce=I+20;j(ce),Y(ce,!0)}},fe=ce=>{ce.preventDefault(),c.trim()&&(n([]),j(0),z(!0),Y(0))},be=async()=>{if(t)try{const ce=await Qa(hn(It,"users",t.uid));if(ce.exists()){const _e=ce.data();w(_e.spotifyFavorites||[])}}catch(ce){ce.code!=="unavailable"&&!ce.message?.includes("offline")&&console.error("Error loading favorites:",ce)}},Ve=async ce=>{if(!t){rt.show("Please login to save favorites","error");return}try{const _e=hn(It,"users",t.uid);v.includes(ce.id)?(await Ps(_e,{spotifyFavorites:Wo(ce.id)}),w(Be=>Be.filter(lt=>lt!==ce.id)),rt.show("Removed from favorites","info")):(await Ps(_e,{spotifyFavorites:Cc(ce.id)}),w(Be=>[...Be,ce.id]),rt.show("Added to favorites","info"))}catch(_e){console.error("Error toggling favorite:",_e),rt.show("Failed to update favorites","error")}},q=ce=>{if(!ce.preview_url){rt.show("Preview not available for this track","error");return}p?.id===ce.id?P.current&&!P.current.paused?(P.current.pause(),x(null)):(P.current?.play(),x(ce)):P.current&&(P.current.src=ce.preview_url,P.current.volume=S?0:N,P.current.play(),x(ce))},ae=ce=>{const _e=parseFloat(ce.target.value);A(_e),P.current&&(P.current.volume=_e),_e>0&&k(!1)},me=()=>{k(!S),P.current&&(P.current.volume=S?N:0)},ge=e.filter(ce=>ce.name.toLowerCase().includes(c.toLowerCase())||ce.artists?.some(_e=>_e.name.toLowerCase().includes(c.toLowerCase()))),ke=Rt();return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-black to-gray-900 pb-32",children:[o.jsx(Bn,{children:ee&&o.jsxs(o.Fragment,{children:[o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50",onClick:()=>C(!1)}),o.jsx(L.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-lg w-full border border-[#522cd5]/30 overflow-hidden",style:{background:"#0d0f21"},children:[o.jsx("div",{className:"relative border-b border-[#522cd5]/20 p-6",style:{background:"linear-gradient(135deg, #522cd5 0%, #ff47b5 100%)",opacity:.15},children:o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"})}),o.jsxs("div",{className:"relative p-6",style:{background:"#0d0f21"},children:[o.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[o.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center shrink-0 animate-pulse shadow-lg shadow-[#ff47b5]/50",style:{background:"linear-gradient(135deg, #522cd5 0%, #ff47b5 100%)"},children:o.jsx(pi,{className:"text-white",size:28})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold mb-1 flex items-center gap-2",style:{color:"#ffffff"},children:" Service Update"}),o.jsx("p",{className:"text-sm",style:{color:"#d1c4ff"},children:"Important information about music playback"})]}),o.jsx("button",{onClick:()=>C(!1),className:"shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-all hover:opacity-80",style:{background:"#2a2d43"},children:o.jsx(_n,{size:18,style:{color:"#ffffff"}})})]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsx("div",{className:"rounded-2xl p-4 border backdrop-blur-sm",style:{background:"#2a2d43",borderColor:"#522cd5"},children:o.jsxs("p",{className:"leading-relaxed",style:{color:"#ffffff"},children:["Due to ",o.jsx("span",{className:"font-bold",style:{color:"#ff47b5"},children:"Spotify API limitations"}),", music playback is currently unavailable on this page."]})}),o.jsx("div",{className:"rounded-2xl p-4 border backdrop-blur-sm",style:{background:"linear-gradient(135deg, #522cd5 0%, #ff47b5 100%)",opacity:.9,borderColor:"#ff47b5"},children:o.jsxs("p",{className:"leading-relaxed",style:{color:"#ffffff"},children:[" ",o.jsx("span",{className:"font-semibold",children:"Good news!"})," You can enjoy the full music streaming experience with unlimited playback on ",o.jsx("span",{className:"font-bold",children:"VibeTube"}),"."]})}),o.jsx("p",{className:"text-sm text-center",style:{color:"#d1c4ff"},children:"We're working hard to bring full Spotify integration back!"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>C(!1),className:"flex-1 px-6 py-3.5 rounded-xl font-semibold transition-all duration-200 hover:opacity-80",style:{background:"#2a2d43",color:"#ffffff"},children:"Stay Here"}),o.jsxs("button",{onClick:()=>ke("/vibetube"),className:"flex-1 px-6 py-3.5 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl hover:scale-105",style:{background:"#ff3f81",color:"#ffffff"},children:[o.jsx(qt,{size:20}),o.jsx("span",{children:"Go to VibeTube"}),o.jsx(cy,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})})]})}),o.jsx("audio",{ref:P,onEnded:()=>x(null)}),o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900/40 via-pink-900/40 to-fuchsia-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx("div",{className:"mb-6 rounded-2xl border overflow-hidden",style:{background:"#0d0f21",borderColor:"#522cd5"},children:o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4 p-4",children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center shrink-0 animate-pulse",style:{background:"linear-gradient(135deg, #522cd5 0%, #ff47b5 100%)"},children:o.jsx(pi,{className:"text-white",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-1 flex items-center gap-2",style:{color:"#ffffff"},children:" Service Update"}),o.jsxs("p",{className:"text-sm leading-relaxed",style:{color:"#d1c4ff"},children:["Due to ",o.jsx("span",{className:"font-semibold",style:{color:"#ff47b5"},children:"Spotify API limitations"}),", music playback is currently unavailable. Try ",o.jsx("span",{className:"font-semibold",style:{color:"#ff47b5"},children:"VibeTube"})," for full streaming experience!"]})]})]}),o.jsxs("button",{onClick:()=>ke("/vibetube"),className:"shrink-0 px-5 py-2.5 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 hover:scale-105 shadow-lg",style:{background:"#ff3f81",color:"#ffffff"},children:[o.jsx(qt,{size:18}),o.jsx("span",{children:"Go to VibeTube"}),o.jsx(cy,{size:16})]})]})}),o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 via-pink-500 to-fuchsia-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:o.jsx(Me,{size:32,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2",children:" Vibe Zone"}),o.jsxs("p",{className:"text-gray-300 text-lg",children:["Discover trending ",o.jsx("span",{className:"text-pink-400 font-semibold",children:"Hindi"})," tracks and fresh vibes from Spotify"]})]})]}),o.jsxs("form",{onSubmit:fe,className:"relative max-w-2xl",children:[o.jsx(hs,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:c,onChange:ce=>u(ce.target.value),placeholder:"Search Hindi vibes...",className:"w-full pl-12 pr-24 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent"}),o.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all text-sm font-medium",children:"Search"})]})]})})]}),o.jsx("div",{className:"sticky top-16 z-30 bg-gray-900/80 backdrop-blur-lg border-b border-white/10 py-4",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide",children:Ie.map(ce=>{const _e=ce.icon;return o.jsxs("button",{onClick:()=>{m(ce.id),u("")},className:`flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap transition-all ${h===ce.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg shadow-purple-600/30":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[o.jsx(_e,{size:16}),ce.name]},ce.id)})})})}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(L.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading vibes..."})]}):ge.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-6 text-center",children:o.jsxs("p",{className:"text-gray-400",children:["Found ",o.jsx("span",{className:"text-white font-semibold",children:ge.length})," tracks with 30s previews"]})}),o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ge.map((ce,_e)=>{const Ye=p?.id===ce.id,Be=v.includes(ce.id);return o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:_e*.05,duration:.3},whileHover:{scale:1.03,y:-5},onClick:()=>{ce.external_urls?.spotify&&window.open(ce.external_urls.spotify,"_blank","noopener,noreferrer")},className:"bg-white/10 backdrop-blur-lg hover:bg-white/15 rounded-2xl p-4 transition-all border border-white/10 hover:border-pink-500/50 hover:shadow-lg hover:shadow-pink-500/20 group cursor-pointer",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-gray-800 shadow-xl",children:o.jsx("img",{src:ce.album?.images?.[0]?.url||"/placeholder-album.png",alt:ce.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",loading:"lazy"})}),o.jsx("div",{className:"absolute top-3 right-3 bg-green-500 p-1.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(lc,{size:14,className:"text-white"})}),o.jsx("button",{onClick:lt=>{lt.stopPropagation(),q(ce)},disabled:!ce.preview_url,className:`absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center transition-opacity rounded-xl ${ce.preview_url?"opacity-0 group-hover:opacity-100":"opacity-50 cursor-not-allowed"}`,children:Ye?o.jsx(L.div,{initial:{scale:.8},animate:{scale:1},className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(dd,{size:32,className:"text-white",fill:"white"})}):o.jsx(L.div,{whileHover:{scale:1.1},className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(xt,{size:32,className:"text-white ml-1",fill:"white"})})}),Ye&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute top-3 left-3 bg-black/50 backdrop-blur-sm px-2 py-1 rounded-full",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-1 h-3 bg-pink-500 rounded animate-pulse"}),o.jsx("div",{className:"w-1 h-4 bg-pink-500 rounded animate-pulse delay-75"}),o.jsx("div",{className:"w-1 h-3 bg-pink-500 rounded animate-pulse delay-150"})]})})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("h3",{className:"text-white font-semibold truncate mb-1 group-hover:text-pink-400 transition-colors",children:ce.name}),o.jsx("p",{className:"text-gray-400 text-sm truncate",children:ce.artists?.map(lt=>lt.name).join(", ")})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("button",{onClick:lt=>{lt.stopPropagation(),Ve(ce)},className:"p-2 hover:bg-white/10 rounded-full transition-all",children:o.jsx(wn,{size:20,className:Be?"text-red-500 fill-red-500":"text-gray-400 hover:text-red-400"})}),ce.external_urls?.spotify&&o.jsx("a",{href:ce.external_urls.spotify,target:"_blank",rel:"noopener noreferrer",onClick:lt=>lt.stopPropagation(),className:"p-2 hover:bg-white/10 rounded-full transition-all group/link",title:"Open in Spotify",children:o.jsx(lc,{size:20,className:"text-gray-400 group-hover/link:text-green-400"})}),!ce.preview_url&&o.jsx("span",{className:"text-xs text-gray-500",children:"No preview"})]})]},ce.id)})}),B&&o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-8",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-pink-500/30 border-t-pink-500 rounded-full animate-spin mb-3"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading more tracks..."})]}),!M&&e.length>0&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:o.jsx("p",{className:"text-gray-400 text-sm",children:" You've reached the end! All tracks loaded."})})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-white text-xl font-semibold mb-2",children:"No Tracks Found"}),o.jsx("p",{className:"text-gray-400",children:c?"Try a different search term":"Unable to load tracks"})]})}),o.jsx(Bn,{children:p&&o.jsx(L.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 w-full max-w-3xl px-4",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-900/95 via-pink-900/95 to-fuchsia-900/95 backdrop-blur-xl rounded-2xl border border-white/20 shadow-2xl shadow-purple-900/50 p-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-800 shadow-lg",children:o.jsx("img",{src:p.album?.images?.[0]?.url||"/placeholder-album.png",alt:p.name,className:"w-full h-full object-cover"})}),o.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 rounded-full p-1.5",children:o.jsxs("div",{className:"flex items-center gap-0.5",children:[o.jsx("div",{className:"w-0.5 h-2 bg-white rounded animate-pulse"}),o.jsx("div",{className:"w-0.5 h-3 bg-white rounded animate-pulse delay-75"}),o.jsx("div",{className:"w-0.5 h-2 bg-white rounded animate-pulse delay-150"})]})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-white font-semibold truncate mb-0.5 text-sm",children:p.name}),o.jsx("p",{className:"text-gray-300 text-xs truncate",children:p.artists?.map(ce=>ce.name).join(", ")})]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[o.jsx("button",{onClick:me,className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:N===0||S?o.jsx(Vx,{size:20,className:"text-gray-300"}):N<.5?o.jsx(Volume1,{size:20,className:"text-gray-300"}):o.jsx(Mx,{size:20,className:"text-gray-300"})}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:N,onChange:ae,className:"w-24 h-1 bg-white/20 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-pink-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:hover:bg-pink-400"})]}),o.jsx("button",{onClick:()=>q(p),className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 rounded-full transition-all shadow-lg hover:shadow-xl hover:scale-105",children:o.jsx(dd,{size:20,className:"text-white",fill:"white"})}),o.jsx("button",{onClick:()=>Ve(p),className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:o.jsx(wn,{size:20,className:v.includes(p.id)?"text-red-500 fill-red-500":"text-gray-300"})})]})})})})]})},L0="https://your-api.vercel.app/api",xm={async getFavorites(t){try{const e=await fetch(`${L0}/favorites?userId=${t}`);if(!e.ok)throw new Error("Failed to fetch favorites");return(await e.json()).favorites||[]}catch(e){return console.error("Error fetching favorites:",e),[]}},async addToFavorites(t,e){try{const n=await fetch(`${L0}/favorites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,track:{videoId:e.videoId,title:e.title,channelTitle:e.channelTitle,thumbnail:e.thumbnail,duration:e.duration}})});if(!n.ok)throw new Error("Failed to add to favorites");return await n.json()}catch(n){throw console.error("Error adding to favorites:",n),n}},async removeFromFavorites(t,e){try{const n=await fetch(`${L0}/favorites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,videoId:e})});if(!n.ok)throw new Error("Failed to remove from favorites");return await n.json()}catch(n){throw console.error("Error removing from favorites:",n),n}},async isInFavorites(t,e){try{return(await this.getFavorites(t)).some(s=>s.videoId===e)}catch(n){return console.error("Error checking favorites:",n),!1}}},qN="https://your-api.vercel.app/api",vf={async getUserPlaylists(t,e){if(!t||!e)throw new Error("userId and accessToken are required");try{const n=new URL(`${qN}/youtube-playlists`);n.searchParams.append("userId",t),n.searchParams.append("accessToken",e);const s=await fetch(n.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){const c=await s.json();throw new Error(c.error||"Failed to fetch playlists")}return await s.json()}catch(n){throw console.error("Error fetching YouTube playlists:",n),n}},async getPlaylistItems(t,e,n){if(!t||!e||!n)throw new Error("userId, playlistId, and accessToken are required");try{const s=new URL(`${qN}/youtube-playlists`);s.searchParams.append("userId",t),s.searchParams.append("playlistId",e),s.searchParams.append("accessToken",n);const a=await fetch(s.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok){const u=await a.json();throw new Error(u.error||"Failed to fetch playlist items")}return await a.json()}catch(s){throw console.error("Error fetching playlist items:",s),s}},async validateAccessToken(t){if(!t)return!1;try{return(await fetch(`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${t}`)).ok}catch(e){return console.error("Token validation error:",e),!1}}},rq=({onSearch:t,isLoading:e,onShowHistory:n,showHistoryButton:s=!1,onShowYouTubePlaylists:a,showYouTubeButton:c=!1})=>{const[u,h]=E.useState(""),[m,p]=E.useState(!1),x=[{label:" Trending",value:"trending music 2024"},{label:" Top Hits",value:"top music hits"},{label:" Romantic",value:"romantic songs"},{label:" Rock",value:"rock music"},{label:" Piano",value:"piano instrumental"},{label:" Electronic",value:"electronic music"},{label:" Pop",value:"pop music hits"},{label:" Lo-Fi",value:"lofi hip hop"}],v=w=>{w.preventDefault(),u.trim()&&t(u.trim())};return o.jsxs("div",{className:"w-full space-y-4",children:[o.jsx("form",{onSubmit:v,className:"w-full",children:o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",value:u,onChange:w=>h(w.target.value),placeholder:" Search millions of music videos...",className:"w-full px-6 py-5 pl-14 bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-2xl border-2 border-white/20 hover:border-red-400/50 rounded-3xl text-white text-lg placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-400 transition-all shadow-2xl",disabled:e,"aria-label":"Search YouTube videos"}),o.jsx(hs,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-red-400 group-hover:scale-110 transition-transform",size:24}),e&&o.jsx(xM,{className:"absolute right-5 top-1/2 -translate-y-1/2 text-red-400 animate-spin",size:24}),o.jsxs("div",{className:"absolute right-16 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[c&&o.jsx("button",{type:"button",onClick:a,className:"p-2 text-red-500 hover:text-red-400 transition-colors hover:bg-red-500/10 rounded-lg",title:"My YouTube Playlists",children:o.jsx(qt,{size:20})}),s&&o.jsx("button",{type:"button",onClick:n,className:"p-2 text-gray-400 hover:text-red-400 transition-colors hover:bg-white/5 rounded-lg",title:"Search History",children:o.jsx(Tc,{size:20})}),o.jsx("button",{type:"button",onClick:()=>p(!m),className:"p-2 text-gray-400 hover:text-white transition-colors hover:bg-white/5 rounded-lg",title:"Quick Filters",children:o.jsx(Lj,{size:20})})]})]})}),o.jsx(Bn,{children:m&&o.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-wrap gap-2",children:x.map((w,N)=>o.jsx(L.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:N*.05},onClick:()=>{h(w.value),t(w.value)},className:"px-4 py-2 bg-gradient-to-r from-red-600/20 to-pink-600/20 hover:from-red-600/40 hover:to-pink-600/40 border border-red-400/30 rounded-full text-white text-sm font-medium backdrop-blur-xl transition-all hover:scale-105 shadow-lg",children:w.label},w.value))})})]})},aq=({results:t,onAdd:e,onPlayNow:n,onAddToFavorites:s,playlists:a,isLoading:c,error:u})=>{const[h,m]=E.useState(null),[p,x]=E.useState("grid");return u?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center px-4",children:[o.jsx(pi,{size:48,className:"text-red-400 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"YouTube API Error"}),o.jsx("p",{className:"text-gray-400 mb-4 max-w-md",children:u}),o.jsxs("div",{className:"mt-4 p-6 bg-red-500/10 border border-red-500/30 rounded-xl max-w-3xl text-left",children:[o.jsx("p",{className:"text-sm text-gray-300 mb-3",children:o.jsx("strong",{className:"text-white text-base",children:" Common Causes & Solutions:"})}),u.includes("restrictions")?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[o.jsx("p",{className:"text-yellow-300 font-semibold mb-2",children:" Most Likely Issue: API Key Restrictions"}),o.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Your YouTube API key has restrictions that prevent it from working on localhost. Here's how to fix it:"}),o.jsxs("ol",{className:"text-sm text-gray-300 space-y-2 ml-4 list-decimal",children:[o.jsxs("li",{children:["Open ",o.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:text-yellow-300 underline font-semibold",children:"Google Cloud Console  API Credentials"})]}),o.jsxs("li",{children:["Click on your API key (starts with: ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-cyan-300 font-mono text-xs",children:"AIza..."}),")"]}),o.jsxs("li",{children:["Under ",o.jsx("strong",{className:"text-white",children:'"Application restrictions"'}),": Select ",o.jsx("span",{className:"text-green-400 font-semibold",children:'"None"'})]}),o.jsxs("li",{children:["Under ",o.jsx("strong",{className:"text-white",children:'"API restrictions"'}),": Select ",o.jsx("span",{className:"text-green-400 font-semibold",children:`"Don't restrict key"`})," (for development)"]}),o.jsxs("li",{children:["Click ",o.jsx("strong",{className:"text-white",children:'"Save"'})]}),o.jsx("li",{children:"Wait 1-2 minutes for changes to propagate"}),o.jsx("li",{children:"Refresh this page (F5)"})]})]}),o.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[o.jsx("p",{className:"text-blue-300 font-semibold mb-2",children:" For Production:"}),o.jsxs("p",{className:"text-sm text-gray-300",children:["Once deployed, you can restrict the API key to your domain (e.g., ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-blue-300 font-mono text-xs",children:"yourdomain.com/*"}),") for security."]})]})]}):u.includes("quota exceeded")?o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-300",children:"Your YouTube API key has reached its daily quota limit. You can either wait until tomorrow or create a new API key:"}),o.jsxs("ol",{className:"text-sm text-gray-300 space-y-2 ml-4 list-decimal",children:[o.jsxs("li",{children:["Visit ",o.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-red-400 hover:text-red-300 underline font-semibold",children:"Google Cloud Console"})]}),o.jsx("li",{children:"Create a new project (or select existing)"}),o.jsxs("li",{children:["Enable ",o.jsx("strong",{className:"text-white",children:'"YouTube Data API v3"'})]}),o.jsx("li",{children:"Go to Credentials  Create Credentials  API Key"}),o.jsx("li",{children:"Copy the new API key"}),o.jsxs("li",{children:["Update your ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-red-300 font-mono text-xs",children:".env"})," file: ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-green-300 font-mono text-xs",children:"VITE_YOUTUBE_API_KEY=your_new_key"})]}),o.jsxs("li",{children:["Restart your dev server: ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-cyan-300 font-mono text-xs",children:"npm run dev"})]})]})]}):u.includes("API key")||u.includes("API Error")?o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"There's an issue with your YouTube API key configuration. Common causes:"}),o.jsxs("ul",{className:"text-sm text-gray-300 space-y-2 ml-4 list-disc",children:[o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"API Key Restrictions:"})," Your key might have HTTP referrer or IP restrictions. For local development, remove all restrictions."]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"API Not Enabled:"}),' Make sure "YouTube Data API v3" is enabled in your Google Cloud project.']}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Invalid Key:"})," The API key might be incorrect. Double-check it in your ",o.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded text-red-300 font-mono text-xs",children:".env"})," file."]})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mt-3",children:o.jsxs("p",{className:"text-sm text-yellow-300",children:[o.jsx("strong",{children:" Quick Fix:"})," Go to ",o.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:text-yellow-300 underline font-semibold",children:"API Credentials"}),'  Select your API key  Remove all "Application restrictions" and "API restrictions"  Save']})})]}):o.jsxs("p",{className:"text-sm text-gray-300",children:["Please check your YouTube API configuration in the ",o.jsx("code",{className:"bg-black/40 px-2 py-0.5 rounded text-red-300 font-mono",children:".env"})," file and ensure it's valid."]})]})]}):c?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((v,w)=>o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 animate-pulse",children:[o.jsx("div",{className:"aspect-video bg-white/10 rounded-lg mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-2/3"})]},w))}):t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[o.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.6},children:o.jsx(Me,{size:64,className:"text-red-400 mb-4 mx-auto"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Discover Amazing Music"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"Search for your favorite artists, songs, or genres"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zi,{className:"text-red-400",size:20}),o.jsxs("span",{className:"text-white font-semibold",children:[t.length," Videos Found"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded-lg transition-all ${p==="grid"?"bg-red-600 text-white":"bg-white/10 text-gray-400 hover:text-white"}`,children:o.jsx(sM,{size:18})}),o.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded-lg transition-all ${p==="list"?"bg-red-600 text-white":"bg-white/10 text-gray-400 hover:text-white"}`,children:o.jsx(Yi,{size:18})})]})]}),p==="grid"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map((v,w)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:w*.03,type:"spring"},className:"group bg-gradient-to-br from-white/10 via-white/5 to-transparent backdrop-blur-xl rounded-2xl overflow-visible border border-white/20 hover:border-red-400/60 transition-all shadow-xl hover:shadow-2xl hover:shadow-red-900/30 hover:-translate-y-2",children:[o.jsxs("div",{className:"relative aspect-video overflow-hidden cursor-pointer rounded-t-2xl",onClick:()=>n(v),children:[o.jsx("img",{src:v.thumbnail,alt:v.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(L.div,{whileHover:{scale:1.2},className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-2xl",children:o.jsx(xt,{size:28,className:"text-white ml-1",fill:"white"})})}),v.duration&&o.jsx("div",{className:"absolute bottom-3 right-3 px-2 py-1 bg-black/90 backdrop-blur-sm rounded-lg text-xs text-white font-bold border border-white/20",children:v.duration}),o.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-red-600/90 backdrop-blur-sm rounded-lg text-xs text-white font-bold",children:"HD"})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"text-white font-bold text-sm line-clamp-2 mb-2 group-hover:text-red-400 transition-colors leading-tight",children:v.title}),o.jsxs("p",{className:"text-gray-400 text-xs mb-3 truncate flex items-center gap-1",children:[o.jsx(qt,{size:12,className:"text-red-500"}),v.channelTitle]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>n(v),className:"flex items-center justify-center w-12 h-12 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all hover:scale-110",title:"Play Now",children:o.jsx(fy,{size:20,fill:"white"})}),o.jsx("button",{onClick:()=>s(v),className:"flex items-center justify-center w-12 h-12 bg-white/10 hover:bg-pink-500/30 rounded-xl text-white transition-all hover:scale-110",title:"Add to Favorites",children:o.jsx(wn,{size:20,className:"text-pink-400"})}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>m(h===v.videoId?null:v.videoId),className:`flex items-center justify-center w-12 h-12 rounded-xl text-white transition-all hover:scale-110 ${h===v.videoId?"bg-red-500/30 border-2 border-red-400":"bg-white/10 hover:bg-white/20"}`,title:"Add to Playlist",children:o.jsx(dy,{size:20,className:h===v.videoId?"text-red-400":""})}),o.jsx(Bn,{children:h===v.videoId&&o.jsx(L.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>m(null),children:o.jsx(L.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},onClick:N=>N.stopPropagation(),className:"w-80 bg-gray-900 backdrop-blur-xl border-2 border-white/30 rounded-2xl shadow-2xl overflow-hidden",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:"Add to Playlist"}),o.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:20})})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:a.map(N=>o.jsxs("button",{onClick:()=>{e(v,N.id),m(null)},className:"w-full px-4 py-3 text-left text-white hover:bg-red-600/70 bg-white/5 rounded-xl transition-colors text-sm font-medium flex items-center gap-3 group",children:[o.jsx(uy,{size:18,className:"text-red-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"flex-1",children:N.name}),o.jsx("span",{className:"text-xs text-gray-400 bg-white/10 px-2 py-1 rounded-full",children:N.tracks?.length||0})]},N.id))})]})})})})]})]})]})]},v.videoId))}),p==="list"&&o.jsx("div",{className:"space-y-3",children:t.map((v,w)=>o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.02},className:"group flex items-center gap-4 p-4 bg-gradient-to-r from-white/10 to-white/5 backdrop-blur-xl rounded-2xl border border-white/20 hover:border-red-400/60 transition-all shadow-lg hover:shadow-red-900/20",children:[o.jsxs("div",{className:"relative w-32 h-20 flex-shrink-0 rounded-xl overflow-hidden cursor-pointer",onClick:()=>n(v),children:[o.jsx("img",{src:v.thumbnail,alt:v.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(xt,{size:20,className:"text-white",fill:"white"})}),v.duration&&o.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-black/90 rounded text-xs text-white font-bold",children:v.duration})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-white font-bold text-sm line-clamp-2 mb-1 group-hover:text-red-400 transition-colors",children:v.title}),o.jsxs("p",{className:"text-gray-400 text-xs flex items-center gap-1",children:[o.jsx(qt,{size:12,className:"text-red-500"}),v.channelTitle]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsx("button",{onClick:()=>n(v),className:"p-3 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all hover:scale-110",title:"Play Now",children:o.jsx(fy,{size:18,fill:"white"})}),o.jsx("button",{onClick:()=>s(v),className:"p-3 bg-white/10 hover:bg-pink-500/30 rounded-xl text-white transition-all hover:scale-110",title:"Add to Favorites",children:o.jsx(wn,{size:18,className:"text-pink-400"})}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>m(h===v.videoId?null:v.videoId),className:`p-3 rounded-xl text-white transition-all hover:scale-110 ${h===v.videoId?"bg-red-500/30 border-2 border-red-400":"bg-white/10 hover:bg-white/20"}`,title:"Add to Playlist",children:o.jsx(dy,{size:18,className:h===v.videoId?"text-red-400":""})}),o.jsx(Bn,{children:h===v.videoId&&o.jsx(L.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>m(null),children:o.jsx(L.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},onClick:N=>N.stopPropagation(),className:"w-80 bg-gray-900 backdrop-blur-xl border-2 border-white/30 rounded-2xl shadow-2xl overflow-hidden",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:"Add to Playlist"}),o.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:20})})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2 custom-scrollbar",children:a.map(N=>o.jsxs("button",{onClick:()=>{e(v,N.id),m(null)},className:"w-full px-4 py-3 text-left text-white hover:bg-red-600/70 bg-white/5 rounded-xl transition-colors text-sm font-medium flex items-center gap-3 group",children:[o.jsx(uy,{size:18,className:"text-red-400 group-hover:scale-110 transition-transform"}),o.jsx("span",{className:"flex-1",children:N.name}),o.jsx("span",{className:"text-xs text-gray-400 bg-white/10 px-2 py-1 rounded-full",children:N.tracks?.length||0})]},N.id))})]})})})})]})]})]},v.videoId))})]})},oq=({currentTrack:t})=>t?o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsx("div",{className:"relative flex-1 flex flex-col items-center justify-center p-6",children:o.jsxs(L.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",damping:15},className:"relative group",children:[o.jsxs("div",{className:"w-80 h-80 rounded-3xl overflow-hidden shadow-2xl border-4 border-white/10",children:[o.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-4 -right-4 w-20 h-20 bg-gradient-to-br from-red-500 to-pink-500 rounded-full blur-xl opacity-60 animate-pulse"}),o.jsx("div",{className:"absolute -bottom-4 -left-4 w-24 h-24 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full blur-xl opacity-60 animate-pulse",style:{animationDelay:"1s"}})]})}),o.jsxs("div",{className:"text-center px-6 pb-6",children:[o.jsx(L.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-black mb-3 line-clamp-2 bg-gradient-to-r from-white via-red-200 to-pink-200 bg-clip-text text-transparent",children:t.title}),o.jsxs(L.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-gray-400 text-lg flex items-center justify-center gap-2",children:[o.jsx(qt,{size:20,className:"text-red-500"}),t.channelTitle]})]})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[o.jsxs(L.div,{initial:{scale:0},animate:{scale:1,rotate:360},transition:{type:"spring",duration:1},className:"relative mb-6",children:[o.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-red-600 to-pink-600 rounded-full flex items-center justify-center shadow-2xl",children:o.jsx(Me,{size:48,className:"text-white"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-600 to-pink-600 rounded-full animate-ping opacity-20"})]}),o.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Ready to Rock? "}),o.jsx("p",{className:"text-gray-400 text-center",children:"Search and play any music you love!"})]}),lq=({isPlaying:t,currentTime:e,duration:n,volume:s,isMuted:a,onPlayPause:c,onNext:u,onPrevious:h,onSeek:m,onVolumeChange:p,onToggleMute:x,isRepeat:v,isShuffle:w,onToggleRepeat:N,onToggleShuffle:A})=>{const S=P=>{if(!P||isNaN(P))return"0:00";const U=Math.floor(P/60),O=Math.floor(P%60);return`${U}:${O.toString().padStart(2,"0")}`},k=n>0?e/n*100:0;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"range",min:"0",max:n||100,value:e||0,onChange:P=>m(parseFloat(P.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-red-500 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer hover:[&::-webkit-slider-thumb]:bg-red-400","aria-label":"Seek video",style:{background:`linear-gradient(to right, rgb(239 68 68) 0%, rgb(239 68 68) ${k}%, rgba(255,255,255,0.2) ${k}%, rgba(255,255,255,0.2) 100%)`}}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[o.jsx("span",{children:S(e)}),o.jsx("span",{children:S(n)})]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:A,className:`p-2 rounded-full transition-colors ${w?"text-red-400 bg-red-400/20":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle shuffle",title:"Shuffle",children:o.jsx(Dx,{size:20})}),o.jsx("button",{onClick:h,className:"p-3 text-white hover:text-red-400 transition-all hover:scale-110","aria-label":"Previous video",children:o.jsx(Yj,{size:28,fill:"currentColor"})}),o.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"w-16 h-16 bg-gradient-to-r from-red-600 to-red-500 rounded-full flex items-center justify-center shadow-2xl hover:shadow-red-900/50 transition-all","aria-label":t?"Pause":"Play",children:t?o.jsx(dd,{size:32,className:"text-white",fill:"white"}):o.jsx(xt,{size:32,className:"text-white ml-1",fill:"white"})}),o.jsx("button",{onClick:u,className:"p-3 text-white hover:text-red-400 transition-all hover:scale-110","aria-label":"Next video",children:o.jsx(Zj,{size:28,fill:"currentColor"})}),o.jsx("button",{onClick:N,className:`p-2 rounded-full transition-colors ${v?"text-red-400 bg-red-400/20":"text-gray-400 hover:text-white"}`,"aria-label":"Toggle repeat",title:"Repeat",children:o.jsx(Hj,{size:20})})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-white transition-colors","aria-label":a?"Unmute":"Mute",children:a||s===0?o.jsx(Vx,{size:20}):o.jsx(Mx,{size:20})}),o.jsx("input",{type:"range",min:"0",max:"100",value:a?0:s,onChange:P=>p(parseInt(P.target.value)),className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-red-500 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer hover:[&::-webkit-slider-thumb]:bg-red-400","aria-label":"Volume",style:{background:`linear-gradient(to right, rgb(239 68 68) 0%, rgb(239 68 68) ${a?0:s}%, rgba(255,255,255,0.2) ${a?0:s}%, rgba(255,255,255,0.2) 100%)`}}),o.jsxs("span",{className:"text-xs text-gray-400 w-10 text-right",children:[a?0:s,"%"]})]})]})},cq=({currentTrack:t,isPlaying:e,currentTime:n,duration:s,volume:a,isMuted:c,onPlayPause:u,onNext:h,onPrevious:m,onSeek:p,onVolumeChange:x,onToggleMute:v,isRepeat:w,isShuffle:N,onToggleRepeat:A,onToggleShuffle:S})=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-2xl rounded-3xl border-2 border-white/20 shadow-2xl overflow-hidden",children:[o.jsx("div",{className:"p-6 bg-gradient-to-r from-red-900/30 to-pink-900/30 border-b border-white/10",children:o.jsxs("h2",{className:"text-2xl font-black text-white flex items-center gap-2",children:[o.jsx(Me,{className:"text-red-400",size:24}),"Now Playing"]})}),o.jsx(oq,{currentTrack:t}),o.jsx("div",{className:"p-6 border-t border-white/10",children:o.jsx(lq,{isPlaying:e,currentTime:n,duration:s,volume:a,isMuted:c,onPlayPause:u,onNext:h,onPrevious:m,onSeek:p,onVolumeChange:x,onToggleMute:v,isRepeat:w,isShuffle:N,onToggleRepeat:A,onToggleShuffle:S})})]}),uq=({playlists:t,onCreatePlaylist:e,onRenamePlaylist:n,onDeletePlaylist:s,currentPlaylistId:a,onSelectPlaylist:c})=>{const u=Rt(),[h,m]=E.useState(!1),[p,x]=E.useState(""),[v,w]=E.useState(null),[N,A]=E.useState(""),S=()=>{p.trim()&&(e(p.trim()),x(""),m(!1))},k=P=>{N.trim()&&(n(P,N.trim()),w(null),A(""))};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Me,{size:20,className:"text-red-400"}),o.jsx("h3",{className:"text-xl font-black text-white",children:"My Playlists"})]}),o.jsxs("button",{onClick:()=>m(!h),className:"flex items-center gap-2 px-3 py-2 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-all hover:scale-105","aria-label":"Create new playlist",children:[o.jsx(uy,{size:18}),o.jsx("span",{className:"text-sm font-medium",children:"New"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("button",{onClick:()=>u("/playlists"),className:"flex flex-col items-center justify-center gap-2 p-4 bg-gradient-to-br from-purple-600/20 to-indigo-600/20 hover:from-purple-600/30 hover:to-indigo-600/30 rounded-xl border border-purple-400/30 hover:border-purple-400/50 transition-all group",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx(ud,{size:20,className:"text-purple-400"})}),o.jsx("span",{className:"text-xs font-semibold text-purple-200",children:"View All"})]}),o.jsxs("button",{onClick:()=>u("/favorites"),className:"flex flex-col items-center justify-center gap-2 p-4 bg-gradient-to-br from-red-600/20 to-pink-600/20 hover:from-red-600/30 hover:to-pink-600/30 rounded-xl border border-red-400/30 hover:border-red-400/50 transition-all group",children:[o.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx(wn,{size:20,className:"text-red-400"})}),o.jsx("span",{className:"text-xs font-semibold text-red-200",children:"Liked Songs"})]})]}),o.jsx(Bn,{children:h&&o.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mb-4",children:o.jsxs("div",{className:"flex gap-2 p-3 bg-white/5 rounded-xl border border-white/10",children:[o.jsx("input",{type:"text",value:p,onChange:P=>x(P.target.value),onKeyPress:P=>P.key==="Enter"&&S(),placeholder:"Playlist name...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0}),o.jsx("button",{onClick:S,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-all hover:scale-105 shrink-0",title:"Create",children:o.jsx(q2,{size:18})}),o.jsx("button",{onClick:()=>{m(!1),x("")},className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-all hover:scale-105 shrink-0",title:"Cancel",children:o.jsx(_n,{size:18})})]})})}),o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar pr-2",children:t.map((P,U)=>o.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:U*.05},className:`group relative overflow-hidden rounded-xl transition-all ${a===P.id?"bg-gradient-to-r from-red-600/30 to-pink-600/20 border-2 border-red-400/50 shadow-lg shadow-red-900/20":"bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20"}`,children:v===P.id?o.jsxs("div",{className:"flex items-center gap-2 p-3",children:[o.jsx("input",{type:"text",value:N,onChange:O=>A(O.target.value),onKeyPress:O=>O.key==="Enter"&&k(P.id),className:"flex-1 px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-red-500",autoFocus:!0}),o.jsx("button",{onClick:()=>k(P.id),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all hover:scale-105",title:"Save",children:o.jsx(q2,{size:16,className:"text-white"})}),o.jsx("button",{onClick:()=>{w(null),A("")},className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all hover:scale-105",title:"Cancel",children:o.jsx(_n,{size:16,className:"text-white"})})]}):o.jsxs("div",{className:"flex items-center gap-3 p-3",children:[o.jsxs("button",{onClick:()=>c(P.id),className:"flex-1 text-left flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a===P.id?"bg-red-500/30":"bg-white/10"}`,children:o.jsx(ud,{size:18,className:a===P.id?"text-red-400":"text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`font-bold text-sm truncate ${a===P.id?"text-red-400":"text-white"}`,children:P.name}),o.jsxs("p",{className:"text-xs text-gray-400",children:[P.tracks.length," ",P.tracks.length===1?"track":"tracks"]})]})]}),o.jsx("div",{className:"flex gap-1",children:P.id!=="default"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{w(P.id),A(P.name)},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Rename",children:o.jsx(CM,{size:14})}),o.jsx("button",{onClick:()=>s(P.id),className:"p-2 text-red-400 hover:bg-red-400/20 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Delete",children:o.jsx(La,{size:14})})]})})]})},P.id))})]})},dq=({playlist:t,currentIndex:e,onPlay:n,onRemove:s,onReorder:a})=>{const[c,u]=E.useState(null),h=x=>{u(x)},m=(x,v)=>{x.preventDefault(),c!==null&&c!==v&&(a(c,v),u(v))},p=()=>{u(null)};return t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx(ud,{size:48,className:"text-gray-600 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Playlist is empty"}),o.jsx("p",{className:"text-gray-400",children:"Add videos from search results"})]}):o.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto custom-scrollbar",children:t.map((x,v)=>o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.03},draggable:"true",onDragStart:()=>h(v),onDragOver:w=>m(w,v),onDragEnd:p,className:`group flex items-center gap-3 p-3 rounded-xl transition-all cursor-move ${e===v?"bg-gradient-to-r from-red-600/30 to-red-500/30 border border-red-400/50":"bg-white/5 hover:bg-white/10 border border-white/10"}`,children:[o.jsx(rM,{size:16,className:"text-gray-500 shrink-0"}),o.jsxs("button",{onClick:()=>n(v),className:"relative w-16 h-16 shrink-0 rounded-lg overflow-hidden group-hover:ring-2 ring-red-400 transition-all",children:[o.jsx("img",{src:x.thumbnail,alt:x.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(xt,{size:20,className:"text-white",fill:"white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`font-semibold text-sm line-clamp-1 ${e===v?"text-red-400":"text-white"}`,children:x.title}),o.jsx("p",{className:"text-gray-400 text-xs truncate",children:x.channelTitle}),x.duration&&o.jsx("p",{className:"text-gray-500 text-xs",children:x.duration})]}),o.jsx("button",{onClick:()=>s(v),className:"p-2 text-gray-400 hover:text-red-400 transition-colors shrink-0","aria-label":`Remove ${x.title}`,children:o.jsx(La,{size:18})})]},`track-${v}-${x.videoId}-${x.title.substring(0,10)}`))})},hq=({playlists:t,onCreatePlaylist:e,onRenamePlaylist:n,onDeletePlaylist:s,currentPlaylistId:a,onSelectPlaylist:c,playlist:u,currentIndex:h,onPlay:m,onRemove:p,onReorder:x,showPlaylist:v,onTogglePlaylist:w})=>{const N=t.find(A=>A.id===a)||t[0];return o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[o.jsx(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-2xl rounded-3xl p-6 border-2 border-white/20 shadow-2xl",children:o.jsx(uq,{playlists:t,onCreatePlaylist:e,onRenamePlaylist:n,onDeletePlaylist:s,currentPlaylistId:a,onSelectPlaylist:c})}),o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-2xl rounded-3xl p-6 border-2 border-white/20 shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(ud,{className:"text-red-400"}),N.name," (",u.length,")"]}),o.jsx("button",{onClick:w,className:"lg:hidden p-2 text-red-400 hover:bg-red-400/20 rounded-lg transition-colors",children:v?o.jsx(_n,{size:20}):o.jsx(ud,{size:20})})]}),o.jsx("div",{className:`${v?"block":"hidden"} lg:block`,children:o.jsx(dq,{playlist:u,currentIndex:h,onPlay:m,onRemove:p,onReorder:x})})]})]})},fq=({userId:t,onSelectQuery:e,onClose:n})=>{const[s,a]=E.useState([]),[c,u]=E.useState(!0);E.useEffect(()=>{h()},[t]);const h=async()=>{if(t){u(!0);try{const x=await gm.getSearchHistory(t,20);a(x)}catch(x){console.error("Failed to load search history:",x)}finally{u(!1)}}},m=async()=>{if(confirm("Clear all search history?"))try{await gm.clearHistory(t),a([]);const x=document.createElement("div");x.className="fixed top-4 right-4 z-50 bg-green-600 text-white px-6 py-3 rounded-xl shadow-2xl",x.textContent="Search history cleared",document.body.appendChild(x),setTimeout(()=>x.remove(),2e3)}catch(x){console.error("Failed to clear history:",x),alert("Failed to clear search history")}},p=x=>{const v=new Date(x),N=new Date-v,A=Math.floor(N/6e4),S=Math.floor(N/36e5),k=Math.floor(N/864e5);return A<1?"Just now":A<60?`${A}m ago`:S<24?`${S}h ago`:k<7?`${k}d ago`:v.toLocaleDateString()};return o.jsx(Bn,{children:o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:n,children:o.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),className:"w-full max-w-2xl bg-gradient-to-br from-gray-900 to-black rounded-3xl border-2 border-white/20 shadow-2xl overflow-hidden",children:[o.jsx("div",{className:"p-6 bg-gradient-to-r from-red-900/40 to-pink-900/40 border-b border-white/10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Tc,{className:"text-red-400",size:28}),o.jsx("h2",{className:"text-2xl font-black text-white",children:"Search History"})]}),o.jsxs("div",{className:"flex gap-2",children:[s.length>0&&o.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/20 rounded-xl transition-all",title:"Clear All",children:o.jsx(La,{size:20})}),o.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition-all",children:o.jsx(_n,{size:20})})]})]})}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto p-6",children:c?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"w-12 h-12 border-4 border-red-500/30 border-t-red-500 rounded-full animate-spin"})}):s.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o.jsx(hs,{size:64,className:"text-gray-600 mb-4"}),o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No search history"}),o.jsx("p",{className:"text-gray-400",children:"Your searches will appear here"})]}):o.jsx("div",{className:"space-y-2",children:s.map((x,v)=>o.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.03},onClick:()=>{e(x.originalQuery||x.query),n()},className:"w-full flex items-center justify-between p-4 bg-white/5 hover:bg-white/10 rounded-xl transition-all group border border-white/10 hover:border-red-400/50",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center shrink-0",children:o.jsx(hs,{size:18,className:"text-red-400"})}),o.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[o.jsx("p",{className:"text-white font-semibold truncate",children:x.originalQuery||x.query}),o.jsxs("p",{className:"text-gray-400 text-sm",children:[x.resultsCount||0," results  ",p(x.timestamp)]})]})]}),o.jsx("div",{className:"text-red-400 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:o.jsx(hs,{size:20})})]},x._id||v))})})]})})})},Ou="https://your-api.vercel.app/api",Cr={async getUserPlaylists(t){try{const e=await fetch(`${Ou}/playlists?userId=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch playlists");return await e.json()}catch(e){throw console.error("Error fetching user playlists:",e),e}},async createPlaylist(t,e,n=[],s="youtube"){try{const a=await fetch(`${Ou}/playlists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,name:e,tracks:n,source:s})});if(!a.ok)throw new Error("Failed to create playlist");return await a.json()}catch(a){throw console.error("Error creating playlist:",a),a}},async updatePlaylist(t,e){try{const n=await fetch(`${Ou}/playlists`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlistId:t,...e})});if(!n.ok)throw new Error("Failed to update playlist");return await n.json()}catch(n){throw console.error("Error updating playlist:",n),n}},async addTrackToPlaylist(t,e){try{const n=await fetch(`${Ou}/playlists`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlistId:t,addTrack:e})});if(!n.ok)throw new Error("Failed to add track");return await n.json()}catch(n){throw console.error("Error adding track to playlist:",n),n}},async deletePlaylist(t){try{const e=await fetch(`${Ou}/playlists`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({playlistId:t})});if(!e.ok){const n=await e.json();throw console.error("Delete API error:",n),new Error(n.error||"Failed to delete playlist")}return await e.json()}catch(e){throw console.error("Error deleting playlist:",e),e}}},mq=({isOpen:t,onClose:e,userId:n,accessToken:s,onPlayVideo:a,onRefreshAuth:c})=>{const[u,h]=E.useState([]),[m,p]=E.useState(!1),[x,v]=E.useState(null),[w,N]=E.useState(null),[A,S]=E.useState([]),[k,P]=E.useState(!1),[U,O]=E.useState(!1),[F,Z]=E.useState(new Set),[ee,C]=E.useState("");E.useEffect(()=>{t&&n&&s&&I()},[t,n,s]);const I=async()=>{p(!0),v(null);try{const J=await vf.getUserPlaylists(n,s);h(J.playlists||[]),J.playlists.length===0&&v("No playlists found. Create playlists on YouTube first!")}catch(J){console.error("Error fetching playlists:",J),J.message.includes("expired")||J.message.includes("TOKEN_EXPIRED")?v(` Your Google access token has expired.

Don't worry, we can refresh it automatically!`):J.message.includes("quotas")||J.message.includes("denied")?v(`YouTube API is not available. To enable this feature:

1. Go to Google Cloud Console
2. Enable YouTube Data API v3
3. Configure OAuth consent screen

For now, you can still search and play videos directly!`):J.message.includes("token")||J.message.includes("sign in")?v("Your session has expired. Please sign out and sign in with Google again."):v(J.message||"Failed to load playlists. Please try again later.")}finally{p(!1)}},j=async J=>{P(!0),v(null);try{const Y=await vf.getPlaylistItems(n,J,s);S(Y.items||[]),Y.items.length===0&&v("This playlist is empty!")}catch(Y){console.error("Error fetching playlist items:",Y),v(Y.message||"Failed to load playlist items.")}finally{P(!1)}},M=J=>{N(J),S([]),j(J.id)},z=()=>{N(null),S([]),v(null)},B=J=>{a&&a({videoId:J.videoId,title:J.title,channelTitle:J.channelTitle,thumbnail:J.thumbnail,duration:"N/A"})},V=async J=>{O(!0),v(null),C("");try{const se=(await vf.getPlaylistItems(n,J.id,s)).items||[];if(se.length===0){v("This playlist is empty!");return}const fe=se.map(be=>({id:be.videoId,videoId:be.videoId,title:be.title,artist:be.channelTitle,channelTitle:be.channelTitle,thumbnail:be.thumbnail,source:"youtube",duration:"N/A"}));await Cr.createPlaylist(n,J.title,fe,"youtube"),Z(be=>new Set([...be,J.id])),C(` "${J.title}" imported successfully! (${fe.length} tracks)`),setTimeout(()=>C(""),3e3),console.log(` Playlist "${J.title}" imported with ${fe.length} tracks`)}catch(Y){console.error("Error importing playlist:",Y),v(Y.message||"Failed to import playlist. Please try again.")}finally{O(!1)}},Ie=async()=>{O(!0),v(null),C("");try{let J=0,Y=0;for(const se of u){if(F.has(se.id)){console.log(` Skipping "${se.title}" (already imported)`);continue}try{const be=(await vf.getPlaylistItems(n,se.id,s)).items||[];if(be.length===0)continue;const Ve=be.map(q=>({id:q.videoId,videoId:q.videoId,title:q.title,artist:q.channelTitle,channelTitle:q.channelTitle,thumbnail:q.thumbnail,source:"youtube",duration:"N/A"}));await Cr.createPlaylist(n,se.title,Ve,"youtube"),Z(q=>new Set([...q,se.id])),J++,Y+=Ve.length,console.log(` Imported "${se.title}" (${Ve.length} tracks)`)}catch(fe){console.error(`Failed to import "${se.title}":`,fe)}}J>0?(C(` Imported ${J} playlist(s) with ${Y} total tracks!`),setTimeout(()=>C(""),5e3)):v("All playlists are already imported or empty.")}catch(J){console.error("Error importing playlists:",J),v("Failed to import playlists. Please try again.")}finally{O(!1)}};return t?o.jsx(Bn,{children:o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:o.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-gray-900 via-red-900/20 to-gray-900 rounded-2xl w-full max-w-4xl max-h-[80vh] overflow-hidden shadow-2xl border border-white/10",onClick:J=>J.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-gradient-to-r from-red-900/30 to-pink-900/30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(qt,{className:"text-red-500",size:32}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:w?w.title:"My YouTube Playlists"}),w&&o.jsx("button",{onClick:z,className:"text-sm text-gray-400 hover:text-white transition-colors mt-1",children:" Back to playlists"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!w&&u.length>0&&o.jsx("button",{onClick:Ie,disabled:U,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2 text-sm font-medium",children:U?o.jsxs(o.Fragment,{children:[o.jsx(b0,{className:"animate-spin",size:16}),"Importing..."]}):o.jsxs(o.Fragment,{children:[o.jsx($f,{size:16}),"Import All"]})}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-lg",children:o.jsx(_n,{size:24})})]})]}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[ee&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},className:"mb-4 p-4 bg-green-600/20 border border-green-500/50 rounded-lg flex items-center gap-3",children:[o.jsx(Ca,{className:"text-green-500",size:24}),o.jsx("p",{className:"text-green-100 font-medium",children:ee})]}),(m||k)&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[o.jsx(b0,{className:"text-red-500 animate-spin mb-4",size:48}),o.jsx("p",{className:"text-gray-400",children:m?"Loading playlists...":"Loading playlist items..."})]}),x&&!m&&!k&&o.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[o.jsx(pi,{className:"text-red-500 mb-4",size:48}),o.jsx("p",{className:"text-gray-300 text-center max-w-2xl whitespace-pre-line leading-relaxed",children:x}),(x.includes("sign in")||x.includes("expired"))&&c&&o.jsxs("div",{className:"mt-6 flex flex-col items-center gap-3",children:[o.jsxs("button",{onClick:async()=>{try{p(!0),v(null),await c(),await I()}catch(J){console.error("Failed to refresh auth:",J),v("Failed to refresh access. Please try again.")}finally{p(!1)}},className:"px-8 py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white font-semibold rounded-lg transition-all shadow-lg hover:shadow-red-500/50 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Refresh Google Access"]}),o.jsx("p",{className:"text-xs text-gray-500",children:"No need to logout, just reauthorize."})]}),x.includes("Google Cloud Console")&&o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Alternative: Search videos directly instead"}),o.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Close"})]})]}),!m&&!w&&u.length>0&&o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(J=>{const Y=F.has(J.id);return o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/5 rounded-xl overflow-hidden border border-white/10 hover:border-red-500/50 transition-all",children:[o.jsxs("div",{className:"relative aspect-video cursor-pointer group",onClick:()=>M(J),children:[o.jsx("img",{src:J.thumbnail,alt:J.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(xt,{className:"text-white",size:48})}),o.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/80 px-2 py-1 rounded text-xs text-white",children:[J.itemCount," videos"]}),Y&&o.jsxs("div",{className:"absolute top-2 right-2 bg-green-600 px-2 py-1 rounded text-xs text-white flex items-center gap-1",children:[o.jsx(Ca,{size:12}),"Imported"]})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"text-white font-semibold text-sm line-clamp-2 mb-3",children:J.title}),o.jsx("button",{onClick:se=>{se.stopPropagation(),V(J)},disabled:U||Y,className:`w-full px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm font-medium ${Y?"bg-green-600/30 text-green-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:Y?o.jsxs(o.Fragment,{children:[o.jsx(Ca,{size:16}),"Imported"]}):U?o.jsxs(o.Fragment,{children:[o.jsx(b0,{className:"animate-spin",size:16}),"Importing..."]}):o.jsxs(o.Fragment,{children:[o.jsx($f,{size:16}),"Import Playlist"]})})]})]},J.id)})}),!k&&w&&A.length>0&&o.jsx("div",{className:"space-y-3",children:A.map((J,Y)=>o.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Y*.05},className:"bg-white/5 rounded-lg p-4 border border-white/10 hover:border-red-500/50 transition-all group cursor-pointer",onClick:()=>B(J),children:o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"relative w-32 h-20 flex-shrink-0 rounded overflow-hidden",children:[o.jsx("img",{src:J.thumbnail,alt:J.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(xt,{className:"text-white",size:32})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-white font-semibold text-sm line-clamp-2 mb-1",children:J.title}),o.jsxs("p",{className:"text-gray-400 text-xs flex items-center gap-2",children:[o.jsx(zj,{size:12}),J.channelTitle]})]}),o.jsx("button",{onClick:se=>{se.stopPropagation(),B(J)},className:"flex-shrink-0 w-10 h-10 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center transition-colors opacity-0 group-hover:opacity-100",children:o.jsx(xt,{className:"text-white",size:20,fill:"white"})})]})},J.id))})]})]})})}):null},Fl="<YOUR_YOUTUBE_API_KEY>",bf="https://www.googleapis.com/youtube/v3",pq=()=>{const t=Rt(),e=sr(),{currentUser:n,googleAccessToken:s,refreshGoogleAuth:a}=Dn(),c=e.state?.autoPlayVideo,h=new URLSearchParams(e.search).get("search"),[m,p]=E.useState([]),[x,v]=E.useState([{id:"default",name:"My Playlist",tracks:[]}]),[w,N]=E.useState("default"),[A,S]=E.useState(-1),[k,P]=E.useState(null),[U,O]=E.useState(!1),[F,Z]=E.useState(0),[ee,C]=E.useState(0),[I,j]=E.useState(100),[M,z]=E.useState(!1),[B,V]=E.useState(!1),[Ie,J]=E.useState(!1),[Y,se]=E.useState(!1),[fe,be]=E.useState(null),[Ve,q]=E.useState(!1),[ae,me]=E.useState(!1),[ge,ke]=E.useState(!1),[ce,_e]=E.useState(null),[Ye,Be]=E.useState(!0),[lt,Jt]=E.useState(!1),[wi,Mn]=E.useState("top music 2024"),[Qn,Wn]=E.useState(!1),or=["kJQP7kiw5Fk","JGwWNGJdvx8","60ItHLz5WEA","RgKAFK5djSk","CevxZvSJLk8","hTWKbfoikeg","9bZkp7q19f0","SlPhMPnQ58k","OPf0YbXqDm0","2Vv-BfVoq4g","ru0K8uYEZWw","lWA2pjMjpBs","nfWlot6h_JM","YQHsXMglC9A","pRpeEdMmmQ0","450p7goxZqg","hLQl3WQQoQ0","FM7MFYoylVs","fJ9rUzIMcZQ","DyDfgMOUjCI","ZbZSe6N_BXs","S5L3JwHiGp0","kXYiU_JCYtU","Pkh8UtuejGw"],Pe=E.useRef(null),_i=E.useRef(null);E.useRef(null);const Pt=E.useRef(!1),Ot=(x.find(ue=>ue.id===w)||x[0]).tracks;E.useEffect(()=>{const ue=localStorage.getItem("vibetube_playlists");if(ue)try{const xe=JSON.parse(ue);v(xe)}catch(xe){console.error("Failed to load playlists:",xe)}},[]),E.useEffect(()=>{localStorage.setItem("vibetube_playlists",JSON.stringify(x))},[x]),E.useEffect(()=>{let ue=0;const xe=200,Te=Ee=>{if(Ee.target.tagName==="INPUT"||Ee.target.tagName==="TEXTAREA")return;const et=Date.now();if(!(et-ue<xe))switch(ue=et,Ee.key.toLowerCase()){case" ":Ee.preventDefault(),Xa(),console.log(" Keyboard: Space pressed - Play/Pause");break;case"arrowright":Ee.preventDefault(),gs(),console.log(" Keyboard: Right arrow pressed - Next track");break;case"arrowleft":Ee.preventDefault(),Ni(),console.log(" Keyboard: Left arrow pressed - Previous track");break;case"arrowup":Ee.preventDefault(),Jn(Math.min(I+10,100)),console.log(" Keyboard: Up arrow pressed - Volume up");break;case"arrowdown":Ee.preventDefault(),Jn(Math.max(I-10,0)),console.log(" Keyboard: Down arrow pressed - Volume down");break;case"m":Ee.preventDefault(),ys(),console.log(" Keyboard: M pressed - Mute/Unmute");break;case"s":Ee.preventDefault();const Ze=!Ie;J(Ze),console.log(" Keyboard: S pressed - Shuffle",Ze?"ON":"OFF");break;case"r":Ee.preventDefault();const jt=!B;V(jt),console.log(" Keyboard: R pressed - Repeat",jt?"ON":"OFF");break}};return window.addEventListener("keydown",Te),()=>window.removeEventListener("keydown",Te)},[U,I,M,Ie,B,A,Ot]),E.useEffect(()=>{if(!window.YT){const ue=document.createElement("script");ue.src="https://www.youtube.com/iframe_api";const xe=document.getElementsByTagName("script")[0];xe.parentNode.insertBefore(ue,xe)}return window.onYouTubeIframeAPIReady=()=>{Pe.current=new window.YT.Player("yt-player",{height:"360",width:"640",playerVars:{controls:1,rel:0,modestbranding:1,playsinline:1},events:{onReady:ue=>{console.log("YouTube Player Ready"),ue.target.setVolume(I)},onStateChange:ue=>{ue.data===window.YT.PlayerState.PLAYING?(O(!0),Rc()):ue.data===window.YT.PlayerState.PAUSED?(O(!1),qr()):ue.data===window.YT.PlayerState.ENDED&&Tn()}}})},()=>{qr()}},[]),E.useEffect(()=>{if(Pe.current&&Pe.current.getIframe){const ue=Pe.current.getIframe(),xe=document.getElementById("yt-player");xe&&ue&&(xe.appendChild(ue),ue.style.width="1px",ue.style.height="1px")}},[]),E.useEffect(()=>{h&&!Qn&&(Mn(h),ms(h),Wn(!0))},[]),E.useEffect(()=>{if(c&&Pe.current&&!Pt.current){console.log(" Autoplay from Playlists:",c),Pt.current=!0;const ue={videoId:c.videoId,title:c.title,channelTitle:c.channelTitle,thumbnail:c.thumbnail};Gr(ue),t(e.pathname,{replace:!0,state:{}})}},[c,Pe.current]);const Rc=()=>{qr(),_i.current=setInterval(()=>{Pe.current&&Pe.current.getCurrentTime&&(Z(Pe.current.getCurrentTime()),Pe.current.getDuration&&C(Pe.current.getDuration()))},100)},qr=()=>{_i.current&&(clearInterval(_i.current),_i.current=null)},Tn=E.useCallback(()=>{const xe=(x.find(Te=>Te.id===w)||x[0])?.tracks||[];if(console.log(" Video ended. Repeat:",B,"Shuffle:",Ie,"Playlist length:",xe.length,"Current index:",A),B)console.log(" Repeat is ON - Replaying current video"),Pe.current&&Pe.current.playVideo&&Pe.current.playVideo();else if(xe.length>0&&A!==-1){console.log(" Playing next video");let Te;Ie?(Te=Math.floor(Math.random()*xe.length),console.log(` Shuffle is ON - Playing random track #${Te}`)):(Te=(A+1)%xe.length,console.log(` Shuffle is OFF - Playing next track #${Te}`));const Ee=xe[Te];Ee&&Pe.current&&Pe.current.loadVideoById&&(S(Te),P(Ee),Pe.current.loadVideoById(Ee.videoId),Pe.current.playVideo())}else console.log(" No more tracks to play"),O(!1)},[B,Ie,x,w,A]),Ti=ue=>{const xe=ue.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!xe)return null;const Te=parseInt(xe[1])||0,Ee=parseInt(xe[2])||0,et=parseInt(xe[3])||0;return Te>0?`${Te}:${Ee.toString().padStart(2,"0")}:${et.toString().padStart(2,"0")}`:`${Ee}:${et.toString().padStart(2,"0")}`},$r=E.useRef(0),Wa=1e3,ms=async(ue,xe=!1,Te=null)=>{const Ee=Date.now();if(!(Ee-$r.current<Wa&&!xe)){$r.current=Ee,xe?Jt(!0):(se(!0),p([]),_e(null),Be(!0)),be(null),Mn(ue);try{const et=Te?`&pageToken=${Te}`:"",Ze=await fetch(`${bf}/search?part=snippet&type=video&videoCategoryId=10&maxResults=24&q=${encodeURIComponent(ue)}${et}&key=${Fl}`);if(!Ze.ok){const gn=await Ze.json().catch(()=>({}));if(console.error("YouTube API Error:",{status:Ze.status,statusText:Ze.statusText,error:gn}),Ze.status===403){be("YouTube API quota exceeded. Please try again later."),p([]),se(!1),Jt(!1);return}else if(Ze.status===400){be("YouTube API key issue. Please check your API key in the .env file."),p([]),se(!1),Jt(!1);return}throw new Error(gn.error?.message||"Failed to search videos. Please try again.")}const jt=await Ze.json();if(!jt.items||jt.items.length===0){xe||p([]),Be(!1),se(!1),Jt(!1);return}_e(jt.nextPageToken||null),Be(!!jt.nextPageToken);const si=jt.items.map(gn=>gn.id.videoId).join(","),lr=await(await fetch(`${bf}/videos?part=contentDetails&id=${si}&key=${Fl}`)).json(),xs=jt.items.map((gn,vs)=>{const es=lr.items[vs],Ut=es?Ti(es.contentDetails.duration):null;return{videoId:gn.id.videoId,title:gn.snippet.title,channelTitle:gn.snippet.channelTitle,thumbnail:gn.snippet.thumbnails.medium.url,duration:Ut}});if(xe)p(gn=>[...gn,...xs]);else if(p(xs),n&&ue!=="top music 2024")try{await gm.addToHistory(n.uid,ue,xs.length),console.log(" Search saved to history")}catch(gn){console.error("Failed to save search history:",gn)}}catch(et){console.error("Search error:",et);const Ze=et.message||"Failed to search videos. Please try again.";be(Ze),!xe&&m.length===0&&p([])}finally{se(!1),Jt(!1)}}},Xo=E.useCallback(()=>{!lt&&Ye&&ce&&ms(wi,!0,ce)},[lt,Ye,ce,wi]);E.useEffect(()=>{(async()=>{if(!h){se(!0);try{const xe=or.join(","),Te=await fetch(`${bf}/videos?part=snippet,contentDetails&id=${xe}&key=${Fl}`);if(!Te.ok){const Ze=await Te.json().catch(()=>({}));console.error("YouTube API Error on initial load:",{status:Te.status,statusText:Te.statusText,errorDetails:Ze,apiKey:Fl?`${Fl.substring(0,10)}...`:"NOT SET",requestUrl:`${bf}/videos?part=snippet,contentDetails&id=<VIDEO_IDS>&key=<KEY>`}),Te.status===400?be("YouTube API key has restrictions. Please remove API restrictions in Google Cloud Console for localhost development."):Te.status===403?be("YouTube API quota exceeded. Please wait or create a new API key."):be(`YouTube API Error: ${Ze.error?.message||"Unknown error"}`),p([]),se(!1);return}const Ee=await Te.json();if(!Ee.items||Ee.items.length===0){be("No videos found. The API key may have restrictions."),p([]);return}const et=Ee.items.map(Ze=>({videoId:Ze.id,title:Ze.snippet.title,channelTitle:Ze.snippet.channelTitle,thumbnail:Ze.snippet.thumbnails.medium.url,duration:Ti(Ze.contentDetails.duration)}));p(et),Be(!1),be(null)}catch(xe){console.error("Error loading popular music:",xe),fe||be("Unable to load videos. Please check your YouTube API key configuration."),p([])}finally{se(!1)}}})()},[]),E.useEffect(()=>{const ue=()=>{if(lt||!Ye||Y)return;const xe=window.pageYOffset||document.documentElement.scrollTop,Te=document.documentElement.scrollHeight,Ee=window.innerHeight;xe+Ee>=Te-1e3&&Xo()};return window.addEventListener("scroll",ue),()=>window.removeEventListener("scroll",ue)},[Xo,lt,Ye,Y]);const Jo=ue=>{const xe={id:Date.now().toString(),name:ue,tracks:[]};v(Te=>[...Te,xe])},el=(ue,xe)=>{v(Te=>Te.map(Ee=>Ee.id===ue?{...Ee,name:xe}:Ee))},tl=ue=>{ue!=="default"&&(v(xe=>xe.filter(Te=>Te.id!==ue)),w===ue&&N("default"))},ps=(ue,xe=w)=>{v(Te=>Te.map(Ee=>{if(Ee.id===xe)if(Ee.tracks.some(Ze=>Ze.videoId===ue.videoId))console.log(` "${ue.title}" already exists in playlist "${Ee.name}"`);else return console.log(` Added "${ue.title}" to playlist "${Ee.name}"`),{...Ee,tracks:[...Ee.tracks,ue]};return Ee}))},fn=async ue=>{if(!n){const xe=document.createElement("div");xe.className="fixed top-4 right-4 z-50 bg-red-600 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3",xe.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span>Please sign in to add favorites</span>
      `,document.body.appendChild(xe),setTimeout(()=>xe.remove(),3e3);return}try{const xe=await xm.addToFavorites(n.uid,ue),Te=document.createElement("div");Te.className="fixed top-4 right-4 z-50 bg-gradient-to-r from-pink-600 to-red-600 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-fade-in",Te.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        <span>${xe.alreadyExists?"Already in favorites!":"Added to favorites! "}</span>
      `,document.body.appendChild(Te),setTimeout(()=>Te.remove(),3e3)}catch(xe){console.error("Error adding to favorites:",xe);const Te=document.createElement("div");Te.className="fixed top-4 right-4 z-50 bg-red-600 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3",Te.innerHTML=`
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
        <span>Failed to add to favorites</span>
      `,document.body.appendChild(Te),setTimeout(()=>Te.remove(),3e3)}},Xn=ue=>{v(xe=>xe.map(Te=>{if(Te.id===w){const Ee=Te.tracks.filter((et,Ze)=>Ze!==ue);return k&&A===ue&&Te.tracks[ue]?.videoId===k.videoId?(S(-1),P(null),Pe.current?.stopVideo()):ue<A&&S(et=>et-1),{...Te,tracks:Ee}}return Te}))},Dt=(ue,xe)=>{v(Te=>Te.map(Ee=>{if(Ee.id===w){const et=[...Ee.tracks],[Ze]=et.splice(ue,1);return et.splice(xe,0,Ze),ue===A?S(xe):ue<A&&xe>=A?S(jt=>jt-1):ue>A&&xe<=A&&S(jt=>jt+1),{...Ee,tracks:et}}return Ee}))},Gr=ue=>{console.log(" Playing video:",ue.title);const xe=Ot.findIndex(Te=>Te.videoId===ue.videoId);if(xe>=0)console.log(" Video found in playlist at index:",xe),Ds(xe);else{const Te=[...Ot,ue],Ee=Te.length-1;console.log(" Adding video to playlist at index:",Ee),v(si=>si.map(Ei=>Ei.id===w?{...Ei,tracks:Te}:Ei)),P(ue),S(Ee);let et=0;const Ze=15,jt=()=>{if(window.YT&&window.YT.Player&&Pe.current&&typeof Pe.current.loadVideoById=="function")try{console.log(" Loading video ID:",ue.videoId),Pe.current.loadVideoById(ue.videoId),Pe.current.playVideo(),O(!0)}catch(si){console.error(" Error loading video:",si)}else et<Ze?(et++,(et===1||et%5===0||et===Ze)&&console.warn(` Player not ready, retry ${et}/${Ze}...`),setTimeout(jt,300)):(console.error(" Player failed to initialize after",Ze,"attempts"),console.error("Debug info:",{hasYT:!!window.YT,hasYTPlayer:!!(window.YT&&window.YT.Player),hasPlayerRef:!!Pe.current,hasLoadMethod:!!(Pe.current&&typeof Pe.current.loadVideoById=="function")}))};setTimeout(jt,100)}},Ds=ue=>{if(ue<0||ue>=Ot.length)return;S(ue);const xe=Ot[ue];P(xe),Pe.current&&Pe.current.loadVideoById&&(Pe.current.loadVideoById(xe.videoId),Pe.current.playVideo())},Xa=()=>{Pe.current&&(U?Pe.current.pauseVideo():!k&&Ot.length>0?Ds(0):k&&Pe.current.playVideo())},gs=()=>{if(A===-1||Ot.length===0)return;let ue;Ie?(ue=Math.floor(Math.random()*Ot.length),console.log(` Shuffle is ON - Playing random track #${ue}`)):(ue=(A+1)%Ot.length,console.log(` Shuffle is OFF - Playing next track #${ue}`)),Ds(ue)},Ni=()=>{if(A===-1||Ot.length===0)return;let ue;Ie?(ue=Math.floor(Math.random()*Ot.length),console.log(` Shuffle is ON - Playing random track #${ue}`)):(ue=A-1<0?Ot.length-1:A-1,console.log(` Shuffle is OFF - Playing previous track #${ue}`)),Ds(ue)},Lt=ue=>{Pe.current&&Pe.current.seekTo&&(Pe.current.seekTo(ue,!0),Z(ue))},Jn=ue=>{j(ue),Pe.current&&Pe.current.setVolume&&Pe.current.setVolume(ue),ue>0&&M&&z(!1)},ys=()=>{Pe.current&&(M?(Pe.current.unMute(),z(!1)):(Pe.current.mute(),z(!0)))};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900/20 to-black pb-20 relative",children:[o.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-600/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-pink-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-purple-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"4s"}})]}),o.jsx("div",{style:{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:0},children:o.jsx("div",{id:"yt-player"})}),o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-red-900/40 via-pink-900/40 to-purple-900/40 border-b border-white/10 shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[o.jsx(L.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:o.jsx(qt,{size:56,className:"text-red-500"})}),o.jsx("h1",{className:"text-6xl md:text-7xl font-black bg-gradient-to-r from-white via-red-200 to-pink-200 bg-clip-text text-transparent",children:"VibeTube"}),o.jsx(L.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:o.jsx(Zi,{size:36,className:"text-yellow-400"})})]}),o.jsx("p",{className:"text-gray-300 text-xl font-medium",children:"Stream Millions of Music Videos in Stunning Quality"})]}),o.jsx(rq,{onSearch:ms,isLoading:Y,onShowHistory:()=>me(!0),showHistoryButton:!!n,onShowYouTubePlaylists:()=>{console.log(" YouTube button clicked!"),ke(!0)},showYouTubeButton:!!n&&!!s})]})]}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"mb-6",children:[o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3 mb-4",children:[o.jsx(Sm,{className:"text-red-400",size:28}),o.jsx("h2",{className:"text-3xl font-black text-white",children:"Discover Music"})]}),o.jsx(aq,{results:m,onAdd:ps,onPlayNow:Gr,onAddToFavorites:fn,playlists:x,isLoading:Y,error:fe}),lt&&o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-8",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-red-500/30 border-t-red-500 rounded-full animate-spin mb-3"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading more videos..."})]}),!Ye&&m.length>0&&!Y&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:o.jsx("p",{className:"text-gray-400 text-sm",children:" You've reached the end! All videos loaded."})})]})}),o.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[o.jsx(cq,{currentTrack:k,isPlaying:U,currentTime:F,duration:ee,volume:I,isMuted:M,onPlayPause:Xa,onNext:gs,onPrevious:Ni,onSeek:Lt,onVolumeChange:Jn,onToggleMute:ys,isRepeat:B,isShuffle:Ie,onToggleRepeat:()=>{const ue=!B;V(ue),console.log(" Repeat toggled:",ue?"ON":"OFF")},onToggleShuffle:()=>{const ue=!Ie;J(ue),console.log(" Shuffle toggled:",ue?"ON":"OFF")}}),o.jsx(hq,{playlists:x,onCreatePlaylist:Jo,onRenamePlaylist:el,onDeletePlaylist:tl,currentPlaylistId:w,onSelectPlaylist:N,playlist:Ot,currentIndex:A,onPlay:Ds,onRemove:Xn,onReorder:Dt,showPlaylist:Ve,onTogglePlaylist:()=>q(!Ve)})]})]})}),ae&&n&&o.jsx(fq,{userId:n.uid,onSelectQuery:ue=>ms(ue),onClose:()=>me(!1)}),ge&&n&&o.jsx(mq,{isOpen:ge,onClose:()=>ke(!1),userId:n.uid,accessToken:s,onPlayVideo:Gr,onRefreshAuth:a}),o.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(239, 68, 68, 0.5);
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(239, 68, 68, 0.7);
        }
      `})]})},gq=()=>{const{currentUser:t,googleAccessToken:e}=Dn(),{playTrack:n}=ar(),s=Rt(),[a,c]=E.useState([]),[u,h]=E.useState([]),[m,p]=E.useState(!0),[x,v]=E.useState({playlists:0,favorites:0,totalTracks:0,ytPlaylists:0});E.useEffect(()=>{(async()=>{try{if(t){const[k,P]=await Promise.all([Cr.getUserPlaylists(t.uid).catch(()=>({playlists:[]})),xm.getFavorites(t.uid).catch(()=>({favorites:[]}))]),U=k.playlists||[],O=P.favorites||[],F=U.filter(ee=>ee.source==="youtube").length,Z=U.reduce((ee,C)=>ee+(C.tracks?.length||0),0);v({playlists:U.length,favorites:O.length,totalTracks:Z,ytPlaylists:F})}const A=await ze.getTrendingTracks(8);c(A.results||[]);const S=await ze.getPopularTracks(8);h(S.results||[])}catch(A){console.error("Error fetching dashboard data:",A)}finally{p(!1)}})()},[t]);const w=[{label:"YouTube Playlists",value:x.ytPlaylists,icon:qt,gradient:"from-red-500 via-pink-500 to-rose-500",iconBg:"bg-gradient-to-br from-red-500 to-pink-600",glow:"shadow-red-500/50",link:"/playlists",description:"Imported from YouTube"},{label:"Total Playlists",value:x.playlists,icon:Yi,gradient:"from-purple-500 via-violet-500 to-indigo-500",iconBg:"bg-gradient-to-br from-purple-500 to-indigo-600",glow:"shadow-purple-500/50",link:"/playlists",description:"Your collections"},{label:"Favorite Tracks",value:x.favorites,icon:wn,gradient:"from-pink-500 via-rose-500 to-red-500",iconBg:"bg-gradient-to-br from-pink-500 to-rose-600",glow:"shadow-pink-500/50",link:"/favorites",description:"Liked songs"},{label:"Total Tracks",value:x.totalTracks,icon:Me,gradient:"from-blue-500 via-cyan-500 to-teal-500",iconBg:"bg-gradient-to-br from-blue-500 to-cyan-600",glow:"shadow-blue-500/50",link:"/playlists",description:"In your playlists"}];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-black pb-20 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute top-1/3 right-1/4 w-96 h-96 bg-pink-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute bottom-0 left-1/2 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),o.jsxs("div",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-600/20 via-pink-600/10 to-transparent"}),o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSA2MCAwIEwgMCAwIDAgNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwwLjAzKSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-40"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:o.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center mb-8",children:[o.jsxs(L.div,{className:"relative inline-block mb-6",initial:{scale:0},animate:{scale:1},transition:{duration:.5,type:"spring",stiffness:200},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 rounded-full blur-xl opacity-60 animate-pulse"}),t?.photoURL?o.jsx("img",{src:t.photoURL,alt:t.displayName,className:"relative w-28 h-28 rounded-full border-4 border-white/30 shadow-2xl ring-4 ring-purple-500/30"}):o.jsx("div",{className:"relative w-28 h-28 rounded-full bg-gradient-to-br from-purple-600 via-pink-600 to-blue-600 flex items-center justify-center border-4 border-white/30 shadow-2xl ring-4 ring-purple-500/30",children:o.jsx("span",{className:"text-5xl font-bold text-white",children:t?.displayName?.charAt(0)||"U"})}),o.jsx(L.div,{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full p-2 shadow-lg",animate:{rotate:[0,10,0,-10,0]},transition:{duration:2,repeat:1/0},children:o.jsx(Zi,{size:20,className:"text-white"})})]}),o.jsxs(L.h1,{className:"text-5xl md:text-7xl font-black mb-4 bg-gradient-to-r from-white via-purple-200 to-pink-200 bg-clip-text text-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},children:["Welcome back, ",o.jsx("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:t?.displayName?.split(" ")[0]||"Music Lover"}),"!"]}),o.jsxs(L.p,{className:"text-gray-300 text-xl flex items-center justify-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.8},children:[o.jsx(L.span,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:o.jsx(Px,{size:24,className:"text-purple-400"})}),"Ready to discover amazing music?",o.jsx(L.span,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:o.jsx(v0,{size:24,className:"text-orange-400"})})]})]})})]}),o.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:w.map((N,A)=>o.jsxs(L.button,{onClick:()=>s(N.link),whileHover:{scale:1.05,y:-8},whileTap:{scale:.95},initial:{opacity:0,y:30,rotateX:45},animate:{opacity:1,y:0,rotateX:0},transition:{duration:.6,delay:.3+A*.15,type:"spring",stiffness:100},className:"relative overflow-hidden bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-3xl p-6 border border-white/20 hover:border-white/40 transition-all group shadow-2xl",children:[o.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${N.gradient} opacity-0 group-hover:opacity-20 transition-opacity duration-500`}),o.jsx("div",{className:`absolute top-0 right-0 w-40 h-40 bg-gradient-to-br ${N.gradient} opacity-20 rounded-full blur-3xl group-hover:opacity-30 transition-opacity`}),o.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/10 to-transparent"}),o.jsxs("div",{className:"relative flex items-center justify-between",children:[o.jsxs("div",{className:"text-left",children:[o.jsx(L.p,{className:"text-gray-400 text-sm mb-2 font-medium tracking-wide",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5+A*.1},children:N.label}),o.jsx(L.p,{className:"text-5xl font-black text-white group-hover:scale-110 transition-transform",initial:{scale:0},animate:{scale:1},transition:{delay:.6+A*.1,type:"spring"},children:N.value})]}),o.jsx(L.div,{className:`w-16 h-16 rounded-2xl ${N.iconBg} flex items-center justify-center shadow-2xl ${N.glow} group-hover:rotate-12 group-hover:scale-110 transition-all duration-300`,whileHover:{rotate:180},transition:{type:"spring",stiffness:200},children:o.jsx(N.icon,{size:32,className:"text-white",strokeWidth:2.5})})]}),o.jsx(L.div,{className:"relative h-2 bg-white/10 rounded-full mt-4 overflow-hidden",initial:{scaleX:0},animate:{scaleX:1},transition:{delay:.7+A*.1,duration:.5},children:o.jsx(L.div,{className:`h-full bg-gradient-to-r ${N.gradient} rounded-full`,initial:{width:"0%"},animate:{width:"0%"},whileHover:{width:"100%"},transition:{duration:.5}})})]},N.label))}),o.jsx(L.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,delay:.4,type:"spring"},className:"mb-12 relative overflow-hidden",children:o.jsxs("div",{className:"relative bg-gradient-to-br from-red-600/20 via-pink-600/20 to-purple-600/20 backdrop-blur-2xl rounded-3xl border-2 border-red-500/40 shadow-2xl shadow-red-900/50 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10",children:o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMwIDEwTDQwIDI1SDIwTDMwIDEwWk0zMCA1MEw0MCAzNUgyMEwzMCA1MFoiIGZpbGw9IndoaXRlIi8+PC9zdmc+')] animate-pulse"})}),o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-red-500/30 to-pink-500/30 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-purple-500/30 to-pink-500/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),o.jsx("div",{className:"relative p-8 md:p-12",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600/30 backdrop-blur-sm border border-red-400/50 rounded-full",children:[o.jsx(Zi,{className:"text-yellow-400",size:20}),o.jsx("span",{className:"text-white font-bold text-sm uppercase tracking-wider",children:"Featured"})]}),o.jsxs(L.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.6,duration:.6},children:[o.jsx("h2",{className:"text-5xl md:text-6xl font-black mb-4 leading-tight",children:o.jsx("span",{className:"bg-gradient-to-r from-white via-red-200 to-pink-200 bg-clip-text text-transparent",children:"VibeTube"})}),o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(qt,{className:"text-red-500",size:32}),o.jsx("p",{className:"text-3xl font-bold text-white",children:"Import Your Playlists"})]})]}),o.jsxs(L.p,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7,duration:.6},className:"text-gray-200 text-lg leading-relaxed",children:["Connect your ",o.jsx("span",{className:"font-bold text-red-400",children:"YouTube account"})," and seamlessly import all your playlists. Play them directly in VMusic with ",o.jsx("span",{className:"font-bold text-pink-400",children:"zero hassle"}),"!"]}),o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"space-y-3",children:[{icon:$f,text:"Import all your YouTube playlists instantly"},{icon:V6,text:"Play music directly from YouTube"},{icon:Yi,text:"Manage & edit your collections"}].map((N,A)=>o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+A*.1},className:"flex items-center gap-3 text-white",children:[o.jsx("div",{className:"w-10 h-10 bg-red-600/30 backdrop-blur-sm rounded-xl flex items-center justify-center border border-red-400/30",children:o.jsx(N.icon,{size:20,className:"text-red-400"})}),o.jsx("span",{className:"text-gray-200 font-medium",children:N.text})]},A))}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.6},className:"flex flex-wrap gap-4 pt-4",children:[o.jsxs(L.button,{onClick:()=>s("/vibetube"),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"px-8 py-4 bg-gradient-to-r from-red-600 via-pink-600 to-purple-600 hover:from-red-700 hover:via-pink-700 hover:to-purple-700 text-white font-black rounded-full shadow-2xl shadow-red-900/50 flex items-center gap-3 border-2 border-white/20 text-lg group",children:[o.jsx(qt,{size:28}),o.jsx("span",{children:"Go to VibeTube"}),o.jsx(cy,{className:"group-hover:translate-x-2 transition-transform",size:24})]}),e?o.jsxs(L.div,{whileHover:{scale:1.05},className:"px-6 py-4 bg-green-600/20 backdrop-blur-sm border-2 border-green-400/40 rounded-full flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),o.jsx("span",{className:"text-green-200 font-semibold",children:"YouTube Connected"})]}):o.jsxs(L.div,{whileHover:{scale:1.05},className:"px-6 py-4 bg-yellow-600/20 backdrop-blur-sm border-2 border-yellow-400/40 rounded-full flex items-center gap-2",children:[o.jsx(Zi,{className:"text-yellow-400",size:20}),o.jsx("span",{className:"text-yellow-200 font-semibold",children:"Connect in VibeTube"})]})]})]}),o.jsxs(L.div,{initial:{opacity:0,x:30,rotateY:-30},animate:{opacity:1,x:0,rotateY:0},transition:{delay:.7,duration:.8,type:"spring"},className:"relative",children:[o.jsxs("div",{className:"relative rounded-3xl overflow-hidden border-4 border-white/20 shadow-2xl bg-gray-900/50 backdrop-blur-xl",children:[o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx(qt,{className:"text-white",size:24})}),o.jsxs("div",{children:[o.jsx("div",{className:"h-4 bg-white/20 rounded w-32 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-24"})]})]}),[1,2,3].map(N=>o.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.9+N*.1},className:"flex items-center gap-4 p-4 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 hover:bg-white/10 transition-all group",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx(Me,{className:"text-white",size:24})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-white/20 rounded w-full mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-2/3"})]}),o.jsx(xt,{className:"text-white/50 group-hover:text-pink-400 transition-colors",size:24})]},N))]}),o.jsx(L.div,{animate:{y:[0,-10,0]},transition:{duration:3,repeat:1/0},className:"absolute top-4 right-4 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full shadow-xl border-2 border-white/30",children:o.jsxs("span",{className:"text-white font-bold text-sm",children:[x.ytPlaylists," Imported"]})})]}),o.jsx(L.div,{animate:{y:[0,-20,0],rotate:[0,10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"absolute -top-6 -left-6 w-24 h-24 bg-gradient-to-br from-red-500 to-pink-500 rounded-2xl shadow-2xl flex items-center justify-center",children:o.jsx(qt,{className:"text-white",size:40})}),o.jsx(L.div,{animate:{y:[0,20,0],rotate:[0,-10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute -bottom-6 -right-6 w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl shadow-2xl flex items-center justify-center",children:o.jsx(Me,{className:"text-white",size:32})})]})]})})]})}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-12",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(fy,{className:"text-yellow-400",size:28}),o.jsx("h2",{className:"text-3xl font-black text-white",children:"Quick Actions"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(L.button,{onClick:()=>s("/explore"),whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},className:"relative overflow-hidden flex items-center gap-6 p-8 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 rounded-3xl transition-all shadow-2xl shadow-green-900/50 group border border-green-400/30",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",children:o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMiIgZmlsbD0id2hpdGUiLz48L3N2Zz4=')] animate-pulse"})}),o.jsx(L.div,{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center group-hover:scale-110 group-hover:rotate-12 transition-all shadow-xl",whileHover:{rotate:360},transition:{duration:.6},children:o.jsx(Sm,{size:32,className:"text-white",strokeWidth:2.5})}),o.jsxs("div",{className:"text-left relative z-10",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Explore Music"}),o.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Discover trending tracks & new artists"})]}),o.jsx(L.div,{className:"absolute right-6 text-white/50 group-hover:text-white group-hover:right-4 transition-all",initial:{x:0},whileHover:{x:10},children:o.jsx(X2,{size:24})})]}),o.jsxs(L.button,{onClick:()=>s("/playlists"),whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},className:"relative overflow-hidden flex items-center gap-6 p-8 bg-gradient-to-br from-purple-600 via-pink-600 to-rose-600 rounded-3xl transition-all shadow-2xl shadow-purple-900/50 group border border-purple-400/30",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",children:o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9IndoaXRlIi8+PC9zdmc+')] animate-pulse"})}),o.jsx(L.div,{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center group-hover:scale-110 group-hover:rotate-12 transition-all shadow-xl",whileHover:{rotate:-360},transition:{duration:.6},children:o.jsx(Yi,{size:32,className:"text-white",strokeWidth:2.5})}),o.jsxs("div",{className:"text-left relative z-10",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Create Playlist"}),o.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Organize your favorite tracks"})]}),o.jsx(L.div,{className:"absolute right-6 text-white/50 group-hover:text-white group-hover:right-4 transition-all",initial:{x:0},whileHover:{x:10},children:o.jsx(Fj,{size:24})})]})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(L.div,{animate:{rotate:[0,10,0,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:o.jsx(v0,{className:"text-orange-500",size:32})}),o.jsx("h2",{className:"text-4xl font-black text-white",children:"Trending Now"})]}),o.jsxs(L.button,{onClick:()=>s("/explore"),whileHover:{scale:1.05,x:5},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold rounded-full transition-all shadow-lg shadow-purple-900/50 flex items-center gap-2",children:["View All",o.jsx(L.span,{animate:{x:[0,5,0]},transition:{duration:1,repeat:1/0},children:""})]})]}),m?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((N,A)=>o.jsxs(L.div,{className:"bg-white/5 backdrop-blur-sm rounded-3xl p-5 animate-pulse border border-white/10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:A*.1},children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-2xl mb-4"}),o.jsx("div",{className:"h-5 bg-white/10 rounded-full w-3/4 mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded-full w-1/2"})]},A))}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((N,A)=>o.jsxs(L.div,{initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:.7+A*.1,type:"spring",stiffness:100},whileHover:{scale:1.05,y:-10},className:"group relative bg-gradient-to-br from-white/10 to-white/5 hover:from-white/15 hover:to-white/10 backdrop-blur-xl rounded-3xl p-5 transition-all border border-white/20 hover:border-white/40 cursor-pointer shadow-2xl hover:shadow-purple-900/50",onClick:()=>s(`/track/${N.id}`),children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-pink-500/0 group-hover:from-purple-500/20 group-hover:to-pink-500/20 rounded-3xl transition-all duration-500"}),o.jsxs("div",{className:"relative mb-5 overflow-hidden rounded-2xl shadow-2xl",children:[o.jsx(L.img,{src:N.image||"https://via.placeholder.com/300",alt:N.name,className:"w-full aspect-square object-cover",whileHover:{scale:1.15,rotate:2},transition:{duration:.4}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx(L.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},whileHover:{opacity:1},children:o.jsx(L.button,{onClick:S=>{S.stopPropagation(),n(N,a)},whileHover:{scale:1.2,rotate:90},whileTap:{scale:.9},className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center hover:shadow-2xl hover:shadow-green-500/50 transition-all backdrop-blur-sm border-2 border-white/20",children:o.jsx(xt,{size:28,className:"text-white ml-1",fill:"white"})})}),o.jsxs(L.div,{className:"absolute top-3 left-3 px-3 py-1 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center gap-1 backdrop-blur-sm border border-white/20 shadow-lg",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.8+A*.1,type:"spring"},children:[o.jsx(v0,{size:14,className:"text-white"}),o.jsxs("span",{className:"text-xs font-bold text-white",children:["#",A+1]})]})]}),o.jsxs("div",{className:"relative space-y-2",children:[o.jsx(L.h3,{className:"text-white font-bold text-lg truncate group-hover:text-transparent group-hover:bg-gradient-to-r group-hover:from-purple-400 group-hover:to-pink-400 group-hover:bg-clip-text transition-all",whileHover:{x:5},children:N.name}),o.jsxs("p",{className:"text-gray-400 text-sm truncate flex items-center gap-2",children:[o.jsx(Me,{size:14,className:"text-purple-400"}),N.artist_name]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/10",children:[o.jsxs("span",{className:"text-xs text-gray-500 font-medium flex items-center gap-1",children:[o.jsx(Tc,{size:12}),ze.formatDuration(N.duration)]}),o.jsx(L.button,{whileHover:{scale:1.2,rotate:15},whileTap:{scale:.9},className:"text-gray-400 hover:text-pink-500 transition-colors",onClick:S=>S.stopPropagation(),children:o.jsx(wn,{size:20})})]})]}),o.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none rounded-3xl"})]},N.id))})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"mt-16",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(L.div,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0},children:o.jsx(nV,{className:"text-yellow-500",size:32})}),o.jsx("h2",{className:"text-4xl font-black text-white",children:"Popular This Week"})]}),o.jsxs(L.button,{onClick:()=>s("/explore"),whileHover:{scale:1.05,x:5},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white font-bold rounded-full transition-all shadow-lg shadow-orange-900/50 flex items-center gap-2",children:["View All",o.jsx(L.span,{animate:{x:[0,5,0]},transition:{duration:1,repeat:1/0},children:""})]})]}),m?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(8)].map((N,A)=>o.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-xl mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]},A))}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:u.map((N,A)=>o.jsxs(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.9+A*.05},whileHover:{scale:1.05,y:-8},className:"group relative bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-2xl p-4 border border-white/20 hover:border-yellow-400/50 cursor-pointer transition-all shadow-xl",onClick:()=>s(`/track/${N.id}`),children:[o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-xl",children:[o.jsx("img",{src:N.image||"https://via.placeholder.com/200",alt:N.name,className:"w-full aspect-square object-cover transition-transform duration-300 group-hover:scale-110"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(L.button,{onClick:S=>{S.stopPropagation(),n(N,u)},whileHover:{scale:1.2},whileTap:{scale:.9},className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shadow-xl",children:o.jsx(xt,{size:20,className:"text-white ml-0.5",fill:"white"})})}),o.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 bg-yellow-500 rounded-full text-xs font-bold text-white",children:["#",A+1]})]}),o.jsx("h3",{className:"text-white font-bold text-sm truncate mb-1",children:N.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate",children:N.artist_name})]},N.id))})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"mt-16",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(L.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},children:o.jsx(Ki,{className:"text-purple-400",size:32})}),o.jsx("h2",{className:"text-4xl font-black text-white",children:"Top Artists"})]}),o.jsxs(L.button,{onClick:()=>s("/artists"),whileHover:{scale:1.05,x:5},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold rounded-full transition-all shadow-lg shadow-purple-900/50 flex items-center gap-2",children:["View All",o.jsx(L.span,{animate:{x:[0,5,0]},transition:{duration:1,repeat:1/0},children:""})]})]}),m?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:[...Array(6)].map((N,A)=>o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-full mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mx-auto mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2 mx-auto"})]},A))}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:topArtists.map((N,A)=>o.jsxs(L.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:1.1+A*.1,type:"spring"},whileHover:{scale:1.1,y:-10},className:"group text-center cursor-pointer",onClick:()=>s(`/artist/${N.id}`),children:[o.jsxs("div",{className:"relative mb-4 mx-auto w-full aspect-square",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full blur-xl opacity-0 group-hover:opacity-60 transition-opacity"}),o.jsx("img",{src:N.image||"https://via.placeholder.com/200",alt:N.name,className:"relative w-full h-full rounded-full object-cover border-4 border-white/20 group-hover:border-purple-400/50 transition-all shadow-2xl"}),o.jsx(L.div,{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 rounded-full flex items-end justify-center pb-4 transition-opacity",initial:{opacity:0},whileHover:{opacity:1},children:o.jsx(X2,{size:24,className:"text-yellow-400",fill:"currentColor"})})]}),o.jsx("h3",{className:"text-white font-bold text-sm truncate px-2 group-hover:text-purple-400 transition-colors",children:N.name}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Artist"})]},N.id))})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"mt-16",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(L.div,{animate:{rotateY:[0,180,360]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:o.jsx(w6,{className:"text-cyan-400",size:32})}),o.jsx("h2",{className:"text-4xl font-black text-white",children:"Latest Albums"})]}),o.jsxs(L.button,{onClick:()=>s("/explore"),whileHover:{scale:1.05,x:5},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 text-white font-bold rounded-full transition-all shadow-lg shadow-cyan-900/50 flex items-center gap-2",children:["View All",o.jsx(L.span,{animate:{x:[0,5,0]},transition:{duration:1,repeat:1/0},children:""})]})]}),m?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:[...Array(6)].map((N,A)=>o.jsxs("div",{className:"bg-white/5 rounded-2xl p-4 animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-xl mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]},A))}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:latestAlbums.map((N,A)=>o.jsxs(L.div,{initial:{opacity:0,rotateY:90},animate:{opacity:1,rotateY:0},transition:{delay:1.3+A*.1,type:"spring"},whileHover:{scale:1.05,y:-10},className:"group bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-2xl p-4 border border-white/20 hover:border-cyan-400/50 cursor-pointer transition-all shadow-xl",onClick:()=>s(`/album/${N.id}`),children:[o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-xl",children:[o.jsx("img",{src:N.image||"https://via.placeholder.com/200",alt:N.name,className:"w-full aspect-square object-cover transition-transform duration-300 group-hover:scale-110"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(L.div,{whileHover:{rotate:180,scale:1.2},className:"w-12 h-12 bg-cyan-500 rounded-full flex items-center justify-center shadow-xl",children:o.jsx(zj,{size:24,className:"text-white"})})}),o.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-green-500 rounded-full text-xs font-bold text-white",children:"NEW"})]}),o.jsx("h3",{className:"text-white font-bold text-sm truncate mb-1 group-hover:text-cyan-400 transition-colors",children:N.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate",children:N.artist_name})]},N.id))})]}),!m&&a.length===0&&o.jsxs("div",{className:"text-center py-12 mt-16",children:[o.jsx(Me,{size:48,className:"text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No music content available right now."})]})]})]})},yq=()=>{const{playTrack:t}=ar(),{currentUser:e}=Dn(),n=Rt(),[s,a]=E.useState([]),[c,u]=E.useState(!0),[h,m]=E.useState(!1),[p,x]=E.useState("trending"),[v,w]=E.useState("all"),[N,A]=E.useState(new Set),[S,k]=E.useState(24),[P,U]=E.useState(!0),O=[{id:"trending",label:"Trending",icon:Sm},{id:"new",label:"New Releases",icon:Tc},{id:"popular",label:"Popular",icon:Me}],F=[{id:"all",label:"All Genres",tag:null},{id:"pop",label:"Pop",tag:"pop"},{id:"rock",label:"Rock",tag:"rock"},{id:"electronic",label:"Electronic",tag:"electronic"},{id:"jazz",label:"Jazz",tag:"jazz"},{id:"classical",label:"Classical",tag:"classical"},{id:"hiphop",label:"Hip Hop",tag:"hiphop"},{id:"ambient",label:"Ambient",tag:"ambient"},{id:"metal",label:"Metal",tag:"metal"}];E.useEffect(()=>{k(24),U(!0),ee()},[p,v]),E.useEffect(()=>{e&&Z()},[e]),E.useEffect(()=>{const j=()=>{if(h||!P||c)return;const M=window.pageYOffset||document.documentElement.scrollTop,z=document.documentElement.scrollHeight,B=window.innerHeight;M+B>=z-500&&C()};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[h,P,c,S,p,v]);const Z=async()=>{try{const j=hn(It,"users",e.uid),M=await Qa(j);if(M.exists()){const B=M.data().likedTracks||[];A(new Set(B))}}catch(j){j.code!=="unavailable"&&!j.message?.includes("offline")&&console.error("Error loading liked tracks:",j)}},ee=async()=>{u(!0);try{let j;const M=F.find(B=>B.id===v);p==="trending"?M?.tag?j=await ze.getTracksByTag(M.tag,S):j=await ze.getTrendingTracks(S):p==="new"?j=await ze.getNewReleases(S):j=await ze.getTrendingTracks(S);const z=Array.from(new Map((j.results||[]).map(B=>[B.id,B])).values());a(z),U(z.length>=S)}catch(j){console.error("Error fetching tracks:",j),a([]),U(!1)}finally{u(!1)}},C=async()=>{if(h||!P)return;m(!0);const j=S+24;try{let M;const z=F.find(V=>V.id===v);p==="trending"?z?.tag?M=await ze.getTracksByTag(z.tag,j):M=await ze.getTrendingTracks(j):p==="new"?M=await ze.getNewReleases(j):M=await ze.getTrendingTracks(j);const B=Array.from(new Map((M.results||[]).map(V=>[V.id,V])).values());a(B),k(j),U(B.length>=j)}catch(M){console.error("Error loading more tracks:",M)}finally{m(!1)}},I=async j=>{if(!e){rt.show("Please sign in to like tracks","error");return}try{const M=hn(It,"users",e.uid);N.has(j)?(await Ps(M,{likedTracks:Wo(j)}),A(B=>{const V=new Set(B);return V.delete(j),V}),rt.show("Removed from favorites","info")):(await Ps(M,{likedTracks:Cc(j)}),A(B=>{const V=new Set(B);return V.add(j),V}),rt.show("Added to favorites","info"))}catch(M){console.error("Error toggling like:",M),rt.show("Failed to update favorites","error")}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-900/40 via-purple-900/40 to-pink-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Explore Music"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"Discover 500,000+ free tracks from independent artists worldwide"})]})})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex flex-wrap gap-3 mb-6",children:O.map(j=>o.jsxs("button",{onClick:()=>x(j.id),className:`flex items-center gap-2 px-6 py-3 rounded-full font-medium transition-all ${p===j.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg shadow-purple-500/50":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[o.jsx(j.icon,{size:18}),j.label]},j.id))}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8",children:[o.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Filter by Genre"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(j=>o.jsx("button",{onClick:()=>w(j.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${v===j.id?"bg-white/20 text-white border-2 border-white/40":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white border border-white/10"}`,children:j.label},j.id))})]}),c?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[...Array(24)].map((j,M)=>o.jsxs("div",{className:"bg-white/5 rounded-xl p-3 animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-lg mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]},M))}):s.length>0?o.jsxs(o.Fragment,{children:[o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:s.map((j,M)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:M*.02},className:"group relative bg-white/5 hover:bg-white/10 rounded-xl p-3 transition-all border border-white/10 hover:border-white/20 cursor-pointer",onClick:()=>n(`/track/${j.id}`),children:[o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-lg",children:[o.jsx("img",{src:j.image||"https://via.placeholder.com/300",alt:j.name,className:"w-full aspect-square object-cover group-hover:scale-110 transition-transform duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx("button",{onClick:z=>{z.stopPropagation(),t(j,s)},className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 hover:scale-110 transition-all shadow-lg",children:o.jsx(xt,{size:20,className:"text-white ml-0.5",fill:"white"})})})]}),o.jsx("h3",{className:"text-white text-sm font-semibold mb-1 truncate group-hover:text-green-400 transition-colors",children:j.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate mb-2",children:j.artist_name}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-500",children:ze.formatDuration(j.duration)}),o.jsx("button",{onClick:()=>I(j.id),className:`transition-colors ${N.has(j.id)?"text-pink-500":"text-gray-400 hover:text-pink-500"}`,children:o.jsx(wn,{size:16,fill:N.has(j.id)?"currentColor":"none"})})]})]},`${j.id}-${M}`))}),h&&o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-8",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-pink-500/30 border-t-pink-500 rounded-full animate-spin mb-3"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading more tracks..."})]}),!P&&s.length>0&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:o.jsx("p",{className:"text-gray-400 text-sm",children:" You've reached the end! All tracks loaded."})})]}):o.jsxs("div",{className:"text-center py-20",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No tracks found"}),o.jsx("p",{className:"text-gray-400",children:"Try selecting a different category or genre"})]})]})]})},xq=()=>{const{playTrack:t}=ar(),{currentUser:e}=Dn(),n=Rt(),[s,a]=Wy(),[c,u]=E.useState(s.get("q")||""),[h,m]=E.useState([]),[p,x]=E.useState(!1),[v,w]=E.useState(!1),[N,A]=E.useState(new Set);E.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const F=hn(It,"users",e.uid),Z=await Qa(F);if(Z.exists()){const C=Z.data().likedTracks||[];A(new Set(C))}}catch(F){F.code!=="unavailable"&&!F.message?.includes("offline")&&console.error("Error loading liked tracks:",F)}};E.useEffect(()=>{const F=setTimeout(()=>{c.trim()&&k(c)},500);return()=>clearTimeout(F)},[c]),E.useEffect(()=>{const F=s.get("q");F&&(u(F),k(F))},[]);const k=async F=>{if(F.trim()){x(!0),w(!0);try{const ee=(await ze.searchTracks(F,30)).results||[];if(m(ee),a({q:F}),e)try{await gm.addToHistory(e.uid,F,ee.length),console.log(" Search query saved to history")}catch(C){console.error("Failed to save search history:",C)}}catch(Z){console.error("Error searching tracks:",Z),m([])}finally{x(!1)}}},P=F=>{F.preventDefault(),c.trim()&&k(c)},U=()=>{u(""),m([]),w(!1),a({})},O=async F=>{if(!e){rt.show("Please sign in to like tracks","error");return}try{const Z=hn(It,"users",e.uid);N.has(F)?(await Ps(Z,{likedTracks:Wo(F)}),A(C=>{const I=new Set(C);return I.delete(F),I}),rt.show("Removed from favorites","info")):(await Ps(Z,{likedTracks:Cc(F)}),A(C=>{const I=new Set(C);return I.add(F),I}),rt.show("Added to favorites","info"))}catch(Z){console.error("Error toggling like:",Z),rt.show("Failed to update favorites","error")}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-900/40 via-indigo-900/40 to-purple-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4 text-center",children:"Search Music"}),o.jsx("p",{className:"text-gray-300 text-lg text-center mb-8",children:"Find your favorite tracks, artists, and albums"}),o.jsx("form",{onSubmit:P,className:"relative",children:o.jsxs("div",{className:"relative",children:[o.jsx(hs,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400",size:24}),o.jsx("input",{type:"text",value:c,onChange:F=>u(F.target.value),placeholder:"Search for songs, artists, or albums...",className:"w-full pl-16 pr-16 py-5 bg-white/10 backdrop-blur-sm border-2 border-white/20 rounded-2xl text-white text-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",autoFocus:!0}),c&&o.jsx("button",{type:"button",onClick:U,className:"absolute right-6 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o.jsx(_n,{size:24})})]})})]})})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&!p&&o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-white",children:h.length>0?`Found ${h.length} result${h.length!==1?"s":""} for "${c}"`:`No results found for "${c}"`}),h.length===0&&o.jsx("p",{className:"text-gray-400 mt-2",children:"Try different keywords or check your spelling"})]}),c.trim()&&o.jsxs("button",{onClick:()=>n(`/vibetube?search=${encodeURIComponent(c)}`),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold rounded-full transition-all shadow-lg hover:shadow-red-500/50",children:[o.jsx(qt,{size:20}),"Search on VibeTube"]})]})}),p&&o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[...Array(18)].map((F,Z)=>o.jsxs("div",{className:"bg-white/5 rounded-xl p-3 animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-lg mb-3"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]},Z))}),!p&&h.length>0&&o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:h.map((F,Z)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:Z*.02},className:"group relative bg-white/5 hover:bg-white/10 rounded-xl p-3 transition-all border border-white/10 hover:border-white/20 cursor-pointer",onClick:()=>n(`/track/${F.id}`),children:[o.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-lg",children:[o.jsx("img",{src:F.image||"https://via.placeholder.com/300",alt:F.name,className:"w-full aspect-square object-cover group-hover:scale-110 transition-transform duration-300"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx("button",{onClick:ee=>{ee.stopPropagation(),t(F,h)},className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 hover:scale-110 transition-all shadow-lg",children:o.jsx(xt,{size:20,className:"text-white ml-0.5",fill:"white"})})})]}),o.jsx("h3",{className:"text-white text-sm font-semibold mb-1 truncate group-hover:text-green-400 transition-colors",children:F.name}),o.jsx("p",{className:"text-gray-400 text-xs truncate mb-2",children:F.artist_name}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-xs text-gray-500",children:ze.formatDuration(F.duration)}),o.jsx("button",{onClick:()=>O(F.id),className:`transition-colors ${N.has(F.id)?"text-pink-500":"text-gray-400 hover:text-pink-500"}`,children:o.jsx(wn,{size:16,fill:N.has(F.id)?"currentColor":"none"})})]})]},F.id))}),!v&&!p&&o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/5 rounded-full mb-6",children:o.jsx(hs,{size:48,className:"text-gray-600"})}),o.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"Start your search"}),o.jsx("p",{className:"text-gray-400 max-w-md mx-auto",children:"Enter a song name, artist, or album to discover amazing indie music from around the world"})]}),!p&&v&&h.length===0&&o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No tracks found"}),o.jsxs("p",{className:"text-gray-400 mb-6",children:[`We couldn't find any tracks matching "`,c,'"']}),o.jsx("button",{onClick:U,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-full transition-all",children:"Clear Search"})]})]})]})},vq=()=>{const{currentUser:t}=Dn(),e=E.useRef(),[n,s]=E.useState({name:t?.displayName||"",email:t?.email||"",phone:"",subject:"",message:""}),[a,c]=E.useState(!1),[u,h]=E.useState({type:"",message:""}),m=x=>{s({...n,[x.target.name]:x.target.value})},p=async x=>{if(x.preventDefault(),!n.name.trim()||!n.email.trim()||!n.message.trim()){h({type:"error",message:"Please fill in all required fields"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){h({type:"error",message:"Please enter a valid email address"});return}c(!0),h({type:"",message:""});try{const w={title:"VMusic Contact Support",from_name:n.name,from_email:n.email,phone:n.phone||"Not provided",subject:n.subject||"No subject",message:n.message,name:n.name},N=await _I.send("<YOUR_EMAILJS_SERVICE_ID>","<YOUR_EMAILJS_TEMPLATE_ID>",w,"<YOUR_EMAILJS_USER_ID>");console.log("Email sent successfully:",N),Vv(vd(It,"feedback"),{name:n.name,email:n.email,phone:n.phone||"Not provided",subject:n.subject||"No subject",message:n.message,userId:t?.uid||null,createdAt:hm(),status:"new"}).catch(A=>{console.warn("Firestore save failed, but email was sent:",A)}),s({name:t?.displayName||"",email:t?.email||"",phone:"",subject:"",message:""}),h({type:"success",message:"Thank you! Your message has been sent successfully. We'll get back to you soon."}),c(!1)}catch(w){console.error("Error submitting feedback:",w),c(!1),h({type:"error",message:`Failed to send message: ${w.text||w.message||"Please try again later."}`})}};return o.jsxs("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-linear-to-r from-teal-900/40 via-cyan-900/40 to-blue-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Get in Touch"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"Have questions or feedback? We'd love to hear from you!"})]})})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10",children:o.jsxs("form",{ref:e,onSubmit:p,className:"space-y-6",children:[u.message&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-start gap-3 p-4 rounded-lg ${u.type==="success"?"bg-green-500/10 border border-green-500/50 text-green-400":"bg-red-500/10 border border-red-500/50 text-red-400"}`,children:[u.type==="success"?o.jsx(Ca,{size:20,className:"shrink-0 mt-0.5"}):o.jsx(pi,{size:20,className:"shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm",children:u.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Name *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:m,required:!0,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"John Doe"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ur,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:m,required:!0,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"john@example.com"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number (Optional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(PM,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:m,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"+1 (555) 123-4567"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject (Optional)"}),o.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:m,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"What's this about?"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-300 mb-2",children:"Message *"}),o.jsxs("div",{className:"relative",children:[o.jsx(W2,{className:"absolute left-3 top-3 text-gray-400",size:20}),o.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:m,required:!0,rows:6,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all resize-none",placeholder:"Tell us what's on your mind..."})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum 10 characters"})]}),o.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-linear-to-r from-cyan-600 to-blue-600 text-white font-semibold rounded-lg hover:from-cyan-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-cyan-900/50",children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):o.jsxs(o.Fragment,{children:[o.jsx(BM,{size:20}),"Send Message"]})})]})}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mt-12 text-center",children:[o.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Other Ways to Reach Us"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[o.jsx(Ur,{className:"text-cyan-400 mx-auto mb-3",size:32}),o.jsx("h4",{className:"text-white font-medium mb-2",children:"Email Support"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"support@vmusic.com"})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[o.jsx(W2,{className:"text-purple-400 mx-auto mb-3",size:32}),o.jsx("h4",{className:"text-white font-medium mb-2",children:"Live Chat"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Available Mon-Fri, 9AM-5PM"})]})]})]})]})]})},bq=()=>{const{currentUser:t}=Dn(),{playTrack:e}=ar(),[n,s]=E.useState([]),[a,c]=E.useState([]),[u,h]=E.useState([]),[m,p]=E.useState(!0),[x,v]=E.useState("jamendo");E.useEffect(()=>{t&&w()},[t]);const w=async()=>{try{p(!0);try{const k=hn(It,"users",t.uid),P=await Qa(k);if(P.exists()){const O=P.data().likedTracks||[];if(s(O),O.length>0){const F=O.map(async ee=>{try{return(await ze.getTrackById(ee)).results?.[0]}catch(C){return console.error(`Error loading track ${ee}:`,C),null}}),Z=await Promise.all(F);c(Z.filter(ee=>ee!==null))}else c([])}}catch(k){k.code==="unavailable"||k.message?.includes("offline")?console.log(" Firestore offline - using cached data"):console.error("Error loading Jamendo favorites:",k)}try{const k=await xm.getFavorites(t.uid);h(k),console.log(" Loaded YouTube favorites:",k.length)}catch(k){console.error("Failed to load YouTube favorites:",k)}}catch(k){console.error("Error loading favorites:",k)}finally{p(!1)}},N=async k=>{try{const P=hn(It,"users",t.uid);await Ps(P,{likedTracks:Wo(k)}),s(U=>U.filter(O=>O!==k)),c(U=>U.filter(O=>O.id!==k))}catch(P){console.error("Error removing favorite:",P)}},A=async k=>{try{await xm.removeFromFavorites(t.uid,k),h(P=>P.filter(U=>U.videoId!==k)),console.log(" Removed YouTube favorite")}catch(P){console.error("Error removing YouTube favorite:",P)}},S=x==="jamendo"?a:u;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-pink-900/40 via-rose-900/40 to-red-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-600 to-rose-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(wn,{size:32,className:"text-white",fill:"white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"My Favorites"}),o.jsxs("p",{className:"text-gray-300 text-lg mt-1",children:[S.length," track",S.length!==1?"s":""]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsxs("button",{onClick:()=>v("jamendo"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x==="jamendo"?"bg-pink-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[o.jsx(Me,{size:18}),"Jamendo (",a.length,")"]}),o.jsxs("button",{onClick:()=>v("youtube"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x==="youtube"?"bg-red-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[o.jsx(qt,{size:18}),"YouTube (",u.length,")"]})]})]})})]}),o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:m?o.jsx("div",{className:"space-y-4",children:[...Array(5)].map((k,P)=>o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 animate-pulse flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-lg"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-white/10 rounded w-1/3 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/4"})]})]},P))}):S.length>0?o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-3",children:S.map((k,P)=>{const U=x==="youtube",O=U?k.videoId:k.id,F=U?k.title:k.name,Z=U?k.channelTitle:k.artist_name,ee=U?k.thumbnail:k.image||"https://via.placeholder.com/100",C=k.duration||0;return o.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:P*.05},className:"group bg-white/5 hover:bg-white/10 rounded-xl p-4 transition-all border border-white/10 hover:border-white/20",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[o.jsx("img",{src:ee,alt:F,className:"w-full h-full object-cover rounded-lg"}),!U&&o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-lg",children:o.jsx("button",{onClick:()=>e(k,S),className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 hover:scale-110 transition-all",children:o.jsx(xt,{size:16,className:"text-white ml-0.5",fill:"white"})})}),U&&o.jsx("div",{className:"absolute top-1 right-1",children:o.jsx(qt,{size:14,className:"text-red-500"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-white font-semibold truncate group-hover:text-green-400 transition-colors",children:F}),o.jsx("p",{className:"text-gray-400 text-sm truncate",children:Z})]}),o.jsx("div",{className:"hidden sm:block text-gray-400 text-sm",children:U?C:ze.formatDuration(C)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>U?A(O):N(O),className:"p-2 text-pink-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Remove from favorites",children:o.jsx(La,{size:18})}),o.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all",title:"Add to playlist",children:o.jsx(dy,{size:18})})]})]})},O)})}):o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/5 rounded-full mb-6",children:o.jsx(wn,{size:48,className:"text-gray-600"})}),o.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"No favorites yet"}),o.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto",children:"Start exploring music and click the heart icon to save your favorite tracks here"}),o.jsxs("a",{href:"/explore",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-600 to-rose-600 text-white font-semibold rounded-full hover:from-pink-700 hover:to-rose-700 transition-all shadow-lg shadow-pink-900/50",children:[o.jsx(Me,{size:20}),"Explore Music"]})]})})]})},wq=()=>{const t=Rt(),{currentUser:e}=Dn(),{playTrack:n}=ar(),[s,a]=E.useState([]),[c,u]=E.useState([]),[h,m]=E.useState(!0),[p,x]=E.useState(!1),[v,w]=E.useState(""),[N,A]=E.useState(!1);E.useEffect(()=>{e&&(S(),k())},[e]);const S=async()=>{try{const O=_k(vd(It,"playlists"),Tk("userId","==",e.uid)),F=await Sk(O),Z=[];F.forEach(ee=>{Z.push({id:ee.id,...ee.data()})}),a(Z)}catch(O){console.error("Error loading playlists:",O)}finally{m(!1)}},k=async()=>{try{console.log(" Fetching playlists for user:",e.uid);const O=await Cr.getUserPlaylists(e.uid);console.log(" API Response:",O),console.log(" Playlists array:",O.playlists),u(O.playlists||[]),console.log(" Loaded",O.playlists?.length||0,"playlists from MongoDB")}catch(O){console.error(" Error loading MongoDB playlists:",O)}},P=async O=>{if(O.preventDefault(),!!v.trim()){A(!0);try{await Vv(vd(It,"playlists"),{name:v,description:"",userId:e.uid,tracks:[],isPublic:!1,createdAt:hm(),updatedAt:hm()}),w(""),x(!1),S()}catch(F){console.error("Error creating playlist:",F)}finally{A(!1)}}},U=async O=>{if(confirm("Are you sure you want to delete this playlist?"))try{await CB(hn(It,"playlists",O)),a(F=>F.filter(Z=>Z.id!==O))}catch(F){console.error("Error deleting playlist:",F)}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900/40 via-indigo-900/40 to-blue-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Yi,{size:32,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"My Playlists"}),o.jsxs("p",{className:"text-gray-300 text-lg mt-1",children:[s.length," playlist",s.length!==1?"s":""]})]})]}),o.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-full hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg",children:[o.jsx(hy,{size:20}),o.jsx("span",{className:"hidden sm:inline",children:"Create Playlist"})]})]})})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.length>0&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(qt,{className:"text-red-500",size:28}),o.jsx("h2",{className:"text-2xl font-bold text-white",children:"YouTube Playlists"}),o.jsxs("span",{className:"px-3 py-1 bg-red-600/20 text-red-400 text-sm rounded-full",children:[c.length," imported"]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:c.map((O,F)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.03},whileTap:{scale:.98},transition:{type:"spring",stiffness:200,delay:F*.05},onClick:()=>t(`/playlist/${O._id}`),className:"group relative bg-gradient-to-b from-[#1b0c2d] to-[#090e16] rounded-2xl p-4 border border-pink-500/20 hover:border-pink-500/60 shadow-lg hover:shadow-pink-500/30 backdrop-blur-lg overflow-hidden cursor-pointer",children:[o.jsxs("div",{className:"relative h-44 rounded-xl overflow-hidden mb-4",children:[O.tracks&&O.tracks[0]?.thumbnail?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:O.tracks[0].thumbnail,alt:O.name,className:"absolute inset-0 w-full h-full object-cover scale-110 blur-sm opacity-40"}),o.jsx("img",{src:O.tracks[0].thumbnail,alt:O.name,className:"relative w-full h-full object-cover scale-110 group-hover:scale-100 transition-all duration-500 opacity-80"})]}):o.jsx("div",{className:"w-full h-full bg-gradient-to-br from-red-600/20 to-pink-600/20 flex items-center justify-center",children:o.jsx(qt,{size:64,className:"text-red-400 opacity-50"})}),o.jsx("div",{className:"absolute inset-0 bg-black/50 group-hover:bg-black/40 transition-all duration-300"}),o.jsx("button",{onClick:()=>{if(O.tracks&&O.tracks.length>0){const Z=O.tracks[0];t("/vibetube",{state:{autoPlayVideo:{videoId:Z.videoId,title:Z.title,channelTitle:Z.artist||Z.channelTitle,thumbnail:Z.thumbnail}}})}},className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-pink-600 hover:bg-pink-500 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-pink-500/50 transition-all duration-300 opacity-0 group-hover:opacity-100 hover:scale-110",title:"Play All",children:o.jsx(xt,{size:24,className:"text-white ml-1",fill:"white"})}),o.jsx("button",{onClick:async Z=>{if(Z.stopPropagation(),window.confirm(`Delete "${O.name}"? This cannot be undone.`))try{await Cr.deletePlaylist(O._id),k()}catch(ee){console.error("Error deleting playlist:",ee),alert("Failed to delete playlist")}},className:"absolute top-3 right-3 w-10 h-10 bg-black/60 hover:bg-black/80 backdrop-blur-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 hover:scale-110 hover:rotate-12 transition-all duration-300",title:"Delete playlist",children:o.jsx(La,{size:18,className:"text-white"})}),o.jsxs("div",{className:"absolute bottom-3 left-3 bg-red-600/90 backdrop-blur-sm px-2.5 py-1 rounded-full flex items-center gap-1.5 shadow-lg",children:[o.jsx(qt,{size:14,className:"text-white"}),o.jsx("span",{className:"text-white text-xs font-semibold",children:"YouTube"})]}),o.jsx("div",{className:"absolute bottom-3 right-3 bg-black/70 backdrop-blur-sm px-2.5 py-1 rounded-full",children:o.jsxs("span",{className:"text-white text-xs font-medium",children:[O.tracks?.length||0," tracks"]})})]}),o.jsxs("div",{className:"space-y-1.5",children:[o.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-pink-400 via-red-400 to-orange-400 bg-clip-text text-transparent group-hover:from-pink-300 group-hover:to-red-300 transition-all truncate",children:O.name}),o.jsxs("p",{className:"text-gray-400 text-sm flex items-center gap-1.5",children:[o.jsx(Me,{size:14,className:"text-pink-400"}),"Imported from YouTube"]})]}),o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-t from-pink-500/0 via-pink-500/0 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"})]},O._id))})]}),s.length>0&&o.jsx("div",{className:"mb-6",children:o.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Playlists"})}),h?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(8)].map((O,F)=>o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 animate-pulse",children:[o.jsx("div",{className:"w-full aspect-square bg-white/10 rounded-lg mb-4"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]},F))}):s.length>0||c.length>0?o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map((O,F)=>o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:F*.05},className:"group bg-white/5 hover:bg-white/10 rounded-xl p-4 transition-all border border-white/10 hover:border-white/20",children:[o.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-lg bg-gradient-to-br from-purple-600/20 to-indigo-600/20 aspect-square flex items-center justify-center",children:[o.jsx(Yi,{size:64,className:"text-purple-400"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx("button",{onClick:()=>{O.tracks&&O.tracks.length>0&&n(O.tracks[0],O.tracks)},className:"w-14 h-14 bg-green-500 rounded-full flex items-center justify-center hover:bg-green-600 hover:scale-110 transition-all shadow-lg",children:o.jsx(xt,{size:24,className:"text-white ml-1",fill:"white"})})})]}),o.jsx("h3",{className:"text-white font-semibold mb-1 truncate group-hover:text-purple-400 transition-colors",children:O.name}),o.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:[O.tracks?.length||0," track",O.tracks?.length!==1?"s":""]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{className:"flex-1 p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all text-sm flex items-center justify-center gap-1",title:"Edit playlist",children:[o.jsx(Bj,{size:14}),o.jsx("span",{children:"Edit"})]}),o.jsx("button",{onClick:()=>U(O.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete playlist",children:o.jsx(La,{size:16})})]})]},O.id))}):o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center py-20",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/5 rounded-full mb-6",children:o.jsx(Yi,{size:48,className:"text-gray-600"})}),o.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"No playlists yet"}),o.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto",children:"Create your first playlist to organize your favorite tracks"}),o.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-full hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg shadow-purple-900/50",children:[o.jsx(hy,{size:20}),"Create Your First Playlist"]})]})]}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>x(!1),children:o.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:O=>O.stopPropagation(),className:"bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Create New Playlist"}),o.jsxs("form",{onSubmit:P,children:[o.jsx("input",{type:"text",value:v,onChange:O=>w(O.target.value),placeholder:"Playlist name",autoFocus:!0,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent mb-4"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-3 bg-white/5 text-white rounded-lg hover:bg-white/10 transition-all",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:N||!v.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50",children:N?"Creating...":"Create"})]})]})]})})]})},_q=()=>{const{playlistId:t}=bm(),e=Rt(),{currentUser:n}=Dn(),[s,a]=E.useState(null),[c,u]=E.useState(!0),[h,m]=E.useState(!1),[p,x]=E.useState(-1),[v,w]=E.useState(!1),[N,A]=E.useState(""),[S,k]=E.useState(!1);E.useEffect(()=>{n&&t&&P()},[n,t]);const P=async()=>{try{u(!0);const M=(await Cr.getUserPlaylists(n.uid)).playlists?.find(z=>z._id===t);M?(a(M),A(M.name)):(console.error("Playlist not found"),e("/playlists"))}catch(j){console.error("Error loading playlist:",j)}finally{u(!1)}},U=()=>{if(!s?.tracks?.length)return;const j=S?F([...s.tracks]):s.tracks;e("/vibetube",{state:{autoPlayVideo:{videoId:j[0].videoId,title:j[0].title,channelTitle:j[0].channelTitle||j[0].artist,thumbnail:j[0].thumbnail}}})},O=(j,M)=>{e("/vibetube",{state:{autoPlayVideo:{videoId:j.videoId,title:j.title,channelTitle:j.channelTitle||j.artist,thumbnail:j.thumbnail}}})},F=j=>{const M=[...j];for(let z=M.length-1;z>0;z--){const B=Math.floor(Math.random()*(z+1));[M[z],M[B]]=[M[B],M[z]]}return M},Z=async()=>{if(!N.trim()||N===s.name){w(!1);return}try{await Cr.updatePlaylist(t,{name:N}),a({...s,name:N}),w(!1)}catch(j){console.error("Error updating playlist name:",j)}},ee=async j=>{if(confirm("Remove this track from the playlist?"))try{await Cr.removeTrackFromPlaylist(t,j),a({...s,tracks:s.tracks.filter(M=>M.id!==j)})}catch(M){console.error("Error removing track:",M)}},C=async()=>{if(confirm("Are you sure you want to delete this entire playlist?"))try{await Cr.deletePlaylist(t),e("/playlists")}catch(j){console.error("Error deleting playlist:",j)}},I=j=>!j||j==="N/A"?"N/A":j;return c?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mb-4 mx-auto"}),o.jsx("p",{className:"text-gray-400",children:"Loading playlist..."})]})}):s?(s.tracks?.length,o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-32",children:[o.jsxs("div",{className:"relative bg-gradient-to-b from-pink-900/40 via-gray-900/80 to-gray-900 pb-8",children:[s.tracks?.[0]?.thumbnail&&o.jsx("div",{className:"absolute inset-0 opacity-30 blur-3xl",style:{backgroundImage:`url(${s.tracks[0].thumbnail})`,backgroundSize:"cover",backgroundPosition:"center"}}),o.jsxs("div",{className:"container mx-auto px-6 pt-24 relative z-10",children:[o.jsxs("button",{onClick:()=>e("/playlists"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors mb-8 group",children:[o.jsx(jm,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{children:"Back to Playlists"})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-end",children:[o.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"relative group",children:[o.jsx("div",{className:"w-64 h-64 rounded-2xl shadow-2xl overflow-hidden bg-gradient-to-br from-pink-600/20 to-purple-600/20 border border-white/10",children:s.tracks?.[0]?.thumbnail?o.jsx("img",{src:s.tracks[0].thumbnail,alt:s.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Me,{size:80,className:"text-pink-400/50"})})}),s.source==="youtube"&&o.jsxs("div",{className:"absolute top-3 left-3 bg-red-600 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[o.jsx(qt,{size:14}),"YouTube"]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-gray-400 text-sm uppercase tracking-wider mb-2",children:"Playlist"}),v?o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("input",{type:"text",value:N,onChange:j=>A(j.target.value),onKeyDown:j=>{j.key==="Enter"&&Z(),j.key==="Escape"&&(A(s.name),w(!1))},className:"text-4xl md:text-6xl font-black text-white bg-white/10 border border-white/20 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-500",autoFocus:!0}),o.jsx("button",{onClick:Z,className:"p-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:o.jsx(qj,{size:20})}),o.jsx("button",{onClick:()=>{A(s.name),w(!1)},className:"p-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:o.jsx(_n,{size:20})})]}):o.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white mb-4 flex items-center gap-4 group",children:[s.name,o.jsx("button",{onClick:()=>w(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:o.jsx(Bj,{size:24})})]}),o.jsxs("div",{className:"flex items-center gap-4 text-gray-300 text-sm mb-6",children:[o.jsx("span",{className:"font-semibold",children:n?.displayName||"You"}),o.jsx("span",{children:""}),o.jsxs("span",{children:[s.tracks?.length||0," songs"]})]}),o.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[o.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:U,disabled:!s.tracks?.length,className:"px-8 py-4 bg-gradient-to-r from-pink-600 to-red-600 hover:from-pink-700 hover:to-red-700 text-white font-bold rounded-full shadow-lg shadow-pink-900/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[o.jsx(xt,{size:20,fill:"white"}),"Play All"]}),o.jsx("button",{onClick:()=>k(!S),className:`p-4 rounded-full transition-all ${S?"bg-pink-600 text-white":"bg-white/10 text-gray-400 hover:text-white hover:bg-white/20"}`,title:"Shuffle",children:o.jsx(Dx,{size:20})}),o.jsx("button",{onClick:C,className:"p-4 bg-white/10 hover:bg-red-500/20 text-gray-400 hover:text-red-500 rounded-full transition-all",title:"Delete Playlist",children:o.jsx(La,{size:20})})]})]})]})]})]}),o.jsx("div",{className:"container mx-auto px-6 py-8",children:s.tracks&&s.tracks.length>0?o.jsxs("div",{className:"bg-white/5 rounded-2xl border border-white/10 overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 text-sm text-gray-400 uppercase tracking-wider border-b border-white/10",children:[o.jsx("div",{className:"col-span-1 text-center",children:"#"}),o.jsx("div",{className:"col-span-6 md:col-span-5",children:"Title"}),o.jsx("div",{className:"hidden md:block col-span-3",children:"Channel"}),o.jsx("div",{className:"col-span-2 md:col-span-2",children:"Duration"}),o.jsx("div",{className:"col-span-3 md:col-span-1"})]}),o.jsx("div",{className:"divide-y divide-white/5",children:s.tracks.map((j,M)=>o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:M*.05},className:"grid grid-cols-12 gap-4 px-6 py-4 hover:bg-white/5 transition-colors group items-center",children:[o.jsxs("div",{className:"col-span-1 text-center",children:[o.jsx("span",{className:"text-gray-400 group-hover:hidden",children:M+1}),o.jsx("button",{onClick:()=>O(j),className:"hidden group-hover:inline-flex text-pink-500 hover:text-pink-400 transition-colors",children:o.jsx(xt,{size:16,fill:"currentColor"})})]}),o.jsxs("div",{className:"col-span-6 md:col-span-5 flex items-center gap-3",children:[o.jsx("img",{src:j.thumbnail,alt:j.title,className:"w-12 h-12 rounded object-cover"}),o.jsx("div",{className:"overflow-hidden",children:o.jsx("p",{className:"text-white font-medium truncate group-hover:text-pink-400 transition-colors",children:j.title})})]}),o.jsx("div",{className:"hidden md:block col-span-3 text-gray-400 truncate",children:j.channelTitle||j.artist||"Unknown"}),o.jsx("div",{className:"col-span-2 md:col-span-2 text-gray-400 text-sm",children:I(j.duration)}),o.jsx("div",{className:"col-span-3 md:col-span-1 flex items-center justify-end gap-2",children:o.jsx("button",{onClick:()=>ee(j.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove from playlist",children:o.jsx(La,{size:16})})})]},j.id||M))})]}):o.jsxs("div",{className:"text-center py-20",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"No tracks yet"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Add tracks from VibeTube search or import from YouTube"}),o.jsx("button",{onClick:()=>e("/vibetube"),className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-red-600 text-white font-semibold rounded-full hover:from-pink-700 hover:to-red-700 transition-all",children:"Go to VibeTube"})]})})]})):o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Playlist not found"}),o.jsx("button",{onClick:()=>e("/playlists"),className:"mt-4 px-6 py-3 bg-pink-600 hover:bg-pink-700 text-white rounded-full transition-all",children:"Back to Playlists"})]})})},Tq=()=>{const{currentUser:t}=Dn(),e=E.useRef(null),[n,s]=E.useState(!1),[a,c]=E.useState(!1),[u,h]=E.useState({type:"",text:""}),[m,p]=E.useState(""),[x,v]=E.useState(""),[w,N]=E.useState(""),[A,S]=E.useState(""),[k,P]=E.useState(""),[U,O]=E.useState({theme:"dark",autoplay:!0,playbackQuality:"high",notifications:!0});E.useEffect(()=>{t&&(p(t.displayName||""),v(t.email||""),F())},[t]);const F=async()=>{try{const j=await Qa(hn(It,"users",t.uid));j.exists()&&j.data().preferences&&O(j.data().preferences)}catch(j){console.error("Error loading preferences:",j)}},Z=async j=>{j.preventDefault(),s(!0),h({type:"",text:""});try{m!==t.displayName&&await wy(t,{displayName:m}),await Of(hn(It,"users",t.uid),{displayName:m,email:t.email,updatedAt:new Date().toISOString()},{merge:!0}),h({type:"success",text:"Profile updated successfully!"})}catch(M){h({type:"error",text:M.message})}finally{s(!1)}},ee=async j=>{if(j.preventDefault(),s(!0),h({type:"",text:""}),A!==k){h({type:"error",text:"Passwords do not match!"}),s(!1);return}if(A.length<6){h({type:"error",text:"Password must be at least 6 characters!"}),s(!1);return}try{await i9(t,A),h({type:"success",text:"Password updated successfully!"}),N(""),S(""),P("")}catch(M){M.code==="auth/requires-recent-login"?h({type:"error",text:"Please sign out and sign in again before changing password."}):h({type:"error",text:M.message})}finally{s(!1)}},C=async(j,M)=>{const z={...U,[j]:M};O(z);try{await Of(hn(It,"users",t.uid),{preferences:z,updatedAt:new Date().toISOString()},{merge:!0})}catch(B){console.error("Error updating preferences:",B)}},I=async j=>{const M=j.target.files[0];if(M){if(!M.type.startsWith("image/")){rt.show("Please select an image file","error");return}if(M.size>5*1024*1024){rt.show("Image size should be less than 5MB","error");return}c(!0);try{const z=q7(yH,`profile-pictures/${t.uid}/${M.name}`);await F7(z,M);const B=await H7(z);await wy(t,{photoURL:B}),await Of(hn(It,"users",t.uid),{photoURL:B,updatedAt:new Date().toISOString()},{merge:!0}),rt.show("Profile picture updated successfully!","info"),window.location.reload()}catch(z){console.error("Error uploading photo:",z),rt.show("Failed to upload photo. Please try again.","error")}finally{c(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-purple-900/40 via-indigo-900/40 to-blue-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[o.jsxs("div",{className:"relative inline-block mb-4",children:[o.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-r from-purple-600 to-indigo-600 flex items-center justify-center shadow-xl border-4 border-white/10",children:t?.photoURL?o.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Pr,{size:48,className:"text-white"})}),o.jsx("input",{ref:e,type:"file",accept:"image/*",onChange:I,className:"hidden"}),o.jsx("button",{onClick:()=>e.current?.click(),disabled:a,className:"absolute bottom-0 right-0 w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center hover:bg-purple-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",title:"Change avatar",children:a?o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsx(A6,{size:16,className:"text-white"})})]}),o.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Profile Settings"}),o.jsx("p",{className:"text-gray-300",children:"Manage your account and preferences"})]})})]}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.text&&o.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-6 p-4 rounded-xl flex items-center gap-3 ${u.type==="success"?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"}`,children:[u.type==="success"?o.jsx(D6,{size:20}):o.jsx(pi,{size:20}),o.jsx("span",{children:u.text})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[o.jsx(Pr,{size:24,className:"text-purple-400"}),"Profile Information"]}),o.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:m,onChange:j=>p(j.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Your name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Email Address"}),o.jsx("input",{type:"email",value:x,disabled:!0,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-gray-400 cursor-not-allowed"}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email cannot be changed for security reasons"})]}),o.jsxs("button",{type:"submit",disabled:n,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(qj,{size:20}),n?"Saving...":"Save Changes"]})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10",children:[o.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[o.jsx(Do,{size:24,className:"text-purple-400"}),"Change Password"]}),o.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:A,onChange:j=>S(j.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter new password",minLength:6})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Confirm New Password"}),o.jsx("input",{type:"password",value:k,onChange:j=>P(j.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Confirm new password",minLength:6})]}),o.jsxs("button",{type:"submit",disabled:n||!A||!k,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(Do,{size:20}),n?"Updating...":"Update Password"]})]})]}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Preferences"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-medium",children:"Theme"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Choose your display theme"})]}),o.jsxs("select",{value:U.theme,onChange:j=>C("theme",j.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"dark",children:"Dark"}),o.jsx("option",{value:"light",children:"Light"}),o.jsx("option",{value:"auto",children:"Auto"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-medium",children:"Autoplay"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Automatically play next track"})]}),o.jsx("button",{onClick:()=>C("autoplay",!U.autoplay),className:`relative w-12 h-6 rounded-full transition-colors ${U.autoplay?"bg-purple-600":"bg-gray-600"}`,children:o.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform ${U.autoplay?"translate-x-6":"translate-x-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-medium",children:"Playback Quality"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Audio streaming quality"})]}),o.jsxs("select",{value:U.playbackQuality,onChange:j=>C("playbackQuality",j.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"high",children:"High"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-medium",children:"Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Receive app notifications"})]}),o.jsx("button",{onClick:()=>C("notifications",!U.notifications),className:`relative w-12 h-6 rounded-full transition-colors ${U.notifications?"bg-purple-600":"bg-gray-600"}`,children:o.jsx("div",{className:`absolute w-5 h-5 bg-white rounded-full top-0.5 transition-transform ${U.notifications?"translate-x-6":"translate-x-0.5"}`})})]})]})]})]})]})]})},Nq=()=>{const{id:t}=bm(),e=Rt(),{playTrack:n}=ar(),{currentUser:s}=Dn(),[a,c]=E.useState(null),[u,h]=E.useState([]),[m,p]=E.useState(!0),[x,v]=E.useState(new Set);E.useEffect(()=>{N()},[t]),E.useEffect(()=>{s&&w()},[s]);const w=async()=>{try{const S=hn(It,"users",s.uid),k=await Qa(S);if(k.exists()){const U=k.data().likedTracks||[];v(new Set(U))}}catch(S){console.error("Error loading liked tracks:",S)}},N=async()=>{p(!0);try{const S=await ze.getArtist(t),k=await ze.getArtistTracks(t,200);S.results&&S.results.length>0&&c(S.results[0]),k.results&&h(k.results)}catch(S){console.error("Error loading artist:",S)}finally{p(!1)}},A=async S=>{if(!s){rt.show("Please sign in to like tracks","error");return}try{const k=hn(It,"users",s.uid);x.has(S)?(await Ps(k,{likedTracks:Wo(S)}),v(U=>{const O=new Set(U);return O.delete(S),O}),rt.show("Removed from favorites","info")):(await Ps(k,{likedTracks:Cc(S)}),v(U=>{const O=new Set(U);return O.add(S),O}),rt.show("Added to favorites","info"))}catch(k){console.error("Error toggling like:",k),rt.show("Failed to update favorites","error")}};return m?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black pb-20",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 w-32 bg-white/10 rounded mb-8"}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-8 mb-12",children:[o.jsx("div",{className:"w-64 h-64 bg-white/10 rounded-xl"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-12 bg-white/10 rounded w-2/3 mb-4"}),o.jsx("div",{className:"h-6 bg-white/10 rounded w-1/2 mb-6"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-4 bg-white/10 rounded w-full"}),o.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"})]})]})]}),o.jsx("div",{className:"space-y-4",children:[...Array(5)].map((S,k)=>o.jsx("div",{className:"h-20 bg-white/5 rounded-xl"},k))})]})})}):a?o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900/20 via-gray-900 to-black pb-20 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx(L.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute -top-40 -right-40 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl"}),o.jsx(L.div,{animate:{scale:[1.2,1,1.2],opacity:[.5,.3,.5]},transition:{duration:10,repeat:1/0,ease:"easeInOut"},className:"absolute -bottom-40 -left-40 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl"})]}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10",children:[o.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>e(-1),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 backdrop-blur-xl border border-white/10 hover:border-white/20 rounded-full text-gray-300 hover:text-white transition-all mb-8 group",children:[o.jsx(jm,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),o.jsx("span",{className:"font-medium",children:"Back"})]}),o.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative mb-12",children:o.jsxs("div",{className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-2xl rounded-3xl border border-white/20 shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-8 p-8",children:[o.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"w-64 h-64 flex-shrink-0 relative group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 via-pink-500 to-indigo-500 rounded-2xl blur-xl opacity-60 group-hover:opacity-80 transition-opacity"}),o.jsxs("div",{className:"relative w-full h-full rounded-2xl overflow-hidden bg-gradient-to-br from-purple-600/20 to-indigo-600/20 shadow-2xl border-2 border-white/10 group-hover:border-white/30 transition-all",children:[a.image?o.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-500/30 to-indigo-500/30",children:o.jsx(Ki,{size:80,className:"text-purple-300"})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[o.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"mb-3",children:o.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-purple-500/20 border border-purple-500/30 rounded-full text-purple-300 text-sm font-medium",children:[o.jsx(Ki,{size:14}),"Artist Profile"]})}),o.jsx(L.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"text-4xl md:text-6xl lg:text-7xl font-black bg-gradient-to-r from-white via-purple-200 to-indigo-200 bg-clip-text text-transparent mb-4",children:a.name}),o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"flex flex-wrap items-center gap-4 text-gray-300 mb-6",children:[a.joinDate&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-full border border-white/10",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),o.jsxs("span",{className:"text-sm",children:["Member since ",a.joinDate]})]}),a.website&&o.jsxs("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-full border border-white/10 hover:border-purple-500/50 transition-all group",children:[o.jsx(lc,{size:14,className:"group-hover:rotate-12 transition-transform"}),o.jsx("span",{className:"text-sm",children:"Visit Website"})]}),o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-full border border-white/10",children:[o.jsx(Me,{size:14}),o.jsxs("span",{className:"text-sm",children:[u.length," Tracks"]})]})]}),o.jsxs(L.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(u[0],u),disabled:u.length===0,className:"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-bold rounded-full transition-all shadow-lg shadow-green-500/50 hover:shadow-xl hover:shadow-green-500/70 disabled:opacity-50 disabled:cursor-not-allowed w-fit",children:[o.jsx(xt,{size:24,fill:"white"}),o.jsx("span",{children:"Play All"})]})]})]}),a.bio&&o.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"px-8 pb-8 pt-6 border-t border-white/10",children:[o.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"About"]}),o.jsx("p",{className:"text-gray-300 leading-relaxed",children:a.bio})]})]})}),o.jsxs("div",{children:[o.jsxs(L.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-xl flex items-center justify-center",children:o.jsx(Me,{size:20,className:"text-white"})}),o.jsx("span",{children:"Popular Tracks"})]}),u.length>0?o.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"space-y-3",children:u.map((S,k)=>o.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.05},whileHover:{x:4},className:"group flex items-center gap-4 p-4 bg-gradient-to-r from-white/5 to-white/[0.02] hover:from-white/10 hover:to-white/5 backdrop-blur-xl rounded-2xl transition-all border border-white/10 hover:border-purple-500/50 hover:shadow-lg hover:shadow-purple-500/20",children:[o.jsxs("div",{className:"w-10 h-10 flex items-center justify-center flex-shrink-0 relative",children:[o.jsx("span",{className:"text-gray-400 font-medium group-hover:opacity-0 transition-opacity",children:k+1}),o.jsx("button",{onClick:()=>n(S,u),className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-full flex items-center justify-center hover:scale-110 transition-transform shadow-lg",children:o.jsx(xt,{size:16,className:"text-white ml-0.5",fill:"white"})})})]}),o.jsx("div",{className:"w-14 h-14 flex-shrink-0 bg-gradient-to-br from-purple-600/20 to-indigo-600/20 rounded-xl overflow-hidden shadow-lg group-hover:shadow-xl transition-shadow border border-white/10",children:S.image?o.jsx("img",{src:S.image,alt:S.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-500/20 to-indigo-500/20",children:o.jsx(Me,{size:24,className:"text-purple-400"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-white font-semibold truncate group-hover:text-purple-300 transition-colors mb-1",children:S.name}),o.jsxs("p",{className:"text-gray-400 text-sm truncate flex items-center gap-2",children:[S.album_name||"Single",S.releasedate&&o.jsxs("span",{className:"text-gray-500",children:[" ",new Date(S.releasedate).getFullYear()]})]})]}),o.jsxs("div",{className:"text-gray-400 text-sm font-medium flex-shrink-0 hidden md:flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-full border border-white/10",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),ze.formatDuration(S.duration)]}),o.jsx("button",{onClick:()=>A(S.id),className:`p-2.5 rounded-full transition-all flex-shrink-0 ${x.has(S.id)?"text-purple-400 bg-purple-500/20 border border-purple-500/30 hover:scale-110":"text-gray-400 hover:text-purple-300 hover:bg-white/10 border border-white/10 hover:border-purple-500/30 hover:scale-110"}`,title:x.has(S.id)?"Remove from favorites":"Add to favorites",children:o.jsx(wn,{size:18,fill:x.has(S.id)?"currentColor":"none",className:"transition-all"})})]},S.id))}):o.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-16 bg-gradient-to-br from-white/5 to-white/[0.02] backdrop-blur-xl rounded-3xl border border-white/10",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Me,{size:40,className:"text-purple-400"})}),o.jsx("p",{className:"text-gray-400 text-lg",children:"No tracks available for this artist yet."}),o.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Check back later for new releases!"})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-black flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Me,{size:64,className:"text-gray-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Artist Not Found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"The artist you're looking for doesn't exist."}),o.jsx("button",{onClick:()=>e("/explore"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-full hover:from-purple-700 hover:to-indigo-700 transition-all",children:"Back to Explore"})]})})},Eq=()=>{const t=({title:e,children:n,delay:s=0})=>o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:s},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:e}),o.jsx("div",{className:"text-gray-300 leading-relaxed",children:n})]});return o.jsxs("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-linear-to-r from-blue-900/40 via-indigo-900/40 to-purple-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-linear-to-r from-blue-600 to-indigo-600 rounded-full mb-6",children:o.jsx(Gj,{size:40,className:"text-white"})}),o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Privacy Policy"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"Learn how VMusic collects, uses, and protects your data."}),o.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Last Updated: Nov 12, 2025"})]})})]}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsx(t,{title:"Introduction",delay:.1,children:"Welcome to VMusic. This Privacy Policy explains how we collect, use, store, and protect your information when you use our service. By using VMusic, you agree to the practices outlined in this policy."}),o.jsxs(t,{title:"1. Information We Collect",delay:.2,children:[o.jsx("p",{className:"mb-3",children:"We collect the following categories of information:"}),o.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Google Account Data:"})," your name, email address, and profile picture (via Google OAuth)."]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"YouTube API Data:"})," playlists, liked videos, subscriptions, or public activity (only if you grant permission)."]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Usage Data:"})," search queries, listening activity, and interactions inside the app."]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Technical Data:"})," device type, browser, operating system, IP address."]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Cookies:"})," used for authentication and user sessions."]})]})]}),o.jsxs(t,{title:"2. How We Use Your Information",delay:.3,children:["We use your data to:",o.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-2",children:[o.jsx("li",{children:"Authenticate you using Google Login"}),o.jsx("li",{children:"Personalize music experience and recommendations"}),o.jsx("li",{children:"Load your YouTube playlists or activity (if permitted)"}),o.jsx("li",{children:"Improve app performance and security"}),o.jsx("li",{children:"Communicate account-related updates"})]}),o.jsx("p",{className:"mt-4 text-gray-300",children:o.jsx("strong",{className:"text-white",children:"We never sell or share your personal data."})})]}),o.jsx(t,{title:"3. Data Security",delay:.4,children:o.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[o.jsx("li",{children:"HTTPS/SSL encryption for all communication"}),o.jsx("li",{children:"Secure password hashing (if applicable)"}),o.jsx("li",{children:"Limited access to personal data"}),o.jsx("li",{children:"Regular security audits and monitoring"})]})}),o.jsxs(t,{title:"4. YouTube API Data Compliance",delay:.5,children:[o.jsx("p",{className:"mb-3",children:"VMusic uses YouTube API Services in compliance with Google policies."}),o.jsx("p",{className:"mb-3",children:"We DO NOT store, share, or sell any YouTube data you provide access to. Data is only displayed inside the app to enhance your music experience."}),o.jsxs("p",{children:["You agree to Google policies:",o.jsx("br",{}),o.jsx("a",{href:"https://policies.google.com/privacy",className:"text-blue-400 underline",children:"Google Privacy Policy"}),o.jsx("br",{}),o.jsx("a",{href:"https://www.youtube.com/t/terms",className:"text-blue-400 underline",children:"YouTube Terms of Service"})]}),o.jsxs("p",{className:"mt-3",children:["You may revoke access anytime at:"," ",o.jsx("a",{href:"https://myaccount.google.com/permissions",className:"text-blue-400 underline",children:"https://myaccount.google.com/permissions"})]})]}),o.jsxs(t,{title:"5. Third-Party Services",delay:.6,children:["VMusic uses the following services:",o.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Firebase:"})," authentication & database"]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"Jamendo API:"})," music content"]}),o.jsxs("li",{children:[o.jsx("strong",{className:"text-white",children:"EmailJS:"})," sending contact form emails"]})]})]}),o.jsx(t,{title:"6. Children's Privacy",delay:.7,children:"VMusic is not intended for children under 13. We do not knowingly collect data from children. Contact us if such data was submitted."}),o.jsxs(t,{title:"7. Data Deletion",delay:.8,children:["You may request deletion of your account and all associated data by emailing us at:",o.jsx("br",{}),o.jsx("br",{}),o.jsx("span",{className:"text-white font-semibold",children:"baraiyavishalbhai32@gmail.com"}),o.jsx("br",{}),o.jsx("br",{}),"We will delete your data within 48 hours."]}),o.jsx(t,{title:"8. Updates to This Policy",delay:.9,children:'We may update this Privacy Policy. Updates will appear on this page with a new "Last Updated" date.'}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"bg-linear-to-r from-blue-600/20 to-indigo-600/20 backdrop-blur-sm rounded-2xl p-8 border border-blue-500/30 text-center",children:[o.jsx(Ur,{className:"text-blue-400 mx-auto mb-4",size:40}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Questions About This Privacy Policy?"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Contact us anytime at:"}),o.jsx("a",{href:"mailto:baraiyavishalbhai32@gmail.com",className:"inline-flex items-center gap-2 px-8 py-3 bg-linear-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Email Support"})]})]})]})},jq=()=>{const t=({title:e,children:n,delay:s=0})=>o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:s},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:e}),o.jsx("div",{className:"text-gray-300 leading-relaxed",children:n})]});return o.jsxs("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-900 to-black pb-20",children:[o.jsxs("div",{className:"relative overflow-hidden bg-linear-to-r from-blue-900/40 via-indigo-900/40 to-purple-900/40 border-b border-white/10",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),o.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-linear-to-r from-blue-600 to-indigo-600 rounded-full mb-6",children:o.jsx(qM,{size:40,className:"text-white"})}),o.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Terms of Service"}),o.jsx("p",{className:"text-gray-300 text-lg",children:"Please read these Terms carefully before using VMusic."}),o.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Last Updated: Nov 12, 2025"})]})})]}),o.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o.jsx(t,{title:"1. Acceptance of Terms",delay:.1,children:"By accessing or using VMusic, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service. If you do not agree, please discontinue use of the platform."}),o.jsx(t,{title:"2. Use of the Service",delay:.2,children:o.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[o.jsx("li",{children:"You must be at least 13 years old to use VMusic."}),o.jsx("li",{children:"You agree not to misuse the platform or attempt unauthorized access, reverse-engineering, scraping, or harmful activities."}),o.jsx("li",{children:"You may only use VMusic for lawful purposes and in compliance with applicable copyright laws."})]})}),o.jsxs(t,{title:"3. Google Login & YouTube API Usage",delay:.3,children:[o.jsx("p",{className:"mb-3",children:"When you sign in with Google, VMusic collects your name, email, and profile picture. This is used only to authenticate you and enhance your user experience."}),o.jsx("p",{className:"mb-3",children:"If you access YouTube-related features, we may temporarily access your:"}),o.jsxs("ul",{className:"list-disc ml-6 space-y-2",children:[o.jsx("li",{children:"YouTube playlists"}),o.jsx("li",{children:"Liked videos"}),o.jsx("li",{children:"Subscriptions"}),o.jsx("li",{children:"Public YouTube activity"})]}),o.jsxs("p",{className:"mt-4",children:["We DO NOT store or share any YouTube API data. All usage complies with:",o.jsx("br",{}),o.jsx("a",{href:"https://policies.google.com/privacy",className:"text-blue-400 underline",children:"Google Privacy Policy"}),o.jsx("br",{}),o.jsx("a",{href:"https://www.youtube.com/t/terms",className:"text-blue-400 underline",children:"YouTube Terms of Service"})]}),o.jsxs("p",{className:"mt-3",children:["You may revoke access at any time at:"," ",o.jsx("a",{href:"https://myaccount.google.com/permissions",className:"text-blue-400 underline",children:"https://myaccount.google.com/permissions"})]})]}),o.jsx(t,{title:"4. Intellectual Property",delay:.4,children:"All music on VMusic comes from licensed or open sources such as Jamendo API. You may not copy, download, or distribute content unless explicitly permitted."}),o.jsxs(t,{title:"5. Limitation of Liability",delay:.5,children:['VMusic is provided "as is" with no guarantees. We are not responsible for:',o.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-2",children:[o.jsx("li",{children:"Service interruptions"}),o.jsx("li",{children:"Data loss"}),o.jsx("li",{children:"Unauthorized access"}),o.jsx("li",{children:"Third-party API limitations"})]})]}),o.jsx(t,{title:"6. Account Termination",delay:.6,children:"We may suspend or terminate accounts that violate these Terms or engage in harmful behavior."}),o.jsx(t,{title:"7. Updates to Terms",delay:.7,children:"We may modify these Terms at any time. Updates will appear on this page with a revised date."}),o.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-linear-to-r from-blue-600/20 to-indigo-600/20 backdrop-blur-sm rounded-2xl p-8 border border-blue-500/30 text-center",children:[o.jsx(Ur,{className:"text-blue-400 mx-auto mb-4",size:40}),o.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Need Help or Have Questions?"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Contact us anytime at:"}),o.jsx("a",{href:"mailto:baraiyavishalbhai32@gmail.com",className:"inline-flex items-center gap-2 px-8 py-3 bg-linear-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg",children:"Email Support"})]})]})]})};function Sq(){return o.jsx(ER,{children:o.jsxs("div",{className:"bg-gray-900 min-h-screen",children:[o.jsx(wH,{}),o.jsxs(tR,{children:[o.jsx(Ft,{path:"/",element:o.jsx(QH,{})}),o.jsx(Ft,{path:"/explore",element:o.jsx(yq,{})}),o.jsx(Ft,{path:"/artists",element:o.jsx(nq,{})}),o.jsx(Ft,{path:"/vibe-zone",element:o.jsx(iq,{})}),o.jsx(Ft,{path:"/vibetube",element:o.jsx(EH,{children:o.jsx(pq,{})})}),o.jsx(Ft,{path:"/search",element:o.jsx(xq,{})}),o.jsx(Ft,{path:"/artist/:id",element:o.jsx(Nq,{})}),o.jsx(Ft,{path:"/album/:id",element:o.jsx(sq,{})}),o.jsx(Ft,{path:"/track/:trackId",element:o.jsx(XH,{})}),o.jsx(Ft,{path:"/about",element:o.jsx(WH,{})}),o.jsx(Ft,{path:"/contact",element:o.jsx(vq,{})}),o.jsx(Ft,{path:"/privacy-policy",element:o.jsx(Eq,{})}),o.jsx(Ft,{path:"/terms-of-service",element:o.jsx(jq,{})}),o.jsx(Ft,{path:"/callback",element:o.jsx(JH,{})}),o.jsx(Ft,{path:"/forgot-password",element:o.jsx(eq,{})}),o.jsx(Ft,{path:"/reset-password",element:o.jsx(tq,{})}),o.jsx(Ft,{path:"/dashboard",element:o.jsx(Vu,{children:o.jsx(gq,{})})}),o.jsx(Ft,{path:"/favorites",element:o.jsx(Vu,{children:o.jsx(bq,{})})}),o.jsx(Ft,{path:"/playlists",element:o.jsx(Vu,{children:o.jsx(wq,{})})}),o.jsx(Ft,{path:"/playlist/:playlistId",element:o.jsx(Vu,{children:o.jsx(_q,{})})}),o.jsx(Ft,{path:"/profile",element:o.jsx(Vu,{children:o.jsx(Tq,{})})})]}),o.jsx(TH,{}),o.jsx(NH,{})]})})}u4.createRoot(document.getElementById("root")).render(o.jsx(E.StrictMode,{children:o.jsx(xH,{children:o.jsx(_H,{children:o.jsx(Sq,{})})})}));
